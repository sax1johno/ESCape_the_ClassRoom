/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfrontend"] = self["webpackChunkfrontend"] || []).push([["main"],{

/***/ 5575:
/*!********************************************************!*\
  !*** ./src/components/aframe/animation-mixer-state.js ***!
  \********************************************************/
/***/ ((module) => {

eval("var LoopMode = {\n  once: THREE.LoopOnce,\n  repeat: THREE.LoopRepeat,\n  pingpong: THREE.LoopPingPong\n};\n\n/**\n * animation-mixer-state\n *\n * Player for animation clips. Intended to be compatible with any model format that supports\n * skeletal or morph animations through THREE.AnimationMixer.\n * See: https://threejs.org/docs/?q=animation#Reference/Animation/AnimationMixer\n * \n * Allows animations to be triggered on state changes, and can will be able to update animations based on previous\n * state transitions.\n */\nmodule.exports = AFRAME.registerComponent('animation-mixer-state', {\n  schema: {\n    clip: {\n      \"default\": '*'\n    },\n    useRegExp: {\n      \"default\": false\n    },\n    duration: {\n      \"default\": 0\n    },\n    clampWhenFinished: {\n      \"default\": false,\n      type: 'boolean'\n    },\n    crossFadeDuration: {\n      \"default\": 0\n    },\n    loop: {\n      \"default\": 'repeat',\n      oneOf: Object.keys(LoopMode)\n    },\n    repetitions: {\n      \"default\": Infinity,\n      min: 0\n    },\n    timeScale: {\n      \"default\": 1\n    },\n    startAt: {\n      \"default\": 0\n    },\n    animationEventPairs: {\n      \"default\": {}\n    }\n  },\n  init: function init() {\n    var _this = this;\n    /** @type {THREE.Mesh} */\n    this.model = null;\n    /** @type {THREE.AnimationMixer} */\n    this.mixer = null;\n    /** @type {Array<THREE.AnimationAction>} */\n    this.activeActions = [];\n    var model = this.el.getObject3D('mesh');\n    if (model) {\n      this.load(model);\n    } else {\n      this.el.addEventListener('model-loaded', function (e) {\n        _this.load(e.detail.model);\n      });\n    }\n  },\n  load: function load(model) {\n    var el = this.el;\n    this.model = model;\n    this.mixer = new THREE.AnimationMixer(model);\n    this.mixer.addEventListener('loop', function (e) {\n      el.emit('animation-loop', {\n        action: e.action,\n        loopDelta: e.loopDelta\n      });\n    });\n    this.mixer.addEventListener('finished', function (e) {\n      el.emit('animation-finished', {\n        action: e.action,\n        direction: e.direction\n      });\n    });\n    if (this.data.clip) this.update({});\n  },\n  remove: function remove() {\n    if (this.mixer) this.mixer.stopAllAction();\n  },\n  update: function update(prevData) {\n    if (!prevData) return;\n    var data = this.data;\n    var changes = AFRAME.utils.diff(data, prevData);\n\n    // If selected clips have changed, restart animation.\n    if ('clip' in changes) {\n      this.stopAction();\n      if (data.clip) this.playAction();\n      return;\n    }\n\n    // Otherwise, modify running actions.\n    this.activeActions.forEach(function (action) {\n      if ('duration' in changes && data.duration) {\n        action.setDuration(data.duration);\n      }\n      if ('clampWhenFinished' in changes) {\n        action.clampWhenFinished = data.clampWhenFinished;\n      }\n      if ('loop' in changes || 'repetitions' in changes) {\n        action.setLoop(LoopMode[data.loop], data.repetitions);\n      }\n      if ('timeScale' in changes) {\n        action.setEffectiveTimeScale(data.timeScale);\n      }\n    });\n  },\n  stopAction: function stopAction() {\n    var data = this.data;\n    for (var i = 0; i < this.activeActions.length; i++) {\n      data.crossFadeDuration ? this.activeActions[i].fadeOut(data.crossFadeDuration) : this.activeActions[i].stop();\n    }\n    this.activeActions.length = 0;\n  },\n  playAction: function playAction() {\n    if (!this.mixer) return;\n    var model = this.model,\n      data = this.data,\n      clips = model.animations || (model.geometry || {}).animations || [];\n    if (!clips.length) return;\n    var re = data.useRegExp ? data.clip : wildcardToRegExp(data.clip);\n    for (var clip, i = 0; clip = clips[i]; i++) {\n      if (clip.name.match(re)) {\n        var action = this.mixer.clipAction(clip, model);\n        action.enabled = true;\n        action.clampWhenFinished = data.clampWhenFinished;\n        if (data.duration) action.setDuration(data.duration);\n        if (data.timeScale !== 1) action.setEffectiveTimeScale(data.timeScale);\n        // animation-mixer.startAt and AnimationAction.startAt have very different meanings.\n        // animation-mixer.startAt indicates which frame in the animation to start at, in msecs.\n        // AnimationAction.startAt indicates when to start the animation (from the 1st frame),\n        // measured in global mixer time, in seconds.\n        action.startAt(this.mixer.time - data.startAt / 1000);\n        action.setLoop(LoopMode[data.loop], data.repetitions).fadeIn(data.crossFadeDuration).play();\n        this.activeActions.push(action);\n      }\n    }\n  },\n  tick: function tick(t, dt) {\n    if (this.mixer && !isNaN(dt)) this.mixer.update(dt / 1000);\n  }\n});\n\n/**\n * Creates a RegExp from the given string, converting asterisks to .* expressions,\n * and escaping all other characters.\n */\nfunction wildcardToRegExp(s) {\n  return new RegExp('^' + s.split(/\\*+/).map(regExpEscape).join('.*') + '$');\n}\n\n/**\n * RegExp-escapes all characters in the given string.\n */\nfunction regExpEscape(s) {\n  return s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTU3NS5qcyIsIm5hbWVzIjpbIkxvb3BNb2RlIiwib25jZSIsIlRIUkVFIiwiTG9vcE9uY2UiLCJyZXBlYXQiLCJMb29wUmVwZWF0IiwicGluZ3BvbmciLCJMb29wUGluZ1BvbmciLCJtb2R1bGUiLCJleHBvcnRzIiwiQUZSQU1FIiwicmVnaXN0ZXJDb21wb25lbnQiLCJzY2hlbWEiLCJjbGlwIiwidXNlUmVnRXhwIiwiZHVyYXRpb24iLCJjbGFtcFdoZW5GaW5pc2hlZCIsInR5cGUiLCJjcm9zc0ZhZGVEdXJhdGlvbiIsImxvb3AiLCJvbmVPZiIsIk9iamVjdCIsImtleXMiLCJyZXBldGl0aW9ucyIsIkluZmluaXR5IiwibWluIiwidGltZVNjYWxlIiwic3RhcnRBdCIsImFuaW1hdGlvbkV2ZW50UGFpcnMiLCJpbml0IiwiX3RoaXMiLCJtb2RlbCIsIm1peGVyIiwiYWN0aXZlQWN0aW9ucyIsImVsIiwiZ2V0T2JqZWN0M0QiLCJsb2FkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJkZXRhaWwiLCJBbmltYXRpb25NaXhlciIsImVtaXQiLCJhY3Rpb24iLCJsb29wRGVsdGEiLCJkaXJlY3Rpb24iLCJkYXRhIiwidXBkYXRlIiwicmVtb3ZlIiwic3RvcEFsbEFjdGlvbiIsInByZXZEYXRhIiwiY2hhbmdlcyIsInV0aWxzIiwiZGlmZiIsInN0b3BBY3Rpb24iLCJwbGF5QWN0aW9uIiwiZm9yRWFjaCIsInNldER1cmF0aW9uIiwic2V0TG9vcCIsInNldEVmZmVjdGl2ZVRpbWVTY2FsZSIsImkiLCJsZW5ndGgiLCJmYWRlT3V0Iiwic3RvcCIsImNsaXBzIiwiYW5pbWF0aW9ucyIsImdlb21ldHJ5IiwicmUiLCJ3aWxkY2FyZFRvUmVnRXhwIiwibmFtZSIsIm1hdGNoIiwiY2xpcEFjdGlvbiIsImVuYWJsZWQiLCJ0aW1lIiwiZmFkZUluIiwicGxheSIsInB1c2giLCJ0aWNrIiwidCIsImR0IiwiaXNOYU4iLCJzIiwiUmVnRXhwIiwic3BsaXQiLCJtYXAiLCJyZWdFeHBFc2NhcGUiLCJqb2luIiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvYW5pbWF0aW9uLW1peGVyLXN0YXRlLmpzPzQwNDQiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTG9vcE1vZGUgPSB7XG4gICAgb25jZTogVEhSRUUuTG9vcE9uY2UsXG4gICAgcmVwZWF0OiBUSFJFRS5Mb29wUmVwZWF0LFxuICAgIHBpbmdwb25nOiBUSFJFRS5Mb29wUGluZ1BvbmdcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBhbmltYXRpb24tbWl4ZXItc3RhdGVcbiAgICpcbiAgICogUGxheWVyIGZvciBhbmltYXRpb24gY2xpcHMuIEludGVuZGVkIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBhbnkgbW9kZWwgZm9ybWF0IHRoYXQgc3VwcG9ydHNcbiAgICogc2tlbGV0YWwgb3IgbW9ycGggYW5pbWF0aW9ucyB0aHJvdWdoIFRIUkVFLkFuaW1hdGlvbk1peGVyLlxuICAgKiBTZWU6IGh0dHBzOi8vdGhyZWVqcy5vcmcvZG9jcy8/cT1hbmltYXRpb24jUmVmZXJlbmNlL0FuaW1hdGlvbi9BbmltYXRpb25NaXhlclxuICAgKiBcbiAgICogQWxsb3dzIGFuaW1hdGlvbnMgdG8gYmUgdHJpZ2dlcmVkIG9uIHN0YXRlIGNoYW5nZXMsIGFuZCBjYW4gd2lsbCBiZSBhYmxlIHRvIHVwZGF0ZSBhbmltYXRpb25zIGJhc2VkIG9uIHByZXZpb3VzXG4gICAqIHN0YXRlIHRyYW5zaXRpb25zLlxuICAgKi9cbiAgbW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2FuaW1hdGlvbi1taXhlci1zdGF0ZScsIHtcbiAgICBzY2hlbWE6IHtcbiAgICAgIGNsaXA6IHsgZGVmYXVsdDogJyonIH0sXG4gICAgICB1c2VSZWdFeHA6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgICBkdXJhdGlvbjogeyBkZWZhdWx0OiAwIH0sXG4gICAgICBjbGFtcFdoZW5GaW5pc2hlZDogeyBkZWZhdWx0OiBmYWxzZSwgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgICBjcm9zc0ZhZGVEdXJhdGlvbjogeyBkZWZhdWx0OiAwIH0sXG4gICAgICBsb29wOiB7IGRlZmF1bHQ6ICdyZXBlYXQnLCBvbmVPZjogT2JqZWN0LmtleXMoTG9vcE1vZGUpIH0sXG4gICAgICByZXBldGl0aW9uczogeyBkZWZhdWx0OiBJbmZpbml0eSwgbWluOiAwIH0sXG4gICAgICB0aW1lU2NhbGU6IHsgZGVmYXVsdDogMSB9LFxuICAgICAgc3RhcnRBdDogeyBkZWZhdWx0OiAwIH0sXG4gICAgICBhbmltYXRpb25FdmVudFBhaXJzOiB7XG4gICAgICAgIGRlZmF1bHQ6IHt9XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgLyoqIEB0eXBlIHtUSFJFRS5NZXNofSAqL1xuICAgICAgdGhpcy5tb2RlbCA9IG51bGw7XG4gICAgICAvKiogQHR5cGUge1RIUkVFLkFuaW1hdGlvbk1peGVyfSAqL1xuICAgICAgdGhpcy5taXhlciA9IG51bGw7XG4gICAgICAvKiogQHR5cGUge0FycmF5PFRIUkVFLkFuaW1hdGlvbkFjdGlvbj59ICovXG4gICAgICB0aGlzLmFjdGl2ZUFjdGlvbnMgPSBbXTtcbiAgXG4gICAgICBjb25zdCBtb2RlbCA9IHRoaXMuZWwuZ2V0T2JqZWN0M0QoJ21lc2gnKTtcbiAgXG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgdGhpcy5sb2FkKG1vZGVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW9kZWwtbG9hZGVkJywgKGUpID0+IHtcbiAgICAgICAgICB0aGlzLmxvYWQoZS5kZXRhaWwubW9kZWwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICBsb2FkOiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgIGNvbnN0IGVsID0gdGhpcy5lbDtcbiAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgIHRoaXMubWl4ZXIgPSBuZXcgVEhSRUUuQW5pbWF0aW9uTWl4ZXIobW9kZWwpO1xuICAgICAgdGhpcy5taXhlci5hZGRFdmVudExpc3RlbmVyKCdsb29wJywgKGUpID0+IHtcbiAgICAgICAgZWwuZW1pdCgnYW5pbWF0aW9uLWxvb3AnLCB7IGFjdGlvbjogZS5hY3Rpb24sIGxvb3BEZWx0YTogZS5sb29wRGVsdGEgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWl4ZXIuYWRkRXZlbnRMaXN0ZW5lcignZmluaXNoZWQnLCAoZSkgPT4ge1xuICAgICAgICBlbC5lbWl0KCdhbmltYXRpb24tZmluaXNoZWQnLCB7IGFjdGlvbjogZS5hY3Rpb24sIGRpcmVjdGlvbjogZS5kaXJlY3Rpb24gfSk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLmRhdGEuY2xpcCkgdGhpcy51cGRhdGUoe30pO1xuICAgIH0sXG4gIFxuICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMubWl4ZXIpIHRoaXMubWl4ZXIuc3RvcEFsbEFjdGlvbigpO1xuICAgIH0sXG4gIFxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKHByZXZEYXRhKSB7XG4gICAgICBpZiAoIXByZXZEYXRhKSByZXR1cm47XG4gIFxuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgIGNvbnN0IGNoYW5nZXMgPSBBRlJBTUUudXRpbHMuZGlmZihkYXRhLCBwcmV2RGF0YSk7XG4gIFxuICAgICAgLy8gSWYgc2VsZWN0ZWQgY2xpcHMgaGF2ZSBjaGFuZ2VkLCByZXN0YXJ0IGFuaW1hdGlvbi5cbiAgICAgIGlmICgnY2xpcCcgaW4gY2hhbmdlcykge1xuICAgICAgICB0aGlzLnN0b3BBY3Rpb24oKTtcbiAgICAgICAgaWYgKGRhdGEuY2xpcCkgdGhpcy5wbGF5QWN0aW9uKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBPdGhlcndpc2UsIG1vZGlmeSBydW5uaW5nIGFjdGlvbnMuXG4gICAgICB0aGlzLmFjdGl2ZUFjdGlvbnMuZm9yRWFjaCgoYWN0aW9uKSA9PiB7XG4gICAgICAgIGlmICgnZHVyYXRpb24nIGluIGNoYW5nZXMgJiYgZGF0YS5kdXJhdGlvbikge1xuICAgICAgICAgIGFjdGlvbi5zZXREdXJhdGlvbihkYXRhLmR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2NsYW1wV2hlbkZpbmlzaGVkJyBpbiBjaGFuZ2VzKSB7XG4gICAgICAgICAgYWN0aW9uLmNsYW1wV2hlbkZpbmlzaGVkID0gZGF0YS5jbGFtcFdoZW5GaW5pc2hlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2xvb3AnIGluIGNoYW5nZXMgfHwgJ3JlcGV0aXRpb25zJyBpbiBjaGFuZ2VzKSB7XG4gICAgICAgICAgYWN0aW9uLnNldExvb3AoTG9vcE1vZGVbZGF0YS5sb29wXSwgZGF0YS5yZXBldGl0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCd0aW1lU2NhbGUnIGluIGNoYW5nZXMpIHtcbiAgICAgICAgICBhY3Rpb24uc2V0RWZmZWN0aXZlVGltZVNjYWxlKGRhdGEudGltZVNjYWxlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgXG4gICAgc3RvcEFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hY3RpdmVBY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGEuY3Jvc3NGYWRlRHVyYXRpb25cbiAgICAgICAgICA/IHRoaXMuYWN0aXZlQWN0aW9uc1tpXS5mYWRlT3V0KGRhdGEuY3Jvc3NGYWRlRHVyYXRpb24pXG4gICAgICAgICAgOiB0aGlzLmFjdGl2ZUFjdGlvbnNbaV0uc3RvcCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5hY3RpdmVBY3Rpb25zLmxlbmd0aCA9IDA7XG4gICAgfSxcbiAgXG4gICAgcGxheUFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLm1peGVyKSByZXR1cm47XG4gIFxuICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLm1vZGVsLFxuICAgICAgICBkYXRhID0gdGhpcy5kYXRhLFxuICAgICAgICBjbGlwcyA9IG1vZGVsLmFuaW1hdGlvbnMgfHwgKG1vZGVsLmdlb21ldHJ5IHx8IHt9KS5hbmltYXRpb25zIHx8IFtdO1xuICBcbiAgICAgIGlmICghY2xpcHMubGVuZ3RoKSByZXR1cm47XG4gIFxuICAgICAgY29uc3QgcmUgPSBkYXRhLnVzZVJlZ0V4cCA/IGRhdGEuY2xpcCA6IHdpbGRjYXJkVG9SZWdFeHAoZGF0YS5jbGlwKTtcbiAgXG4gICAgICBmb3IgKGxldCBjbGlwLCBpID0gMDsgKGNsaXAgPSBjbGlwc1tpXSk7IGkrKykge1xuICAgICAgICBpZiAoY2xpcC5uYW1lLm1hdGNoKHJlKSkge1xuICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMubWl4ZXIuY2xpcEFjdGlvbihjbGlwLCBtb2RlbCk7XG4gIFxuICAgICAgICAgIGFjdGlvbi5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICBhY3Rpb24uY2xhbXBXaGVuRmluaXNoZWQgPSBkYXRhLmNsYW1wV2hlbkZpbmlzaGVkO1xuICAgICAgICAgIGlmIChkYXRhLmR1cmF0aW9uKSBhY3Rpb24uc2V0RHVyYXRpb24oZGF0YS5kdXJhdGlvbik7XG4gICAgICAgICAgaWYgKGRhdGEudGltZVNjYWxlICE9PSAxKSBhY3Rpb24uc2V0RWZmZWN0aXZlVGltZVNjYWxlKGRhdGEudGltZVNjYWxlKTtcbiAgICAgICAgICAvLyBhbmltYXRpb24tbWl4ZXIuc3RhcnRBdCBhbmQgQW5pbWF0aW9uQWN0aW9uLnN0YXJ0QXQgaGF2ZSB2ZXJ5IGRpZmZlcmVudCBtZWFuaW5ncy5cbiAgICAgICAgICAvLyBhbmltYXRpb24tbWl4ZXIuc3RhcnRBdCBpbmRpY2F0ZXMgd2hpY2ggZnJhbWUgaW4gdGhlIGFuaW1hdGlvbiB0byBzdGFydCBhdCwgaW4gbXNlY3MuXG4gICAgICAgICAgLy8gQW5pbWF0aW9uQWN0aW9uLnN0YXJ0QXQgaW5kaWNhdGVzIHdoZW4gdG8gc3RhcnQgdGhlIGFuaW1hdGlvbiAoZnJvbSB0aGUgMXN0IGZyYW1lKSxcbiAgICAgICAgICAvLyBtZWFzdXJlZCBpbiBnbG9iYWwgbWl4ZXIgdGltZSwgaW4gc2Vjb25kcy5cbiAgICAgICAgICBhY3Rpb24uc3RhcnRBdCh0aGlzLm1peGVyLnRpbWUgLSBkYXRhLnN0YXJ0QXQgLyAxMDAwKTtcbiAgICAgICAgICBhY3Rpb25cbiAgICAgICAgICAgIC5zZXRMb29wKExvb3BNb2RlW2RhdGEubG9vcF0sIGRhdGEucmVwZXRpdGlvbnMpXG4gICAgICAgICAgICAuZmFkZUluKGRhdGEuY3Jvc3NGYWRlRHVyYXRpb24pXG4gICAgICAgICAgICAucGxheSgpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlQWN0aW9ucy5wdXNoKGFjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICB0aWNrOiBmdW5jdGlvbiAodCwgZHQpIHtcbiAgICAgIGlmICh0aGlzLm1peGVyICYmICFpc05hTihkdCkpIHRoaXMubWl4ZXIudXBkYXRlKGR0IC8gMTAwMCk7XG4gICAgfVxuICB9KTtcbiAgXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgUmVnRXhwIGZyb20gdGhlIGdpdmVuIHN0cmluZywgY29udmVydGluZyBhc3Rlcmlza3MgdG8gLiogZXhwcmVzc2lvbnMsXG4gICAqIGFuZCBlc2NhcGluZyBhbGwgb3RoZXIgY2hhcmFjdGVycy5cbiAgICovXG4gIGZ1bmN0aW9uIHdpbGRjYXJkVG9SZWdFeHAocykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIHMuc3BsaXQoL1xcKisvKS5tYXAocmVnRXhwRXNjYXBlKS5qb2luKCcuKicpICsgJyQnKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFJlZ0V4cC1lc2NhcGVzIGFsbCBjaGFyYWN0ZXJzIGluIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAqL1xuICBmdW5jdGlvbiByZWdFeHBFc2NhcGUocykge1xuICAgIHJldHVybiBzLnJlcGxhY2UoL1t8XFxcXHt9KClbXFxdXiQrKj8uXS9nLCAnXFxcXCQmJyk7XG4gIH1cbiAgIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxRQUFRLEdBQUc7RUFDYkMsSUFBSSxFQUFFQyxLQUFLLENBQUNDLFFBQVE7RUFDcEJDLE1BQU0sRUFBRUYsS0FBSyxDQUFDRyxVQUFVO0VBQ3hCQyxRQUFRLEVBQUVKLEtBQUssQ0FBQ0s7QUFDbEIsQ0FBQzs7QUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNFQyxNQUFNLENBQUNDLE9BQU8sR0FBR0MsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyx1QkFBdUIsRUFBRTtFQUNqRUMsTUFBTSxFQUFFO0lBQ05DLElBQUksRUFBRTtNQUFFLFdBQVM7SUFBSSxDQUFDO0lBQ3RCQyxTQUFTLEVBQUU7TUFBQyxXQUFTO0lBQUssQ0FBQztJQUMzQkMsUUFBUSxFQUFFO01BQUUsV0FBUztJQUFFLENBQUM7SUFDeEJDLGlCQUFpQixFQUFFO01BQUUsV0FBUyxLQUFLO01BQUVDLElBQUksRUFBRTtJQUFVLENBQUM7SUFDdERDLGlCQUFpQixFQUFFO01BQUUsV0FBUztJQUFFLENBQUM7SUFDakNDLElBQUksRUFBRTtNQUFFLFdBQVMsUUFBUTtNQUFFQyxLQUFLLEVBQUVDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDdEIsUUFBUTtJQUFFLENBQUM7SUFDekR1QixXQUFXLEVBQUU7TUFBRSxXQUFTQyxRQUFRO01BQUVDLEdBQUcsRUFBRTtJQUFFLENBQUM7SUFDMUNDLFNBQVMsRUFBRTtNQUFFLFdBQVM7SUFBRSxDQUFDO0lBQ3pCQyxPQUFPLEVBQUU7TUFBRSxXQUFTO0lBQUUsQ0FBQztJQUN2QkMsbUJBQW1CLEVBQUU7TUFDbkIsV0FBUyxDQUFDO0lBQ1o7RUFDRixDQUFDO0VBRURDLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVk7SUFBQSxJQUFBQyxLQUFBO0lBQ2hCO0lBQ0EsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSTtJQUNqQjtJQUNBLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUk7SUFDakI7SUFDQSxJQUFJLENBQUNDLGFBQWEsR0FBRyxFQUFFO0lBRXZCLElBQU1GLEtBQUssR0FBRyxJQUFJLENBQUNHLEVBQUUsQ0FBQ0MsV0FBVyxDQUFDLE1BQU0sQ0FBQztJQUV6QyxJQUFJSixLQUFLLEVBQUU7TUFDVCxJQUFJLENBQUNLLElBQUksQ0FBQ0wsS0FBSyxDQUFDO0lBQ2xCLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQ0csRUFBRSxDQUFDRyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsVUFBQ0MsQ0FBQyxFQUFLO1FBQzlDUixLQUFJLENBQUNNLElBQUksQ0FBQ0UsQ0FBQyxDQUFDQyxNQUFNLENBQUNSLEtBQUssQ0FBQztNQUMzQixDQUFDLENBQUM7SUFDSjtFQUNGLENBQUM7RUFFREssSUFBSSxFQUFFLFNBQUFBLEtBQVVMLEtBQUssRUFBRTtJQUNyQixJQUFNRyxFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO0lBQ2xCLElBQUksQ0FBQ0gsS0FBSyxHQUFHQSxLQUFLO0lBQ2xCLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUk5QixLQUFLLENBQUNzQyxjQUFjLENBQUNULEtBQUssQ0FBQztJQUM1QyxJQUFJLENBQUNDLEtBQUssQ0FBQ0ssZ0JBQWdCLENBQUMsTUFBTSxFQUFFLFVBQUNDLENBQUMsRUFBSztNQUN6Q0osRUFBRSxDQUFDTyxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7UUFBRUMsTUFBTSxFQUFFSixDQUFDLENBQUNJLE1BQU07UUFBRUMsU0FBUyxFQUFFTCxDQUFDLENBQUNLO01BQVUsQ0FBQyxDQUFDO0lBQ3pFLENBQUMsQ0FBQztJQUNGLElBQUksQ0FBQ1gsS0FBSyxDQUFDSyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsVUFBQ0MsQ0FBQyxFQUFLO01BQzdDSixFQUFFLENBQUNPLElBQUksQ0FBQyxvQkFBb0IsRUFBRTtRQUFFQyxNQUFNLEVBQUVKLENBQUMsQ0FBQ0ksTUFBTTtRQUFFRSxTQUFTLEVBQUVOLENBQUMsQ0FBQ007TUFBVSxDQUFDLENBQUM7SUFDN0UsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxJQUFJLENBQUNDLElBQUksQ0FBQ2hDLElBQUksRUFBRSxJQUFJLENBQUNpQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDckMsQ0FBQztFQUVEQyxNQUFNLEVBQUUsU0FBQUEsT0FBQSxFQUFZO0lBQ2xCLElBQUksSUFBSSxDQUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDQSxLQUFLLENBQUNnQixhQUFhLENBQUMsQ0FBQztFQUM1QyxDQUFDO0VBRURGLE1BQU0sRUFBRSxTQUFBQSxPQUFVRyxRQUFRLEVBQUU7SUFDMUIsSUFBSSxDQUFDQSxRQUFRLEVBQUU7SUFFZixJQUFNSixJQUFJLEdBQUcsSUFBSSxDQUFDQSxJQUFJO0lBQ3RCLElBQU1LLE9BQU8sR0FBR3hDLE1BQU0sQ0FBQ3lDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDUCxJQUFJLEVBQUVJLFFBQVEsQ0FBQzs7SUFFakQ7SUFDQSxJQUFJLE1BQU0sSUFBSUMsT0FBTyxFQUFFO01BQ3JCLElBQUksQ0FBQ0csVUFBVSxDQUFDLENBQUM7TUFDakIsSUFBSVIsSUFBSSxDQUFDaEMsSUFBSSxFQUFFLElBQUksQ0FBQ3lDLFVBQVUsQ0FBQyxDQUFDO01BQ2hDO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJLENBQUNyQixhQUFhLENBQUNzQixPQUFPLENBQUMsVUFBQ2IsTUFBTSxFQUFLO01BQ3JDLElBQUksVUFBVSxJQUFJUSxPQUFPLElBQUlMLElBQUksQ0FBQzlCLFFBQVEsRUFBRTtRQUMxQzJCLE1BQU0sQ0FBQ2MsV0FBVyxDQUFDWCxJQUFJLENBQUM5QixRQUFRLENBQUM7TUFDbkM7TUFDQSxJQUFJLG1CQUFtQixJQUFJbUMsT0FBTyxFQUFFO1FBQ2xDUixNQUFNLENBQUMxQixpQkFBaUIsR0FBRzZCLElBQUksQ0FBQzdCLGlCQUFpQjtNQUNuRDtNQUNBLElBQUksTUFBTSxJQUFJa0MsT0FBTyxJQUFJLGFBQWEsSUFBSUEsT0FBTyxFQUFFO1FBQ2pEUixNQUFNLENBQUNlLE9BQU8sQ0FBQ3pELFFBQVEsQ0FBQzZDLElBQUksQ0FBQzFCLElBQUksQ0FBQyxFQUFFMEIsSUFBSSxDQUFDdEIsV0FBVyxDQUFDO01BQ3ZEO01BQ0EsSUFBSSxXQUFXLElBQUkyQixPQUFPLEVBQUU7UUFDMUJSLE1BQU0sQ0FBQ2dCLHFCQUFxQixDQUFDYixJQUFJLENBQUNuQixTQUFTLENBQUM7TUFDOUM7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDO0VBRUQyQixVQUFVLEVBQUUsU0FBQUEsV0FBQSxFQUFZO0lBQ3RCLElBQU1SLElBQUksR0FBRyxJQUFJLENBQUNBLElBQUk7SUFDdEIsS0FBSyxJQUFJYyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDMUIsYUFBYSxDQUFDMkIsTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRTtNQUNsRGQsSUFBSSxDQUFDM0IsaUJBQWlCLEdBQ2xCLElBQUksQ0FBQ2UsYUFBYSxDQUFDMEIsQ0FBQyxDQUFDLENBQUNFLE9BQU8sQ0FBQ2hCLElBQUksQ0FBQzNCLGlCQUFpQixDQUFDLEdBQ3JELElBQUksQ0FBQ2UsYUFBYSxDQUFDMEIsQ0FBQyxDQUFDLENBQUNHLElBQUksQ0FBQyxDQUFDO0lBQ2xDO0lBQ0EsSUFBSSxDQUFDN0IsYUFBYSxDQUFDMkIsTUFBTSxHQUFHLENBQUM7RUFDL0IsQ0FBQztFQUVETixVQUFVLEVBQUUsU0FBQUEsV0FBQSxFQUFZO0lBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUN0QixLQUFLLEVBQUU7SUFFakIsSUFBTUQsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSztNQUN0QmMsSUFBSSxHQUFHLElBQUksQ0FBQ0EsSUFBSTtNQUNoQmtCLEtBQUssR0FBR2hDLEtBQUssQ0FBQ2lDLFVBQVUsSUFBSSxDQUFDakMsS0FBSyxDQUFDa0MsUUFBUSxJQUFJLENBQUMsQ0FBQyxFQUFFRCxVQUFVLElBQUksRUFBRTtJQUVyRSxJQUFJLENBQUNELEtBQUssQ0FBQ0gsTUFBTSxFQUFFO0lBRW5CLElBQU1NLEVBQUUsR0FBR3JCLElBQUksQ0FBQy9CLFNBQVMsR0FBRytCLElBQUksQ0FBQ2hDLElBQUksR0FBR3NELGdCQUFnQixDQUFDdEIsSUFBSSxDQUFDaEMsSUFBSSxDQUFDO0lBRW5FLEtBQUssSUFBSUEsSUFBSSxFQUFFOEMsQ0FBQyxHQUFHLENBQUMsRUFBRzlDLElBQUksR0FBR2tELEtBQUssQ0FBQ0osQ0FBQyxDQUFDLEVBQUdBLENBQUMsRUFBRSxFQUFFO01BQzVDLElBQUk5QyxJQUFJLENBQUN1RCxJQUFJLENBQUNDLEtBQUssQ0FBQ0gsRUFBRSxDQUFDLEVBQUU7UUFDdkIsSUFBTXhCLE1BQU0sR0FBRyxJQUFJLENBQUNWLEtBQUssQ0FBQ3NDLFVBQVUsQ0FBQ3pELElBQUksRUFBRWtCLEtBQUssQ0FBQztRQUVqRFcsTUFBTSxDQUFDNkIsT0FBTyxHQUFHLElBQUk7UUFDckI3QixNQUFNLENBQUMxQixpQkFBaUIsR0FBRzZCLElBQUksQ0FBQzdCLGlCQUFpQjtRQUNqRCxJQUFJNkIsSUFBSSxDQUFDOUIsUUFBUSxFQUFFMkIsTUFBTSxDQUFDYyxXQUFXLENBQUNYLElBQUksQ0FBQzlCLFFBQVEsQ0FBQztRQUNwRCxJQUFJOEIsSUFBSSxDQUFDbkIsU0FBUyxLQUFLLENBQUMsRUFBRWdCLE1BQU0sQ0FBQ2dCLHFCQUFxQixDQUFDYixJQUFJLENBQUNuQixTQUFTLENBQUM7UUFDdEU7UUFDQTtRQUNBO1FBQ0E7UUFDQWdCLE1BQU0sQ0FBQ2YsT0FBTyxDQUFDLElBQUksQ0FBQ0ssS0FBSyxDQUFDd0MsSUFBSSxHQUFHM0IsSUFBSSxDQUFDbEIsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNyRGUsTUFBTSxDQUNIZSxPQUFPLENBQUN6RCxRQUFRLENBQUM2QyxJQUFJLENBQUMxQixJQUFJLENBQUMsRUFBRTBCLElBQUksQ0FBQ3RCLFdBQVcsQ0FBQyxDQUM5Q2tELE1BQU0sQ0FBQzVCLElBQUksQ0FBQzNCLGlCQUFpQixDQUFDLENBQzlCd0QsSUFBSSxDQUFDLENBQUM7UUFDVCxJQUFJLENBQUN6QyxhQUFhLENBQUMwQyxJQUFJLENBQUNqQyxNQUFNLENBQUM7TUFDakM7SUFDRjtFQUNGLENBQUM7RUFFRGtDLElBQUksRUFBRSxTQUFBQSxLQUFVQyxDQUFDLEVBQUVDLEVBQUUsRUFBRTtJQUNyQixJQUFJLElBQUksQ0FBQzlDLEtBQUssSUFBSSxDQUFDK0MsS0FBSyxDQUFDRCxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUM5QyxLQUFLLENBQUNjLE1BQU0sQ0FBQ2dDLEVBQUUsR0FBRyxJQUFJLENBQUM7RUFDNUQ7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDRjtBQUNBO0FBQ0E7QUFDRSxTQUFTWCxnQkFBZ0JBLENBQUNhLENBQUMsRUFBRTtFQUMzQixPQUFPLElBQUlDLE1BQU0sQ0FBQyxHQUFHLEdBQUdELENBQUMsQ0FBQ0UsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDQyxHQUFHLENBQUNDLFlBQVksQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQzVFOztBQUVBO0FBQ0Y7QUFDQTtBQUNFLFNBQVNELFlBQVlBLENBQUNKLENBQUMsRUFBRTtFQUN2QixPQUFPQSxDQUFDLENBQUNNLE9BQU8sQ0FBQyxxQkFBcUIsRUFBRSxNQUFNLENBQUM7QUFDakQiLCJpZ25vcmVMaXN0IjpbXX0=\n//# sourceURL=webpack-internal:///5575\n");

/***/ }),

/***/ 9999:
/*!*****************************************************!*\
  !*** ./src/components/aframe/game-state-machine.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! xstate */ 7122);\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! xstate */ 7894);\n/* harmony import */ var _base_game_loop_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-game-loop.json */ 6264);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME */\n\n\n\n\n// Example complete game state machine.\nvar sampleMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_1__.createMachine)({\n  /** @xstate-layout N4IgpgJg5mDOIC5RQIYFswGUAuLtgFkUBjACwEsA7MAOllwCdsqoBiAGwHsUJIBtAAwBdRKAAOnWOWadKokAA9EARgCsAZhoCA7ABYATOoEBOAat3rtx9QBoQATxUCAbAA4aG1QIOvXy117OAL5BdqgYOHiEJBTUNAwArpSULKxiKAmwYIIiSCASUjJyeUoIys66NG6+yuUC6vqq2r52jgj6Aso02uqqzv26zh3Gqr4hYehYuPhEZFS0icmpYJQQOfIF0uSy8qWq+q2I+soWWrW6At5exmrjIOFTUbOxC0kplFA0AEYM5GAAZqkILJaPQojQHpEZjF5vE3ixvr8ASx1nlNkVdog-NoPANnD0XMZXC5DggKvpuho-AJXLptG51Mo7pDptE5nFFu9Pj8-oCPojeSwAArsFD2NIZLKo8SSLY7EqIXTGHH1fRDIb6PxGbSk7TKATdKz7WnqAxq3TMyZQtkvOFLfk85EOpF8qAisWsFZrYQbWUYhUIJUqhrq-Sa5Ta0nOWo0ZSa8z0kYjVzBUL3K2s56wzkIx2ugVOt2SyCsBhwBIYaX5P3bYqgUpBrQhtVhrU6KPOA0jC7qYnOa6NS0RTMwjnw-kMTicNDKVjAuJg-AQjNPUeve2fSfT5RV9G1zFlKyaVzGQb7ZqjXQWKMGSmWemXTqNVMTYer9nrrnxKczuicdgAG5AiCdCssub7Qh+dpfluv6wP+QEfLuNbyvWKiqDGxj4roGEnle-YdhSuhqPozQ4aoSb6EOjyQbaOYTj+XTwYBCJiAkABe7HsGAXRJMxAElmxnHcUxCH8D6aIoXWigqCcXTaNoxyjL4rh6Lqlw0IY2gYRczgNIY1HWlmY4bt+25-ix-JCVxYAUnxYkQGkHE2RS-HibkMqFPuAbnPJilqCpqm6KSKYGuYvT+P2LjaPUhkjlB9GboxFmIZ81ncZo9mAYJzkZSl7m+l5qEyWUcmGkpgVqQ4iAaMYNDWHUlxWAYGhxe+dHjkl076HOIGLrQLLtdmnVmWg+jIUV0mlLUvgeNpel6noyhGqSJzqJojJ6Iyp4XNobW0cNpmwa5CHAQuYGDQdJkwT+J2WVAE1ylNiCmM4VS6AEaq+BUSquKtOEUsqKk9KoTSdOo+02odN3dSlrG5TxNBZQJjnpYjbneh51aTQeGhvThjJePoZ4pn91VlEqBrEhGOj9l4yhYZDxmfgix1w1ZCN2ZQGNOcJtn5ZjhVPbj6j4xoagCMT-ak6t-ZdPqi16aLxjGJqTNrtBrO3ezaUI5l3MObzNmaBjj3+mhCB4zQBMS1LoxuKt60Gkq+wq6M4b9OrCUjbB6i9ed4KXVD11a9O6hm95FvHBU9X1BY1j6Cr+q2OTa0bctdInr4pFq2mQfM5rDFhzr-ughdK5XSzRdoCbp1IRJnnCz52f1fSnbNGGFTtqnAOt8DvRgxGXsdUdP61-dNBo7xBvZajCOibPEfFdNGEUs0Esq3pWnOP9pg0NT2p050jN5xXwdV11Nc65PnNIzPKNG9xd0o0vz1lKv3R+NcWENJYO+p3LWMOhlpK2cCrXOr4aLn0LpfceqUb5831jzNGcCCqSRxj5D+69v5bz-o7Iw1sRiJ2TB7F86YILQMSjQXgeYEQ0JdMKUU4p0iZGyA3bGTco4fU0PULwoxegq3UNYVaRMPAniwrUaMV5RbD2hnQsAtD+T0MFB8d04ovSvwPMTVwPDehmB0RRawwie6S3qr2I0PRajHFkSHJRCiGF2MUUWVhjkyywArGwrGe5l5HG4U2PhBjBHGLaCcfY3RyQpn1JLUGNjaAsKyK48slZ2HeLfuUSo1Q-B1AaE0Fo5MRhhQsLhKK+JJaxMnsWRyGiUlSQPGoDJKlJGqlyWTNofgaD6RuDSQwaoM4hDTJQTgvB4B5HzmuIW5sSoAFp-5tBmVoR8izFknCoqfChBcwRMBYBMyOJUDCrRcO4GKRg1C9B7CYcpiUdk+PaMTTS-htImFUk0U8rSVAnlxLUBSPRlQ-VWZAoyGsqEUHoNct+jI3rHGeU87SK18lKmthUH5nYLhNEuSNJxYKtHWHudCoksKRikn2GvL6uS1Q0nWui0yTiCyujUVigMpouhQsefil5qh1IGh0BhUJRMIwWjWVAguVCaVOKFJUhlFtoyaD6M+PocYAYpzaDFVQHTpYuxVrSD6VKvyiocVAAAoqsSVJVpW4jldGYm+wlWIGjFyoMbgKjWABjq0OM4TWlFUjiDQCkKJDGVDk0kpE3q+AuL4PoRg1QQ0FYC72o9zIYw9SoIYqrrAnl-qeSW2kowUX3r0FMp4RjLTVK66uC9UpJoQKrVVPrtJYUTj0RopJRaVA6GAwRKZNSuH+eQoVQKfbJX4vDPmyhK0Bo8PeP1DbA3k2jF0AxBaXbFrIWMuNMM4J111iOu+ib0GcJKvqY4E7fX1oDU28mMVnZmHFjoxSEDe2xpHuu8tw6bLlsgJWiMMZi2CL1InPhUYVaxlGM0eo-gLBXlLZfF9HM+b6DHT0Y9db-WNo5RexSsZiLdtUsSI0TIY3xSfW6mDW6XI7ocp+yWXRa1TrPWhtpnZujnBuHGeMLgoOjRIwgsju7G6TOmoyY8fhpE4UGDog45MAh1UGHSIRKKzB7QI0NWx0Hr4oIQzKydp7UOkhwtR4hh6TCg06Bx2CXGUHkdnpRo9NHtMzraOYLlbsc5Blw6Zwdm7uN5V4xw-jKhGSVE6MtQmksKi0iJb2fexpjiqj8D21dRHq7wb3X59oGGWXXGeXCkJ0VrZ0maH2CoID3Owx86kupksDTRiTvibtotSL-S8B0t2MU9AmGIopgFhG5FJZ1pWhoBoMswvZatephpCQqSwlYFdZ9hUDtK55qe-W3C4tZVlwlJiKRCJGG4TVEbXAlbGmp+elmUaVuIpCh5mWCX0ZUJTeqYDNRPkUod5+r6RIC0rSqqLBg9IBDjE0CTISPp1TvU0IRh7GSveO3B5b7ghtsuy+hIY3Rr2bV2wYfDXXlMX1Gm92DZHkYfpS7shs5RVvXZGwAjCmlHl9EGAFvo0Oh0E6fp9knNyYruFldGTsDNsPGFlk1yWWrGiqw6AK7HlcYF45h8bOHFPhtI7KMTCkJhRYmD-aeIeSnpdULZiz0jeUicQHO+ThH63btlCdlULeaptKbXi7N-t8ajuG682AVBpuOdvy51UVWfYlQM5tdbxO1tyj7DMPV+o0apeUPmzXT92iPCDFVoWsBAWDn4jywpXwLgiv0kO17z9m96r5f8Gm9XOoe5Ne22DNr2vOsPu6yp0acDtk+7qYnN65hHvp4asFVOY2FITd8FNk+ce5uu-b6znin7TSVF72npUGeTj-VMXX3bRJ9tF7lx9k38-VYp77yvgfu8uyPepjnXf7up7s746T5N3bYzdtqtYe8-0Plg5+ZDrHzeccy6+x762Tz5XjH7L5YRn6pyyqo6gzo54TWK67x7T7AFcxla1I+RCIUhL6Jyn6Z7U7Mp04VB6ShIzbrIu7roz5G78zoEYIWzlC0j7ymDNSuz+BmBC5cqahXhi5hjeA36LZ6ygGL6p64GQH4EhKq5aDWCdjKhxja6x7-564J5UEe5IIUad6YFH44H97iH+YEL9D6T4jiwvZIFT6UHAHF4aH0FuCqqVa+BbTdKD4hINDSYR4dB4wdCUqmEUHyKYpWElSdxUx6A3BEi4GKSOxxhaBFLEqniXpO7kFrq+H6rUL2IqJuhMKVqGA0j7zBH85hFA53Y3D7wBD0z6hXgMEcbKKFgpFioSr+GlBi51T04qwKTcHRi7w4ggJFLcrEqqCVGpHVFVGuhGre4P43KNG4hKjKh6C-bKDr7zqGJgJdxGB9HeFQTxLE5jFvz7L5JCJ5pdJ0j9D9h6jlJeibG+aP4UxbYMyPhUjEKgxBr8qaTVA9g-wXb9JBBAA */\n  id: 'gameStateMachine',\n  initial: 'starting',\n  states: {\n    starting: {\n      id: 'starting',\n      on: {\n        \"loaded\": \"running\"\n      }\n    },\n    running: {\n      initial: \"briefing\",\n      on: {\n        \"pause\": \"paused\",\n        \"end\": \"ended\"\n      },\n      states: {\n        hist: {\n          type: 'history',\n          history: 'deep'\n        },\n        briefing: {\n          id: 'briefing',\n          initial: 'briefingPlay',\n          states: {\n            briefingPlay: {\n              on: {\n                \"pause\": \"briefingPaused\",\n                \"end\": \"briefingEnd\"\n              }\n            },\n            briefingPaused: {\n              on: {\n                \"resume\": \"briefingPlay\"\n              }\n            },\n            briefingEnd: {\n              type: \"final\"\n            }\n          },\n          onDone: {\n            target: \"room1\"\n          }\n        },\n        room1: {\n          id: 'room1',\n          initial: \"solving\",\n          onDone: 'room2',\n          states: {\n            \"solved\": {\n              type: \"final\"\n            },\n            \"solving\": {\n              type: 'parallel',\n              onDone: \"solved\",\n              states: {\n                puzzle1: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle1.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle2: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle2.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle3: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle3.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        room2: {\n          id: 'room2',\n          initial: \"solving\",\n          onDone: 'room3',\n          states: {\n            \"solved\": {\n              type: \"final\"\n            },\n            \"solving\": {\n              type: 'parallel',\n              onDone: \"solved\",\n              states: {\n                puzzle1: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle1.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle2: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle2.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle3: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle3.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        room3: {\n          id: 'room3',\n          initial: \"solving\",\n          onDone: 'debriefing',\n          states: {\n            \"solved\": {\n              type: \"final\"\n            },\n            \"solving\": {\n              type: 'parallel',\n              onDone: \"solved\",\n              states: {\n                puzzle1: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle1.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle2: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle2.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle3: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle3.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        debriefing: {\n          id: 'debriefing',\n          type: 'final',\n          initial: 'debriefingPlay',\n          states: {\n            debriefingPlay: {\n              on: {\n                \"pause\": \"debriefingPaused\",\n                \"end\": \"debriefingEnd\"\n              }\n            },\n            debriefingPaused: {\n              on: {\n                \"resume\": \"debriefingPlay\"\n              }\n            },\n            debriefingEnd: {\n              type: \"final\"\n            }\n          }\n        }\n      }\n    },\n    paused: {\n      on: {\n        \"resume\": \"running.hist\",\n        \"end\": \"ended\"\n      }\n    },\n    ended: {\n      type: \"final\"\n    }\n  }\n});\n\n/**\n * A system for managing the global game state machine.\n * If you add any actions that the game states rely on, you must add them using \"addAction\" to the system\n * before running \"start()\".\n */\nAFRAME.registerSystem(\"game-state\", {\n  schema: {},\n  init: function init() {\n    this.service = null;\n    this.roomElements = [];\n    this.puzzleElements = [];\n    this.actions = {};\n    // this.context = {};\n    this.gameStateMachineDefinition = {};\n    this.manager = null;\n  },\n  pause: function pause() {\n    // NO OP for now.\n  },\n  play: function play() {\n    // NO OP for now.\n  },\n  addAction: function addAction(actionName, actionFn) {\n    // Add an action to the game state machine.\n    // this.actions.push({\"name\": actionName, \"fn\": actionFn});\n    this.actions[actionName] = actionFn;\n  },\n  addActions: function addActions(actions) {\n    // Add multiple actions to the game state machine.\n    var keys = Object.keys(actions);\n    for (var i = 0; i < keys.length; i++) {\n      this.addAction(keys[i], actions[keys[i]]);\n    }\n    // // Add an action to the game state machine.\n    // // this.actions.push({\"name\": actionName, \"fn\": actionFn});\n    // this.gameStateMachine.actions[actionName] = actionFn;\n  },\n  addRoom: function addRoom(roomName, roomElement, actions) {\n    // Add a room to the state machine.\n    // This effectively adds a state to the game state machine which is defined in order by the index.\n    this.roomElements.push({\n      \"name\": roomName,\n      \"el\": roomElement,\n      \"onDone\": actions\n    });\n  },\n  addPuzzle: function addPuzzle(roomName, puzzleName, puzzleElement, actions) {\n    // Add a puzzle to a room in the state machine.\n    // This effectively adds a state to the game state machine which is defined in order by the index.\n    // this.gameStateMachineDefinition[roomName].states.solving.states[puzzleName] = {\n    //     \"id\": puzzleName,\n    //     \"initial\": \"unsolved\",\n    //     \"states\": {\n    //         \"unsolved\": {\n    //             \"on\": {\n    //                 [`${puzzleName}.solved`]: \"solved\"\n    //             }\n    //         },\n    //         \"solved\": {\n    //             \"type\": \"final\"\n    //         }\n    //     }\n    // }\n    this.puzzleElements.push({\n      \"room\": roomName,\n      \"name\": puzzleName,\n      \"el\": puzzleElement,\n      \"actions\": actions\n    });\n  },\n  start: function start() {\n    var _this = this;\n    // Create the game state machine based on the baseGameLoop.\n    // if (!this.manager) {\n    //     throw new Error(\"A game state manager must be defined in the scene.\");\n    // }\n    this.gameStateMachine = _objectSpread({}, _base_game_loop_json__WEBPACK_IMPORTED_MODULE_0__);\n    // Build the game state machine definition from the room elements.\n    this._buildRoomElements();\n    this._buildPuzzleElements();\n    this.gameStateMachine.states.running.states = _objectSpread(_objectSpread({}, this.gameStateMachine.states.running.states), this.gameStateMachineDefinition);\n    // Create an actor from the state machine definition.\n    this.service = (0,xstate__WEBPACK_IMPORTED_MODULE_2__.A)((0,xstate__WEBPACK_IMPORTED_MODULE_1__.createMachine)(this.gameStateMachine, {\n      actions: this.actions\n    }));\n    // Create subscriptions that allow updates when game state machine updates.\n    this.service.subscribe(function (state) {\n      // console.log(\"Game State Machine Updated\", state.value);\n      _this.el.emit(\"game-state-updated\", state);\n    });\n    this.el.addEventListener(\"game-state-event\", function (event) {\n      _this.service.send({\n        \"type\": event.detail\n      });\n    });\n    this.service.start();\n  },\n  _buildRoomElements: function _buildRoomElements() {\n    // For each room element, add a state to the game state machine.\n    console.log(\"Room Elements\", this.roomElements);\n    this.gameStateMachine.states.running.states.briefing.onDone = {\n      target: this.roomElements[0].name\n      // actions: ({context, event}) => {\n      //     console.log(`ctx = ${JSON.stringify(context)} and evt = ${JSON.stringify(event)}`);\n      //     this.el.emit(\"game-notify-event\", event)\n      // }\n    };\n    for (var i = 0; i < this.roomElements.length; i++) {\n      this.gameStateMachineDefinition[this.roomElements[i].name] = {\n        \"id\": this.roomElements[i].name,\n        \"initial\": \"solving\",\n        \"onDone\": {\n          \"target\": this.roomElements[i + 1] ? this.roomElements[i + 1].name : \"debriefing\",\n          \"actions\": this.roomElements[i].onDone || \"\"\n        },\n        \"states\": {\n          \"solved\": {\n            \"type\": \"final\"\n          },\n          \"solving\": {\n            \"type\": \"parallel\",\n            \"onDone\": {\n              \"target\": \"solved\"\n              // \"actions\": ({context, event}) => {\n              //     console.log(`ctx = ${JSON.stringify(context)} and evt = ${JSON.stringify(event)}`);                                \n              //     this.el.emit(\"game-notify-event\", event)\n              // }\n            },\n            \"states\": {}\n          }\n        }\n      };\n    }\n  },\n  _buildPuzzleElements: function _buildPuzzleElements() {\n    for (var i = 0; i < this.puzzleElements.length; i++) {\n      this.gameStateMachineDefinition[this.puzzleElements[i].room].states.solving.states[this.puzzleElements[i].name] = {\n        \"initial\": \"unsolved\",\n        \"states\": {\n          \"unsolved\": {\n            \"on\": _defineProperty({}, \"\".concat(this.puzzleElements[i].name, \".solved\"), \"solved\")\n          },\n          \"solved\": {\n            \"type\": \"final\"\n          }\n        }\n      };\n    }\n  }\n});\nAFRAME.registerComponent(\"remove-on-game-event\", {\n  schema: {\n    state: {\n      type: \"string\",\n      required: true\n    }\n  },\n  init: function init() {\n    var _this2 = this;\n    this.el.sceneEl.addEventListener(\"game-notify-event\", function (event) {\n      if (event.detail.type == _this2.data.state) {\n        _this2.el.remove();\n      }\n    });\n  }\n});\nAFRAME.registerComponent(\"disable-movement-in-states\", {\n  schema: {\n    \"states\": {\n      type: \"array\",\n      required: true\n    }\n  },\n  init: function init() {\n    var _this3 = this;\n    console.log(\"States to disable movement in\", this.data.states);\n    this.el.sceneEl.addEventListener(\"game-state-updated\", function (event) {\n      if (_this3.data.states.includes(event.detail.value)) {\n        _this3.previousState = _this3.el.getAttribute(\"motionControls\");\n        _this3.el.setAttribute(\"motionControls\", \"enabled\", false);\n      } else {\n        if (_this3.previousState) {\n          _this3.el.setAttribute(\"motionControls\", _this3.previousState);\n          _this3.previousState = null;\n        }\n      }\n    });\n  }\n});\nAFRAME.registerComponent(\"show-in-state\", {\n  schema: {\n    state: {\n      type: \"string\",\n      required: true\n    },\n    hideOtherwise: {\n      type: \"boolean\",\n      \"default\": false\n    }\n  },\n  init: function init() {\n    var _this4 = this;\n    this.el.sceneEl.addEventListener(\"game-state-updated\", function (event) {\n      console.log(_this4.el, \"game-state-updated in show-in-state\", event.detail.value);\n      if (event.detail.matches(_this4.data.state)) {\n        _this4.el.setAttribute(\"visible\", true);\n      } else if (_this4.data.hideOtherwise && _this4.el.getAttribute(\"visible\")) {\n        _this4.el.setAttribute(\"visible\", false);\n      }\n    });\n  }\n});\nAFRAME.registerComponent(\"hide-in-state\", {\n  schema: {\n    state: {\n      type: \"string\",\n      required: true\n    },\n    showOtherwise: {\n      type: \"boolean\",\n      \"default\": false\n    }\n  },\n  init: function init() {\n    var _this5 = this;\n    this.el.sceneEl.addEventListener(\"game-state-updated\", function (event) {\n      if (event.detail.matches(_this5.data.state) && _this5.el.getAttribute(\"visible\")) {\n        _this5.el.setAttribute(\"visible\", false);\n      } else if (_this5.data.showOtherwise) {\n        _this5.el.setAttribute(\"visible\", true);\n      }\n    });\n  }\n});\n\n/**\n * Hides the given gltf part when a game event occurs.\n */\nAFRAME.registerComponent(\"hide-part-on-game-event\", {\n  multiple: true,\n  schema: {\n    state: {\n      type: \"string\",\n      required: true\n    },\n    parts: {\n      \"default\": []\n    }\n  },\n  init: function init() {\n    var _this6 = this;\n    // var self = this;\n    // this.el.addEventListener('model-loaded', () => {\n    // console.log(this.el.components[\"gltf-model\"].model.getObjectByName(\"apartmentDoor001\"));\n    // var model = this.el.components[\"gltf-model\"].model;\n    // var parts = this.data.parts;\n    // console.log(parts);\n    // for (var i = 0; i < parts.length; i++) {\n    //   var part = model.getObjectByName(parts[i]);\n    //   if (part) {\n    //     // part.visible = false;\n    //   }\n    // }\n    // });\n\n    document.querySelector(\"a-scene\").addEventListener(\"game-notify-event\", function (event) {\n      console.log(_this6.data.parts);\n      console.log(_this6.data.state);\n      if (event.detail.type == _this6.data.state) {\n        console.log(\"Game-notify-event in hide-on-game-event\", event.detail);\n        var model = _this6.el.components[\"gltf-model\"].model;\n        var parts = _this6.data.parts;\n        for (var i = 0; i < parts.length; i++) {\n          var part = model.getObjectByName(parts[i]);\n          if (part) {\n            part.visible = false;\n          }\n        }\n      }\n    });\n  }\n});\n/**\n * Listens for a games state (specified by the state attribute) and then triggers\n * the animation specified by the action attribute.\n * \n */\nAFRAME.registerComponent(\"animate-on-game-event\", {\n  multiple: true,\n  schema: {\n    state: {\n      type: \"string\",\n      required: true\n    },\n    action: {\n      type: \"string\",\n      required: true\n    }\n    // target: {type: \"selector\", required: true},\n  },\n  init: function init() {\n    var _this7 = this;\n    console.log(\"event = \", this.data.state, \" and action = \", this.data.action);\n    // Listen on the scene for game state updates.\n    document.querySelector(\"a-scene\").addEventListener(\"game-notify-event\", function (event) {\n      // console.log(\"Listening for game state event\", event.detail);\n      if (event.detail.type == _this7.data.state) {\n        console.log(\"Animation on game event triggered by event\", event.detail);\n        _this7.el.setAttribute(\"animation-mixer\", {\n          \"clip\": _this7.data.action,\n          \"loop\": \"once\",\n          \"clampWhenFinished\": \"true\"\n        });\n        // this.data.target.emit(this.data.action);\n      }\n      // });\n      console.log(\"Animation on game event triggered by event \".concat(JSON.stringify(event.detail)));\n      // this.el.addEventListener(\"game-state-updated\", (event) => {\n    });\n  }\n});\nAFRAME.registerComponent(\"game-state\", {\n  schema: {\n    name: {\n      type: \"string\",\n      required: true\n    },\n    type: {\n      type: \"string\",\n      oneOf: [\"room\", \"puzzle\"],\n      required: true\n    },\n    room: {\n      type: \"string\",\n      \"default\": \"\"\n    },\n    onDone: {\n      type: \"array\",\n      \"default\": []\n    }\n  },\n  init: function init() {\n    if (this.data.type == \"room\") {\n      // this.system = this.el.sceneEl.systems[\"game-state-machine\"];\n      this.system.addRoom(this.data.name, this.el, this.data.onDone);\n    }\n    ;\n    if (this.data.type == \"puzzle\") {\n      // this.system = this.el.sceneEl.systems[\"game-state-machine\"];\n      this.system.addPuzzle(this.data.room, this.data.name, this.el);\n    }\n    ;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTk5OS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7O0FBRUE7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2FmcmFtZS9nYW1lLXN0YXRlLW1hY2hpbmUuanM/NWNkMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQUZSQU1FICovXG5cbmltcG9ydCB7Y3JlYXRlTWFjaGluZSwgY3JlYXRlQWN0b3J9IGZyb20gJ3hzdGF0ZSc7XG5cbmltcG9ydCBiYXNlR2FtZUxvb3AgZnJvbSBcIi4vYmFzZS1nYW1lLWxvb3AuanNvblwiO1xuXG4vLyBFeGFtcGxlIGNvbXBsZXRlIGdhbWUgc3RhdGUgbWFjaGluZS5cbmNvbnN0IHNhbXBsZU1hY2hpbmUgPSBjcmVhdGVNYWNoaW5lKHtcbiAgICAvKiogQHhzdGF0ZS1sYXlvdXQgTjRJZ3BnSmc1bURPSUM1UlFJWUZzd0dVQXVMdGdGa1VCakFDd0VzQTdNQU9sbHdDZHNxb0JpQUd3SHNVSklCdEFBd0JkUktBQU9uV09XYWRLb2tBQTlFQVJnQ3NBWmhvQ0E3QUJZQVRPb0VCT0FhdDNydHg5UUJvUUFUeFVDQWJBQTRhRzFRSU92WHkxMTdPQUw1QmRxZ1lPSGlFSkJUVU5Bd0FycFNVTEt4aUtBbXdZSUlpU0NBU1VqSnllVW9JeXM2Nk5HNit5dVVDNnZxcTJyNTJqZ2o2QXNvMDJ1cXF6djI2emgzR3FyNGhZZWhZdVBoRVpGUzBpY21wWUpRUU9mSUYwdVN5OHFXcStxMkkrc29XV3JXNkF0NWV4bXJqSU9GVFViT3hDMGtwbEZBMEFFWU01R0FBWnFrSUxKYVBRb2pRSHBFWmpGNXZFM2l4dnI4QVN4MW5sTmtWZG9nLU5vUEFObkQwWE1aWEM1RGdnS3ZwdWhvLUFKWExwdEc1MU1vN3BEcHRFNW5GRnU5UGo4LW9DUG9qZVN3QUFyc0ZEMk5JWkxLbzhTU0xZN0VxSVhUR0hIMWZSREliNlB4R2JTazdUS0FUZEt6N1ducUF4cTNUTXlaUXRrdk9GTGZrODVFT3BGOHFBaXNXc0ZacllRYldVWWhVSUpVcWhycS1TYTVUYTBuT1dvMFpTYTh6MGtZalZ6QlVMM0syczU2d3prSXgydWdWT3QyU3lDc0Jod0JJWWFYNVAzYllxZ1VwQnJRaHRWaHJVNktQT0EwakM3cVluT2E2TlMwUlRNd2pudy1rTVRpY05ES1ZqQXVKZy1BUWpOUFVldmUyZlNmVDVSVjlHMXpGbEt5YVZ6R1FiN1pxalhRV0tNR1NtV2VtWFRxTlZNVFllcjlucnJueEtjenVpY2RnQUc1QWlDZENzc3ViN1FoK2RwZmx1djZ3UCtRRWZMdU5ieXZXS2lxREd4ajRyb0dFbmxlLVlkaFN1aHFQb3pRNGFvU2I2RU9qeVFiYU9ZVGorWFR3WUJDSmlBa0FCZTdIc0dBWFJKTXhBRWxteG5IY1V4Q0g4RDZhSW9YV2lncUNjWFRhTm94eWpMNHJoNkxxbHcwSVkyZ1lSY3pnTklZMUhXbG1ZNGJ0KzI1LWl4LUpDVnhZQVVueFlrUUdrSEUyUlMtSGlia01xRlB1QWJuUEppbHFDcHFtNktTS1lHdVl2VCtQMkxqYVBVaGtqbEI5R2JveEZtSVo4MW5jWm85bUFZSnprWlNsN20rbDVxRXlXVWNtR2twZ1ZxUTRpQWFNWU5EV0hVbHhXQVlHaHhlK2RIamtsMDc2SE9JR0xyUUxMdGRtblZtV2craklVVjBtbExVdmdlTnBlbDZub3loR3FTSnpxSm9qSjZJeXA0WE5vYlcwY05wbXdhNUNIQVF1WUdEUWRKa3dUK0oyV1ZBRTF5bE5pQ21NNFZTNkFFYXErQlVTcXVLdE9FVXNxS2s5S29UU2RPbyswMm9kTjNkU2xyRzVUeE5CWlFKam5wWWpibmVoNTFhVFFlR2h2VGhqSmVQb1o0cG45MVZsRXFCckVoR09qOWw0eWhZWkR4bWZnaXgxdzFaQ04yWlFHTk9jSnRuNVpqaFZQYmo2ajR4b2FnQ01ULWFrNnQtWmRQcWkxNmFMeGpHSnFUTnJ0QnJPM2V6YVVJNWwzTU9iek5tYUJqajMrbWhDQjR6UUJNUzFMb3h1S3Q2MEdrcSt3cTZNNGI5T3JDVWpiQjZpOWVkNEtYVkQxMWE5TzZobTk1RnZIQlU5WDFCWTFqNkNyK3EyT1RhMGJjdGRJbnI0cEZxMm1RZk01ckRGaHpyLXVnaGRLNVhTelJkb0NicDFJUkpubkN6NTJmMWZTbmJOR0dGVHRxbkFPdDhEdlJneEdYc2RVZFA2MS1kTkJvN3hCdlphakNPaWJQRWZGZE5HRVVzMEVzcTNwV25PUDlwZzBOVDJwMDUwak41eFh3ZFYxMU5jNjVQbk5JelBLTkc5eGQwbzB2ejFsS3YzUitOY1dFTkpZTytwM0xXTU9obHBLMmNDclhPcjRhTG4wTHBmY2VxVWI1ODMxanpOR2NDQ3FTUnhqNUQrNjl2NWJ6LW83SXcxc1JpSjJUQjdGODZZSUxRTVNqUVhnZVlFUTBKZE1LVVU0cDBpWkd5QTNiR1RjbzRmVTBQVUx3b3hlZ3EzVU5ZVmFSTVBBbml3clVhTVY1UmJEMmhuUXNBdEQrVDBNRkI4ZDA0b3ZTdndQTVRWd1BEZWhtQjBSUmF3d2llNlMzcXIySTBQUmFqSEZrU0hKUkNpR0YyTVVVV1Zoamt5eXdBckd3ckdlNWw1SEc0VTJQaEJqQkhHTGFDY2ZZM1J5UXBuMUpMVUdOamFBc0t5SzQ4c2xaMkhlTGZ1VVNvMVEtQjFBYUUwRm81TVJoaFFzTGhLSytKSmF4TW5zV1J5R2lVbFNRUEdvREpLbEpHcWx5V1ROb2ZnYUQ2UnVEU1F3YW9NNGhEVEpRVGd2QjRCNUh6bXVJVzVzU29BRnAtNXRCbVZvUjhpekZrbkNvcWZDaEJjd1JNQllCTXlPSlVEQ3JSY080R0tSZzFDOUI3Q1ljcGlVZGsrUGFNVFRTLWh0SW1GVWswVThyU1ZBbmx4TFVCU1BSbFEtVldaQW95R3NxRVVIb05jdCtqSTNySEdlVTg3U0sxOGxLbXRoVUg1bllMaE5FdVNOSnhZS3RIV0h1ZENva3NLUmlrbjJHdkw2dVMxUTBuV3VpMHlUaUN5dWpVVmlnTXBvdWhRc2VmaWw1cWgxSUdoMEJoVUpSTUl3V2pXVkFndVZDYVZPS0ZKVWhsRnRveWFENk0rUG9jWUFZcHphREZWUUhUcFl1eFZyU0Q2Vkt2eWlvY1ZBQUFvcXNTVkpWcFc0amxkR1ltK3dsV0lHakZ5b01iZ0tqV0FCanEwT000VFdsRlVqaURRQ2tLSkRHVkRrMGtwRTNxK0F1TDRQb1JnMVFRMEZZQzcybzl6SVl3OVNvSVlxcnJBbmwtcWVTVzJrb3dVWDNyMEZNcDRSakxUVks2NnVDOVVwSm9RS3JWVlBydEpZVVRqMFJvcEpSYVZBNkdBd1JLWk5TdUgrZVFvVlFLZmJKWDR2RFBteWhLMEJvOFBlUDFEYkEzazJqRjBBeEJhWGJGcklXTXVOTU00SjExMWlPdStpYjBHY0pLdnFZNEU3Zlgxb0RVMjhtTVZuWm1IRmpveFNFRGUyeHBIdXU4dHc2Ykxsc2dKV2lNTVppMkNMMUluUGhVWVZheGxHTTBlby1nTEJYbExaZkY5SE0rYjZESFQwWTlkYi1XTm81UmV4U3NaaUxkdFVzU0kwVElZM3hTZlc2bURXNlhJN29jcCt5V1hSYTFUclBXaHRwblp1am5CdUhHZU1MZ29PalJJd2dzanU3RzZUT21veVk4ZmhwRTRVR0RvZzQ1TUFoMVVHSFNJUktLekI3UUkwTld4MEhyNG9JUXpLeWRwN1VPa2h3dFI0aGg2VENnMDZCeDJDWEdVSGtkbnBSbzlOSHRNenJhT1lMbGJzYzVCbHc2WndkbTd1TjVWNHh3LWpLaEdTVkU2TXRRbWtzS2kwaUpiMmZleHBqaXFqOEQyMWRSSHE3d2IzWDU5b0dHV1hYR2VYQ2tKMFZyWjBtYUgyQ29JRDNPd3g4Nmt1cGtzRFRSaVR2aWJ0b3RTTC1TOEIwdDJNVTlBbUdJb3BnRmhHNUZKWjFwV2hvQm9Nc3d2WmF0ZXBocENRcVN3bFlGZFo5aFVEdEs1NXFlLVczQzR0WlZsd2xKaUtSQ0pHRzRUVkViWEFsYkdtcCtlbG1VYVZ1SXBDaDVtV0NYMFpVSlRlcVlETlJQa1VvZDUrcjZSSUMwclNxcUxCZzlJQkRqRTBDVElTUHAxVHZVMElSaDdHU3ZlTzNCNWI3Z2h0c3V5K2hJWTNScjJiVjJ3WWZEWFhsTVgxR205MkRaSGtZZnBTN3NoczVSVnZYWkd3QWpDbWxIbDlFR0FGdm8wT2gwRTZmcDlrbk55WXJ1RmxkR1RzRE5zUEdGbGsxeVdXckdpcXc2QUs3SGxjWUY0NWg4Yk9IRlBodEk3S01UQ2tKaFJZbUQtYWVJZVNucGRVTFppejBqZVVpY1FITytUaEg2M2J0bENkbFVMZWFwdEtiWGk3Ti10OGFqdUc2ODJBVkJwdU9kdnk1MVVWV2ZZbFFNNXRkYnhPMXR5ajdETVBWK28wYXBlVVBtelhUOTJpUENERlZvV3NCQVdEbjRqeXdwWHdMZ2l2MGtPMTd6OW05NnI1ZjhHbTlYT29lNU5lMjJETnIydk9zUHU2eXAwYWNEdGsrN3FZbk42NWhIdnA0YXNGVk9ZMkZJVGQ4Rk5rK2NlNXV1LWI2em5pbjdUU1ZGNzJucFVHZVRqLVZNWFgzYlJKOXRGN2x4OWszOC1WWXA3N3l2Z2Z1OHV5UGVwam5YZjd1cDdzNzQ2VDVOM2JZemR0cXRZZTgtMFBsZzUrWkRySHplY2N5Nit4NzYyVHo1WGpIN0w1WVJuNnB5eXFvNmd6bzU0VFdLNjd4N1Q3QUZjeGxhMUkrUkNJVWhMNkp5bjZaN1U3TXAwNFZCNlNoSXpickl1N3JvejVHNzh6b0VZSVd6bEMwajd5bUROU3V6K0JtQkM1Y3FhaFhoaTVoamVBMzZMWjZ5Z0dMNnA2NEdRSDRFaEtxNWFEV0NkaktoeGphNng3LTU2NEo1VUVlNUlJVWFkNllGSDQ0SDk3aUgrWUVMOUQ2VDRqaXd2WklGVDZVSEFIRjRhSDBGdUNxcVZhK0JiVGRLRDRoSU5EU1lSNGRCNHdkQ1VxbUVVSHlLWXBXRWxTZHhVeDZBM0JFaTRHS1NPeHhoYUJGTEVxbmlYcE83a0ZycStINnJVTDJJcUp1aE1LVnFHQTBqN3pCSDg1aEZBNTNZM0Q3d0JEMHo2aFhnTUVjYktLRmdwRmlvU3IrR2xCaTUxVDA0cXdLVGNIUmk3dzRnZ0pGTGNyRXFxQ1ZHcEhWRlZHdWhHcmU0UDQzS05HNGhLaktoNkMtYktEcjd6cUdKZ0pkeEdCOUhlRlFUeExFNWpGdno3TDVKQ0o1cGRKMGo5RDloNmpsSmVpYkcrYVA0VXhiWU15UGhVakVLZ3hCcjhxYVRWQTlnLXdYYjlKQkJBQSAqL1xuICAgIGlkOiAnZ2FtZVN0YXRlTWFjaGluZScsXG4gICAgaW5pdGlhbDogJ3N0YXJ0aW5nJyxcbiAgICBzdGF0ZXM6IHtcbiAgICAgICAgc3RhcnRpbmc6IHtcbiAgICAgICAgICAgIGlkOiAnc3RhcnRpbmcnLFxuICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICBcImxvYWRlZFwiOiBcInJ1bm5pbmdcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBydW5uaW5nOiB7XG4gICAgICAgICAgICBpbml0aWFsOiBcImJyaWVmaW5nXCIsXG4gICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgIFwicGF1c2VcIjogXCJwYXVzZWRcIixcbiAgICAgICAgICAgICAgICBcImVuZFwiOiBcImVuZGVkXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICBoaXN0OiB7IFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaGlzdG9yeScsXG4gICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6ICdkZWVwJywgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnJpZWZpbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdicmllZmluZycsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICdicmllZmluZ1BsYXknLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyaWVmaW5nUGxheToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGF1c2VcIjogXCJicmllZmluZ1BhdXNlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuZFwiOiBcImJyaWVmaW5nRW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJpZWZpbmdQYXVzZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlc3VtZVwiOiBcImJyaWVmaW5nUGxheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBicmllZmluZ0VuZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJyb29tMVwiLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgXG4gICAgICAgICAgICAgICAgcm9vbTE6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdyb29tMScsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw6IFwic29sdmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBvbkRvbmU6ICdyb29tMicsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmluZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3BhcmFsbGVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRvbmU6IFwic29sdmVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1enpsZTE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICd1bnNvbHZlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVuc29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHV6emxlMS5zb2x2ZWRcIjogXCJzb2x2ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHV6emxlMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogJ3Vuc29sdmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidW5zb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwdXp6bGUyLnNvbHZlZFwiOiBcInNvbHZlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXp6bGUzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiAndW5zb2x2ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1bnNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB1enpsZTMuc29sdmVkXCI6IFwic29sdmVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZpbmFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByb29tMjoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3Jvb20yJyxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogXCJzb2x2aW5nXCIsXG4gICAgICAgICAgICAgICAgICAgIG9uRG9uZTogJ3Jvb20zJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2aW5nXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGFyYWxsZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRG9uZTogXCJzb2x2ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHV6emxlMToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogJ3Vuc29sdmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidW5zb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwdXp6bGUxLnNvbHZlZFwiOiBcInNvbHZlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXp6bGUyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiAndW5zb2x2ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1bnNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB1enpsZTIuc29sdmVkXCI6IFwic29sdmVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZpbmFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1enpsZTM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICd1bnNvbHZlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVuc29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHV6emxlMy5zb2x2ZWRcIjogXCJzb2x2ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJvb20zOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAncm9vbTMnLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiBcInNvbHZpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgb25Eb25lOiAnZGVicmllZmluZycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmluZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3BhcmFsbGVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRvbmU6IFwic29sdmVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1enpsZTE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICd1bnNvbHZlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVuc29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHV6emxlMS5zb2x2ZWRcIjogXCJzb2x2ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHV6emxlMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogJ3Vuc29sdmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidW5zb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwdXp6bGUyLnNvbHZlZFwiOiBcInNvbHZlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXp6bGUzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiAndW5zb2x2ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1bnNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB1enpsZTMuc29sdmVkXCI6IFwic29sdmVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZpbmFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWJyaWVmaW5nOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnZGVicmllZmluZycsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaW5hbCcsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICdkZWJyaWVmaW5nUGxheScsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVicmllZmluZ1BsYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhdXNlXCI6IFwiZGVicmllZmluZ1BhdXNlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuZFwiOiBcImRlYnJpZWZpbmdFbmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJyaWVmaW5nUGF1c2VkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZXN1bWVcIjogXCJkZWJyaWVmaW5nUGxheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJyaWVmaW5nRW5kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSwgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwYXVzZWQ6IHtcbiAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgXCJyZXN1bWVcIjogXCJydW5uaW5nLmhpc3RcIixcbiAgICAgICAgICAgICAgICBcImVuZFwiOiBcImVuZGVkXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW5kZWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogQSBzeXN0ZW0gZm9yIG1hbmFnaW5nIHRoZSBnbG9iYWwgZ2FtZSBzdGF0ZSBtYWNoaW5lLlxuICogSWYgeW91IGFkZCBhbnkgYWN0aW9ucyB0aGF0IHRoZSBnYW1lIHN0YXRlcyByZWx5IG9uLCB5b3UgbXVzdCBhZGQgdGhlbSB1c2luZyBcImFkZEFjdGlvblwiIHRvIHRoZSBzeXN0ZW1cbiAqIGJlZm9yZSBydW5uaW5nIFwic3RhcnQoKVwiLlxuICovXG5BRlJBTUUucmVnaXN0ZXJTeXN0ZW0oXCJnYW1lLXN0YXRlXCIsIHtcbiAgICBzY2hlbWE6IHtcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5yb29tRWxlbWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5wdXp6bGVFbGVtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmFjdGlvbnMgPSB7fTtcbiAgICAgICAgLy8gdGhpcy5jb250ZXh0ID0ge307XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlTWFjaGluZURlZmluaXRpb24gPSB7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubWFuYWdlciA9IG51bGw7XG4gICAgfSxcbiAgICBwYXVzZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBOTyBPUCBmb3Igbm93LlxuICAgIH0sXG4gICAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBOTyBPUCBmb3Igbm93LlxuICAgIH0sXG4gICAgYWRkQWN0aW9uOiBmdW5jdGlvbihhY3Rpb25OYW1lLCBhY3Rpb25Gbikge1xuICAgICAgICAvLyBBZGQgYW4gYWN0aW9uIHRvIHRoZSBnYW1lIHN0YXRlIG1hY2hpbmUuXG4gICAgICAgIC8vIHRoaXMuYWN0aW9ucy5wdXNoKHtcIm5hbWVcIjogYWN0aW9uTmFtZSwgXCJmblwiOiBhY3Rpb25Gbn0pO1xuICAgICAgICB0aGlzLmFjdGlvbnNbYWN0aW9uTmFtZV0gPSBhY3Rpb25GbjtcbiAgICB9LFxuICAgIGFkZEFjdGlvbnM6IGZ1bmN0aW9uKGFjdGlvbnMpIHtcbiAgICAgICAgLy8gQWRkIG11bHRpcGxlIGFjdGlvbnMgdG8gdGhlIGdhbWUgc3RhdGUgbWFjaGluZS5cbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhY3Rpb25zKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAgOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hZGRBY3Rpb24oa2V5c1tpXSwgYWN0aW9uc1trZXlzW2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gLy8gQWRkIGFuIGFjdGlvbiB0byB0aGUgZ2FtZSBzdGF0ZSBtYWNoaW5lLlxuICAgICAgICAvLyAvLyB0aGlzLmFjdGlvbnMucHVzaCh7XCJuYW1lXCI6IGFjdGlvbk5hbWUsIFwiZm5cIjogYWN0aW9uRm59KTtcbiAgICAgICAgLy8gdGhpcy5nYW1lU3RhdGVNYWNoaW5lLmFjdGlvbnNbYWN0aW9uTmFtZV0gPSBhY3Rpb25GbjtcbiAgICB9LFxuICAgIGFkZFJvb206IGZ1bmN0aW9uKHJvb21OYW1lLCByb29tRWxlbWVudCwgYWN0aW9ucykge1xuICAgICAgICAvLyBBZGQgYSByb29tIHRvIHRoZSBzdGF0ZSBtYWNoaW5lLlxuICAgICAgICAvLyBUaGlzIGVmZmVjdGl2ZWx5IGFkZHMgYSBzdGF0ZSB0byB0aGUgZ2FtZSBzdGF0ZSBtYWNoaW5lIHdoaWNoIGlzIGRlZmluZWQgaW4gb3JkZXIgYnkgdGhlIGluZGV4LlxuICAgICAgICB0aGlzLnJvb21FbGVtZW50cy5wdXNoKHtcIm5hbWVcIjogcm9vbU5hbWUsIFwiZWxcIjogcm9vbUVsZW1lbnQsIFwib25Eb25lXCI6IGFjdGlvbnN9KTtcbiAgICB9LFxuICAgIGFkZFB1enpsZTogZnVuY3Rpb24ocm9vbU5hbWUsIHB1enpsZU5hbWUsIHB1enpsZUVsZW1lbnQsIGFjdGlvbnMpIHtcbiAgICAgICAgLy8gQWRkIGEgcHV6emxlIHRvIGEgcm9vbSBpbiB0aGUgc3RhdGUgbWFjaGluZS5cbiAgICAgICAgLy8gVGhpcyBlZmZlY3RpdmVseSBhZGRzIGEgc3RhdGUgdG8gdGhlIGdhbWUgc3RhdGUgbWFjaGluZSB3aGljaCBpcyBkZWZpbmVkIGluIG9yZGVyIGJ5IHRoZSBpbmRleC5cbiAgICAgICAgLy8gdGhpcy5nYW1lU3RhdGVNYWNoaW5lRGVmaW5pdGlvbltyb29tTmFtZV0uc3RhdGVzLnNvbHZpbmcuc3RhdGVzW3B1enpsZU5hbWVdID0ge1xuICAgICAgICAvLyAgICAgXCJpZFwiOiBwdXp6bGVOYW1lLFxuICAgICAgICAvLyAgICAgXCJpbml0aWFsXCI6IFwidW5zb2x2ZWRcIixcbiAgICAgICAgLy8gICAgIFwic3RhdGVzXCI6IHtcbiAgICAgICAgLy8gICAgICAgICBcInVuc29sdmVkXCI6IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgXCJvblwiOiB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBbYCR7cHV6emxlTmFtZX0uc29sdmVkYF06IFwic29sdmVkXCJcbiAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgIH0sXG4gICAgICAgIC8vICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAvLyAgICAgICAgICAgICBcInR5cGVcIjogXCJmaW5hbFwiXG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9XG4gICAgICAgIHRoaXMucHV6emxlRWxlbWVudHMucHVzaCh7XCJyb29tXCI6IHJvb21OYW1lLCBcIm5hbWVcIjogcHV6emxlTmFtZSwgXCJlbFwiOiBwdXp6bGVFbGVtZW50LCBcImFjdGlvbnNcIjogYWN0aW9uc30pO1xuICAgIH0sXG4gICAgc3RhcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBnYW1lIHN0YXRlIG1hY2hpbmUgYmFzZWQgb24gdGhlIGJhc2VHYW1lTG9vcC5cbiAgICAgICAgLy8gaWYgKCF0aGlzLm1hbmFnZXIpIHtcbiAgICAgICAgLy8gICAgIHRocm93IG5ldyBFcnJvcihcIkEgZ2FtZSBzdGF0ZSBtYW5hZ2VyIG11c3QgYmUgZGVmaW5lZCBpbiB0aGUgc2NlbmUuXCIpO1xuICAgICAgICAvLyB9XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlTWFjaGluZSA9IHsuLi5iYXNlR2FtZUxvb3B9O1xuICAgICAgICAvLyBCdWlsZCB0aGUgZ2FtZSBzdGF0ZSBtYWNoaW5lIGRlZmluaXRpb24gZnJvbSB0aGUgcm9vbSBlbGVtZW50cy5cbiAgICAgICAgdGhpcy5fYnVpbGRSb29tRWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5fYnVpbGRQdXp6bGVFbGVtZW50cygpO1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZU1hY2hpbmUuc3RhdGVzLnJ1bm5pbmcuc3RhdGVzID0gey4uLnRoaXMuZ2FtZVN0YXRlTWFjaGluZS5zdGF0ZXMucnVubmluZy5zdGF0ZXMsIC4uLnRoaXMuZ2FtZVN0YXRlTWFjaGluZURlZmluaXRpb259O1xuICAgICAgICAvLyBDcmVhdGUgYW4gYWN0b3IgZnJvbSB0aGUgc3RhdGUgbWFjaGluZSBkZWZpbml0aW9uLlxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBjcmVhdGVBY3RvcihjcmVhdGVNYWNoaW5lKHRoaXMuZ2FtZVN0YXRlTWFjaGluZSwge1xuICAgICAgICAgICAgYWN0aW9uczogdGhpcy5hY3Rpb25zXG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gQ3JlYXRlIHN1YnNjcmlwdGlvbnMgdGhhdCBhbGxvdyB1cGRhdGVzIHdoZW4gZ2FtZSBzdGF0ZSBtYWNoaW5lIHVwZGF0ZXMuXG4gICAgICAgIHRoaXMuc2VydmljZS5zdWJzY3JpYmUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkdhbWUgU3RhdGUgTWFjaGluZSBVcGRhdGVkXCIsIHN0YXRlLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZWwuZW1pdChcImdhbWUtc3RhdGUtdXBkYXRlZFwiLCBzdGF0ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lLXN0YXRlLWV2ZW50XCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlLnNlbmQoe1widHlwZVwiOiBldmVudC5kZXRhaWx9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VydmljZS5zdGFydCgpO1xuICAgIH0sXG4gICAgX2J1aWxkUm9vbUVsZW1lbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gRm9yIGVhY2ggcm9vbSBlbGVtZW50LCBhZGQgYSBzdGF0ZSB0byB0aGUgZ2FtZSBzdGF0ZSBtYWNoaW5lLlxuICAgICAgICBjb25zb2xlLmxvZyhcIlJvb20gRWxlbWVudHNcIiwgdGhpcy5yb29tRWxlbWVudHMpO1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZU1hY2hpbmUuc3RhdGVzLnJ1bm5pbmcuc3RhdGVzLmJyaWVmaW5nLm9uRG9uZSA9IHtcbiAgICAgICAgICAgIHRhcmdldDogdGhpcy5yb29tRWxlbWVudHNbMF0ubmFtZVxuICAgICAgICAgICAgLy8gYWN0aW9uczogKHtjb250ZXh0LCBldmVudH0pID0+IHtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhgY3R4ID0gJHtKU09OLnN0cmluZ2lmeShjb250ZXh0KX0gYW5kIGV2dCA9ICR7SlNPTi5zdHJpbmdpZnkoZXZlbnQpfWApO1xuICAgICAgICAgICAgLy8gICAgIHRoaXMuZWwuZW1pdChcImdhbWUtbm90aWZ5LWV2ZW50XCIsIGV2ZW50KVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvb21FbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5nYW1lU3RhdGVNYWNoaW5lRGVmaW5pdGlvblt0aGlzLnJvb21FbGVtZW50c1tpXS5uYW1lXSA9IHtcbiAgICAgICAgICAgICAgICBcImlkXCI6IHRoaXMucm9vbUVsZW1lbnRzW2ldLm5hbWUsXG4gICAgICAgICAgICAgICAgXCJpbml0aWFsXCI6IFwic29sdmluZ1wiLFxuICAgICAgICAgICAgICAgIFwib25Eb25lXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJ0YXJnZXRcIjogdGhpcy5yb29tRWxlbWVudHNbaSsxXSA/IHRoaXMucm9vbUVsZW1lbnRzW2krMV0ubmFtZSA6IFwiZGVicmllZmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBcImFjdGlvbnNcIjogdGhpcy5yb29tRWxlbWVudHNbaV0ub25Eb25lIHx8IFwiXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic3RhdGVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcInNvbHZpbmdcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwicGFyYWxsZWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib25Eb25lXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRhcmdldFwiOiBcInNvbHZlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJhY3Rpb25zXCI6ICh7Y29udGV4dCwgZXZlbnR9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGBjdHggPSAke0pTT04uc3RyaW5naWZ5KGNvbnRleHQpfSBhbmQgZXZ0ID0gJHtKU09OLnN0cmluZ2lmeShldmVudCl9YCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5lbC5lbWl0KFwiZ2FtZS1ub3RpZnktZXZlbnRcIiwgZXZlbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RhdGVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2J1aWxkUHV6emxlRWxlbWVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHV6emxlRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YXRlTWFjaGluZURlZmluaXRpb25bdGhpcy5wdXp6bGVFbGVtZW50c1tpXS5yb29tXS5zdGF0ZXMuc29sdmluZy5zdGF0ZXNbdGhpcy5wdXp6bGVFbGVtZW50c1tpXS5uYW1lXSA9IHtcbiAgICAgICAgICAgICAgICBcImluaXRpYWxcIjogXCJ1bnNvbHZlZFwiLFxuICAgICAgICAgICAgICAgIFwic3RhdGVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJ1bnNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9uXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYCR7dGhpcy5wdXp6bGVFbGVtZW50c1tpXS5uYW1lfS5zb2x2ZWRgXTogXCJzb2x2ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwicmVtb3ZlLW9uLWdhbWUtZXZlbnRcIiwge1xuICAgIHNjaGVtYToge1xuICAgICAgICBzdGF0ZToge3R5cGU6IFwic3RyaW5nXCIsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lLW5vdGlmeS1ldmVudFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwudHlwZSA9PSB0aGlzLmRhdGEuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KVxuXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJkaXNhYmxlLW1vdmVtZW50LWluLXN0YXRlc1wiLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgICAgIFwic3RhdGVzXCI6IHt0eXBlOiBcImFycmF5XCIsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICB9LCBcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhdGVzIHRvIGRpc2FibGUgbW92ZW1lbnQgaW5cIiwgdGhpcy5kYXRhLnN0YXRlcyk7XG4gICAgICAgIHRoaXMuZWwuc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZS1zdGF0ZS11cGRhdGVkXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuaW5jbHVkZXMoZXZlbnQuZGV0YWlsLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNTdGF0ZSA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwibW90aW9uQ29udHJvbHNcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJtb3Rpb25Db250cm9sc1wiLCBcImVuYWJsZWRcIiwgZmFsc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2aW91c1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwibW90aW9uQ29udHJvbHNcIiwgdGhpcy5wcmV2aW91c1N0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1N0YXRlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJzaG93LWluLXN0YXRlXCIsIHtcbiAgICBzY2hlbWE6IHtcbiAgICAgICAgc3RhdGU6IHt0eXBlOiBcInN0cmluZ1wiLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgICAgIGhpZGVPdGhlcndpc2U6IHt0eXBlOiBcImJvb2xlYW5cIiwgZGVmYXVsdDogZmFsc2V9LFxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVsLnNjZW5lRWwuYWRkRXZlbnRMaXN0ZW5lcihcImdhbWUtc3RhdGUtdXBkYXRlZFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWwsIFwiZ2FtZS1zdGF0ZS11cGRhdGVkIGluIHNob3ctaW4tc3RhdGVcIiwgZXZlbnQuZGV0YWlsLnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwubWF0Y2hlcyh0aGlzLmRhdGEuc3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJ2aXNpYmxlXCIsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuaGlkZU90aGVyd2lzZSAmJiB0aGlzLmVsLmdldEF0dHJpYnV0ZShcInZpc2libGVcIikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShcInZpc2libGVcIiwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwiaGlkZS1pbi1zdGF0ZVwiLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgICAgIHN0YXRlOiB7dHlwZTogXCJzdHJpbmdcIiwgcmVxdWlyZWQ6IHRydWV9LFxuICAgICAgICBzaG93T3RoZXJ3aXNlOiB7dHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlfSxcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lLXN0YXRlLXVwZGF0ZWRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGV0YWlsLm1hdGNoZXModGhpcy5kYXRhLnN0YXRlKSAmJiB0aGlzLmVsLmdldEF0dHJpYnV0ZShcInZpc2libGVcIikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShcInZpc2libGVcIiwgZmFsc2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuc2hvd090aGVyd2lzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwidmlzaWJsZVwiLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogSGlkZXMgdGhlIGdpdmVuIGdsdGYgcGFydCB3aGVuIGEgZ2FtZSBldmVudCBvY2N1cnMuXG4gKi9cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcImhpZGUtcGFydC1vbi1nYW1lLWV2ZW50XCIsIHtcbiAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICBzY2hlbWE6IHtcbiAgICAgICAgc3RhdGU6IHt0eXBlOiBcInN0cmluZ1wiLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgICAgIHBhcnRzOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBbXVxuICAgICAgICB9XG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAvLyB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vZGVsLWxvYWRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZWwuY29tcG9uZW50c1tcImdsdGYtbW9kZWxcIl0ubW9kZWwuZ2V0T2JqZWN0QnlOYW1lKFwiYXBhcnRtZW50RG9vcjAwMVwiKSk7XG4gICAgICAgICAgICAvLyB2YXIgbW9kZWwgPSB0aGlzLmVsLmNvbXBvbmVudHNbXCJnbHRmLW1vZGVsXCJdLm1vZGVsO1xuICAgICAgICAgICAgLy8gdmFyIHBhcnRzID0gdGhpcy5kYXRhLnBhcnRzO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGFydHMpO1xuICAgICAgICAgICAgLy8gZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gICB2YXIgcGFydCA9IG1vZGVsLmdldE9iamVjdEJ5TmFtZShwYXJ0c1tpXSk7XG4gICAgICAgICAgICAvLyAgIGlmIChwYXJ0KSB7XG4gICAgICAgICAgICAvLyAgICAgLy8gcGFydC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImEtc2NlbmVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImdhbWUtbm90aWZ5LWV2ZW50XCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhLnBhcnRzKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YS5zdGF0ZSk7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGV0YWlsLnR5cGUgPT0gdGhpcy5kYXRhLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHYW1lLW5vdGlmeS1ldmVudCBpbiBoaWRlLW9uLWdhbWUtZXZlbnRcIiwgZXZlbnQuZGV0YWlsKTtcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLmVsLmNvbXBvbmVudHNbXCJnbHRmLW1vZGVsXCJdLm1vZGVsO1xuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHRoaXMuZGF0YS5wYXJ0cztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0ID0gbW9kZWwuZ2V0T2JqZWN0QnlOYW1lKHBhcnRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbi8qKlxuICogTGlzdGVucyBmb3IgYSBnYW1lcyBzdGF0ZSAoc3BlY2lmaWVkIGJ5IHRoZSBzdGF0ZSBhdHRyaWJ1dGUpIGFuZCB0aGVuIHRyaWdnZXJzXG4gKiB0aGUgYW5pbWF0aW9uIHNwZWNpZmllZCBieSB0aGUgYWN0aW9uIGF0dHJpYnV0ZS5cbiAqIFxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJhbmltYXRlLW9uLWdhbWUtZXZlbnRcIiwge1xuICAgIG11bHRpcGxlOiB0cnVlLFxuICAgIHNjaGVtYToge1xuICAgICAgICBzdGF0ZToge3R5cGU6IFwic3RyaW5nXCIsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICAgICAgYWN0aW9uOiB7dHlwZTogXCJzdHJpbmdcIiwgcmVxdWlyZWQ6IHRydWV9LFxuICAgICAgICAvLyB0YXJnZXQ6IHt0eXBlOiBcInNlbGVjdG9yXCIsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJldmVudCA9IFwiLCB0aGlzLmRhdGEuc3RhdGUsIFwiIGFuZCBhY3Rpb24gPSBcIiwgdGhpcy5kYXRhLmFjdGlvbik7ICAgICAgICBcbiAgICAgICAgLy8gTGlzdGVuIG9uIHRoZSBzY2VuZSBmb3IgZ2FtZSBzdGF0ZSB1cGRhdGVzLlxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYS1zY2VuZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZS1ub3RpZnktZXZlbnRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkxpc3RlbmluZyBmb3IgZ2FtZSBzdGF0ZSBldmVudFwiLCBldmVudC5kZXRhaWwpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmRldGFpbC50eXBlID09IHRoaXMuZGF0YS5zdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5pbWF0aW9uIG9uIGdhbWUgZXZlbnQgdHJpZ2dlcmVkIGJ5IGV2ZW50XCIsIGV2ZW50LmRldGFpbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoYGFuaW1hdGlvbi1taXhlcmAsIHtcbiAgICAgICAgICAgICAgICAgICAgXCJjbGlwXCI6IHRoaXMuZGF0YS5hY3Rpb24sIFxuICAgICAgICAgICAgICAgICAgICBcImxvb3BcIjogXCJvbmNlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiY2xhbXBXaGVuRmluaXNoZWRcIjogXCJ0cnVlXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmRhdGEudGFyZ2V0LmVtaXQodGhpcy5kYXRhLmFjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEFuaW1hdGlvbiBvbiBnYW1lIGV2ZW50IHRyaWdnZXJlZCBieSBldmVudCAke0pTT04uc3RyaW5naWZ5KChldmVudC5kZXRhaWwpKX1gKTtcbiAgICAgICAgLy8gdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZS1zdGF0ZS11cGRhdGVkXCIsIChldmVudCkgPT4ge1xuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwiZ2FtZS1zdGF0ZVwiLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgICAgIG5hbWU6IHt0eXBlOiBcInN0cmluZ1wiLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgICAgIHR5cGU6IHt0eXBlOiBcInN0cmluZ1wiLCBvbmVPZjogW1wicm9vbVwiLCBcInB1enpsZVwiXSwgcmVxdWlyZWQ6IHRydWV9LFxuICAgICAgICByb29tOiB7dHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJcIn0sXG4gICAgICAgIG9uRG9uZToge3R5cGU6IFwiYXJyYXlcIiwgZGVmYXVsdDogW119LFxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT0gXCJyb29tXCIpIHtcbiAgICAgICAgICAgIC8vIHRoaXMuc3lzdGVtID0gdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXNbXCJnYW1lLXN0YXRlLW1hY2hpbmVcIl07XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5hZGRSb29tKHRoaXMuZGF0YS5uYW1lLCB0aGlzLmVsLCB0aGlzLmRhdGEub25Eb25lKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS50eXBlID09IFwicHV6emxlXCIpIHtcbiAgICAgICAgICAgIC8vIHRoaXMuc3lzdGVtID0gdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXNbXCJnYW1lLXN0YXRlLW1hY2hpbmVcIl07XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5hZGRQdXp6bGUodGhpcy5kYXRhLnJvb20sIHRoaXMuZGF0YS5uYW1lLCB0aGlzLmVsKTtcbiAgICAgICAgfTtcbiAgICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9999\n");

/***/ }),

/***/ 9503:
/*!************************************************************!*\
  !*** ./src/components/aframe/gameComponents/game-clock.js ***!
  \************************************************************/
/***/ (() => {

eval("AFRAME.registerComponent(\"game-clock\", {\n  init: function init() {\n    // var el = this.el;\n    // var timeLeft = 60 * 60;\n    var el = this.el;\n    var that = this;\n    that.running = false;\n    var cb = function cb(evt) {\n      // console.log(evt.detail);\n      if (evt.detail.target.classList.contains(\"toggle-start-button\")) {\n        if (!that.running) {\n          that.running = true;\n          that.start();\n          document.querySelector(\"esc-watch .toggle-start-button .vr-span\").innerText = \"PAUSE\";\n        } else {\n          that.running = false;\n          that.pause();\n          document.querySelector(\"esc-watch .toggle-start-button .vr-span\").innerText = \"START\";\n        }\n        //     console.log(\"Briefing panel clicked\");\n        //     // End the briefing.\n        // el.removeEventListener(\"lit-click\", cb);\n        // el.emit(\"game-state-event\", \"end\");\n      }\n      // el.remove();\n    };\n    this.el.addEventListener(\"lit-click\", AFRAME.utils.throttle(cb, 100, this));\n  },\n  start: function start() {\n    var that = this;\n    this.timeElapsed = this.timeElapsed || 0;\n    this.timer = setInterval(function () {\n      that.timeElapsed += 1000;\n      // console.log(\"timeElapsed = \", that.timeElapsed);\n      document.querySelector(\"esc-watch\").tick({\n        time: new Date(),\n        timeDelta: that.timeElapsed\n      });\n    }, 1000);\n  },\n  pause: function pause() {\n    clearInterval(this.timer);\n  }\n  // tick: function(time, timeDelta) {\n});\n// console.log(\"Ticking\");\n// this.el.tick(time, timeDelta);\n//   this.tickTime = this.tickTime || 0;\n//   this.tickTime += timeDelta;\n//   if (this.tickTime > 1000) {\n//     console.log(\"Tick time over 1s\");\n//     this.tickTime = 0;\n//     this.el.sceneEl.emit(\"tick\", {time: time, timeDelta: timeDelta});\n//   }\n// }\n// })//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTUwMy5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50IiwiaW5pdCIsImVsIiwidGhhdCIsInJ1bm5pbmciLCJjYiIsImV2dCIsImRldGFpbCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic3RhcnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lclRleHQiLCJwYXVzZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1dGlscyIsInRocm90dGxlIiwidGltZUVsYXBzZWQiLCJ0aW1lciIsInNldEludGVydmFsIiwidGljayIsInRpbWUiLCJEYXRlIiwidGltZURlbHRhIiwiY2xlYXJJbnRlcnZhbCJdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvZ2FtZUNvbXBvbmVudHMvZ2FtZS1jbG9jay5qcz83NWFkIl0sInNvdXJjZXNDb250ZW50IjpbIkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcImdhbWUtY2xvY2tcIiwge1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgIC8vIHZhciB0aW1lTGVmdCA9IDYwICogNjA7XG4gICAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhhdC5ydW5uaW5nID0gZmFsc2U7XG4gICAgICB2YXIgY2IgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZXZ0LmRldGFpbCk7XG4gICAgICAgIGlmIChldnQuZGV0YWlsLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0b2dnbGUtc3RhcnQtYnV0dG9uXCIpKSB7XG4gICAgICAgICAgICBpZiAoIXRoYXQucnVubmluZykge1xuICAgICAgICAgICAgICAgIHRoYXQucnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhhdC5zdGFydCgpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJlc2Mtd2F0Y2ggLnRvZ2dsZS1zdGFydC1idXR0b24gLnZyLXNwYW5cIikuaW5uZXJUZXh0ID0gXCJQQVVTRVwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGF0LnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGF0LnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImVzYy13YXRjaCAudG9nZ2xlLXN0YXJ0LWJ1dHRvbiAudnItc3BhblwiKS5pbm5lclRleHQgPSBcIlNUQVJUXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIkJyaWVmaW5nIHBhbmVsIGNsaWNrZWRcIik7XG4gICAgICAgIC8vICAgICAvLyBFbmQgdGhlIGJyaWVmaW5nLlxuICAgICAgICAgICAgLy8gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxpdC1jbGlja1wiLCBjYik7XG4gICAgICAgICAgICAvLyBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcImVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlbC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImxpdC1jbGlja1wiLCBBRlJBTUUudXRpbHMudGhyb3R0bGUoY2IsIDEwMCwgdGhpcykpO1xuICAgIH0sXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIHRoaXMudGltZUVsYXBzZWQgPSB0aGlzLnRpbWVFbGFwc2VkIHx8IDA7XG4gICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aGF0LnRpbWVFbGFwc2VkICs9IDEwMDA7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0aW1lRWxhcHNlZCA9IFwiLCB0aGF0LnRpbWVFbGFwc2VkKTtcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZXNjLXdhdGNoXCIpLnRpY2soe3RpbWU6IG5ldyBEYXRlKCksIHRpbWVEZWx0YTogdGhhdC50aW1lRWxhcHNlZH0pO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICB9LFxuICAgIHBhdXNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTtcbiAgICB9XG4gICAgLy8gdGljazogZnVuY3Rpb24odGltZSwgdGltZURlbHRhKSB7XG4gICAgfSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIlRpY2tpbmdcIik7XG4gICAgICAvLyB0aGlzLmVsLnRpY2sodGltZSwgdGltZURlbHRhKTtcbiAgICAvLyAgIHRoaXMudGlja1RpbWUgPSB0aGlzLnRpY2tUaW1lIHx8IDA7XG4gICAgLy8gICB0aGlzLnRpY2tUaW1lICs9IHRpbWVEZWx0YTtcbiAgICAvLyAgIGlmICh0aGlzLnRpY2tUaW1lID4gMTAwMCkge1xuICAgIC8vICAgICBjb25zb2xlLmxvZyhcIlRpY2sgdGltZSBvdmVyIDFzXCIpO1xuICAgIC8vICAgICB0aGlzLnRpY2tUaW1lID0gMDtcbiAgICAvLyAgICAgdGhpcy5lbC5zY2VuZUVsLmVtaXQoXCJ0aWNrXCIsIHt0aW1lOiB0aW1lLCB0aW1lRGVsdGE6IHRpbWVEZWx0YX0pO1xuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgLy8gfSlcbiJdLCJtYXBwaW5ncyI6IkFBQUFBLE1BQU0sQ0FBQ0MsaUJBQWlCLENBQUMsWUFBWSxFQUFFO0VBQ25DQyxJQUFJLEVBQUUsU0FBQUEsS0FBQSxFQUFXO0lBQ2Y7SUFDQTtJQUNBLElBQUlDLEVBQUUsR0FBRyxJQUFJLENBQUNBLEVBQUU7SUFDaEIsSUFBSUMsSUFBSSxHQUFHLElBQUk7SUFDZkEsSUFBSSxDQUFDQyxPQUFPLEdBQUcsS0FBSztJQUNwQixJQUFJQyxFQUFFLEdBQUcsU0FBTEEsRUFBRUEsQ0FBWUMsR0FBRyxFQUFFO01BQ3JCO01BQ0EsSUFBSUEsR0FBRyxDQUFDQyxNQUFNLENBQUNDLE1BQU0sQ0FBQ0MsU0FBUyxDQUFDQyxRQUFRLENBQUMscUJBQXFCLENBQUMsRUFBRTtRQUM3RCxJQUFJLENBQUNQLElBQUksQ0FBQ0MsT0FBTyxFQUFFO1VBQ2ZELElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUk7VUFDbkJELElBQUksQ0FBQ1EsS0FBSyxDQUFDLENBQUM7VUFDWkMsUUFBUSxDQUFDQyxhQUFhLENBQUMseUNBQXlDLENBQUMsQ0FBQ0MsU0FBUyxHQUFHLE9BQU87UUFDekYsQ0FBQyxNQUFNO1VBQ0hYLElBQUksQ0FBQ0MsT0FBTyxHQUFHLEtBQUs7VUFDcEJELElBQUksQ0FBQ1ksS0FBSyxDQUFDLENBQUM7VUFDWkgsUUFBUSxDQUFDQyxhQUFhLENBQUMseUNBQXlDLENBQUMsQ0FBQ0MsU0FBUyxHQUFHLE9BQU87UUFDekY7UUFDSjtRQUNBO1FBQ0k7UUFDQTtNQUNKO01BQ0E7SUFDRixDQUFDO0lBQ0QsSUFBSSxDQUFDWixFQUFFLENBQUNjLGdCQUFnQixDQUFDLFdBQVcsRUFBRWpCLE1BQU0sQ0FBQ2tCLEtBQUssQ0FBQ0MsUUFBUSxDQUFDYixFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO0VBQzdFLENBQUM7RUFDRE0sS0FBSyxFQUFFLFNBQUFBLE1BQUEsRUFBVztJQUNkLElBQUlSLElBQUksR0FBRyxJQUFJO0lBQ2YsSUFBSSxDQUFDZ0IsV0FBVyxHQUFHLElBQUksQ0FBQ0EsV0FBVyxJQUFJLENBQUM7SUFDeEMsSUFBSSxDQUFDQyxLQUFLLEdBQUdDLFdBQVcsQ0FBQyxZQUFXO01BQ2xDbEIsSUFBSSxDQUFDZ0IsV0FBVyxJQUFJLElBQUk7TUFDeEI7TUFDQVAsUUFBUSxDQUFDQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUNTLElBQUksQ0FBQztRQUFDQyxJQUFJLEVBQUUsSUFBSUMsSUFBSSxDQUFDLENBQUM7UUFBRUMsU0FBUyxFQUFFdEIsSUFBSSxDQUFDZ0I7TUFBVyxDQUFDLENBQUM7SUFDM0YsQ0FBQyxFQUFFLElBQUksQ0FBQztFQUNaLENBQUM7RUFDREosS0FBSyxFQUFFLFNBQUFBLE1BQUEsRUFBVztJQUNkVyxhQUFhLENBQUMsSUFBSSxDQUFDTixLQUFLLENBQUM7RUFDN0I7RUFDQTtBQUNBLENBQUMsQ0FBQztBQUNBO0FBQ0E7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0YiLCJpZ25vcmVMaXN0IjpbXX0=\n//# sourceURL=webpack-internal:///9503\n");

/***/ }),

/***/ 9617:
/*!**************************************************************!*\
  !*** ./src/components/aframe/gameComponents/unlock-panel.js ***!
  \**************************************************************/
/***/ (() => {

eval("AFRAME.registerComponent('unlock-panel', {\n  schema: {\n    type: 'string',\n    \"default\": \"\"\n  },\n  init: function init() {\n    console.log(\"This.data = \", this.data);\n    // Get the original element HTML from the lit element panel.\n    var shadowSelector = this.el.getAttribute(\"data-lit-panel-root\");\n    //   console.log(\"Shadow = \", shadowSelector);\n    var elementSelector = this.el.getAttribute(\"data-lit-panel\");\n    //   console.log(\"Element = \", elementSelector);\n    var litContainer;\n    if (shadowSelector) {\n      litContainer = document.querySelector(shadowSelector);\n    } else {\n      litContainer = document.querySelector(elementSelector);\n    }\n    var el = this.el;\n    var that = this;\n    var cb = function cb() {\n      var unlockCode = '';\n      var unlockInputs = litContainer.querySelectorAll('.entry input');\n      unlockInputs.forEach(function (input) {\n        unlockCode += input.value;\n      });\n      if (unlockCode === '12345') {\n        litContainer.querySelector('.info span').innerText = 'Code correct! Room unlocked';\n        document.querySelector('a-scene').emit('unlock-success');\n        unlockInputs.forEach(function (input) {\n          input.disabled = true;\n        });\n        litContainer.querySelector('button.unlock span').innerText = 'UNLOCKED';\n        litContainer.querySelector('button.unlock').classList.add('disabled');\n        litContainer.querySelector('button.unlock').removeEventListener('click', cb);\n        console.log(\"Attempting to raise event = \", that.data);\n        el.emit(\"game-state-event\", that.data);\n      } else {\n        // litContainer.querySelector('a-scene').emit('unlock-fail');\n        litContainer.querySelector('.info span').innerText = 'Incorrect code. Try again.';\n      }\n      litContainer.web2vrComponent.update();\n    };\n    litContainer.querySelector('.unlock').addEventListener('click', AFRAME.utils.throttle(cb, 1000));\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTYxNy5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2NoZW1hIiwidHlwZSIsImluaXQiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsInNoYWRvd1NlbGVjdG9yIiwiZWwiLCJnZXRBdHRyaWJ1dGUiLCJlbGVtZW50U2VsZWN0b3IiLCJsaXRDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0aGF0IiwiY2IiLCJ1bmxvY2tDb2RlIiwidW5sb2NrSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwiaW5uZXJUZXh0IiwiZW1pdCIsImRpc2FibGVkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIndlYjJ2ckNvbXBvbmVudCIsInVwZGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1dGlscyIsInRocm90dGxlIl0sInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2FmcmFtZS9nYW1lQ29tcG9uZW50cy91bmxvY2stcGFuZWwuanM/ZGZkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3VubG9jay1wYW5lbCcsIHtcbiAgICBzY2hlbWE6IHt0eXBlOiAnc3RyaW5nJywgZGVmYXVsdDogXCJcIn0sXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlRoaXMuZGF0YSA9IFwiLCB0aGlzLmRhdGEpO1xuICAgICAgLy8gR2V0IHRoZSBvcmlnaW5hbCBlbGVtZW50IEhUTUwgZnJvbSB0aGUgbGl0IGVsZW1lbnQgcGFuZWwuXG4gICAgICB2YXIgc2hhZG93U2VsZWN0b3IgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShcImRhdGEtbGl0LXBhbmVsLXJvb3RcIik7XG4gICAgLy8gICBjb25zb2xlLmxvZyhcIlNoYWRvdyA9IFwiLCBzaGFkb3dTZWxlY3Rvcik7XG4gICAgICB2YXIgZWxlbWVudFNlbGVjdG9yID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxpdC1wYW5lbFwiKTtcbiAgICAvLyAgIGNvbnNvbGUubG9nKFwiRWxlbWVudCA9IFwiLCBlbGVtZW50U2VsZWN0b3IpO1xuICAgICAgdmFyIGxpdENvbnRhaW5lcjtcbiAgICAgIGlmIChzaGFkb3dTZWxlY3Rvcikge1xuICAgICAgICBsaXRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNoYWRvd1NlbGVjdG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpdENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudFNlbGVjdG9yKTtcbiAgICAgIH1cbiAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgY2IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1bmxvY2tDb2RlID0gJyc7XG4gICAgICAgIHZhciB1bmxvY2tJbnB1dHMgPSBsaXRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmVudHJ5IGlucHV0Jyk7XG4gICAgICAgIHVubG9ja0lucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgIHVubG9ja0NvZGUgKz0gaW5wdXQudmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodW5sb2NrQ29kZSA9PT0gJzEyMzQ1Jykge1xuICAgICAgICAgIGxpdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuaW5mbyBzcGFuJykuaW5uZXJUZXh0ID0gJ0NvZGUgY29ycmVjdCEgUm9vbSB1bmxvY2tlZCc7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYS1zY2VuZScpLmVtaXQoJ3VubG9jay1zdWNjZXNzJyk7XG4gICAgICAgICAgdW5sb2NrSW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgbGl0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi51bmxvY2sgc3BhbicpLmlubmVyVGV4dCA9ICdVTkxPQ0tFRCc7XG4gICAgICAgICAgbGl0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi51bmxvY2snKS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICAgIGxpdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b24udW5sb2NrJykucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjYik7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJBdHRlbXB0aW5nIHRvIHJhaXNlIGV2ZW50ID0gXCIsIHRoYXQuZGF0YSk7XG4gICAgICAgICAgZWwuZW1pdChcImdhbWUtc3RhdGUtZXZlbnRcIiwgdGhhdC5kYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBsaXRDb250YWluZXIucXVlcnlTZWxlY3RvcignYS1zY2VuZScpLmVtaXQoJ3VubG9jay1mYWlsJyk7XG4gICAgICAgICAgICBsaXRDb250YWluZXIucXVlcnlTZWxlY3RvcignLmluZm8gc3BhbicpLmlubmVyVGV4dCA9ICdJbmNvcnJlY3QgY29kZS4gVHJ5IGFnYWluLic7XG4gICAgICAgIH1cbiAgICAgICAgbGl0Q29udGFpbmVyLndlYjJ2ckNvbXBvbmVudC51cGRhdGUoKTtcbiAgICAgIH1cbiAgICAgIGxpdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudW5sb2NrJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBBRlJBTUUudXRpbHMudGhyb3R0bGUoY2IsIDEwMDApKTtcbiAgfVxufSk7Il0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyxjQUFjLEVBQUU7RUFDckNDLE1BQU0sRUFBRTtJQUFDQyxJQUFJLEVBQUUsUUFBUTtJQUFFLFdBQVM7RUFBRSxDQUFDO0VBQ3JDQyxJQUFJLEVBQUUsU0FBQUEsS0FBQSxFQUFZO0lBQ2RDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUNDLElBQUksQ0FBQztJQUN4QztJQUNBLElBQUlDLGNBQWMsR0FBRyxJQUFJLENBQUNDLEVBQUUsQ0FBQ0MsWUFBWSxDQUFDLHFCQUFxQixDQUFDO0lBQ2xFO0lBQ0UsSUFBSUMsZUFBZSxHQUFHLElBQUksQ0FBQ0YsRUFBRSxDQUFDQyxZQUFZLENBQUMsZ0JBQWdCLENBQUM7SUFDOUQ7SUFDRSxJQUFJRSxZQUFZO0lBQ2hCLElBQUlKLGNBQWMsRUFBRTtNQUNsQkksWUFBWSxHQUFHQyxRQUFRLENBQUNDLGFBQWEsQ0FBQ04sY0FBYyxDQUFDO0lBQ3ZELENBQUMsTUFBTTtNQUNMSSxZQUFZLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDSCxlQUFlLENBQUM7SUFDeEQ7SUFDQSxJQUFJRixFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO0lBQ2hCLElBQUlNLElBQUksR0FBRyxJQUFJO0lBQ2YsSUFBSUMsRUFBRSxHQUFHLFNBQUxBLEVBQUVBLENBQUEsRUFBZTtNQUNuQixJQUFJQyxVQUFVLEdBQUcsRUFBRTtNQUNuQixJQUFJQyxZQUFZLEdBQUdOLFlBQVksQ0FBQ08sZ0JBQWdCLENBQUMsY0FBYyxDQUFDO01BQ2hFRCxZQUFZLENBQUNFLE9BQU8sQ0FBQyxVQUFVQyxLQUFLLEVBQUU7UUFDcENKLFVBQVUsSUFBSUksS0FBSyxDQUFDQyxLQUFLO01BQzNCLENBQUMsQ0FBQztNQUNGLElBQUlMLFVBQVUsS0FBSyxPQUFPLEVBQUU7UUFDMUJMLFlBQVksQ0FBQ0UsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDUyxTQUFTLEdBQUcsNkJBQTZCO1FBQ2xGVixRQUFRLENBQUNDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQ1UsSUFBSSxDQUFDLGdCQUFnQixDQUFDO1FBQ3hETixZQUFZLENBQUNFLE9BQU8sQ0FBQyxVQUFVQyxLQUFLLEVBQUU7VUFDcENBLEtBQUssQ0FBQ0ksUUFBUSxHQUFHLElBQUk7UUFDdkIsQ0FBQyxDQUFDO1FBQ0ZiLFlBQVksQ0FBQ0UsYUFBYSxDQUFDLG9CQUFvQixDQUFDLENBQUNTLFNBQVMsR0FBRyxVQUFVO1FBQ3ZFWCxZQUFZLENBQUNFLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQ1ksU0FBUyxDQUFDQyxHQUFHLENBQUMsVUFBVSxDQUFDO1FBQ3JFZixZQUFZLENBQUNFLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQ2MsbUJBQW1CLENBQUMsT0FBTyxFQUFFWixFQUFFLENBQUM7UUFDNUVYLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDhCQUE4QixFQUFFUyxJQUFJLENBQUNSLElBQUksQ0FBQztRQUN0REUsRUFBRSxDQUFDZSxJQUFJLENBQUMsa0JBQWtCLEVBQUVULElBQUksQ0FBQ1IsSUFBSSxDQUFDO01BQ3hDLENBQUMsTUFBTTtRQUNMO1FBQ0VLLFlBQVksQ0FBQ0UsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDUyxTQUFTLEdBQUcsNEJBQTRCO01BQ3JGO01BQ0FYLFlBQVksQ0FBQ2lCLGVBQWUsQ0FBQ0MsTUFBTSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUNEbEIsWUFBWSxDQUFDRSxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUNpQixnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUvQixNQUFNLENBQUNnQyxLQUFLLENBQUNDLFFBQVEsQ0FBQ2pCLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztFQUNwRztBQUNGLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==\n//# sourceURL=webpack-internal:///9617\n");

/***/ }),

/***/ 7113:
/*!********************************************!*\
  !*** ./src/components/aframe/gltf-hide.js ***!
  \********************************************/
/***/ (() => {

eval("AFRAME.registerComponent('gltf-hide', {\n  schema: {\n    parts: {\n      \"default\": []\n    }\n  },\n  init: function init() {\n    var _this = this;\n    this.el.addEventListener('model-loaded', function () {\n      // console.log(this.el.components[\"gltf-model\"].model.getObjectByName(\"apartmentDoor001\"));\n      var model = _this.el.components[\"gltf-model\"].model;\n      var parts = _this.data.parts;\n      console.log(parts);\n      for (var i = 0; i < parts.length; i++) {\n        var part = model.getObjectByName(parts[i]);\n        if (part) {\n          part.visible = false;\n        }\n      }\n    });\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzExMy5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2NoZW1hIiwicGFydHMiLCJpbml0IiwiX3RoaXMiLCJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJtb2RlbCIsImNvbXBvbmVudHMiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImkiLCJsZW5ndGgiLCJwYXJ0IiwiZ2V0T2JqZWN0QnlOYW1lIiwidmlzaWJsZSJdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvZ2x0Zi1oaWRlLmpzP2UwNjMiXSwic291cmNlc0NvbnRlbnQiOlsiQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdnbHRmLWhpZGUnLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgcGFydHM6IHtcbiAgICAgIGRlZmF1bHQ6IFtdXG4gICAgfVxuICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW9kZWwtbG9hZGVkJywgKCkgPT4ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsLmNvbXBvbmVudHNbXCJnbHRmLW1vZGVsXCJdLm1vZGVsLmdldE9iamVjdEJ5TmFtZShcImFwYXJ0bWVudERvb3IwMDFcIikpO1xuICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLmVsLmNvbXBvbmVudHNbXCJnbHRmLW1vZGVsXCJdLm1vZGVsO1xuICAgICAgICB2YXIgcGFydHMgPSB0aGlzLmRhdGEucGFydHM7XG4gICAgICAgIGNvbnNvbGUubG9nKHBhcnRzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBwYXJ0ID0gbW9kZWwuZ2V0T2JqZWN0QnlOYW1lKHBhcnRzW2ldKTtcbiAgICAgICAgICBpZiAocGFydCkge1xuICAgICAgICAgICAgcGFydC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUU7RUFDbENDLE1BQU0sRUFBRTtJQUNSQyxLQUFLLEVBQUU7TUFDTCxXQUFTO0lBQ1g7RUFDRixDQUFDO0VBQ0NDLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVk7SUFBQSxJQUFBQyxLQUFBO0lBQ2hCLElBQUksQ0FBQ0MsRUFBRSxDQUFDQyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsWUFBTTtNQUM3QztNQUNBLElBQUlDLEtBQUssR0FBR0gsS0FBSSxDQUFDQyxFQUFFLENBQUNHLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQ0QsS0FBSztNQUNsRCxJQUFJTCxLQUFLLEdBQUdFLEtBQUksQ0FBQ0ssSUFBSSxDQUFDUCxLQUFLO01BQzNCUSxPQUFPLENBQUNDLEdBQUcsQ0FBQ1QsS0FBSyxDQUFDO01BQ2xCLEtBQUssSUFBSVUsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHVixLQUFLLENBQUNXLE1BQU0sRUFBRUQsQ0FBQyxFQUFFLEVBQUU7UUFDckMsSUFBSUUsSUFBSSxHQUFHUCxLQUFLLENBQUNRLGVBQWUsQ0FBQ2IsS0FBSyxDQUFDVSxDQUFDLENBQUMsQ0FBQztRQUMxQyxJQUFJRSxJQUFJLEVBQUU7VUFDUkEsSUFBSSxDQUFDRSxPQUFPLEdBQUcsS0FBSztRQUN0QjtNQUNGO0lBQ0osQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=\n//# sourceURL=webpack-internal:///7113\n");

/***/ }),

/***/ 5358:
/*!***************************************************!*\
  !*** ./src/components/aframe/gltf-part-custom.js ***!
  \***************************************************/
/***/ (() => {

eval("var LOADING_MODELS = {};\nvar MODELS = {};\nvar MODEL_METADATA = {};\nAFRAME.registerComponent('gltf-part-custom', {\n  schema: {\n    buffer: {\n      \"default\": true\n    },\n    part: {\n      type: 'string'\n    },\n    src: {\n      type: 'asset'\n    },\n    keepPosition: {\n      type: 'boolean',\n      \"default\": true\n    }\n  },\n  update: function update() {\n    var el = this.el;\n    if (!this.data.part && this.data.src) {\n      return;\n    }\n    this.getModel(function (modelPart) {\n      if (!modelPart) {\n        return;\n      }\n      el.setObject3D('mesh', modelPart);\n      var originalPosition = MODEL_METADATA[el.getAttribute('gltf-part-custom').part].position;\n      var originalRotation = MODEL_METADATA[el.getAttribute('gltf-part-custom').part].rotation;\n      console.log(\"originalPosition: \".concat(originalPosition.x, \" \").concat(originalPosition.y, \" \").concat(originalPosition.z));\n      console.log(\"originalRotation: \".concat(originalRotation.x, \" \").concat(originalRotation.y, \" \").concat(originalRotation.z, \", \").concat(originalRotation.w));\n      el.setAttribute('position', \"\".concat(originalPosition.x, \" \").concat(originalPosition.y, \" \").concat(originalPosition.z));\n      el.setAttribute('rotation', \"\".concat(THREE.MathUtils.radToDeg(originalRotation.x), \" \").concat(THREE.MathUtils.radToDeg(originalRotation.y), \" \").concat(THREE.MathUtils.radToDeg(originalRotation.z)));\n      // el.setAttribute('rotation', `${originalRotation.x} ${originalRotation.y} ${originalRotation.z}`);\n      // Use this instead of setAttribute('rotation') - see https://aframe.io/docs/1.5.0/components/rotation.html#updating-rotation\n      // el.getObject3D().setRotationFromQuaternion(originalPosition);\n    });\n  },\n  /**\n   * Fetch, cache, and select from GLTF.\n   *\n   * @returns {object} Selected subset of model.\n   */\n  getModel: function getModel(cb) {\n    var self = this;\n\n    // Already parsed, grab it.\n    if (MODELS[this.data.src]) {\n      cb(this.selectFromModel(MODELS[this.data.src]));\n      return;\n    }\n\n    // Currently loading, wait for it.\n    if (LOADING_MODELS[this.data.src]) {\n      return LOADING_MODELS[this.data.src].then(function (model) {\n        cb(self.selectFromModel(model));\n      });\n    }\n\n    // Not yet fetching, fetch it.\n    LOADING_MODELS[this.data.src] = new Promise(function (resolve) {\n      new THREE.GLTFLoader().load(self.data.src, function (gltfModel) {\n        var model = gltfModel.scene || gltfModel.scenes[0];\n        MODELS[self.data.src] = model;\n        delete LOADING_MODELS[self.data.src];\n        cb(self.selectFromModel(model));\n        resolve(model);\n      }, function () {}, console.error);\n    });\n  },\n  /**\n   * Search for the part name and look for a mesh.\n   */\n  selectFromModel: function selectFromModel(model) {\n    var mesh;\n    var part;\n    part = model.getObjectByName(this.data.part);\n    if (!part) {\n      console.error('[gltf-part] `' + this.data.part + '` not found in model.');\n      return;\n    }\n    mesh = part.getObjectByProperty('type', 'Mesh').clone(true);\n    MODEL_METADATA[this.data.part] = MODEL_METADATA[this.data.part] || {};\n    MODEL_METADATA[this.data.part].position = model.getObjectByName(this.data.part).getWorldPosition(new THREE.Vector3(0, 0, 0));\n    MODEL_METADATA[this.data.part].rotation = model.getObjectByName(this.data.part).rotation;\n    // MODEL_METADATA[this.data.part].rotation.x += Math.PI;\n    console.log(\"rotation: \", MODEL_METADATA[this.data.part].rotation);\n    if (this.data.buffer) {\n      mesh.geometry = mesh.geometry.toNonIndexed();\n      return mesh;\n    }\n    mesh.geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    return mesh;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTM1OC5qcyIsIm5hbWVzIjpbIkxPQURJTkdfTU9ERUxTIiwiTU9ERUxTIiwiTU9ERUxfTUVUQURBVEEiLCJBRlJBTUUiLCJyZWdpc3RlckNvbXBvbmVudCIsInNjaGVtYSIsImJ1ZmZlciIsInBhcnQiLCJ0eXBlIiwic3JjIiwia2VlcFBvc2l0aW9uIiwidXBkYXRlIiwiZWwiLCJkYXRhIiwiZ2V0TW9kZWwiLCJtb2RlbFBhcnQiLCJzZXRPYmplY3QzRCIsIm9yaWdpbmFsUG9zaXRpb24iLCJnZXRBdHRyaWJ1dGUiLCJwb3NpdGlvbiIsIm9yaWdpbmFsUm90YXRpb24iLCJyb3RhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJjb25jYXQiLCJ4IiwieSIsInoiLCJ3Iiwic2V0QXR0cmlidXRlIiwiVEhSRUUiLCJNYXRoVXRpbHMiLCJyYWRUb0RlZyIsImNiIiwic2VsZiIsInNlbGVjdEZyb21Nb2RlbCIsInRoZW4iLCJtb2RlbCIsIlByb21pc2UiLCJyZXNvbHZlIiwiR0xURkxvYWRlciIsImxvYWQiLCJnbHRmTW9kZWwiLCJzY2VuZSIsInNjZW5lcyIsImVycm9yIiwibWVzaCIsImdldE9iamVjdEJ5TmFtZSIsImdldE9iamVjdEJ5UHJvcGVydHkiLCJjbG9uZSIsImdldFdvcmxkUG9zaXRpb24iLCJWZWN0b3IzIiwiZ2VvbWV0cnkiLCJ0b05vbkluZGV4ZWQiLCJHZW9tZXRyeSIsImZyb21CdWZmZXJHZW9tZXRyeSJdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvZ2x0Zi1wYXJ0LWN1c3RvbS5qcz80OWJiIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBMT0FESU5HX01PREVMUyA9IHt9O1xudmFyIE1PREVMUyA9IHt9O1xudmFyIE1PREVMX01FVEFEQVRBID0ge307XG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZ2x0Zi1wYXJ0LWN1c3RvbScsIHtcbiAgc2NoZW1hOiB7XG4gICAgYnVmZmVyOiB7ZGVmYXVsdDogdHJ1ZX0sXG4gICAgcGFydDoge3R5cGU6ICdzdHJpbmcnfSxcbiAgICBzcmM6IHt0eXBlOiAnYXNzZXQnfSxcbiAgICBrZWVwUG9zaXRpb246IHsgdHlwZTogJ2Jvb2xlYW4nLCBkZWZhdWx0OiB0cnVlIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICghdGhpcy5kYXRhLnBhcnQgJiYgdGhpcy5kYXRhLnNyYykgeyByZXR1cm47IH1cbiAgICB0aGlzLmdldE1vZGVsKGZ1bmN0aW9uIChtb2RlbFBhcnQpIHtcbiAgICAgIGlmICghbW9kZWxQYXJ0KSB7IHJldHVybjsgfVxuICAgICAgZWwuc2V0T2JqZWN0M0QoJ21lc2gnLCBtb2RlbFBhcnQpO1xuICAgICAgY29uc3Qgb3JpZ2luYWxQb3NpdGlvbiA9IE1PREVMX01FVEFEQVRBW2VsLmdldEF0dHJpYnV0ZSgnZ2x0Zi1wYXJ0LWN1c3RvbScpLnBhcnRdLnBvc2l0aW9uO1xuICAgICAgY29uc3Qgb3JpZ2luYWxSb3RhdGlvbiA9IE1PREVMX01FVEFEQVRBW2VsLmdldEF0dHJpYnV0ZSgnZ2x0Zi1wYXJ0LWN1c3RvbScpLnBhcnRdLnJvdGF0aW9uO1xuICAgICAgY29uc29sZS5sb2coYG9yaWdpbmFsUG9zaXRpb246ICR7b3JpZ2luYWxQb3NpdGlvbi54fSAke29yaWdpbmFsUG9zaXRpb24ueX0gJHtvcmlnaW5hbFBvc2l0aW9uLnp9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgb3JpZ2luYWxSb3RhdGlvbjogJHtvcmlnaW5hbFJvdGF0aW9uLnh9ICR7b3JpZ2luYWxSb3RhdGlvbi55fSAke29yaWdpbmFsUm90YXRpb24uen0sICR7b3JpZ2luYWxSb3RhdGlvbi53fWApO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIGAke29yaWdpbmFsUG9zaXRpb24ueH0gJHtvcmlnaW5hbFBvc2l0aW9uLnl9ICR7b3JpZ2luYWxQb3NpdGlvbi56fWApO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdyb3RhdGlvbicsIGAke1RIUkVFLk1hdGhVdGlscy5yYWRUb0RlZyhvcmlnaW5hbFJvdGF0aW9uLngpfSAke1RIUkVFLk1hdGhVdGlscy5yYWRUb0RlZyhvcmlnaW5hbFJvdGF0aW9uLnkpfSAke1RIUkVFLk1hdGhVdGlscy5yYWRUb0RlZyhvcmlnaW5hbFJvdGF0aW9uLnopfWApO1xuICAgICAgLy8gZWwuc2V0QXR0cmlidXRlKCdyb3RhdGlvbicsIGAke29yaWdpbmFsUm90YXRpb24ueH0gJHtvcmlnaW5hbFJvdGF0aW9uLnl9ICR7b3JpZ2luYWxSb3RhdGlvbi56fWApO1xuICAgICAgLy8gVXNlIHRoaXMgaW5zdGVhZCBvZiBzZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJykgLSBzZWUgaHR0cHM6Ly9hZnJhbWUuaW8vZG9jcy8xLjUuMC9jb21wb25lbnRzL3JvdGF0aW9uLmh0bWwjdXBkYXRpbmctcm90YXRpb25cbiAgICAgIC8vIGVsLmdldE9iamVjdDNEKCkuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbihvcmlnaW5hbFBvc2l0aW9uKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogRmV0Y2gsIGNhY2hlLCBhbmQgc2VsZWN0IGZyb20gR0xURi5cbiAgICpcbiAgICogQHJldHVybnMge29iamVjdH0gU2VsZWN0ZWQgc3Vic2V0IG9mIG1vZGVsLlxuICAgKi9cbiAgZ2V0TW9kZWw6IGZ1bmN0aW9uIChjYikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIEFscmVhZHkgcGFyc2VkLCBncmFiIGl0LlxuICAgIGlmIChNT0RFTFNbdGhpcy5kYXRhLnNyY10pIHtcbiAgICAgIGNiKHRoaXMuc2VsZWN0RnJvbU1vZGVsKE1PREVMU1t0aGlzLmRhdGEuc3JjXSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN1cnJlbnRseSBsb2FkaW5nLCB3YWl0IGZvciBpdC5cbiAgICBpZiAoTE9BRElOR19NT0RFTFNbdGhpcy5kYXRhLnNyY10pIHtcbiAgICAgIHJldHVybiBMT0FESU5HX01PREVMU1t0aGlzLmRhdGEuc3JjXS50aGVuKGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICBjYihzZWxmLnNlbGVjdEZyb21Nb2RlbChtb2RlbCkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTm90IHlldCBmZXRjaGluZywgZmV0Y2ggaXQuXG4gICAgTE9BRElOR19NT0RFTFNbdGhpcy5kYXRhLnNyY10gPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgbmV3IFRIUkVFLkdMVEZMb2FkZXIoKS5sb2FkKHNlbGYuZGF0YS5zcmMsIGZ1bmN0aW9uIChnbHRmTW9kZWwpIHtcbiAgICAgICAgdmFyIG1vZGVsID0gZ2x0Zk1vZGVsLnNjZW5lIHx8IGdsdGZNb2RlbC5zY2VuZXNbMF07XG5cbiAgICAgICAgTU9ERUxTW3NlbGYuZGF0YS5zcmNdID0gbW9kZWw7XG4gICAgICAgIGRlbGV0ZSBMT0FESU5HX01PREVMU1tzZWxmLmRhdGEuc3JjXTtcbiAgICAgICAgY2Ioc2VsZi5zZWxlY3RGcm9tTW9kZWwobW9kZWwpKTtcbiAgICAgICAgcmVzb2x2ZShtb2RlbCk7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7IH0sIGNvbnNvbGUuZXJyb3IpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZWFyY2ggZm9yIHRoZSBwYXJ0IG5hbWUgYW5kIGxvb2sgZm9yIGEgbWVzaC5cbiAgICovXG4gIHNlbGVjdEZyb21Nb2RlbDogZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgdmFyIG1lc2g7XG4gICAgdmFyIHBhcnQ7XG5cbiAgICBwYXJ0ID0gbW9kZWwuZ2V0T2JqZWN0QnlOYW1lKHRoaXMuZGF0YS5wYXJ0KTtcbiAgICBpZiAoIXBhcnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tnbHRmLXBhcnRdIGAnICsgdGhpcy5kYXRhLnBhcnQgKyAnYCBub3QgZm91bmQgaW4gbW9kZWwuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWVzaCA9IHBhcnQuZ2V0T2JqZWN0QnlQcm9wZXJ0eSgndHlwZScsICdNZXNoJykuY2xvbmUodHJ1ZSk7XG4gICAgTU9ERUxfTUVUQURBVEFbdGhpcy5kYXRhLnBhcnRdID0gTU9ERUxfTUVUQURBVEFbdGhpcy5kYXRhLnBhcnRdIHx8IHt9O1xuICAgIE1PREVMX01FVEFEQVRBW3RoaXMuZGF0YS5wYXJ0XS5wb3NpdGlvbiA9IG1vZGVsLmdldE9iamVjdEJ5TmFtZSh0aGlzLmRhdGEucGFydCkuZ2V0V29ybGRQb3NpdGlvbihuZXcgVEhSRUUuVmVjdG9yMygwLDAsMCkpO1xuICAgIE1PREVMX01FVEFEQVRBW3RoaXMuZGF0YS5wYXJ0XS5yb3RhdGlvbiA9IG1vZGVsLmdldE9iamVjdEJ5TmFtZSh0aGlzLmRhdGEucGFydCkucm90YXRpb247XG4gICAgLy8gTU9ERUxfTUVUQURBVEFbdGhpcy5kYXRhLnBhcnRdLnJvdGF0aW9uLnggKz0gTWF0aC5QSTtcbiAgICBjb25zb2xlLmxvZyhcInJvdGF0aW9uOiBcIiwgTU9ERUxfTUVUQURBVEFbdGhpcy5kYXRhLnBhcnRdLnJvdGF0aW9uKTtcbiAgICBpZiAodGhpcy5kYXRhLmJ1ZmZlcikge1xuICAgICAgbWVzaC5nZW9tZXRyeSA9IG1lc2guZ2VvbWV0cnkudG9Ob25JbmRleGVkKCk7XG4gICAgICByZXR1cm4gbWVzaDtcbiAgICB9XG4gICAgbWVzaC5nZW9tZXRyeSA9IG5ldyBUSFJFRS5HZW9tZXRyeSgpLmZyb21CdWZmZXJHZW9tZXRyeShtZXNoLmdlb21ldHJ5KTtcbiAgICByZXR1cm4gbWVzaDtcbiAgfVxufSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxjQUFjLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZCLElBQUlDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDZixJQUFJQyxjQUFjLEdBQUcsQ0FBQyxDQUFDO0FBRXZCQyxNQUFNLENBQUNDLGlCQUFpQixDQUFDLGtCQUFrQixFQUFFO0VBQzNDQyxNQUFNLEVBQUU7SUFDTkMsTUFBTSxFQUFFO01BQUMsV0FBUztJQUFJLENBQUM7SUFDdkJDLElBQUksRUFBRTtNQUFDQyxJQUFJLEVBQUU7SUFBUSxDQUFDO0lBQ3RCQyxHQUFHLEVBQUU7TUFBQ0QsSUFBSSxFQUFFO0lBQU8sQ0FBQztJQUNwQkUsWUFBWSxFQUFFO01BQUVGLElBQUksRUFBRSxTQUFTO01BQUUsV0FBUztJQUFLO0VBQ2pELENBQUM7RUFFREcsTUFBTSxFQUFFLFNBQUFBLE9BQUEsRUFBWTtJQUNsQixJQUFJQyxFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO0lBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUNDLElBQUksQ0FBQ04sSUFBSSxJQUFJLElBQUksQ0FBQ00sSUFBSSxDQUFDSixHQUFHLEVBQUU7TUFBRTtJQUFRO0lBQ2hELElBQUksQ0FBQ0ssUUFBUSxDQUFDLFVBQVVDLFNBQVMsRUFBRTtNQUNqQyxJQUFJLENBQUNBLFNBQVMsRUFBRTtRQUFFO01BQVE7TUFDMUJILEVBQUUsQ0FBQ0ksV0FBVyxDQUFDLE1BQU0sRUFBRUQsU0FBUyxDQUFDO01BQ2pDLElBQU1FLGdCQUFnQixHQUFHZixjQUFjLENBQUNVLEVBQUUsQ0FBQ00sWUFBWSxDQUFDLGtCQUFrQixDQUFDLENBQUNYLElBQUksQ0FBQyxDQUFDWSxRQUFRO01BQzFGLElBQU1DLGdCQUFnQixHQUFHbEIsY0FBYyxDQUFDVSxFQUFFLENBQUNNLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDWCxJQUFJLENBQUMsQ0FBQ2MsUUFBUTtNQUMxRkMsT0FBTyxDQUFDQyxHQUFHLHNCQUFBQyxNQUFBLENBQXNCUCxnQkFBZ0IsQ0FBQ1EsQ0FBQyxPQUFBRCxNQUFBLENBQUlQLGdCQUFnQixDQUFDUyxDQUFDLE9BQUFGLE1BQUEsQ0FBSVAsZ0JBQWdCLENBQUNVLENBQUMsQ0FBRSxDQUFDO01BQ2xHTCxPQUFPLENBQUNDLEdBQUcsc0JBQUFDLE1BQUEsQ0FBc0JKLGdCQUFnQixDQUFDSyxDQUFDLE9BQUFELE1BQUEsQ0FBSUosZ0JBQWdCLENBQUNNLENBQUMsT0FBQUYsTUFBQSxDQUFJSixnQkFBZ0IsQ0FBQ08sQ0FBQyxRQUFBSCxNQUFBLENBQUtKLGdCQUFnQixDQUFDUSxDQUFDLENBQUUsQ0FBQztNQUN6SGhCLEVBQUUsQ0FBQ2lCLFlBQVksQ0FBQyxVQUFVLEtBQUFMLE1BQUEsQ0FBS1AsZ0JBQWdCLENBQUNRLENBQUMsT0FBQUQsTUFBQSxDQUFJUCxnQkFBZ0IsQ0FBQ1MsQ0FBQyxPQUFBRixNQUFBLENBQUlQLGdCQUFnQixDQUFDVSxDQUFDLENBQUUsQ0FBQztNQUNoR2YsRUFBRSxDQUFDaUIsWUFBWSxDQUFDLFVBQVUsS0FBQUwsTUFBQSxDQUFLTSxLQUFLLENBQUNDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDWixnQkFBZ0IsQ0FBQ0ssQ0FBQyxDQUFDLE9BQUFELE1BQUEsQ0FBSU0sS0FBSyxDQUFDQyxTQUFTLENBQUNDLFFBQVEsQ0FBQ1osZ0JBQWdCLENBQUNNLENBQUMsQ0FBQyxPQUFBRixNQUFBLENBQUlNLEtBQUssQ0FBQ0MsU0FBUyxDQUFDQyxRQUFRLENBQUNaLGdCQUFnQixDQUFDTyxDQUFDLENBQUMsQ0FBRSxDQUFDO01BQzlLO01BQ0E7TUFDQTtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUM7RUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0ViLFFBQVEsRUFBRSxTQUFBQSxTQUFVbUIsRUFBRSxFQUFFO0lBQ3RCLElBQUlDLElBQUksR0FBRyxJQUFJOztJQUVmO0lBQ0EsSUFBSWpDLE1BQU0sQ0FBQyxJQUFJLENBQUNZLElBQUksQ0FBQ0osR0FBRyxDQUFDLEVBQUU7TUFDekJ3QixFQUFFLENBQUMsSUFBSSxDQUFDRSxlQUFlLENBQUNsQyxNQUFNLENBQUMsSUFBSSxDQUFDWSxJQUFJLENBQUNKLEdBQUcsQ0FBQyxDQUFDLENBQUM7TUFDL0M7SUFDRjs7SUFFQTtJQUNBLElBQUlULGNBQWMsQ0FBQyxJQUFJLENBQUNhLElBQUksQ0FBQ0osR0FBRyxDQUFDLEVBQUU7TUFDakMsT0FBT1QsY0FBYyxDQUFDLElBQUksQ0FBQ2EsSUFBSSxDQUFDSixHQUFHLENBQUMsQ0FBQzJCLElBQUksQ0FBQyxVQUFVQyxLQUFLLEVBQUU7UUFDekRKLEVBQUUsQ0FBQ0MsSUFBSSxDQUFDQyxlQUFlLENBQUNFLEtBQUssQ0FBQyxDQUFDO01BQ2pDLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0FyQyxjQUFjLENBQUMsSUFBSSxDQUFDYSxJQUFJLENBQUNKLEdBQUcsQ0FBQyxHQUFHLElBQUk2QixPQUFPLENBQUMsVUFBVUMsT0FBTyxFQUFFO01BQzdELElBQUlULEtBQUssQ0FBQ1UsVUFBVSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDUCxJQUFJLENBQUNyQixJQUFJLENBQUNKLEdBQUcsRUFBRSxVQUFVaUMsU0FBUyxFQUFFO1FBQzlELElBQUlMLEtBQUssR0FBR0ssU0FBUyxDQUFDQyxLQUFLLElBQUlELFNBQVMsQ0FBQ0UsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUVsRDNDLE1BQU0sQ0FBQ2lDLElBQUksQ0FBQ3JCLElBQUksQ0FBQ0osR0FBRyxDQUFDLEdBQUc0QixLQUFLO1FBQzdCLE9BQU9yQyxjQUFjLENBQUNrQyxJQUFJLENBQUNyQixJQUFJLENBQUNKLEdBQUcsQ0FBQztRQUNwQ3dCLEVBQUUsQ0FBQ0MsSUFBSSxDQUFDQyxlQUFlLENBQUNFLEtBQUssQ0FBQyxDQUFDO1FBQy9CRSxPQUFPLENBQUNGLEtBQUssQ0FBQztNQUNoQixDQUFDLEVBQUUsWUFBWSxDQUFFLENBQUMsRUFBRWYsT0FBTyxDQUFDdUIsS0FBSyxDQUFDO0lBQ3BDLENBQUMsQ0FBQztFQUNKLENBQUM7RUFFRDtBQUNGO0FBQ0E7RUFDRVYsZUFBZSxFQUFFLFNBQUFBLGdCQUFVRSxLQUFLLEVBQUU7SUFDaEMsSUFBSVMsSUFBSTtJQUNSLElBQUl2QyxJQUFJO0lBRVJBLElBQUksR0FBRzhCLEtBQUssQ0FBQ1UsZUFBZSxDQUFDLElBQUksQ0FBQ2xDLElBQUksQ0FBQ04sSUFBSSxDQUFDO0lBQzVDLElBQUksQ0FBQ0EsSUFBSSxFQUFFO01BQ1RlLE9BQU8sQ0FBQ3VCLEtBQUssQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDaEMsSUFBSSxDQUFDTixJQUFJLEdBQUcsdUJBQXVCLENBQUM7TUFDekU7SUFDRjtJQUVBdUMsSUFBSSxHQUFHdkMsSUFBSSxDQUFDeUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDQyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQzNEL0MsY0FBYyxDQUFDLElBQUksQ0FBQ1csSUFBSSxDQUFDTixJQUFJLENBQUMsR0FBR0wsY0FBYyxDQUFDLElBQUksQ0FBQ1csSUFBSSxDQUFDTixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDckVMLGNBQWMsQ0FBQyxJQUFJLENBQUNXLElBQUksQ0FBQ04sSUFBSSxDQUFDLENBQUNZLFFBQVEsR0FBR2tCLEtBQUssQ0FBQ1UsZUFBZSxDQUFDLElBQUksQ0FBQ2xDLElBQUksQ0FBQ04sSUFBSSxDQUFDLENBQUMyQyxnQkFBZ0IsQ0FBQyxJQUFJcEIsS0FBSyxDQUFDcUIsT0FBTyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUhqRCxjQUFjLENBQUMsSUFBSSxDQUFDVyxJQUFJLENBQUNOLElBQUksQ0FBQyxDQUFDYyxRQUFRLEdBQUdnQixLQUFLLENBQUNVLGVBQWUsQ0FBQyxJQUFJLENBQUNsQyxJQUFJLENBQUNOLElBQUksQ0FBQyxDQUFDYyxRQUFRO0lBQ3hGO0lBQ0FDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFlBQVksRUFBRXJCLGNBQWMsQ0FBQyxJQUFJLENBQUNXLElBQUksQ0FBQ04sSUFBSSxDQUFDLENBQUNjLFFBQVEsQ0FBQztJQUNsRSxJQUFJLElBQUksQ0FBQ1IsSUFBSSxDQUFDUCxNQUFNLEVBQUU7TUFDcEJ3QyxJQUFJLENBQUNNLFFBQVEsR0FBR04sSUFBSSxDQUFDTSxRQUFRLENBQUNDLFlBQVksQ0FBQyxDQUFDO01BQzVDLE9BQU9QLElBQUk7SUFDYjtJQUNBQSxJQUFJLENBQUNNLFFBQVEsR0FBRyxJQUFJdEIsS0FBSyxDQUFDd0IsUUFBUSxDQUFDLENBQUMsQ0FBQ0Msa0JBQWtCLENBQUNULElBQUksQ0FBQ00sUUFBUSxDQUFDO0lBQ3RFLE9BQU9OLElBQUk7RUFDYjtBQUNGLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==\n//# sourceURL=webpack-internal:///5358\n");

/***/ }),

/***/ 4877:
/*!****************************************!*\
  !*** ./src/components/aframe/index.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _animation_mixer_state_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./animation-mixer-state.js */ 5575);\n/* harmony import */ var _animation_mixer_state_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_animation_mixer_state_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _base_game_loop_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base-game-loop.json */ 6264);\n/* harmony import */ var _game_state_machine_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game-state-machine.js */ 9999);\n/* harmony import */ var _gltf_hide_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gltf-hide.js */ 7113);\n/* harmony import */ var _gltf_hide_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_gltf_hide_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _gltf_part_custom_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./gltf-part-custom.js */ 5358);\n/* harmony import */ var _gltf_part_custom_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_gltf_part_custom_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _simple_navmesh_constraint_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./simple-navmesh-constraint.js */ 4064);\n/* harmony import */ var _simple_navmesh_constraint_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_simple_navmesh_constraint_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _oculus_thumbstick_controls_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./oculus-thumbstick-controls.js */ 3154);\n/* harmony import */ var _oculus_thumbstick_controls_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_oculus_thumbstick_controls_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.js */ 9464);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_utils_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _gameComponents_unlock_panel_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./gameComponents/unlock-panel.js */ 9617);\n/* harmony import */ var _gameComponents_unlock_panel_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_gameComponents_unlock_panel_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _gameComponents_game_clock_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./gameComponents/game-clock.js */ 9503);\n/* harmony import */ var _gameComponents_game_clock_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_gameComponents_game_clock_js__WEBPACK_IMPORTED_MODULE_9__);\n// import \"./components/game-state-machine.js\";\n// import \"./components/simple-navmesh-constraint.js\";\n// import \"./components/gltf-part-custom.js\";\n// import './components/gltf-hide.js';\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDg3Ny5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2FmcmFtZS9pbmRleC5qcz84MmFiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBcIi4vY29tcG9uZW50cy9nYW1lLXN0YXRlLW1hY2hpbmUuanNcIjtcbi8vIGltcG9ydCBcIi4vY29tcG9uZW50cy9zaW1wbGUtbmF2bWVzaC1jb25zdHJhaW50LmpzXCI7XG4vLyBpbXBvcnQgXCIuL2NvbXBvbmVudHMvZ2x0Zi1wYXJ0LWN1c3RvbS5qc1wiO1xuLy8gaW1wb3J0ICcuL2NvbXBvbmVudHMvZ2x0Zi1oaWRlLmpzJztcbmltcG9ydCBcIi4vYW5pbWF0aW9uLW1peGVyLXN0YXRlLmpzXCI7XG5pbXBvcnQgXCIuL2Jhc2UtZ2FtZS1sb29wLmpzb25cIjtcbmltcG9ydCBcIi4vZ2FtZS1zdGF0ZS1tYWNoaW5lLmpzXCI7XG5pbXBvcnQgXCIuL2dsdGYtaGlkZS5qc1wiO1xuaW1wb3J0IFwiLi9nbHRmLXBhcnQtY3VzdG9tLmpzXCI7XG5pbXBvcnQgXCIuL3NpbXBsZS1uYXZtZXNoLWNvbnN0cmFpbnQuanNcIjtcbmltcG9ydCBcIi4vb2N1bHVzLXRodW1ic3RpY2stY29udHJvbHMuanNcIjtcbmltcG9ydCBcIi4vdXRpbHMuanNcIjtcblxuaW1wb3J0IFwiLi9nYW1lQ29tcG9uZW50cy91bmxvY2stcGFuZWwuanNcIjtcbmltcG9ydCBcIi4vZ2FtZUNvbXBvbmVudHMvZ2FtZS1jbG9jay5qc1wiOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4877\n");

/***/ }),

/***/ 3154:
/*!*************************************************************!*\
  !*** ./src/components/aframe/oculus-thumbstick-controls.js ***!
  \*************************************************************/
/***/ (() => {

eval("AFRAME.registerComponent('oculus-thumbstick-controls', {\n  schema: {\n    acceleration: {\n      \"default\": 30\n    },\n    rigSelector: {\n      \"default\": \"#rig\"\n    },\n    fly: {\n      \"default\": false\n    },\n    controllerOriented: {\n      \"default\": false\n    },\n    adAxis: {\n      \"default\": 'x',\n      oneOf: ['x', 'y', 'z']\n    },\n    wsAxis: {\n      \"default\": 'z',\n      oneOf: ['x', 'y', 'z']\n    },\n    enabled: {\n      \"default\": true\n    },\n    adEnabled: {\n      \"default\": true\n    },\n    adInverted: {\n      \"default\": false\n    },\n    wsEnabled: {\n      \"default\": true\n    },\n    wsInverted: {\n      \"default\": false\n    },\n    mode: {\n      \"default\": 'move',\n      oneOf: ['move', 'look']\n    }\n  },\n  init: function init() {\n    this.easing = 1.1;\n    this.velocity = new THREE.Vector3(0, 0, 0);\n    this.tsData = new THREE.Vector2(0, 0);\n    this.thumbstickMoved = this.thumbstickMoved.bind(this);\n    this.el.addEventListener('thumbstickmoved', this.thumbstickMoved);\n  },\n  update: function update() {\n    this.rigElement = document.querySelector(this.data.rigSelector);\n  },\n  tick: function tick(time, delta) {\n    if (!this.el.sceneEl.is('vr-mode')) return;\n    var data = this.data;\n    var el = this.rigElement;\n    var velocity = this.velocity;\n    //console.log(\"here\", this.tsData, this.tsData.length())\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis] && !this.tsData.length()) {\n      return;\n    }\n\n    // Update velocity.\n    delta = delta / 1000;\n    this.updateVelocity(delta);\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis]) {\n      return;\n    }\n\n    // Get movement vector and translate position.\n    el.object3D.position.add(this.getMovementVector(delta));\n  },\n  updateVelocity: function updateVelocity(delta) {\n    var acceleration;\n    var adAxis;\n    var adSign;\n    var data = this.data;\n    var velocity = this.velocity;\n    var wsAxis;\n    var wsSign;\n    var CLAMP_VELOCITY = 0.00001;\n    adAxis = data.adAxis;\n    wsAxis = data.wsAxis;\n\n    // If FPS too low, reset velocity.\n    if (delta > 0.2) {\n      velocity[adAxis] = 0;\n      velocity[wsAxis] = 0;\n      return;\n    }\n\n    // https://gamedev.stackexchange.com/questions/151383/frame-rate-independant-movement-with-acceleration\n    var scaledEasing = Math.pow(1 / this.easing, delta * 60);\n    // Velocity Easing.\n    if (velocity[adAxis] !== 0) {\n      velocity[adAxis] = velocity[adAxis] * scaledEasing;\n    }\n    if (velocity[wsAxis] !== 0) {\n      velocity[wsAxis] = velocity[wsAxis] * scaledEasing;\n    }\n\n    // Clamp velocity easing.\n    if (Math.abs(velocity[adAxis]) < CLAMP_VELOCITY) {\n      velocity[adAxis] = 0;\n    }\n    if (Math.abs(velocity[wsAxis]) < CLAMP_VELOCITY) {\n      velocity[wsAxis] = 0;\n    }\n    if (!data.enabled) {\n      return;\n    }\n\n    // Update velocity using keys pressed.\n    acceleration = data.acceleration;\n    if (data.adEnabled && this.tsData.x) {\n      adSign = data.adInverted ? -1 : 1;\n      velocity[adAxis] += adSign * acceleration * this.tsData.x * delta;\n    }\n    if (data.wsEnabled) {\n      wsSign = data.wsInverted ? -1 : 1;\n      velocity[wsAxis] += wsSign * acceleration * this.tsData.y * delta;\n    }\n  },\n  getMovementVector: function () {\n    var directionVector = new THREE.Vector3(0, 0, 0);\n    var rotationEuler = new THREE.Euler(0, 0, 0, 'YXZ');\n    return function (delta) {\n      var rotation = this.el.sceneEl.camera.el.object3D.rotation;\n      var velocity = this.velocity;\n      var xRotation;\n      directionVector.copy(velocity);\n      directionVector.multiplyScalar(delta);\n      // Absolute.\n      if (!rotation) {\n        return directionVector;\n      }\n      xRotation = this.data.fly ? rotation.x : 0;\n\n      // Transform direction relative to heading.\n      rotationEuler.set(xRotation, rotation.y, 0);\n      directionVector.applyEuler(rotationEuler);\n      return directionVector;\n    };\n  }(),\n  thumbstickMoved: function thumbstickMoved(evt) {\n    this.tsData.set(evt.detail.x, evt.detail.y);\n  },\n  remove: function remove() {\n    this.el.removeEventListener('thumbstickmoved', this.thumbstickMoved);\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzE1NC5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2NoZW1hIiwiYWNjZWxlcmF0aW9uIiwicmlnU2VsZWN0b3IiLCJmbHkiLCJjb250cm9sbGVyT3JpZW50ZWQiLCJhZEF4aXMiLCJvbmVPZiIsIndzQXhpcyIsImVuYWJsZWQiLCJhZEVuYWJsZWQiLCJhZEludmVydGVkIiwid3NFbmFibGVkIiwid3NJbnZlcnRlZCIsIm1vZGUiLCJpbml0IiwiZWFzaW5nIiwidmVsb2NpdHkiLCJUSFJFRSIsIlZlY3RvcjMiLCJ0c0RhdGEiLCJWZWN0b3IyIiwidGh1bWJzdGlja01vdmVkIiwiYmluZCIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInVwZGF0ZSIsInJpZ0VsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhIiwidGljayIsInRpbWUiLCJkZWx0YSIsInNjZW5lRWwiLCJpcyIsImxlbmd0aCIsInVwZGF0ZVZlbG9jaXR5Iiwib2JqZWN0M0QiLCJwb3NpdGlvbiIsImFkZCIsImdldE1vdmVtZW50VmVjdG9yIiwiYWRTaWduIiwid3NTaWduIiwiQ0xBTVBfVkVMT0NJVFkiLCJzY2FsZWRFYXNpbmciLCJNYXRoIiwicG93IiwiYWJzIiwieCIsInkiLCJkaXJlY3Rpb25WZWN0b3IiLCJyb3RhdGlvbkV1bGVyIiwiRXVsZXIiLCJyb3RhdGlvbiIsImNhbWVyYSIsInhSb3RhdGlvbiIsImNvcHkiLCJtdWx0aXBseVNjYWxhciIsInNldCIsImFwcGx5RXVsZXIiLCJldnQiLCJkZXRhaWwiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIl0sInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2FmcmFtZS9vY3VsdXMtdGh1bWJzdGljay1jb250cm9scy5qcz9jZmRjIl0sInNvdXJjZXNDb250ZW50IjpbIkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnb2N1bHVzLXRodW1ic3RpY2stY29udHJvbHMnLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgICAgIGFjY2VsZXJhdGlvbjogeyBkZWZhdWx0OiAzMCB9LFxuICAgICAgICByaWdTZWxlY3Rvcjoge2RlZmF1bHQ6IFwiI3JpZ1wifSxcbiAgICAgICAgZmx5OiB7IGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgICAgIGNvbnRyb2xsZXJPcmllbnRlZDogeyBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAgICBhZEF4aXM6IHtkZWZhdWx0OiAneCcsIG9uZU9mOiBbJ3gnLCAneScsICd6J119LFxuICAgICAgICB3c0F4aXM6IHtkZWZhdWx0OiAneicsIG9uZU9mOiBbJ3gnLCAneScsICd6J119LFxuICAgICAgICBlbmFibGVkOiB7ZGVmYXVsdDogdHJ1ZX0sXG4gICAgICAgIGFkRW5hYmxlZDoge2RlZmF1bHQ6IHRydWV9LFxuICAgICAgICBhZEludmVydGVkOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgICAgICB3c0VuYWJsZWQ6IHtkZWZhdWx0OiB0cnVlfSxcbiAgICAgICAgd3NJbnZlcnRlZDoge2RlZmF1bHQ6IGZhbHNlfSxcbiAgICAgICAgbW9kZTogeyBkZWZhdWx0OiAnbW92ZScsIG9uZU9mOiBbJ21vdmUnLCAnbG9vayddfVxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVhc2luZyA9IDEuMTtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApO1xuICAgICAgICB0aGlzLnRzRGF0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKDAsIDApO1xuXG4gICAgICAgIHRoaXMudGh1bWJzdGlja01vdmVkID0gdGhpcy50aHVtYnN0aWNrTW92ZWQuYmluZCh0aGlzKVxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RodW1ic3RpY2ttb3ZlZCcsIHRoaXMudGh1bWJzdGlja01vdmVkKTtcbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucmlnRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5kYXRhLnJpZ1NlbGVjdG9yKVxuICAgIH0sXG4gICAgdGljazogZnVuY3Rpb24gKHRpbWUsIGRlbHRhKSB7XG4gICAgICAgIGlmICghdGhpcy5lbC5zY2VuZUVsLmlzKCd2ci1tb2RlJykpIHJldHVybjtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgIHZhciBlbCA9IHRoaXMucmlnRWxlbWVudFxuICAgICAgICB2YXIgdmVsb2NpdHkgPSB0aGlzLnZlbG9jaXR5O1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiaGVyZVwiLCB0aGlzLnRzRGF0YSwgdGhpcy50c0RhdGEubGVuZ3RoKCkpXG4gICAgICAgIGlmICghdmVsb2NpdHlbZGF0YS5hZEF4aXNdICYmICF2ZWxvY2l0eVtkYXRhLndzQXhpc10gJiYgIXRoaXMudHNEYXRhLmxlbmd0aCgpKSB7IHJldHVybjsgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSB2ZWxvY2l0eS5cbiAgICAgICAgZGVsdGEgPSBkZWx0YSAvIDEwMDA7XG4gICAgICAgIHRoaXMudXBkYXRlVmVsb2NpdHkoZGVsdGEpO1xuXG4gICAgICAgIGlmICghdmVsb2NpdHlbZGF0YS5hZEF4aXNdICYmICF2ZWxvY2l0eVtkYXRhLndzQXhpc10pIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgLy8gR2V0IG1vdmVtZW50IHZlY3RvciBhbmQgdHJhbnNsYXRlIHBvc2l0aW9uLlxuICAgICAgICBlbC5vYmplY3QzRC5wb3NpdGlvbi5hZGQodGhpcy5nZXRNb3ZlbWVudFZlY3RvcihkZWx0YSkpO1xuICAgIH0sXG4gICAgdXBkYXRlVmVsb2NpdHk6IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICB2YXIgYWNjZWxlcmF0aW9uO1xuICAgICAgICB2YXIgYWRBeGlzO1xuICAgICAgICB2YXIgYWRTaWduO1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgICAgdmFyIHZlbG9jaXR5ID0gdGhpcy52ZWxvY2l0eTtcbiAgICAgICAgdmFyIHdzQXhpcztcbiAgICAgICAgdmFyIHdzU2lnbjtcbiAgICAgICAgY29uc3QgQ0xBTVBfVkVMT0NJVFkgPSAwLjAwMDAxO1xuXG4gICAgICAgIGFkQXhpcyA9IGRhdGEuYWRBeGlzO1xuICAgICAgICB3c0F4aXMgPSBkYXRhLndzQXhpcztcblxuICAgICAgICAvLyBJZiBGUFMgdG9vIGxvdywgcmVzZXQgdmVsb2NpdHkuXG4gICAgICAgIGlmIChkZWx0YSA+IDAuMikge1xuICAgICAgICAgICAgdmVsb2NpdHlbYWRBeGlzXSA9IDA7XG4gICAgICAgICAgICB2ZWxvY2l0eVt3c0F4aXNdID0gMDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2FtZWRldi5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvMTUxMzgzL2ZyYW1lLXJhdGUtaW5kZXBlbmRhbnQtbW92ZW1lbnQtd2l0aC1hY2NlbGVyYXRpb25cbiAgICAgICAgdmFyIHNjYWxlZEVhc2luZyA9IE1hdGgucG93KDEgLyB0aGlzLmVhc2luZywgZGVsdGEgKiA2MCk7XG4gICAgICAgIC8vIFZlbG9jaXR5IEVhc2luZy5cbiAgICAgICAgaWYgKHZlbG9jaXR5W2FkQXhpc10gIT09IDApIHtcbiAgICAgICAgICAgIHZlbG9jaXR5W2FkQXhpc10gPSB2ZWxvY2l0eVthZEF4aXNdICogc2NhbGVkRWFzaW5nO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2ZWxvY2l0eVt3c0F4aXNdICE9PSAwKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eVt3c0F4aXNdID0gdmVsb2NpdHlbd3NBeGlzXSAqIHNjYWxlZEVhc2luZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsYW1wIHZlbG9jaXR5IGVhc2luZy5cbiAgICAgICAgaWYgKE1hdGguYWJzKHZlbG9jaXR5W2FkQXhpc10pIDwgQ0xBTVBfVkVMT0NJVFkpIHsgdmVsb2NpdHlbYWRBeGlzXSA9IDA7IH1cbiAgICAgICAgaWYgKE1hdGguYWJzKHZlbG9jaXR5W3dzQXhpc10pIDwgQ0xBTVBfVkVMT0NJVFkpIHsgdmVsb2NpdHlbd3NBeGlzXSA9IDA7IH1cblxuICAgICAgICBpZiAoIWRhdGEuZW5hYmxlZCkgeyByZXR1cm47IH1cblxuICAgICAgICAvLyBVcGRhdGUgdmVsb2NpdHkgdXNpbmcga2V5cyBwcmVzc2VkLlxuICAgICAgICBhY2NlbGVyYXRpb24gPSBkYXRhLmFjY2VsZXJhdGlvbjtcbiAgICAgICAgaWYgKGRhdGEuYWRFbmFibGVkICYmIHRoaXMudHNEYXRhLngpIHtcbiAgICAgICAgICAgIGFkU2lnbiA9IGRhdGEuYWRJbnZlcnRlZCA/IC0xIDogMTtcbiAgICAgICAgICAgIHZlbG9jaXR5W2FkQXhpc10gKz0gYWRTaWduICogYWNjZWxlcmF0aW9uICogdGhpcy50c0RhdGEueCAqIGRlbHRhOyBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS53c0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHdzU2lnbiA9IGRhdGEud3NJbnZlcnRlZCA/IC0xIDogMTtcbiAgICAgICAgICAgIHZlbG9jaXR5W3dzQXhpc10gKz0gd3NTaWduICogYWNjZWxlcmF0aW9uICogdGhpcy50c0RhdGEueSAqIGRlbHRhO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRNb3ZlbWVudFZlY3RvcjogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvblZlY3RvciA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApO1xuICAgICAgICB2YXIgcm90YXRpb25FdWxlciA9IG5ldyBUSFJFRS5FdWxlcigwLCAwLCAwLCAnWVhaJyk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5lbC5zY2VuZUVsLmNhbWVyYS5lbC5vYmplY3QzRC5yb3RhdGlvblxuICAgICAgICAgICAgdmFyIHZlbG9jaXR5ID0gdGhpcy52ZWxvY2l0eTtcbiAgICAgICAgICAgIHZhciB4Um90YXRpb247XG5cbiAgICAgICAgICAgIGRpcmVjdGlvblZlY3Rvci5jb3B5KHZlbG9jaXR5KTtcbiAgICAgICAgICAgIGRpcmVjdGlvblZlY3Rvci5tdWx0aXBseVNjYWxhcihkZWx0YSk7XG4gICAgICAgICAgICAvLyBBYnNvbHV0ZS5cbiAgICAgICAgICAgIGlmICghcm90YXRpb24pIHsgcmV0dXJuIGRpcmVjdGlvblZlY3RvcjsgfVxuICAgICAgICAgICAgeFJvdGF0aW9uID0gdGhpcy5kYXRhLmZseSA/IHJvdGF0aW9uLnggOiAwO1xuXG4gICAgICAgICAgICAvLyBUcmFuc2Zvcm0gZGlyZWN0aW9uIHJlbGF0aXZlIHRvIGhlYWRpbmcuXG4gICAgICAgICAgICByb3RhdGlvbkV1bGVyLnNldCh4Um90YXRpb24sIHJvdGF0aW9uLnksIDApO1xuICAgICAgICAgICAgZGlyZWN0aW9uVmVjdG9yLmFwcGx5RXVsZXIocm90YXRpb25FdWxlcik7XG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uVmVjdG9yO1xuICAgICAgICB9O1xuICAgIH0pKCksXG4gICAgdGh1bWJzdGlja01vdmVkOiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIHRoaXMudHNEYXRhLnNldChldnQuZGV0YWlsLngsIGV2dC5kZXRhaWwueSk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0aHVtYnN0aWNrbW92ZWQnLCB0aGlzLnRodW1ic3RpY2tNb3ZlZCk7XG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBQSxNQUFNLENBQUNDLGlCQUFpQixDQUFDLDRCQUE0QixFQUFFO0VBQ25EQyxNQUFNLEVBQUU7SUFDSkMsWUFBWSxFQUFFO01BQUUsV0FBUztJQUFHLENBQUM7SUFDN0JDLFdBQVcsRUFBRTtNQUFDLFdBQVM7SUFBTSxDQUFDO0lBQzlCQyxHQUFHLEVBQUU7TUFBRSxXQUFTO0lBQU0sQ0FBQztJQUN2QkMsa0JBQWtCLEVBQUU7TUFBRSxXQUFTO0lBQU0sQ0FBQztJQUN0Q0MsTUFBTSxFQUFFO01BQUMsV0FBUyxHQUFHO01BQUVDLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRztJQUFDLENBQUM7SUFDOUNDLE1BQU0sRUFBRTtNQUFDLFdBQVMsR0FBRztNQUFFRCxLQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUc7SUFBQyxDQUFDO0lBQzlDRSxPQUFPLEVBQUU7TUFBQyxXQUFTO0lBQUksQ0FBQztJQUN4QkMsU0FBUyxFQUFFO01BQUMsV0FBUztJQUFJLENBQUM7SUFDMUJDLFVBQVUsRUFBRTtNQUFDLFdBQVM7SUFBSyxDQUFDO0lBQzVCQyxTQUFTLEVBQUU7TUFBQyxXQUFTO0lBQUksQ0FBQztJQUMxQkMsVUFBVSxFQUFFO01BQUMsV0FBUztJQUFLLENBQUM7SUFDNUJDLElBQUksRUFBRTtNQUFFLFdBQVMsTUFBTTtNQUFFUCxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTTtJQUFDO0VBQ3BELENBQUM7RUFDRFEsSUFBSSxFQUFFLFNBQUFBLEtBQUEsRUFBWTtJQUNkLElBQUksQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7SUFDakIsSUFBSSxDQUFDQyxRQUFRLEdBQUcsSUFBSUMsS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDMUMsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSUYsS0FBSyxDQUFDRyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUVyQyxJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJLENBQUNBLGVBQWUsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN0RCxJQUFJLENBQUNDLEVBQUUsQ0FBQ0MsZ0JBQWdCLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDSCxlQUFlLENBQUM7RUFDckUsQ0FBQztFQUNESSxNQUFNLEVBQUUsU0FBQUEsT0FBQSxFQUFXO0lBQ2YsSUFBSSxDQUFDQyxVQUFVLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLElBQUksQ0FBQ0MsSUFBSSxDQUFDM0IsV0FBVyxDQUFDO0VBQ25FLENBQUM7RUFDRDRCLElBQUksRUFBRSxTQUFBQSxLQUFVQyxJQUFJLEVBQUVDLEtBQUssRUFBRTtJQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDVCxFQUFFLENBQUNVLE9BQU8sQ0FBQ0MsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFO0lBQ3BDLElBQUlMLElBQUksR0FBRyxJQUFJLENBQUNBLElBQUk7SUFDcEIsSUFBSU4sRUFBRSxHQUFHLElBQUksQ0FBQ0csVUFBVTtJQUN4QixJQUFJVixRQUFRLEdBQUcsSUFBSSxDQUFDQSxRQUFRO0lBQzVCO0lBQ0EsSUFBSSxDQUFDQSxRQUFRLENBQUNhLElBQUksQ0FBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUNXLFFBQVEsQ0FBQ2EsSUFBSSxDQUFDdEIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUNZLE1BQU0sQ0FBQ2dCLE1BQU0sQ0FBQyxDQUFDLEVBQUU7TUFBRTtJQUFROztJQUV6RjtJQUNBSCxLQUFLLEdBQUdBLEtBQUssR0FBRyxJQUFJO0lBQ3BCLElBQUksQ0FBQ0ksY0FBYyxDQUFDSixLQUFLLENBQUM7SUFFMUIsSUFBSSxDQUFDaEIsUUFBUSxDQUFDYSxJQUFJLENBQUN4QixNQUFNLENBQUMsSUFBSSxDQUFDVyxRQUFRLENBQUNhLElBQUksQ0FBQ3RCLE1BQU0sQ0FBQyxFQUFFO01BQUU7SUFBUTs7SUFFaEU7SUFDQWdCLEVBQUUsQ0FBQ2MsUUFBUSxDQUFDQyxRQUFRLENBQUNDLEdBQUcsQ0FBQyxJQUFJLENBQUNDLGlCQUFpQixDQUFDUixLQUFLLENBQUMsQ0FBQztFQUMzRCxDQUFDO0VBQ0RJLGNBQWMsRUFBRSxTQUFBQSxlQUFVSixLQUFLLEVBQUU7SUFDN0IsSUFBSS9CLFlBQVk7SUFDaEIsSUFBSUksTUFBTTtJQUNWLElBQUlvQyxNQUFNO0lBQ1YsSUFBSVosSUFBSSxHQUFHLElBQUksQ0FBQ0EsSUFBSTtJQUNwQixJQUFJYixRQUFRLEdBQUcsSUFBSSxDQUFDQSxRQUFRO0lBQzVCLElBQUlULE1BQU07SUFDVixJQUFJbUMsTUFBTTtJQUNWLElBQU1DLGNBQWMsR0FBRyxPQUFPO0lBRTlCdEMsTUFBTSxHQUFHd0IsSUFBSSxDQUFDeEIsTUFBTTtJQUNwQkUsTUFBTSxHQUFHc0IsSUFBSSxDQUFDdEIsTUFBTTs7SUFFcEI7SUFDQSxJQUFJeUIsS0FBSyxHQUFHLEdBQUcsRUFBRTtNQUNiaEIsUUFBUSxDQUFDWCxNQUFNLENBQUMsR0FBRyxDQUFDO01BQ3BCVyxRQUFRLENBQUNULE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFDcEI7SUFDSjs7SUFFQTtJQUNBLElBQUlxQyxZQUFZLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMvQixNQUFNLEVBQUVpQixLQUFLLEdBQUcsRUFBRSxDQUFDO0lBQ3hEO0lBQ0EsSUFBSWhCLFFBQVEsQ0FBQ1gsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO01BQ3hCVyxRQUFRLENBQUNYLE1BQU0sQ0FBQyxHQUFHVyxRQUFRLENBQUNYLE1BQU0sQ0FBQyxHQUFHdUMsWUFBWTtJQUN0RDtJQUNBLElBQUk1QixRQUFRLENBQUNULE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTtNQUN4QlMsUUFBUSxDQUFDVCxNQUFNLENBQUMsR0FBR1MsUUFBUSxDQUFDVCxNQUFNLENBQUMsR0FBR3FDLFlBQVk7SUFDdEQ7O0lBRUE7SUFDQSxJQUFJQyxJQUFJLENBQUNFLEdBQUcsQ0FBQy9CLFFBQVEsQ0FBQ1gsTUFBTSxDQUFDLENBQUMsR0FBR3NDLGNBQWMsRUFBRTtNQUFFM0IsUUFBUSxDQUFDWCxNQUFNLENBQUMsR0FBRyxDQUFDO0lBQUU7SUFDekUsSUFBSXdDLElBQUksQ0FBQ0UsR0FBRyxDQUFDL0IsUUFBUSxDQUFDVCxNQUFNLENBQUMsQ0FBQyxHQUFHb0MsY0FBYyxFQUFFO01BQUUzQixRQUFRLENBQUNULE1BQU0sQ0FBQyxHQUFHLENBQUM7SUFBRTtJQUV6RSxJQUFJLENBQUNzQixJQUFJLENBQUNyQixPQUFPLEVBQUU7TUFBRTtJQUFROztJQUU3QjtJQUNBUCxZQUFZLEdBQUc0QixJQUFJLENBQUM1QixZQUFZO0lBQ2hDLElBQUk0QixJQUFJLENBQUNwQixTQUFTLElBQUksSUFBSSxDQUFDVSxNQUFNLENBQUM2QixDQUFDLEVBQUU7TUFDakNQLE1BQU0sR0FBR1osSUFBSSxDQUFDbkIsVUFBVSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUM7TUFDakNNLFFBQVEsQ0FBQ1gsTUFBTSxDQUFDLElBQUlvQyxNQUFNLEdBQUd4QyxZQUFZLEdBQUcsSUFBSSxDQUFDa0IsTUFBTSxDQUFDNkIsQ0FBQyxHQUFHaEIsS0FBSztJQUNyRTtJQUNBLElBQUlILElBQUksQ0FBQ2xCLFNBQVMsRUFBRTtNQUNoQitCLE1BQU0sR0FBR2IsSUFBSSxDQUFDakIsVUFBVSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUM7TUFDakNJLFFBQVEsQ0FBQ1QsTUFBTSxDQUFDLElBQUltQyxNQUFNLEdBQUd6QyxZQUFZLEdBQUcsSUFBSSxDQUFDa0IsTUFBTSxDQUFDOEIsQ0FBQyxHQUFHakIsS0FBSztJQUNyRTtFQUNKLENBQUM7RUFDRFEsaUJBQWlCLEVBQUcsWUFBWTtJQUM1QixJQUFJVSxlQUFlLEdBQUcsSUFBSWpDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2hELElBQUlpQyxhQUFhLEdBQUcsSUFBSWxDLEtBQUssQ0FBQ21DLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUM7SUFFbkQsT0FBTyxVQUFVcEIsS0FBSyxFQUFFO01BQ3BCLElBQUlxQixRQUFRLEdBQUcsSUFBSSxDQUFDOUIsRUFBRSxDQUFDVSxPQUFPLENBQUNxQixNQUFNLENBQUMvQixFQUFFLENBQUNjLFFBQVEsQ0FBQ2dCLFFBQVE7TUFDMUQsSUFBSXJDLFFBQVEsR0FBRyxJQUFJLENBQUNBLFFBQVE7TUFDNUIsSUFBSXVDLFNBQVM7TUFFYkwsZUFBZSxDQUFDTSxJQUFJLENBQUN4QyxRQUFRLENBQUM7TUFDOUJrQyxlQUFlLENBQUNPLGNBQWMsQ0FBQ3pCLEtBQUssQ0FBQztNQUNyQztNQUNBLElBQUksQ0FBQ3FCLFFBQVEsRUFBRTtRQUFFLE9BQU9ILGVBQWU7TUFBRTtNQUN6Q0ssU0FBUyxHQUFHLElBQUksQ0FBQzFCLElBQUksQ0FBQzFCLEdBQUcsR0FBR2tELFFBQVEsQ0FBQ0wsQ0FBQyxHQUFHLENBQUM7O01BRTFDO01BQ0FHLGFBQWEsQ0FBQ08sR0FBRyxDQUFDSCxTQUFTLEVBQUVGLFFBQVEsQ0FBQ0osQ0FBQyxFQUFFLENBQUMsQ0FBQztNQUMzQ0MsZUFBZSxDQUFDUyxVQUFVLENBQUNSLGFBQWEsQ0FBQztNQUN6QyxPQUFPRCxlQUFlO0lBQzFCLENBQUM7RUFDTCxDQUFDLENBQUUsQ0FBQztFQUNKN0IsZUFBZSxFQUFFLFNBQUFBLGdCQUFVdUMsR0FBRyxFQUFFO0lBQzVCLElBQUksQ0FBQ3pDLE1BQU0sQ0FBQ3VDLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDQyxNQUFNLENBQUNiLENBQUMsRUFBRVksR0FBRyxDQUFDQyxNQUFNLENBQUNaLENBQUMsQ0FBQztFQUMvQyxDQUFDO0VBQ0RhLE1BQU0sRUFBRSxTQUFBQSxPQUFBLEVBQVk7SUFDaEIsSUFBSSxDQUFDdkMsRUFBRSxDQUFDd0MsbUJBQW1CLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDMUMsZUFBZSxDQUFDO0VBQ3hFO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119\n//# sourceURL=webpack-internal:///3154\n");

/***/ }),

/***/ 4064:
/*!************************************************************!*\
  !*** ./src/components/aframe/simple-navmesh-constraint.js ***!
  \************************************************************/
/***/ (() => {

eval("function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n/* global AFRAME, THREE */\n\nAFRAME.registerComponent('simple-navmesh-constraint', {\n  schema: {\n    enabled: {\n      \"default\": true\n    },\n    navmesh: {\n      \"default\": ''\n    },\n    fall: {\n      \"default\": 0.5\n    },\n    height: {\n      \"default\": 1.6\n    },\n    exclude: {\n      \"default\": ''\n    },\n    xzOrigin: {\n      \"default\": ''\n    }\n  },\n  update: function update() {\n    this.lastPosition = null;\n    this.excludes = this.data.exclude ? Array.from(document.querySelectorAll(this.data.exclude)) : [];\n    var els = Array.from(document.querySelectorAll(this.data.navmesh));\n    if (els === null) {\n      console.warn('simple-navmesh-constraint: Did not match any elements');\n      this.objects = [];\n    } else {\n      this.objects = els.map(function (el) {\n        return el.object3D;\n      }).concat(this.excludes.map(function (el) {\n        return el.object3D;\n      }));\n    }\n    this.xzOrigin = this.data.xzOrigin ? this.el.querySelector(this.data.xzOrigin) : this.el;\n  },\n  tick: function () {\n    var nextPosition = new THREE.Vector3();\n    var tempVec = new THREE.Vector3();\n    var scanPattern = [[0, 1],\n    // Default the next location\n    [0, 0.5],\n    // Check that the path to that location was fine\n    [30, 0.4],\n    // A little to the side shorter range\n    [-30, 0.4],\n    // A little to the side shorter range\n    [60, 0.2],\n    // Moderately to the side short range\n    [-60, 0.2],\n    // Moderately to the side short range\n    [80, 0.06],\n    // Perpendicular very short range\n    [-80, 0.06] // Perpendicular very short range\n    ];\n    var down = new THREE.Vector3(0, -1, 0);\n    var raycaster = new THREE.Raycaster();\n    var gravity = -1;\n    var maxYVelocity = 0.5;\n    var results = [];\n    var yVel = 0;\n    var firstTry = true;\n    return function tick(time, delta) {\n      if (this.data.enabled === false) return;\n      if (this.lastPosition === null) {\n        firstTry = true;\n        this.lastPosition = new THREE.Vector3();\n        this.xzOrigin.object3D.getWorldPosition(this.lastPosition);\n        if (this.data.xzOrigin) this.lastPosition.y -= this.xzOrigin.object3D.position.y;\n      }\n      var el = this.el;\n      if (this.objects.length === 0) return;\n      this.xzOrigin.object3D.getWorldPosition(nextPosition);\n      if (this.data.xzOrigin) nextPosition.y -= this.xzOrigin.object3D.position.y;\n      if (nextPosition.distanceTo(this.lastPosition) <= 0.01) return;\n      var didHit = false;\n      // So that it does not get stuck it takes as few samples around the user and finds the most appropriate\n      scanPatternLoop: for (var _i = 0, _scanPattern = scanPattern; _i < _scanPattern.length; _i++) {\n        var _scanPattern$_i = _slicedToArray(_scanPattern[_i], 2),\n          angle = _scanPattern$_i[0],\n          distance = _scanPattern$_i[1];\n        tempVec.subVectors(nextPosition, this.lastPosition);\n        tempVec.applyAxisAngle(down, angle * Math.PI / 180);\n        tempVec.multiplyScalar(distance);\n        tempVec.add(this.lastPosition);\n        tempVec.y += maxYVelocity;\n        tempVec.y -= this.data.height;\n        raycaster.set(tempVec, down);\n        raycaster.far = this.data.fall > 0 ? this.data.fall + maxYVelocity : Infinity;\n        raycaster.intersectObjects(this.objects, true, results);\n        if (results.length) {\n          // If it hit something we want to avoid then ignore it and stop looking\n          for (var _i2 = 0, _results = results; _i2 < _results.length; _i2++) {\n            var result = _results[_i2];\n            if (this.excludes.includes(result.object.el)) {\n              results.splice(0);\n              continue scanPatternLoop;\n            }\n          }\n          var hitPos = results[0].point;\n          results.splice(0);\n          hitPos.y += this.data.height;\n          if (nextPosition.y - (hitPos.y - yVel * 2) > 0.01) {\n            yVel += Math.max(gravity * delta * 0.001, -maxYVelocity);\n            hitPos.y = nextPosition.y + yVel;\n          } else {\n            yVel = 0;\n          }\n          tempVec.copy(hitPos);\n          this.xzOrigin.object3D.parent.worldToLocal(tempVec);\n          tempVec.sub(this.xzOrigin.object3D.position);\n          if (this.data.xzOrigin) tempVec.y += this.xzOrigin.object3D.position.y;\n          this.el.object3D.position.add(tempVec);\n          this.lastPosition.copy(hitPos);\n          didHit = true;\n          break;\n        }\n      }\n      if (didHit) {\n        firstTry = false;\n      }\n      if (!firstTry && !didHit) {\n        this.el.object3D.position.copy(this.lastPosition);\n        this.el.object3D.parent.worldToLocal(this.el.object3D.position);\n      }\n    };\n  }()\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDA2NC5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2NoZW1hIiwiZW5hYmxlZCIsIm5hdm1lc2giLCJmYWxsIiwiaGVpZ2h0IiwiZXhjbHVkZSIsInh6T3JpZ2luIiwidXBkYXRlIiwibGFzdFBvc2l0aW9uIiwiZXhjbHVkZXMiLCJkYXRhIiwiQXJyYXkiLCJmcm9tIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxzIiwiY29uc29sZSIsIndhcm4iLCJvYmplY3RzIiwibWFwIiwiZWwiLCJvYmplY3QzRCIsImNvbmNhdCIsInF1ZXJ5U2VsZWN0b3IiLCJ0aWNrIiwibmV4dFBvc2l0aW9uIiwiVEhSRUUiLCJWZWN0b3IzIiwidGVtcFZlYyIsInNjYW5QYXR0ZXJuIiwiZG93biIsInJheWNhc3RlciIsIlJheWNhc3RlciIsImdyYXZpdHkiLCJtYXhZVmVsb2NpdHkiLCJyZXN1bHRzIiwieVZlbCIsImZpcnN0VHJ5IiwidGltZSIsImRlbHRhIiwiZ2V0V29ybGRQb3NpdGlvbiIsInkiLCJwb3NpdGlvbiIsImxlbmd0aCIsImRpc3RhbmNlVG8iLCJkaWRIaXQiLCJzY2FuUGF0dGVybkxvb3AiLCJfaSIsIl9zY2FuUGF0dGVybiIsIl9zY2FuUGF0dGVybiRfaSIsIl9zbGljZWRUb0FycmF5IiwiYW5nbGUiLCJkaXN0YW5jZSIsInN1YlZlY3RvcnMiLCJhcHBseUF4aXNBbmdsZSIsIk1hdGgiLCJQSSIsIm11bHRpcGx5U2NhbGFyIiwiYWRkIiwic2V0IiwiZmFyIiwiSW5maW5pdHkiLCJpbnRlcnNlY3RPYmplY3RzIiwiX2kyIiwiX3Jlc3VsdHMiLCJyZXN1bHQiLCJpbmNsdWRlcyIsIm9iamVjdCIsInNwbGljZSIsImhpdFBvcyIsInBvaW50IiwibWF4IiwiY29weSIsInBhcmVudCIsIndvcmxkVG9Mb2NhbCIsInN1YiJdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvc2ltcGxlLW5hdm1lc2gtY29uc3RyYWludC5qcz9iMGM3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnc2ltcGxlLW5hdm1lc2gtY29uc3RyYWludCcsIHtcbiAgICBzY2hlbWE6IHtcbiAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgfSxcbiAgICAgIG5hdm1lc2g6IHtcbiAgICAgICAgZGVmYXVsdDogJydcbiAgICAgIH0sXG4gICAgICBmYWxsOiB7XG4gICAgICAgIGRlZmF1bHQ6IDAuNVxuICAgICAgfSxcbiAgICAgIGhlaWdodDoge1xuICAgICAgICBkZWZhdWx0OiAxLjZcbiAgICAgIH0sXG4gICAgICBleGNsdWRlOiB7XG4gICAgICAgIGRlZmF1bHQ6ICcnXG4gICAgICB9LFxuICAgICAgeHpPcmlnaW46IHtcbiAgICAgICAgZGVmYXVsdDogJydcbiAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5sYXN0UG9zaXRpb24gPSBudWxsO1xuICAgICAgdGhpcy5leGNsdWRlcyA9IHRoaXMuZGF0YS5leGNsdWRlID8gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuZGF0YS5leGNsdWRlKSk6W107XG4gICAgICBjb25zdCBlbHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5kYXRhLm5hdm1lc2gpKTtcbiAgICAgIGlmIChlbHMgPT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdzaW1wbGUtbmF2bWVzaC1jb25zdHJhaW50OiBEaWQgbm90IG1hdGNoIGFueSBlbGVtZW50cycpO1xuICAgICAgICB0aGlzLm9iamVjdHMgPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub2JqZWN0cyA9IGVscy5tYXAoZWwgPT4gZWwub2JqZWN0M0QpLmNvbmNhdCh0aGlzLmV4Y2x1ZGVzLm1hcChlbCA9PiBlbC5vYmplY3QzRCkpO1xuICAgICAgfVxuICAgICAgdGhpcy54ek9yaWdpbiA9IHRoaXMuZGF0YS54ek9yaWdpbiA/IHRoaXMuZWwucXVlcnlTZWxlY3Rvcih0aGlzLmRhdGEueHpPcmlnaW4pIDogdGhpcy5lbDtcbiAgICB9LFxuICBcbiAgICB0aWNrOiAoZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgbmV4dFBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgIGNvbnN0IHRlbXBWZWMgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgY29uc3Qgc2NhblBhdHRlcm4gPSBbXG4gICAgICAgIFswLDFdLCAvLyBEZWZhdWx0IHRoZSBuZXh0IGxvY2F0aW9uXG4gICAgICAgIFswLDAuNV0sIC8vIENoZWNrIHRoYXQgdGhlIHBhdGggdG8gdGhhdCBsb2NhdGlvbiB3YXMgZmluZVxuICAgICAgICBbMzAsMC40XSwgLy8gQSBsaXR0bGUgdG8gdGhlIHNpZGUgc2hvcnRlciByYW5nZVxuICAgICAgICBbLTMwLDAuNF0sIC8vIEEgbGl0dGxlIHRvIHRoZSBzaWRlIHNob3J0ZXIgcmFuZ2VcbiAgICAgICAgWzYwLDAuMl0sIC8vIE1vZGVyYXRlbHkgdG8gdGhlIHNpZGUgc2hvcnQgcmFuZ2VcbiAgICAgICAgWy02MCwwLjJdLCAvLyBNb2RlcmF0ZWx5IHRvIHRoZSBzaWRlIHNob3J0IHJhbmdlXG4gICAgICAgIFs4MCwwLjA2XSwgLy8gUGVycGVuZGljdWxhciB2ZXJ5IHNob3J0IHJhbmdlXG4gICAgICAgIFstODAsMC4wNl0sIC8vIFBlcnBlbmRpY3VsYXIgdmVyeSBzaG9ydCByYW5nZVxuICAgICAgXTtcbiAgICAgIGNvbnN0IGRvd24gPSBuZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApO1xuICAgICAgY29uc3QgcmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xuICAgICAgY29uc3QgZ3Jhdml0eSA9IC0xO1xuICAgICAgY29uc3QgbWF4WVZlbG9jaXR5ID0gMC41O1xuICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgICAgbGV0IHlWZWwgPSAwO1xuICAgICAgbGV0IGZpcnN0VHJ5ID0gdHJ1ZTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRpY2sodGltZSwgZGVsdGEpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5sYXN0UG9zaXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICBmaXJzdFRyeSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5sYXN0UG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICAgIHRoaXMueHpPcmlnaW4ub2JqZWN0M0QuZ2V0V29ybGRQb3NpdGlvbih0aGlzLmxhc3RQb3NpdGlvbik7XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS54ek9yaWdpbikgdGhpcy5sYXN0UG9zaXRpb24ueSAtPSB0aGlzLnh6T3JpZ2luLm9iamVjdDNELnBvc2l0aW9uLnk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5lbDtcbiAgICAgICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgXG4gICAgICAgIHRoaXMueHpPcmlnaW4ub2JqZWN0M0QuZ2V0V29ybGRQb3NpdGlvbihuZXh0UG9zaXRpb24pO1xuICAgICAgICBpZiAodGhpcy5kYXRhLnh6T3JpZ2luKSBuZXh0UG9zaXRpb24ueSAtPSB0aGlzLnh6T3JpZ2luLm9iamVjdDNELnBvc2l0aW9uLnk7XG4gICAgICAgIGlmIChuZXh0UG9zaXRpb24uZGlzdGFuY2VUbyh0aGlzLmxhc3RQb3NpdGlvbikgPD0gMC4wMSkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgbGV0IGRpZEhpdCA9IGZhbHNlO1xuICAgICAgICAvLyBTbyB0aGF0IGl0IGRvZXMgbm90IGdldCBzdHVjayBpdCB0YWtlcyBhcyBmZXcgc2FtcGxlcyBhcm91bmQgdGhlIHVzZXIgYW5kIGZpbmRzIHRoZSBtb3N0IGFwcHJvcHJpYXRlXG4gICAgICAgIHNjYW5QYXR0ZXJuTG9vcDpcbiAgICAgICAgZm9yIChjb25zdCBbYW5nbGUsIGRpc3RhbmNlXSBvZiBzY2FuUGF0dGVybikge1xuICAgICAgICAgIHRlbXBWZWMuc3ViVmVjdG9ycyhuZXh0UG9zaXRpb24sIHRoaXMubGFzdFBvc2l0aW9uKTtcbiAgICAgICAgICB0ZW1wVmVjLmFwcGx5QXhpc0FuZ2xlKGRvd24sIGFuZ2xlKk1hdGguUEkvMTgwKTtcbiAgICAgICAgICB0ZW1wVmVjLm11bHRpcGx5U2NhbGFyKGRpc3RhbmNlKTtcbiAgICAgICAgICB0ZW1wVmVjLmFkZCh0aGlzLmxhc3RQb3NpdGlvbik7XG4gICAgICAgICAgdGVtcFZlYy55ICs9IG1heFlWZWxvY2l0eTtcbiAgICAgICAgICB0ZW1wVmVjLnkgLT0gdGhpcy5kYXRhLmhlaWdodDtcbiAgICAgICAgICByYXljYXN0ZXIuc2V0KHRlbXBWZWMsIGRvd24pO1xuICAgICAgICAgIHJheWNhc3Rlci5mYXIgPSB0aGlzLmRhdGEuZmFsbCA+IDAgPyB0aGlzLmRhdGEuZmFsbCArIG1heFlWZWxvY2l0eSA6IEluZmluaXR5O1xuICAgICAgICAgIHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHRoaXMub2JqZWN0cywgdHJ1ZSwgcmVzdWx0cyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBJZiBpdCBoaXQgc29tZXRoaW5nIHdlIHdhbnQgdG8gYXZvaWQgdGhlbiBpZ25vcmUgaXQgYW5kIHN0b3AgbG9va2luZ1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICBpZih0aGlzLmV4Y2x1ZGVzLmluY2x1ZGVzKHJlc3VsdC5vYmplY3QuZWwpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5zcGxpY2UoMCk7XG4gICAgICAgICAgICAgICAgY29udGludWUgc2NhblBhdHRlcm5Mb29wO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoaXRQb3MgPSByZXN1bHRzWzBdLnBvaW50O1xuICAgICAgICAgICAgcmVzdWx0cy5zcGxpY2UoMCk7XG4gICAgICAgICAgICBoaXRQb3MueSArPSB0aGlzLmRhdGEuaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKG5leHRQb3NpdGlvbi55IC0gKGhpdFBvcy55IC0geVZlbCoyKSA+IDAuMDEpIHtcbiAgICAgICAgICAgICAgeVZlbCArPSBNYXRoLm1heChncmF2aXR5ICogZGVsdGEgKiAwLjAwMSwgLW1heFlWZWxvY2l0eSk7XG4gICAgICAgICAgICAgIGhpdFBvcy55ID0gbmV4dFBvc2l0aW9uLnkgKyB5VmVsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgeVZlbCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wVmVjLmNvcHkoaGl0UG9zKTtcbiAgICAgICAgICAgIHRoaXMueHpPcmlnaW4ub2JqZWN0M0QucGFyZW50LndvcmxkVG9Mb2NhbCh0ZW1wVmVjKTtcbiAgICAgICAgICAgIHRlbXBWZWMuc3ViKHRoaXMueHpPcmlnaW4ub2JqZWN0M0QucG9zaXRpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS54ek9yaWdpbikgdGVtcFZlYy55ICs9IHRoaXMueHpPcmlnaW4ub2JqZWN0M0QucG9zaXRpb24ueTtcbiAgICAgICAgICAgIHRoaXMuZWwub2JqZWN0M0QucG9zaXRpb24uYWRkKHRlbXBWZWMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmxhc3RQb3NpdGlvbi5jb3B5KGhpdFBvcyk7XG4gICAgICAgICAgICBkaWRIaXQgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZGlkSGl0KSB7XG4gICAgICAgICAgZmlyc3RUcnkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCFmaXJzdFRyeSAmJiAhZGlkSGl0KSB7XG4gICAgICAgICAgdGhpcy5lbC5vYmplY3QzRC5wb3NpdGlvbi5jb3B5KHRoaXMubGFzdFBvc2l0aW9uKTtcbiAgICAgICAgICB0aGlzLmVsLm9iamVjdDNELnBhcmVudC53b3JsZFRvTG9jYWwodGhpcy5lbC5vYmplY3QzRC5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KCkpXG4gIH0pO1xuICAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztBQUVBQSxNQUFNLENBQUNDLGlCQUFpQixDQUFDLDJCQUEyQixFQUFFO0VBQ2xEQyxNQUFNLEVBQUU7SUFDTkMsT0FBTyxFQUFFO01BQ1AsV0FBUztJQUNYLENBQUM7SUFDREMsT0FBTyxFQUFFO01BQ1AsV0FBUztJQUNYLENBQUM7SUFDREMsSUFBSSxFQUFFO01BQ0osV0FBUztJQUNYLENBQUM7SUFDREMsTUFBTSxFQUFFO01BQ04sV0FBUztJQUNYLENBQUM7SUFDREMsT0FBTyxFQUFFO01BQ1AsV0FBUztJQUNYLENBQUM7SUFDREMsUUFBUSxFQUFFO01BQ1IsV0FBUztJQUNYO0VBQ0YsQ0FBQztFQUVEQyxNQUFNLEVBQUUsU0FBQUEsT0FBQSxFQUFZO0lBQ2xCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUk7SUFDeEIsSUFBSSxDQUFDQyxRQUFRLEdBQUcsSUFBSSxDQUFDQyxJQUFJLENBQUNMLE9BQU8sR0FBR00sS0FBSyxDQUFDQyxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsSUFBSSxDQUFDSixJQUFJLENBQUNMLE9BQU8sQ0FBQyxDQUFDLEdBQUMsRUFBRTtJQUMvRixJQUFNVSxHQUFHLEdBQUdKLEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxRQUFRLENBQUNDLGdCQUFnQixDQUFDLElBQUksQ0FBQ0osSUFBSSxDQUFDUixPQUFPLENBQUMsQ0FBQztJQUNwRSxJQUFJYSxHQUFHLEtBQUssSUFBSSxFQUFFO01BQ2hCQyxPQUFPLENBQUNDLElBQUksQ0FBQyx1REFBdUQsQ0FBQztNQUNyRSxJQUFJLENBQUNDLE9BQU8sR0FBRyxFQUFFO0lBQ25CLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQ0EsT0FBTyxHQUFHSCxHQUFHLENBQUNJLEdBQUcsQ0FBQyxVQUFBQyxFQUFFO1FBQUEsT0FBSUEsRUFBRSxDQUFDQyxRQUFRO01BQUEsRUFBQyxDQUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDYixRQUFRLENBQUNVLEdBQUcsQ0FBQyxVQUFBQyxFQUFFO1FBQUEsT0FBSUEsRUFBRSxDQUFDQyxRQUFRO01BQUEsRUFBQyxDQUFDO0lBQ3hGO0lBQ0EsSUFBSSxDQUFDZixRQUFRLEdBQUcsSUFBSSxDQUFDSSxJQUFJLENBQUNKLFFBQVEsR0FBRyxJQUFJLENBQUNjLEVBQUUsQ0FBQ0csYUFBYSxDQUFDLElBQUksQ0FBQ2IsSUFBSSxDQUFDSixRQUFRLENBQUMsR0FBRyxJQUFJLENBQUNjLEVBQUU7RUFDMUYsQ0FBQztFQUVESSxJQUFJLEVBQUcsWUFBWTtJQUNqQixJQUFNQyxZQUFZLEdBQUcsSUFBSUMsS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQztJQUN4QyxJQUFNQyxPQUFPLEdBQUcsSUFBSUYsS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQztJQUNuQyxJQUFNRSxXQUFXLEdBQUcsQ0FDbEIsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQUU7SUFDUCxDQUFDLENBQUMsRUFBQyxHQUFHLENBQUM7SUFBRTtJQUNULENBQUMsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUFFO0lBQ1YsQ0FBQyxDQUFDLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFBRTtJQUNYLENBQUMsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUFFO0lBQ1YsQ0FBQyxDQUFDLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFBRTtJQUNYLENBQUMsRUFBRSxFQUFDLElBQUksQ0FBQztJQUFFO0lBQ1gsQ0FBQyxDQUFDLEVBQUUsRUFBQyxJQUFJLENBQUMsQ0FBRTtJQUFBLENBQ2I7SUFDRCxJQUFNQyxJQUFJLEdBQUcsSUFBSUosS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUN0QyxJQUFNSSxTQUFTLEdBQUcsSUFBSUwsS0FBSyxDQUFDTSxTQUFTLENBQUMsQ0FBQztJQUN2QyxJQUFNQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBQ2xCLElBQU1DLFlBQVksR0FBRyxHQUFHO0lBQ3hCLElBQU1DLE9BQU8sR0FBRyxFQUFFO0lBQ2xCLElBQUlDLElBQUksR0FBRyxDQUFDO0lBQ1osSUFBSUMsUUFBUSxHQUFHLElBQUk7SUFFbkIsT0FBTyxTQUFTYixJQUFJQSxDQUFDYyxJQUFJLEVBQUVDLEtBQUssRUFBRTtNQUNoQyxJQUFJLElBQUksQ0FBQzdCLElBQUksQ0FBQ1QsT0FBTyxLQUFLLEtBQUssRUFBRTtNQUNqQyxJQUFJLElBQUksQ0FBQ08sWUFBWSxLQUFLLElBQUksRUFBRTtRQUM5QjZCLFFBQVEsR0FBRyxJQUFJO1FBQ2YsSUFBSSxDQUFDN0IsWUFBWSxHQUFHLElBQUlrQixLQUFLLENBQUNDLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZDLElBQUksQ0FBQ3JCLFFBQVEsQ0FBQ2UsUUFBUSxDQUFDbUIsZ0JBQWdCLENBQUMsSUFBSSxDQUFDaEMsWUFBWSxDQUFDO1FBQzFELElBQUksSUFBSSxDQUFDRSxJQUFJLENBQUNKLFFBQVEsRUFBRSxJQUFJLENBQUNFLFlBQVksQ0FBQ2lDLENBQUMsSUFBSSxJQUFJLENBQUNuQyxRQUFRLENBQUNlLFFBQVEsQ0FBQ3FCLFFBQVEsQ0FBQ0QsQ0FBQztNQUNsRjtNQUVBLElBQU1yQixFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO01BQ2xCLElBQUksSUFBSSxDQUFDRixPQUFPLENBQUN5QixNQUFNLEtBQUssQ0FBQyxFQUFFO01BRS9CLElBQUksQ0FBQ3JDLFFBQVEsQ0FBQ2UsUUFBUSxDQUFDbUIsZ0JBQWdCLENBQUNmLFlBQVksQ0FBQztNQUNyRCxJQUFJLElBQUksQ0FBQ2YsSUFBSSxDQUFDSixRQUFRLEVBQUVtQixZQUFZLENBQUNnQixDQUFDLElBQUksSUFBSSxDQUFDbkMsUUFBUSxDQUFDZSxRQUFRLENBQUNxQixRQUFRLENBQUNELENBQUM7TUFDM0UsSUFBSWhCLFlBQVksQ0FBQ21CLFVBQVUsQ0FBQyxJQUFJLENBQUNwQyxZQUFZLENBQUMsSUFBSSxJQUFJLEVBQUU7TUFFeEQsSUFBSXFDLE1BQU0sR0FBRyxLQUFLO01BQ2xCO01BQ0FDLGVBQWUsRUFDZixTQUFBQyxFQUFBLE1BQUFDLFlBQUEsR0FBZ0NuQixXQUFXLEVBQUFrQixFQUFBLEdBQUFDLFlBQUEsQ0FBQUwsTUFBQSxFQUFBSSxFQUFBLElBQUU7UUFBeEMsSUFBQUUsZUFBQSxHQUFBQyxjQUFBLENBQUFGLFlBQUEsQ0FBQUQsRUFBQTtVQUFPSSxLQUFLLEdBQUFGLGVBQUE7VUFBRUcsUUFBUSxHQUFBSCxlQUFBO1FBQ3pCckIsT0FBTyxDQUFDeUIsVUFBVSxDQUFDNUIsWUFBWSxFQUFFLElBQUksQ0FBQ2pCLFlBQVksQ0FBQztRQUNuRG9CLE9BQU8sQ0FBQzBCLGNBQWMsQ0FBQ3hCLElBQUksRUFBRXFCLEtBQUssR0FBQ0ksSUFBSSxDQUFDQyxFQUFFLEdBQUMsR0FBRyxDQUFDO1FBQy9DNUIsT0FBTyxDQUFDNkIsY0FBYyxDQUFDTCxRQUFRLENBQUM7UUFDaEN4QixPQUFPLENBQUM4QixHQUFHLENBQUMsSUFBSSxDQUFDbEQsWUFBWSxDQUFDO1FBQzlCb0IsT0FBTyxDQUFDYSxDQUFDLElBQUlQLFlBQVk7UUFDekJOLE9BQU8sQ0FBQ2EsQ0FBQyxJQUFJLElBQUksQ0FBQy9CLElBQUksQ0FBQ04sTUFBTTtRQUM3QjJCLFNBQVMsQ0FBQzRCLEdBQUcsQ0FBQy9CLE9BQU8sRUFBRUUsSUFBSSxDQUFDO1FBQzVCQyxTQUFTLENBQUM2QixHQUFHLEdBQUcsSUFBSSxDQUFDbEQsSUFBSSxDQUFDUCxJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQ08sSUFBSSxDQUFDUCxJQUFJLEdBQUcrQixZQUFZLEdBQUcyQixRQUFRO1FBQzdFOUIsU0FBUyxDQUFDK0IsZ0JBQWdCLENBQUMsSUFBSSxDQUFDNUMsT0FBTyxFQUFFLElBQUksRUFBRWlCLE9BQU8sQ0FBQztRQUV2RCxJQUFJQSxPQUFPLENBQUNRLE1BQU0sRUFBRTtVQUNsQjtVQUNBLFNBQUFvQixHQUFBLE1BQUFDLFFBQUEsR0FBcUI3QixPQUFPLEVBQUE0QixHQUFBLEdBQUFDLFFBQUEsQ0FBQXJCLE1BQUEsRUFBQW9CLEdBQUEsSUFBRTtZQUF6QixJQUFNRSxNQUFNLEdBQUFELFFBQUEsQ0FBQUQsR0FBQTtZQUNmLElBQUcsSUFBSSxDQUFDdEQsUUFBUSxDQUFDeUQsUUFBUSxDQUFDRCxNQUFNLENBQUNFLE1BQU0sQ0FBQy9DLEVBQUUsQ0FBQyxFQUFFO2NBQzNDZSxPQUFPLENBQUNpQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2NBQ2pCLFNBQVN0QixlQUFlO1lBQzFCO1VBQ0Y7VUFDQSxJQUFNdUIsTUFBTSxHQUFHbEMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDbUMsS0FBSztVQUMvQm5DLE9BQU8sQ0FBQ2lDLE1BQU0sQ0FBQyxDQUFDLENBQUM7VUFDakJDLE1BQU0sQ0FBQzVCLENBQUMsSUFBSSxJQUFJLENBQUMvQixJQUFJLENBQUNOLE1BQU07VUFDNUIsSUFBSXFCLFlBQVksQ0FBQ2dCLENBQUMsSUFBSTRCLE1BQU0sQ0FBQzVCLENBQUMsR0FBR0wsSUFBSSxHQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRTtZQUMvQ0EsSUFBSSxJQUFJbUIsSUFBSSxDQUFDZ0IsR0FBRyxDQUFDdEMsT0FBTyxHQUFHTSxLQUFLLEdBQUcsS0FBSyxFQUFFLENBQUNMLFlBQVksQ0FBQztZQUN4RG1DLE1BQU0sQ0FBQzVCLENBQUMsR0FBR2hCLFlBQVksQ0FBQ2dCLENBQUMsR0FBR0wsSUFBSTtVQUNsQyxDQUFDLE1BQU07WUFDTEEsSUFBSSxHQUFHLENBQUM7VUFDVjtVQUNBUixPQUFPLENBQUM0QyxJQUFJLENBQUNILE1BQU0sQ0FBQztVQUNwQixJQUFJLENBQUMvRCxRQUFRLENBQUNlLFFBQVEsQ0FBQ29ELE1BQU0sQ0FBQ0MsWUFBWSxDQUFDOUMsT0FBTyxDQUFDO1VBQ25EQSxPQUFPLENBQUMrQyxHQUFHLENBQUMsSUFBSSxDQUFDckUsUUFBUSxDQUFDZSxRQUFRLENBQUNxQixRQUFRLENBQUM7VUFDNUMsSUFBSSxJQUFJLENBQUNoQyxJQUFJLENBQUNKLFFBQVEsRUFBRXNCLE9BQU8sQ0FBQ2EsQ0FBQyxJQUFJLElBQUksQ0FBQ25DLFFBQVEsQ0FBQ2UsUUFBUSxDQUFDcUIsUUFBUSxDQUFDRCxDQUFDO1VBQ3RFLElBQUksQ0FBQ3JCLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDcUIsUUFBUSxDQUFDZ0IsR0FBRyxDQUFDOUIsT0FBTyxDQUFDO1VBRXRDLElBQUksQ0FBQ3BCLFlBQVksQ0FBQ2dFLElBQUksQ0FBQ0gsTUFBTSxDQUFDO1VBQzlCeEIsTUFBTSxHQUFHLElBQUk7VUFDYjtRQUNGO01BRUY7TUFFQSxJQUFJQSxNQUFNLEVBQUU7UUFDVlIsUUFBUSxHQUFHLEtBQUs7TUFDbEI7TUFFQSxJQUFJLENBQUNBLFFBQVEsSUFBSSxDQUFDUSxNQUFNLEVBQUU7UUFDeEIsSUFBSSxDQUFDekIsRUFBRSxDQUFDQyxRQUFRLENBQUNxQixRQUFRLENBQUM4QixJQUFJLENBQUMsSUFBSSxDQUFDaEUsWUFBWSxDQUFDO1FBQ2pELElBQUksQ0FBQ1ksRUFBRSxDQUFDQyxRQUFRLENBQUNvRCxNQUFNLENBQUNDLFlBQVksQ0FBQyxJQUFJLENBQUN0RCxFQUFFLENBQUNDLFFBQVEsQ0FBQ3FCLFFBQVEsQ0FBQztNQUNqRTtJQUNGLENBQUM7RUFDSCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=\n//# sourceURL=webpack-internal:///4064\n");

/***/ }),

/***/ 9464:
/*!****************************************!*\
  !*** ./src/components/aframe/utils.js ***!
  \****************************************/
/***/ (() => {

eval("AFRAME.registerComponent(\"send-state-event\", {\n  schema: {\n    type: \"string\"\n  },\n  init: function init() {\n    var _this = this;\n    this.el.addEventListener(\"click\", function (evt) {\n      console.log(_this.data);\n      _this.el.sceneEl.emit(\"game-state-event\", _this.data);\n    });\n  }\n});\nAFRAME.registerComponent('log-on-click', {\n  init: function init() {\n    this.el.addEventListener('click', function (evt) {\n      console.log('I was clicked at: ', evt.detail.intersection.point);\n    });\n  }\n});\nAFRAME.registerComponent(\"briefing-dismiss\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      // console.log(evt.detail);\n      if (evt.detail.target.classList.contains(\"dismiss\")) {\n        //     console.log(\"Briefing panel clicked\");\n        //     // End the briefing.\n        el.removeEventListener(\"lit-click\", cb);\n        el.emit(\"game-state-event\", \"end\");\n        document.querySelector(\"esc-watch\").web2vrComponent.aframe.container.components[\"game-clock\"].start();\n      }\n      // el.remove();\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n    // console.log(this.el.querySelector(\".dismiss\"));\n    // this.el.querySelector(\".dismiss\").addEventListener(\"click\", cb);\n  }\n});\nAFRAME.registerComponent(\"tutorial-example\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      console.log(evt.detail);\n      // if (evt.detail.target.classList.contains(\"dismiss\")) {\n      console.log(\"Button was clicked!\");\n      el.removeEventListener(\"lit-click\", cb);\n      // el.emit(\"game-state-event\", \"end\");\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n    // console.log(this.el.querySelector(\".dismiss\"));\n    // this.el.querySelector(\".dismiss\").addEventListener(\"click\", cb);\n    // this.el.querySelector(\".example_button span\").innerText = \"Good Job!\";\n    // this.el.querySelector(\".example_button\").style.backgroundColor = \"green\";\n  }\n});\nAFRAME.registerComponent(\"to-main-scene\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      // if (evt.detail.target.classList.contains(\"map\")) {\n      document.getElementById(\"fadeStationaryCamera\").emit(\"animate_fadeOut\");\n      setTimeout(function () {\n        document.getElementById(\"fadeMainCamera\").emit(\"animate_fadeIn\");\n        document.getElementById('mainScene').setAttribute('visible', 'true');\n        document.getElementById('stationaryScene').setAttribute('visible', 'false');\n        document.getElementById(\"camera\").setAttribute(\"camera\", \"active\", \"true\");\n      }, 500);\n      // el.removeEventListener(\"lit-click\", cb);\n      // el.emit(\"game-state-event\", \"end\");\n      // }\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n    // console.log(this.el.querySelector(\".dismiss\"));\n    // this.el.querySelector(\".dismiss\").addEventListener(\"click\", cb);\n  }\n});\nAFRAME.registerComponent(\"to-stationary-scene\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      document.getElementById(\"fadeMainCamera\").emit(\"animate_fadeOut\");\n      document.getElementById(\"fadeStationaryCamera\").emit(\"animate_fadeIn\");\n      setTimeout(function () {\n        document.getElementById('mainScene').setAttribute('visible', 'false');\n        document.getElementById('stationaryScene').setAttribute('visible', 'true');\n        document.getElementById(\"stationaryCamera\").setAttribute(\"camera\", \"active\", \"true\");\n      }, 500);\n      // el.removeEventListener(\"lit-click\", cb);\n      // el.emit(\"game-state-event\", \"end\");\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n    // console.log(this.el.querySelector(\".dismiss\"));\n    // this.el.querySelector(\".dismiss\").addEventListener(\"click\", cb);\n  }\n});\n\n// TODO: Make one of these for each puzzle.\nAFRAME.registerComponent(\"puzzle1solved\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      console.log(\"Room 1 Puzzle 1 clicked\");\n      if (evt.detail.target.classList.contains(\"solve_puzzle_1\")) {\n        console.log(\"SHould End puzzle 1\");\n        el.removeEventListener(\"lit-click\", cb);\n        el.emit(\"game-state-event\", \"puzzle1.solved\");\n      }\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n  }\n});\n\n// Add actions to the state machine for this application.\nAFRAME.registerComponent(\"custom-game-state-actions\", {\n  init: function init() {\n    this.el.sceneEl.systems['game-state'].addActions({\n      room1complete: function room1complete(_ref) {\n        var context = _ref.context,\n          event = _ref.event;\n        console.log('Room 1 complete');\n        document.querySelector(\"#firstPuzzleDoor .navmesh-hole\").remove();\n        document.querySelector(\"#firstPuzzleDoor\").setAttribute(\"visible\", \"false\");\n      },\n      room2complete: function room2complete(_ref2) {\n        var context = _ref2.context,\n          event = _ref2.event;\n        console.log('Room 2 complete');\n        document.querySelector(\"#secondPuzzleDoor .navmesh-hole\").remove();\n        document.querySelector(\"#secondPuzzleDoor\").setAttribute(\"visible\", \"false\");\n      },\n      finalCoomComplete: function finalCoomComplete(_ref3) {\n        var context = _ref3.context,\n          event = _ref3.event;\n        console.log('Final Room complete');\n        document.querySelector(\"#exitDoor .navmesh-hole\").remove();\n        document.querySelector(\"#exitDoor\").setAttribute(\"visible\", \"false\");\n      }\n    });\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTQ2NC5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2NoZW1hIiwidHlwZSIsImluaXQiLCJfdGhpcyIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwic2NlbmVFbCIsImVtaXQiLCJkZXRhaWwiLCJpbnRlcnNlY3Rpb24iLCJwb2ludCIsImNiIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwid2ViMnZyQ29tcG9uZW50IiwiYWZyYW1lIiwiY29udGFpbmVyIiwiY29tcG9uZW50cyIsInN0YXJ0IiwiZ2V0RWxlbWVudEJ5SWQiLCJzZXRUaW1lb3V0Iiwic2V0QXR0cmlidXRlIiwic3lzdGVtcyIsImFkZEFjdGlvbnMiLCJyb29tMWNvbXBsZXRlIiwiX3JlZiIsImNvbnRleHQiLCJldmVudCIsInJlbW92ZSIsInJvb20yY29tcGxldGUiLCJfcmVmMiIsImZpbmFsQ29vbUNvbXBsZXRlIiwiX3JlZjMiXSwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvYWZyYW1lL3V0aWxzLmpzPzNjMWIiXSwic291cmNlc0NvbnRlbnQiOlsiQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwic2VuZC1zdGF0ZS1ldmVudFwiLCB7XG4gICAgc2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YSk7XG4gICAgICAgICAgICB0aGlzLmVsLnNjZW5lRWwuZW1pdChcImdhbWUtc3RhdGUtZXZlbnRcIiwgdGhpcy5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9KVxuXG5cbiAgICBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2xvZy1vbi1jbGljaycsIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSSB3YXMgY2xpY2tlZCBhdDogJywgZXZ0LmRldGFpbC5pbnRlcnNlY3Rpb24ucG9pbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgICBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJicmllZmluZy1kaXNtaXNzXCIsIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgICAgICB2YXIgY2IgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2dC5kZXRhaWwpO1xuICAgICAgICAgICAgaWYgKGV2dC5kZXRhaWwudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImRpc21pc3NcIikpIHtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIkJyaWVmaW5nIHBhbmVsIGNsaWNrZWRcIik7XG4gICAgICAgICAgICAvLyAgICAgLy8gRW5kIHRoZSBicmllZmluZy5cbiAgICAgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcImVuZFwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZXNjLXdhdGNoXCIpLndlYjJ2ckNvbXBvbmVudC5hZnJhbWUuY29udGFpbmVyLmNvbXBvbmVudHNbXCJnYW1lLWNsb2NrXCJdLnN0YXJ0KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVsLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJsaXQtY2xpY2tcIiwgY2IpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5kaXNtaXNzXCIpKTtcbiAgICAgICAgICAvLyB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzbWlzc1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2IpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwidHV0b3JpYWwtZXhhbXBsZVwiLCB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICAgICAgdmFyIGNiID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldnQuZGV0YWlsKTtcbiAgICAgICAgICAgIC8vIGlmIChldnQuZGV0YWlsLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNtaXNzXCIpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkJ1dHRvbiB3YXMgY2xpY2tlZCFcIik7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcImVuZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzbWlzc1wiKSk7XG4gICAgICAgICAgLy8gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmRpc21pc3NcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAvLyB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZXhhbXBsZV9idXR0b24gc3BhblwiKS5pbm5lclRleHQgPSBcIkdvb2QgSm9iIVwiO1xuICAgICAgICAgIC8vIHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5leGFtcGxlX2J1dHRvblwiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG5cbiAgICAgIEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcInRvLW1haW4tc2NlbmVcIiwge1xuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgICAgICAgIHZhciBjYiA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgLy8gaWYgKGV2dC5kZXRhaWwudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1hcFwiKSkge1xuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZhZGVTdGF0aW9uYXJ5Q2FtZXJhXCIpLmVtaXQoXCJhbmltYXRlX2ZhZGVPdXRcIik7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmFkZU1haW5DYW1lcmFcIikuZW1pdChcImFuaW1hdGVfZmFkZUluXCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluU2NlbmUnKS5zZXRBdHRyaWJ1dGUoJ3Zpc2libGUnLCAndHJ1ZScpXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRpb25hcnlTY2VuZScpLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsICdmYWxzZScpXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW1lcmFcIikuc2V0QXR0cmlidXRlKFwiY2FtZXJhXCIsIFwiYWN0aXZlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcImVuZFwiKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzbWlzc1wiKSk7XG4gICAgICAgICAgLy8gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmRpc21pc3NcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJ0by1zdGF0aW9uYXJ5LXNjZW5lXCIsIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgICAgICB2YXIgY2IgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmYWRlTWFpbkNhbWVyYVwiKS5lbWl0KFwiYW5pbWF0ZV9mYWRlT3V0XCIpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZhZGVTdGF0aW9uYXJ5Q2FtZXJhXCIpLmVtaXQoXCJhbmltYXRlX2ZhZGVJblwiKTtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5TY2VuZScpLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsICdmYWxzZScpXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRpb25hcnlTY2VuZScpLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsICd0cnVlJylcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXRpb25hcnlDYW1lcmFcIikuc2V0QXR0cmlidXRlKFwiY2FtZXJhXCIsIFwiYWN0aXZlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcImVuZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzbWlzc1wiKSk7XG4gICAgICAgICAgLy8gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmRpc21pc3NcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cblxuICAgICAgLy8gVE9ETzogTWFrZSBvbmUgb2YgdGhlc2UgZm9yIGVhY2ggcHV6emxlLlxuICAgICAgQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwicHV6emxlMXNvbHZlZFwiLCB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICAgICAgdmFyIGNiID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJvb20gMSBQdXp6bGUgMSBjbGlja2VkXCIpO1xuICAgICAgICAgICAgaWYgKGV2dC5kZXRhaWwudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInNvbHZlX3B1enpsZV8xXCIpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU0hvdWxkIEVuZCBwdXp6bGUgMVwiKTtcbiAgICAgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcInB1enpsZTEuc29sdmVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJsaXQtY2xpY2tcIiwgY2IpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIGFjdGlvbnMgdG8gdGhlIHN0YXRlIG1hY2hpbmUgZm9yIHRoaXMgYXBwbGljYXRpb24uXG4gICAgICBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJjdXN0b20tZ2FtZS1zdGF0ZS1hY3Rpb25zXCIsIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXNbJ2dhbWUtc3RhdGUnXS5hZGRBY3Rpb25zKHtcbiAgICAgICAgICAgIHJvb20xY29tcGxldGU6IGZ1bmN0aW9uKHtjb250ZXh0LCBldmVudH0pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Jvb20gMSBjb21wbGV0ZScpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpcnN0UHV6emxlRG9vciAubmF2bWVzaC1ob2xlXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpcnN0UHV6emxlRG9vclwiKS5zZXRBdHRyaWJ1dGUoXCJ2aXNpYmxlXCIsIFwiZmFsc2VcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcm9vbTJjb21wbGV0ZTogZnVuY3Rpb24oe2NvbnRleHQsIGV2ZW50fSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUm9vbSAyIGNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2Vjb25kUHV6emxlRG9vciAubmF2bWVzaC1ob2xlXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NlY29uZFB1enpsZURvb3JcIikuc2V0QXR0cmlidXRlKFwidmlzaWJsZVwiLCBcImZhbHNlXCIpOyAgICAgICAgICBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmaW5hbENvb21Db21wbGV0ZTogZnVuY3Rpb24oe2NvbnRleHQsIGV2ZW50fSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmluYWwgUm9vbSBjb21wbGV0ZScpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2V4aXREb29yIC5uYXZtZXNoLWhvbGVcIikucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZXhpdERvb3JcIikuc2V0QXR0cmlidXRlKFwidmlzaWJsZVwiLCBcImZhbHNlXCIpOyAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7Il0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyxrQkFBa0IsRUFBRTtFQUN6Q0MsTUFBTSxFQUFFO0lBQUVDLElBQUksRUFBRTtFQUFTLENBQUM7RUFDMUJDLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVk7SUFBQSxJQUFBQyxLQUFBO0lBQ2QsSUFBSSxDQUFDQyxFQUFFLENBQUNDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFDQyxHQUFHLEVBQUs7TUFDdkNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTCxLQUFJLENBQUNNLElBQUksQ0FBQztNQUN0Qk4sS0FBSSxDQUFDQyxFQUFFLENBQUNNLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLGtCQUFrQixFQUFFUixLQUFJLENBQUNNLElBQUksQ0FBQztJQUN2RCxDQUFDLENBQUM7RUFDTjtBQUNGLENBQUMsQ0FBQztBQUdBWCxNQUFNLENBQUNDLGlCQUFpQixDQUFDLGNBQWMsRUFBRTtFQUNyQ0csSUFBSSxFQUFFLFNBQUFBLEtBQUEsRUFBWTtJQUNkLElBQUksQ0FBQ0UsRUFBRSxDQUFDQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBVUMsR0FBRyxFQUFFO01BQzdDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRUYsR0FBRyxDQUFDTSxNQUFNLENBQUNDLFlBQVksQ0FBQ0MsS0FBSyxDQUFDO0lBQ3BFLENBQUMsQ0FBQztFQUNOO0FBQ0osQ0FBQyxDQUFDO0FBR0FoQixNQUFNLENBQUNDLGlCQUFpQixDQUFDLGtCQUFrQixFQUFFO0VBQzNDRyxJQUFJLEVBQUUsU0FBQUEsS0FBQSxFQUFXO0lBQ2YsSUFBSUUsRUFBRSxHQUFHLElBQUksQ0FBQ0EsRUFBRTtJQUNoQixJQUFJVyxFQUFFLEdBQUcsU0FBTEEsRUFBRUEsQ0FBWVQsR0FBRyxFQUFFO01BQ3JCO01BQ0EsSUFBSUEsR0FBRyxDQUFDTSxNQUFNLENBQUNJLE1BQU0sQ0FBQ0MsU0FBUyxDQUFDQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUU7UUFDckQ7UUFDQTtRQUNJZCxFQUFFLENBQUNlLG1CQUFtQixDQUFDLFdBQVcsRUFBRUosRUFBRSxDQUFDO1FBQ3ZDWCxFQUFFLENBQUNPLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLENBQUM7UUFDbENTLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDQyxlQUFlLENBQUNDLE1BQU0sQ0FBQ0MsU0FBUyxDQUFDQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUNDLEtBQUssQ0FBQyxDQUFDO01BQ3pHO01BQ0E7SUFDRixDQUFDO0lBQ0QsSUFBSSxDQUFDdEIsRUFBRSxDQUFDQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUVVLEVBQUUsQ0FBQztJQUN6QztJQUNBO0VBQ0Y7QUFDRixDQUFDLENBQUM7QUFFRmpCLE1BQU0sQ0FBQ0MsaUJBQWlCLENBQUMsa0JBQWtCLEVBQUU7RUFDM0NHLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVc7SUFDZixJQUFJRSxFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO0lBQ2hCLElBQUlXLEVBQUUsR0FBRyxTQUFMQSxFQUFFQSxDQUFZVCxHQUFHLEVBQUU7TUFDckJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixHQUFHLENBQUNNLE1BQU0sQ0FBQztNQUN2QjtNQUNBTCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztNQUNsQ0osRUFBRSxDQUFDZSxtQkFBbUIsQ0FBQyxXQUFXLEVBQUVKLEVBQUUsQ0FBQztNQUNuQztJQUNOLENBQUM7SUFFRCxJQUFJLENBQUNYLEVBQUUsQ0FBQ0MsZ0JBQWdCLENBQUMsV0FBVyxFQUFFVSxFQUFFLENBQUM7SUFDekM7SUFDQTtJQUNBO0lBQ0E7RUFDRjtBQUNGLENBQUMsQ0FBQztBQUdGakIsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUU7RUFDeENHLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVc7SUFDZixJQUFJRSxFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO0lBQ2hCLElBQUlXLEVBQUUsR0FBRyxTQUFMQSxFQUFFQSxDQUFZVCxHQUFHLEVBQUU7TUFDckI7TUFDRWMsUUFBUSxDQUFDTyxjQUFjLENBQUMsc0JBQXNCLENBQUMsQ0FBQ2hCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztNQUN2RWlCLFVBQVUsQ0FBQyxZQUFNO1FBQ2ZSLFFBQVEsQ0FBQ08sY0FBYyxDQUFDLGdCQUFnQixDQUFDLENBQUNoQixJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDaEVTLFFBQVEsQ0FBQ08sY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDRSxZQUFZLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQztRQUNwRVQsUUFBUSxDQUFDTyxjQUFjLENBQUMsaUJBQWlCLENBQUMsQ0FBQ0UsWUFBWSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUM7UUFDM0VULFFBQVEsQ0FBQ08sY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDRSxZQUFZLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUM7TUFDNUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQztNQUNMO01BQ0E7TUFDSjtJQUNGLENBQUM7SUFDRCxJQUFJLENBQUN6QixFQUFFLENBQUNDLGdCQUFnQixDQUFDLFdBQVcsRUFBRVUsRUFBRSxDQUFDO0lBQ3pDO0lBQ0E7RUFDRjtBQUNGLENBQUMsQ0FBQztBQUNGakIsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyxxQkFBcUIsRUFBRTtFQUM5Q0csSUFBSSxFQUFFLFNBQUFBLEtBQUEsRUFBVztJQUNmLElBQUlFLEVBQUUsR0FBRyxJQUFJLENBQUNBLEVBQUU7SUFDaEIsSUFBSVcsRUFBRSxHQUFHLFNBQUxBLEVBQUVBLENBQVlULEdBQUcsRUFBRTtNQUNuQmMsUUFBUSxDQUFDTyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQ2hCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztNQUNqRVMsUUFBUSxDQUFDTyxjQUFjLENBQUMsc0JBQXNCLENBQUMsQ0FBQ2hCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztNQUN0RWlCLFVBQVUsQ0FBQyxZQUFNO1FBQ2ZSLFFBQVEsQ0FBQ08sY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDRSxZQUFZLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQztRQUNyRVQsUUFBUSxDQUFDTyxjQUFjLENBQUMsaUJBQWlCLENBQUMsQ0FBQ0UsWUFBWSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUM7UUFDMUVULFFBQVEsQ0FBQ08sY0FBYyxDQUFDLGtCQUFrQixDQUFDLENBQUNFLFlBQVksQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQztNQUN0RixDQUFDLEVBQUUsR0FBRyxDQUFDO01BQ0w7TUFDQTtJQUNOLENBQUM7SUFDRCxJQUFJLENBQUN6QixFQUFFLENBQUNDLGdCQUFnQixDQUFDLFdBQVcsRUFBRVUsRUFBRSxDQUFDO0lBQ3pDO0lBQ0E7RUFDRjtBQUNGLENBQUMsQ0FBQzs7QUFHRjtBQUNBakIsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUU7RUFDeENHLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVc7SUFDZixJQUFJRSxFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO0lBQ2hCLElBQUlXLEVBQUUsR0FBRyxTQUFMQSxFQUFFQSxDQUFZVCxHQUFHLEVBQUU7TUFDckJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHlCQUF5QixDQUFDO01BQ3RDLElBQUlGLEdBQUcsQ0FBQ00sTUFBTSxDQUFDSSxNQUFNLENBQUNDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7UUFDMURYLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHFCQUFxQixDQUFDO1FBQ2hDSixFQUFFLENBQUNlLG1CQUFtQixDQUFDLFdBQVcsRUFBRUosRUFBRSxDQUFDO1FBQ3ZDWCxFQUFFLENBQUNPLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxnQkFBZ0IsQ0FBQztNQUNqRDtJQUNGLENBQUM7SUFDRCxJQUFJLENBQUNQLEVBQUUsQ0FBQ0MsZ0JBQWdCLENBQUMsV0FBVyxFQUFFVSxFQUFFLENBQUM7RUFDM0M7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQWpCLE1BQU0sQ0FBQ0MsaUJBQWlCLENBQUMsMkJBQTJCLEVBQUU7RUFDcERHLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVc7SUFDZixJQUFJLENBQUNFLEVBQUUsQ0FBQ00sT0FBTyxDQUFDb0IsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDQyxVQUFVLENBQUM7TUFDL0NDLGFBQWEsRUFBRSxTQUFBQSxjQUFBQyxJQUFBLEVBQTJCO1FBQUEsSUFBakJDLE9BQU8sR0FBQUQsSUFBQSxDQUFQQyxPQUFPO1VBQUVDLEtBQUssR0FBQUYsSUFBQSxDQUFMRSxLQUFLO1FBQ3JDNUIsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCLENBQUM7UUFDOUJZLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGdDQUFnQyxDQUFDLENBQUNlLE1BQU0sQ0FBQyxDQUFDO1FBQ2pFaEIsUUFBUSxDQUFDQyxhQUFhLENBQUMsa0JBQWtCLENBQUMsQ0FBQ1EsWUFBWSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUM7TUFDN0UsQ0FBQztNQUNEUSxhQUFhLEVBQUUsU0FBQUEsY0FBQUMsS0FBQSxFQUEyQjtRQUFBLElBQWpCSixPQUFPLEdBQUFJLEtBQUEsQ0FBUEosT0FBTztVQUFFQyxLQUFLLEdBQUFHLEtBQUEsQ0FBTEgsS0FBSztRQUNyQzVCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlCQUFpQixDQUFDO1FBQzlCWSxRQUFRLENBQUNDLGFBQWEsQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDZSxNQUFNLENBQUMsQ0FBQztRQUNsRWhCLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLG1CQUFtQixDQUFDLENBQUNRLFlBQVksQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDO01BQzlFLENBQUM7TUFDRFUsaUJBQWlCLEVBQUUsU0FBQUEsa0JBQUFDLEtBQUEsRUFBMkI7UUFBQSxJQUFqQk4sT0FBTyxHQUFBTSxLQUFBLENBQVBOLE9BQU87VUFBRUMsS0FBSyxHQUFBSyxLQUFBLENBQUxMLEtBQUs7UUFDekM1QixPQUFPLENBQUNDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztRQUNsQ1ksUUFBUSxDQUFDQyxhQUFhLENBQUMseUJBQXlCLENBQUMsQ0FBQ2UsTUFBTSxDQUFDLENBQUM7UUFDMURoQixRQUFRLENBQUNDLGFBQWEsQ0FBQyxXQUFXLENBQUMsQ0FBQ1EsWUFBWSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUM7TUFDdEU7SUFDRixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==\n//# sourceURL=webpack-internal:///9464\n");

/***/ }),

/***/ 4388:
/*!**************************************!*\
  !*** ./src/components/lit/Button.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Button: () => (/* binding */ Button)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar Button = /*#__PURE__*/function (_ComponentBaseElement) {\n  function Button() {\n    _classCallCheck(this, Button);\n    return _callSuper(this, Button);\n  }\n  _inherits(Button, _ComponentBaseElement);\n  return _createClass(Button, [{\n    key: \"render\",\n    value: function render() {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div class=\\\"html-container\\\" id=\\\"container_\", \"\\\">\\n            <button @click=\\\"\", \"\\\" class=\\\"btn btn-primary\\\">\", \"</button>\\n        </div>\\n      \"])), this.cid, this._clickHandler, this.text);\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      // Click Handler here is delegated to the AFrame click handler, which listens on the entire entity.\n      // this.infoVisible = !this.infoVisible;\n      // console.log(\"Inside the click handler, evt is \", e);\n      // this.web2vrComponent.aframe.container.emit(\"click\", e);\n      // this.shadowRoot.getElementById(\"info\").innerText = \"Button Clicked!\";      \n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// Note: All elements are placed at -9999 to avoid the Flash of Unstyled Content (FOUC)\n// prior to AFrame loading.\n_defineProperty(Button, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      .html-container {\\n        position: absolute;\\n        width: 200px;\\n      }\\n      .visible {\\n        display: block;\\n      }\\n      .invisible {\\n        display: none;\\n      }\\n      .card-body {\\n        margin: 0;\\n      }\\n      \\n    \"])))]);\n_defineProperty(Button, \"properties\", _objectSpread(_objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties), {}, {\n  text: {\n    type: String,\n    \"default\": \"Hello world!\"\n  }\n}));\ncustomElements.define('esc-button', Button);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDM4OC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQTJCQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUE1Q0E7QUFDQTtBQUFBO0FBbUJBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXdCQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvbGl0L0J1dHRvbi5qcz85M2QzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG5pbXBvcnQge2h0bWwsIGNzcywgTGl0RWxlbWVudH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IENvbXBvbmVudEJhc2VFbGVtZW50IH0gZnJvbSAnLi9Db21wb25lbnRCYXNlJztcblxuZXhwb3J0IGNsYXNzIEJ1dHRvbiBleHRlbmRzIENvbXBvbmVudEJhc2VFbGVtZW50IHtcbiAgLy8gTm90ZTogQWxsIGVsZW1lbnRzIGFyZSBwbGFjZWQgYXQgLTk5OTkgdG8gYXZvaWQgdGhlIEZsYXNoIG9mIFVuc3R5bGVkIENvbnRlbnQgKEZPVUMpXG4gIC8vIHByaW9yIHRvIEFGcmFtZSBsb2FkaW5nLlxuICBzdGF0aWMgc3R5bGVzID0gW1xuICAgIENvbXBvbmVudEJhc2VFbGVtZW50LnN0eWxlcyA/PyBbXSxcbiAgICBjc3NgXG4gICAgICAuaHRtbC1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHdpZHRoOiAyMDBweDtcbiAgICAgIH1cbiAgICAgIC52aXNpYmxlIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB9XG4gICAgICAuaW52aXNpYmxlIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICAgIC5jYXJkLWJvZHkge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG4gICAgICBcbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBwcm9wZXJ0aWVzID0ge1xuICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICAgIHRleHQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIkhlbGxvIHdvcmxkIVwifSxcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImh0bWwtY29udGFpbmVyXCIgaWQ9XCJjb250YWluZXJfJHt0aGlzLmNpZH1cIj5cbiAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPVwiJHt0aGlzLl9jbGlja0hhbmRsZXJ9XCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIj4ke3RoaXMudGV4dH08L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIF9jbGlja0hhbmRsZXIoZSkge1xuICAgICAgLy8gQ2xpY2sgSGFuZGxlciBoZXJlIGlzIGRlbGVnYXRlZCB0byB0aGUgQUZyYW1lIGNsaWNrIGhhbmRsZXIsIHdoaWNoIGxpc3RlbnMgb24gdGhlIGVudGlyZSBlbnRpdHkuXG4gICAgICAvLyB0aGlzLmluZm9WaXNpYmxlID0gIXRoaXMuaW5mb1Zpc2libGU7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIkluc2lkZSB0aGUgY2xpY2sgaGFuZGxlciwgZXZ0IGlzIFwiLCBlKTtcbiAgICAgIC8vIHRoaXMud2ViMnZyQ29tcG9uZW50LmFmcmFtZS5jb250YWluZXIuZW1pdChcImNsaWNrXCIsIGUpO1xuICAgICAgLy8gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwiaW5mb1wiKS5pbm5lclRleHQgPSBcIkJ1dHRvbiBDbGlja2VkIVwiOyAgICAgIFxuICAgIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdlc2MtYnV0dG9uJywgQnV0dG9uKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4388\n");

/***/ }),

/***/ 3484:
/*!*********************************************!*\
  !*** ./src/components/lit/ComponentBase.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ComponentBaseElement: () => (/* binding */ ComponentBaseElement),\n/* harmony export */   ComponentBaseMixin: () => (/* binding */ ComponentBaseMixin)\n/* harmony export */ });\n/* harmony import */ var web2vr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! web2vr */ 2051);\n/* harmony import */ var web2vr__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(web2vr__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _rootstyles_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rootstyles.js */ 5382);\nvar _templateObject;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\n\nvar ComponentBaseMixin = function ComponentBaseMixin(superClass) {\n  var ComponentBaseElement = /*#__PURE__*/function (_superClass) {\n    function ComponentBaseElement() {\n      _classCallCheck(this, ComponentBaseElement);\n      return _callSuper(this, ComponentBaseElement);\n    }\n    _inherits(ComponentBaseElement, _superClass);\n    return _createClass(ComponentBaseElement, [{\n      key: \"cid\",\n      get: function get() {\n        if (!this._id) {\n          var array = new Uint32Array(1);\n          window.crypto.getRandomValues(array);\n          this._id = array[0];\n          return this._id;\n        } else {\n          return this._id;\n        }\n      }\n    }, {\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(ComponentBaseElement.prototype), \"connectedCallback\", this).call(this);\n\n        // Should updateComplete resolve the after first time render ran?\n        var that = this;\n        this.updateComplete.then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var settings, components, component;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"Update Complete callback has fired\");\n                _context.next = 3;\n                return new Promise(function (r) {\n                  return setTimeout(r, 100);\n                });\n              case 3:\n                settings = that.settings ? JSON.parse(that.settings) : {}; // Disable border because there are race condition issues between border and the LitElement.\n                // settings.border = false;\n                // console.log(\"Settings = \", settings)\n                if (that.shadowRoot) {\n                  that.web2vrComponent = new web2vr__WEBPACK_IMPORTED_MODULE_0__(that.shadowRoot.getElementById(\"container_\".concat(that.cid)), settings);\n                } else {\n                  that.web2vrComponent = new web2vr__WEBPACK_IMPORTED_MODULE_0__(that.querySelector(\"#container_\".concat(that.cid)), settings);\n                }\n                _context.next = 7;\n                return that.web2vrComponent.start();\n              case 7:\n                components = that.components ? JSON.parse(that.components) : {}; // console.log(\"Components = \", components);\n                for (component in components) {\n                  that.web2vrComponent.aframe.container.setAttribute(component, components[component]);\n                }\n                if (that.shadowRoot) {\n                  that.web2vrComponent.aframe.container.setAttribute(\"data-lit-panel-root\", \"#\".concat(that.id));\n                  that.web2vrComponent.aframe.container.setAttribute(\"data-lit-panel\", \"#container_\".concat(that.cid));\n                } else {\n                  that.web2vrComponent.aframe.container.setAttribute(\"data-lit-panel\", \"#container_\".concat(that.cid));\n                }\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        })));\n      }\n    }, {\n      key: \"firstUpdated\",\n      value: function () {\n        var _firstUpdated = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(changedProperties) {\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                // Give the browser a chance to paint\n                if (this.shadowRoot) {\n                  this.shadowRoot.addEventListener('slotchange', this._slotChanged);\n                } else {\n                  this.addEventListener('slotchange', this._slotChanged);\n                }\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2, this);\n        }));\n        function firstUpdated(_x) {\n          return _firstUpdated.apply(this, arguments);\n        }\n        return firstUpdated;\n      }()\n    }, {\n      key: \"updated\",\n      value: function updated(changedProperties) {\n        _get(_getPrototypeOf(ComponentBaseElement.prototype), \"updated\", this).call(this, changedProperties);\n        try {\n          var _this$web2vrComponent;\n          (_this$web2vrComponent = this.web2vrComponent) === null || _this$web2vrComponent === void 0 || _this$web2vrComponent.update();\n        } catch (e) {\n          // Swallow the error since errors from update are transient\n        }\n      }\n    }, {\n      key: \"baseRender\",\n      value: function baseRender(template) {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n                <div class=\\\"html-container\\\" id=\\\"container_\", \"\\\">\\n                  \", \"\\n                </div>\\n            \"])), this.cid, template);\n      }\n    }, {\n      key: \"_slotChanged\",\n      value: function _slotChanged() {\n        var _this$web2vrComponent2;\n        (_this$web2vrComponent2 = this.web2vrComponent) === null || _this$web2vrComponent2 === void 0 || _this$web2vrComponent2.update();\n      }\n    }]);\n  }(superClass);\n  _defineProperty(ComponentBaseElement, \"styles\", [_rootstyles_js__WEBPACK_IMPORTED_MODULE_2__.RootStyleElement.styles]);\n  _defineProperty(ComponentBaseElement, \"properties\", {\n    settings: {\n      type: String,\n      \"default\": undefined\n    },\n    // position: { type: Object, default: {x: 0, y: 0, z: 0}},\n    web2vrComponent: {\n      type: Object,\n      \"default\": null\n    },\n    components: {\n      type: String,\n      \"default\": \"\"\n    },\n    id: {\n      type: String,\n      \"default\": \"\"\n    }\n  });\n  return ComponentBaseElement;\n};\nvar ComponentBaseElement = ComponentBaseMixin(lit__WEBPACK_IMPORTED_MODULE_1__.LitElement);\n\n// Cannot use this element directly - must use it as a base class.//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQ4NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUF5QkE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFlQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBN0ZBO0FBR0E7QUFjQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUEwRUE7QUFDQTtBQUVBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9saXQvQ29tcG9uZW50QmFzZS5qcz9mOGUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG5pbXBvcnQgKiBhcyBXZWIyVlIgZnJvbSBcIndlYjJ2clwiO1xuaW1wb3J0IHtodG1sLCBjc3MsIExpdEVsZW1lbnR9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBSb290U3R5bGVFbGVtZW50IH0gZnJvbSAnLi9yb290c3R5bGVzLmpzJztcblxuXG5leHBvcnQgY29uc3QgQ29tcG9uZW50QmFzZU1peGluID0gKHN1cGVyQ2xhc3MpID0+IHtcbiAgICBjbGFzcyBDb21wb25lbnRCYXNlRWxlbWVudCBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuICAgICAgICBzdGF0aWMgc3R5bGVzID0gW1xuICAgICAgICAgIFJvb3RTdHlsZUVsZW1lbnQuc3R5bGVzLFxuICAgICAgICAgIF1cblxuICAgICAgICBnZXQgY2lkKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9pZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gbmV3IFVpbnQzMkFycmF5KDEpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycmF5KTsgIFxuICAgICAgICAgICAgICAgIHRoaXMuX2lkID0gYXJyYXlbMF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBzdGF0aWMgcHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgIHNldHRpbmdzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAvLyBwb3NpdGlvbjogeyB0eXBlOiBPYmplY3QsIGRlZmF1bHQ6IHt4OiAwLCB5OiAwLCB6OiAwfX0sXG4gICAgICAgICAgICB3ZWIydnJDb21wb25lbnQ6IHsgdHlwZTogT2JqZWN0LCBkZWZhdWx0OiBudWxsfSxcbiAgICAgICAgICAgIGNvbXBvbmVudHM6IHsgdHlwZTogU3RyaW5nICwgZGVmYXVsdDogXCJcIn0sXG4gICAgICAgICAgICBpZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCJ9XG4gICAgICAgICAgfVxuICAgICAgXG4gICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgfVxuICAgICAgXG4gICAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIFNob3VsZCB1cGRhdGVDb21wbGV0ZSByZXNvbHZlIHRoZSBhZnRlciBmaXJzdCB0aW1lIHJlbmRlciByYW4/XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbXBsZXRlLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVwZGF0ZSBDb21wbGV0ZSBjYWxsYmFjayBoYXMgZmlyZWRcIik7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIDEwMCkpO1xuICAgICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSB0aGF0LnNldHRpbmdzID8gSlNPTi5wYXJzZSh0aGF0LnNldHRpbmdzKSA6IHt9O1xuICAgICAgICAgICAgICAvLyBEaXNhYmxlIGJvcmRlciBiZWNhdXNlIHRoZXJlIGFyZSByYWNlIGNvbmRpdGlvbiBpc3N1ZXMgYmV0d2VlbiBib3JkZXIgYW5kIHRoZSBMaXRFbGVtZW50LlxuICAgICAgICAgICAgICAvLyBzZXR0aW5ncy5ib3JkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJTZXR0aW5ncyA9IFwiLCBzZXR0aW5ncylcbiAgICAgICAgICAgICAgaWYgKHRoYXQuc2hhZG93Um9vdCkge1xuICAgICAgICAgICAgICAgIHRoYXQud2ViMnZyQ29tcG9uZW50ID0gbmV3IFdlYjJWUih0aGF0LnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoYGNvbnRhaW5lcl8ke3RoYXQuY2lkfWApLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhhdC53ZWIydnJDb21wb25lbnQgPSBuZXcgV2ViMlZSKHRoYXQucXVlcnlTZWxlY3RvcihgI2NvbnRhaW5lcl8ke3RoYXQuY2lkfWApLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXdhaXQgdGhhdC53ZWIydnJDb21wb25lbnQuc3RhcnQoKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBjb21wb25lbnRzID0gdGhhdC5jb21wb25lbnRzID8gSlNPTi5wYXJzZSh0aGF0LmNvbXBvbmVudHMpIDoge307XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQ29tcG9uZW50cyA9IFwiLCBjb21wb25lbnRzKTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgY29tcG9uZW50IGluIGNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGF0LndlYjJ2ckNvbXBvbmVudC5hZnJhbWUuY29udGFpbmVyLnNldEF0dHJpYnV0ZShjb21wb25lbnQsIGNvbXBvbmVudHNbY29tcG9uZW50XSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodGhhdC5zaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgICAgdGhhdC53ZWIydnJDb21wb25lbnQuYWZyYW1lLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxpdC1wYW5lbC1yb290XCIsIGAjJHt0aGF0LmlkfWApO1xuICAgICAgICAgICAgICAgIHRoYXQud2ViMnZyQ29tcG9uZW50LmFmcmFtZS5jb250YWluZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1saXQtcGFuZWxcIiwgYCNjb250YWluZXJfJHt0aGF0LmNpZH1gKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGF0LndlYjJ2ckNvbXBvbmVudC5hZnJhbWUuY29udGFpbmVyLnNldEF0dHJpYnV0ZShcImRhdGEtbGl0LXBhbmVsXCIsIGAjY29udGFpbmVyXyR7dGhhdC5jaWR9YCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhc3luYyBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIC8vIEdpdmUgdGhlIGJyb3dzZXIgYSBjaGFuY2UgdG8gcGFpbnRcbiAgICAgICAgICAgIGlmICh0aGlzLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgICAgICAgdGhpcy5zaGFkb3dSb290LmFkZEV2ZW50TGlzdGVuZXIoICdzbG90Y2hhbmdlJywgdGhpcy5fc2xvdENoYW5nZWQgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignc2xvdGNoYW5nZScsIHRoaXMuX3Nsb3RDaGFuZ2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB1cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHRoaXMud2ViMnZyQ29tcG9uZW50Py51cGRhdGUoKTsgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgIC8vIFN3YWxsb3cgdGhlIGVycm9yIHNpbmNlIGVycm9ycyBmcm9tIHVwZGF0ZSBhcmUgdHJhbnNpZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBiYXNlUmVuZGVyKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaHRtbC1jb250YWluZXJcIiBpZD1cImNvbnRhaW5lcl8ke3RoaXMuY2lkfVwiPlxuICAgICAgICAgICAgICAgICAgJHt0ZW1wbGF0ZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7ICAgICAgICAgICAgXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3Nsb3RDaGFuZ2VkKCkge1xuICAgICAgICAgICAgdGhpcy53ZWIydnJDb21wb25lbnQ/LnVwZGF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbXBvbmVudEJhc2VFbGVtZW50O1xufSBcblxuZXhwb3J0IGNvbnN0IENvbXBvbmVudEJhc2VFbGVtZW50ID0gQ29tcG9uZW50QmFzZU1peGluKExpdEVsZW1lbnQpXG5cbi8vIENhbm5vdCB1c2UgdGhpcyBlbGVtZW50IGRpcmVjdGx5IC0gbXVzdCB1c2UgaXQgYXMgYSBiYXNlIGNsYXNzLlxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3484\n");

/***/ }),

/***/ 87:
/*!*****************************************!*\
  !*** ./src/components/lit/HtmlPanel.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HtmlPanel: () => (/* binding */ HtmlPanel)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar HtmlPanel = /*#__PURE__*/function (_ComponentBaseElement) {\n  function HtmlPanel() {\n    _classCallCheck(this, HtmlPanel);\n    return _callSuper(this, HtmlPanel); // console.log(\"Creating HTML panel\");\n  }\n  _inherits(HtmlPanel, _ComponentBaseElement);\n  return _createClass(HtmlPanel, [{\n    key: \"updated\",\n    value: function updated(changedProperties) {\n      changedProperties.forEach(function (oldValue, propName) {});\n    }\n  }, {\n    key: \"createRenderRoot\",\n    value: function createRenderRoot() {\n      var root = _get(_getPrototypeOf(HtmlPanel.prototype), \"createRenderRoot\", this).call(this);\n      // root.addEventListener(\n      //   'click',\n      //   (e) => ( root.emit(\"lit-click\", e.target.localName)\n      // );\n      return root;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div id=\\\"container_\", \"\\\" class=\\\"html-container\\\">\\n            <slot @click=\\\"\", \"\\\"></slot>\\n        </div>\\n      \"])), this.cid, this._clickHandler);\n      // <button slot=\"dismiss\" @click=\"${this._clickHandler}\" class=\"btn btn-primary dismiss rounded\">Dismiss</button>\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      // Click Handler here is delegated to the AFrame click handler, which listens on the entire entity.\n      // this.infoVisible = !this.infoVisible;\n      // console.log(\"Inside the lit element click handler, evt is \", e);\n      // console.log(\"Inside lit element, composed path = \", e.composedPath());\n      // console.log(\"Shadow name = \", e.target.localName);\n      this.web2vrComponent.aframe.container.emit(\"lit-click\", e);\n      // this.shadowRoot.getElementById(\"info\").innerText = \"Button Clicked!\";      \n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// prior to AFrame loading.\n_defineProperty(HtmlPanel, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      .html-container {\\n        position: absolute;\\n        width: 300px;\\n      }\\n      .visible {\\n        display: block;\\n      }\\n      .invisible {\\n        display: none;\\n      }\\n      .card-body {\\n        margin: 0;\\n      }\\n    \"])))]);\n_defineProperty(HtmlPanel, \"properties\", _objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties));\ncustomElements.define('esc-html-panel', HtmlPanel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQXdCQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFLQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUE3REE7QUFBQTtBQWtCQTtBQThDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvbGl0L0h0bWxQYW5lbC5qcz9kYzBlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG5pbXBvcnQge2h0bWwsIGNzcywgTGl0RWxlbWVudH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IENvbXBvbmVudEJhc2VFbGVtZW50IH0gZnJvbSAnLi9Db21wb25lbnRCYXNlJztcblxuZXhwb3J0IGNsYXNzIEh0bWxQYW5lbCBleHRlbmRzIENvbXBvbmVudEJhc2VFbGVtZW50IHtcbiAgLy8gcHJpb3IgdG8gQUZyYW1lIGxvYWRpbmcuXG4gIHN0YXRpYyBzdHlsZXMgPSBbXG4gICAgQ29tcG9uZW50QmFzZUVsZW1lbnQuc3R5bGVzID8/IFtdLFxuICAgIGNzc2BcbiAgICAgIC5odG1sLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgfVxuICAgICAgLnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICAgIC5pbnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgICAgLmNhcmQtYm9keSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBwcm9wZXJ0aWVzID0ge1xuICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJDcmVhdGluZyBIVE1MIHBhbmVsXCIpO1xuICAgIH1cblxuICAgIHVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgIGNoYW5nZWRQcm9wZXJ0aWVzLmZvckVhY2goKG9sZFZhbHVlLCBwcm9wTmFtZSkgPT4ge1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlUmVuZGVyUm9vdCgpIHtcbiAgICAgIGNvbnN0IHJvb3QgPSBzdXBlci5jcmVhdGVSZW5kZXJSb290KCk7XG4gICAgICAvLyByb290LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAvLyAgICdjbGljaycsXG4gICAgICAvLyAgIChlKSA9PiAoIHJvb3QuZW1pdChcImxpdC1jbGlja1wiLCBlLnRhcmdldC5sb2NhbE5hbWUpXG4gICAgICAvLyApO1xuICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxuICBcblxuICAgIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGlkPVwiY29udGFpbmVyXyR7dGhpcy5jaWR9XCIgY2xhc3M9XCJodG1sLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPHNsb3QgQGNsaWNrPVwiJHt0aGlzLl9jbGlja0hhbmRsZXJ9XCI+PC9zbG90PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgICAvLyA8YnV0dG9uIHNsb3Q9XCJkaXNtaXNzXCIgQGNsaWNrPVwiJHt0aGlzLl9jbGlja0hhbmRsZXJ9XCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgZGlzbWlzcyByb3VuZGVkXCI+RGlzbWlzczwvYnV0dG9uPlxuXG4gICAgfVxuXG4gICAgX2NsaWNrSGFuZGxlcihlKSB7XG4gICAgICAvLyBDbGljayBIYW5kbGVyIGhlcmUgaXMgZGVsZWdhdGVkIHRvIHRoZSBBRnJhbWUgY2xpY2sgaGFuZGxlciwgd2hpY2ggbGlzdGVucyBvbiB0aGUgZW50aXJlIGVudGl0eS5cbiAgICAgIC8vIHRoaXMuaW5mb1Zpc2libGUgPSAhdGhpcy5pbmZvVmlzaWJsZTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiSW5zaWRlIHRoZSBsaXQgZWxlbWVudCBjbGljayBoYW5kbGVyLCBldnQgaXMgXCIsIGUpO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJJbnNpZGUgbGl0IGVsZW1lbnQsIGNvbXBvc2VkIHBhdGggPSBcIiwgZS5jb21wb3NlZFBhdGgoKSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIlNoYWRvdyBuYW1lID0gXCIsIGUudGFyZ2V0LmxvY2FsTmFtZSk7XG4gICAgICB0aGlzLndlYjJ2ckNvbXBvbmVudC5hZnJhbWUuY29udGFpbmVyLmVtaXQoXCJsaXQtY2xpY2tcIiwgZSk7XG4gICAgICAvLyB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJpbmZvXCIpLmlubmVyVGV4dCA9IFwiQnV0dG9uIENsaWNrZWQhXCI7ICAgICAgXG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2VzYy1odG1sLXBhbmVsJywgSHRtbFBhbmVsKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///87\n");

/***/ }),

/***/ 7536:
/*!*****************************************!*\
  !*** ./src/components/lit/InfoPanel.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InfoPanel: () => (/* binding */ InfoPanel)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar InfoPanel = /*#__PURE__*/function (_ComponentBaseElement) {\n  function InfoPanel() {\n    _classCallCheck(this, InfoPanel);\n    return _callSuper(this, InfoPanel); // console.log(\"Creating Info panel\");\n  }\n  _inherits(InfoPanel, _ComponentBaseElement);\n  return _createClass(InfoPanel, [{\n    key: \"updated\",\n    value: function updated(changedProperties) {\n      changedProperties.forEach(function (oldValue, propName) {});\n    }\n  }, {\n    key: \"createRenderRoot\",\n    value: function createRenderRoot() {\n      var root = _get(_getPrototypeOf(InfoPanel.prototype), \"createRenderRoot\", this).call(this);\n      // root.addEventListener(\n      //   'click',\n      //   (e) => ( root.emit(\"lit-click\", e.target.localName)\n      // );\n      return root;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <div id=\\\"container_\", \"\\\" class=\\\"html-container\\\">\\n            <slot></slot>\\n            <button @click=\\\"\", \"\\\" class=\\\"btn btn-primary dismiss\\\">Start The Game</button>\\n      </div>\\n      \"])), this.cid, this._clickHandler);\n      // <button slot=\"dismiss\" @click=\"${this._clickHandler}\" class=\"btn btn-primary dismiss rounded\">Dismiss</button>\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      // Click Handler here is delegated to the AFrame click handler, which listens on the entire entity.\n      // this.infoVisible = !this.infoVisible;\n      // console.log(\"Inside the lit element click handler, evt is \", e);\n      // console.log(\"Inside lit element, composed path = \", e.composedPath());\n      // console.log(\"Shadow name = \", e.target.localName);\n      this.web2vrComponent.aframe.container.emit(\"lit-click\", e);\n      // this.shadowRoot.getElementById(\"info\").innerText = \"Button Clicked!\";      \n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// Note: All elements are placed at -9999 to avoid the Flash of Unstyled Content (FOUC)\n// prior to AFrame loading.\n_defineProperty(InfoPanel, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      .html-container {\\n        position: absolute;\\n      }\\n      .visible {\\n        display: block;\\n      }\\n      .invisible {\\n        display: none;\\n      }\\n      .card-body {\\n        margin: 0;\\n      }\\n    \"])))]);\n_defineProperty(InfoPanel, \"properties\", _objectSpread(_objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties), {}, {\n  title: {\n    type: String,\n    \"default\": \"Hello world!\"\n  },\n  message: {\n    type: String,\n    \"default\": \"Hello world message!\"\n  }\n}));\ncustomElements.define('esc-info-panel', InfoPanel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUzNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBMEJBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQU1BO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQWhFQTtBQUNBO0FBQUE7QUFpQkE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUE2Q0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2xpdC9JbmZvUGFuZWwuanM/NDcyNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQUZSQU1FLCBUSFJFRSAqL1xuaW1wb3J0IHtodG1sLCBjc3MsIExpdEVsZW1lbnR9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBDb21wb25lbnRCYXNlRWxlbWVudCB9IGZyb20gJy4vQ29tcG9uZW50QmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBJbmZvUGFuZWwgZXh0ZW5kcyBDb21wb25lbnRCYXNlRWxlbWVudCB7XG4gIC8vIE5vdGU6IEFsbCBlbGVtZW50cyBhcmUgcGxhY2VkIGF0IC05OTk5IHRvIGF2b2lkIHRoZSBGbGFzaCBvZiBVbnN0eWxlZCBDb250ZW50IChGT1VDKVxuICAvLyBwcmlvciB0byBBRnJhbWUgbG9hZGluZy5cbiAgc3RhdGljIHN0eWxlcyA9IFtcbiAgICBDb21wb25lbnRCYXNlRWxlbWVudC5zdHlsZXMgPz8gW10sXG4gICAgY3NzYFxuICAgICAgLmh0bWwtY29udGFpbmVyIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgfVxuICAgICAgLnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICAgIC5pbnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgICAgLmNhcmQtYm9keSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBwcm9wZXJ0aWVzID0ge1xuICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICAgIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJIZWxsbyB3b3JsZCFcIn0sXG4gICAgICBtZXNzYWdlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJIZWxsbyB3b3JsZCBtZXNzYWdlIVwifVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkNyZWF0aW5nIEluZm8gcGFuZWxcIik7XG4gICAgfVxuXG4gICAgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgY2hhbmdlZFByb3BlcnRpZXMuZm9yRWFjaCgob2xkVmFsdWUsIHByb3BOYW1lKSA9PiB7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVSZW5kZXJSb290KCkge1xuICAgICAgY29uc3Qgcm9vdCA9IHN1cGVyLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAgIC8vIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIC8vICAgJ2NsaWNrJyxcbiAgICAgIC8vICAgKGUpID0+ICggcm9vdC5lbWl0KFwibGl0LWNsaWNrXCIsIGUudGFyZ2V0LmxvY2FsTmFtZSlcbiAgICAgIC8vICk7XG4gICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG4gIFxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGlkPVwiY29udGFpbmVyXyR7dGhpcy5jaWR9XCIgY2xhc3M9XCJodG1sLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPHNsb3Q+PC9zbG90PlxuICAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9XCIke3RoaXMuX2NsaWNrSGFuZGxlcn1cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBkaXNtaXNzXCI+U3RhcnQgVGhlIEdhbWU8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICAgIC8vIDxidXR0b24gc2xvdD1cImRpc21pc3NcIiBAY2xpY2s9XCIke3RoaXMuX2NsaWNrSGFuZGxlcn1cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBkaXNtaXNzIHJvdW5kZWRcIj5EaXNtaXNzPC9idXR0b24+XG5cbiAgICB9XG5cbiAgICBfY2xpY2tIYW5kbGVyKGUpIHtcbiAgICAgIC8vIENsaWNrIEhhbmRsZXIgaGVyZSBpcyBkZWxlZ2F0ZWQgdG8gdGhlIEFGcmFtZSBjbGljayBoYW5kbGVyLCB3aGljaCBsaXN0ZW5zIG9uIHRoZSBlbnRpcmUgZW50aXR5LlxuICAgICAgLy8gdGhpcy5pbmZvVmlzaWJsZSA9ICF0aGlzLmluZm9WaXNpYmxlO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJJbnNpZGUgdGhlIGxpdCBlbGVtZW50IGNsaWNrIGhhbmRsZXIsIGV2dCBpcyBcIiwgZSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIkluc2lkZSBsaXQgZWxlbWVudCwgY29tcG9zZWQgcGF0aCA9IFwiLCBlLmNvbXBvc2VkUGF0aCgpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiU2hhZG93IG5hbWUgPSBcIiwgZS50YXJnZXQubG9jYWxOYW1lKTtcbiAgICAgIHRoaXMud2ViMnZyQ29tcG9uZW50LmFmcmFtZS5jb250YWluZXIuZW1pdChcImxpdC1jbGlja1wiLCBlKTtcbiAgICAgIC8vIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcImluZm9cIikuaW5uZXJUZXh0ID0gXCJCdXR0b24gQ2xpY2tlZCFcIjsgICAgICBcbiAgICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnZXNjLWluZm8tcGFuZWwnLCBJbmZvUGFuZWwpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7536\n");

/***/ }),

/***/ 3997:
/*!***********************************************************!*\
  !*** ./src/components/lit/Tutorial/TutorialClickPanel.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TutorialClickPanel: () => (/* binding */ TutorialClickPanel)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar TutorialClickPanel = /*#__PURE__*/function (_ComponentBaseElement) {\n  function TutorialClickPanel() {\n    _classCallCheck(this, TutorialClickPanel);\n    return _callSuper(this, TutorialClickPanel);\n  }\n  _inherits(TutorialClickPanel, _ComponentBaseElement);\n  return _createClass(TutorialClickPanel, [{\n    key: \"firstUpdated\",\n    value: function () {\n      var _firstUpdated = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(changedProperties) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return new Promise(function (r) {\n                return setTimeout(r, 0);\n              });\n            case 2:\n              this.addEventListener('click', this._clickHandler);\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function firstUpdated(_x) {\n        return _firstUpdated.apply(this, arguments);\n      }\n      return firstUpdated;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div id=\\\"container_\", \"\\\" class=\\\"html-container\\\" @click=\\\"\", \"\\\">\\n            <slot></slot>\\n            <div class=\\\"card card-body\\\" style=\\\"background-color: white; display: none;\\\" id=\\\"info\\\"></div>\\n        </div>\\n      \"])), this.cid, this._clickHandler);\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      console.log(\"Inside lit element, composed path = \", e.composedPath());\n      // console.log(this.shadowRoot.querySelector(\"slot\").assignedElements({ flatten: true }));\n      this.web2vrComponent.aframe.container.emit(\"lit-click\", e);\n      this.querySelector(\".example_button span\").innerText = \"Good Job!\";\n      this.querySelector(\".example_button\").style.backgroundColor = \"green\";\n      // e.composedPath()[0].value = \"Good Job!\";\n      // e.composedPath()[0].style.backgroundColor = \"green\";\n      // this.shadowRoot.getElementById(\"info\").style.display = \"block\";\n      // console.log(this.shadowRoot.querySelector('.example_button'));\n      // this.shadowRoot.querySelector(\".example_button\").style.backgroundColor = \"green\";\n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// prior to AFrame loading.\n_defineProperty(TutorialClickPanel, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      .html-container {\\n        position: absolute;\\n        width: 300px;\\n      }\\n      .visible {\\n        display: block;\\n      }\\n      .invisible {\\n        display: none;\\n      }\\n      .card-body {\\n        margin: 0;\\n      }\\n    \"])))]);\n_defineProperty(TutorialClickPanel, \"properties\", _objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties));\ncustomElements.define('esc-tutorial-click-panel', TutorialClickPanel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzk5Ny5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUF3QkE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQXJEQTtBQUFBO0FBa0JBO0FBc0NBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9saXQvVHV0b3JpYWwvVHV0b3JpYWxDbGlja1BhbmVsLmpzP2VkMDEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIEFGUkFNRSwgVEhSRUUgKi9cbmltcG9ydCB7aHRtbCwgY3NzLCBMaXRFbGVtZW50fSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgQ29tcG9uZW50QmFzZUVsZW1lbnQgfSBmcm9tICcuLi9Db21wb25lbnRCYXNlJztcblxuZXhwb3J0IGNsYXNzIFR1dG9yaWFsQ2xpY2tQYW5lbCBleHRlbmRzIENvbXBvbmVudEJhc2VFbGVtZW50IHtcbiAgLy8gcHJpb3IgdG8gQUZyYW1lIGxvYWRpbmcuXG4gIHN0YXRpYyBzdHlsZXMgPSBbXG4gICAgQ29tcG9uZW50QmFzZUVsZW1lbnQuc3R5bGVzID8/IFtdLFxuICAgIGNzc2BcbiAgICAgIC5odG1sLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgfVxuICAgICAgLnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICAgIC5pbnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgICAgLmNhcmQtYm9keSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBwcm9wZXJ0aWVzID0ge1xuICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgIC8vIEdpdmUgdGhlIGJyb3dzZXIgYSBjaGFuY2UgdG8gcGFpbnRcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIDApKTtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja0hhbmRsZXIpOyAgICAgIFxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGlkPVwiY29udGFpbmVyXyR7dGhpcy5jaWR9XCIgY2xhc3M9XCJodG1sLWNvbnRhaW5lclwiIEBjbGljaz1cIiR7dGhpcy5fY2xpY2tIYW5kbGVyfVwiPlxuICAgICAgICAgICAgPHNsb3Q+PC9zbG90PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQgY2FyZC1ib2R5XCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgZGlzcGxheTogbm9uZTtcIiBpZD1cImluZm9cIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIF9jbGlja0hhbmRsZXIoZSkge1xuICAgICAgY29uc29sZS5sb2coXCJJbnNpZGUgbGl0IGVsZW1lbnQsIGNvbXBvc2VkIHBhdGggPSBcIiwgZS5jb21wb3NlZFBhdGgoKSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcInNsb3RcIikuYXNzaWduZWRFbGVtZW50cyh7IGZsYXR0ZW46IHRydWUgfSkpO1xuICAgICAgdGhpcy53ZWIydnJDb21wb25lbnQuYWZyYW1lLmNvbnRhaW5lci5lbWl0KFwibGl0LWNsaWNrXCIsIGUpO1xuICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmV4YW1wbGVfYnV0dG9uIHNwYW5cIikuaW5uZXJUZXh0ID0gXCJHb29kIEpvYiFcIjtcbiAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIi5leGFtcGxlX2J1dHRvblwiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgICAvLyBlLmNvbXBvc2VkUGF0aCgpWzBdLnZhbHVlID0gXCJHb29kIEpvYiFcIjtcbiAgICAgIC8vIGUuY29tcG9zZWRQYXRoKClbMF0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmVlblwiO1xuICAgICAgLy8gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwiaW5mb1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5leGFtcGxlX2J1dHRvbicpKTtcbiAgICAgIC8vIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiLmV4YW1wbGVfYnV0dG9uXCIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiZ3JlZW5cIjtcbiAgICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnZXNjLXR1dG9yaWFsLWNsaWNrLXBhbmVsJywgVHV0b3JpYWxDbGlja1BhbmVsKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3997\n");

/***/ }),

/***/ 4457:
/*!*************************************!*\
  !*** ./src/components/lit/Watch.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Watch: () => (/* binding */ Watch)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar Watch = /*#__PURE__*/function (_ComponentBaseElement) {\n  function Watch() {\n    var _this;\n    _classCallCheck(this, Watch);\n    _this = _callSuper(this, Watch);\n    _defineProperty(_this, \"_renderTime\", function (value) {\n      if (value < 10) {\n        value = \"0\" + value;\n      }\n      ; // add zero in front of numbers < 10\n      return value;\n    });\n    _this.minutes = 60;\n    _this.seconds = 0;\n    _this.hintsLeft = 3;\n    _this.tickTime = 0;\n    _this.timeDelta = 0;\n    console.log(\"Creating Watch\");\n    return _this;\n  }\n  _inherits(Watch, _ComponentBaseElement);\n  return _createClass(Watch, [{\n    key: \"firstUpdated\",\n    value: function firstUpdated(changedProperties) {\n      _get(_getPrototypeOf(Watch.prototype), \"firstUpdated\", this).call(this, changedProperties);\n    }\n\n    // Put the entire watch in the light dom.\n    // createRenderRoot() {\n    // const root = super.createRenderRoot();\n    // root.addEventListener(\n    //   'click',\n    //   (e) => ( root.emit(\"lit-click\", e.target.localName)\n    // );\n    // return root;\n    // return this;\n    // }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var rend = (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div id=\\\"container_\", \"\\\" @click=\\\"\", \"\\\">\\n            <slot></slot>\\n        </div>\\n      \"])), this.cid, this._clickHandler);\n      return rend;\n    }\n  }, {\n    key: \"tick\",\n    value: function tick(_ref) {\n      var time = _ref.time,\n        timeDelta = _ref.timeDelta;\n      // document.querySelector(\"a-scene\").emit(\"tick\", {time: time, timeDelta: timeDelta});\n      this.tickTime = this.tickTime + timeDelta;\n      // console.log(\"Tick received\", timeDelta);\n      if (this.tickTime > 1000) {\n        this.tickTime = 0;\n        this._updateTime();\n      }\n    }\n  }, {\n    key: \"_updateTime\",\n    value: function _updateTime() {\n      if (this.seconds == 0) {\n        if (this.minutes == 0) {\n          this.web2vrComponent.aframe.container.emit(\"time-up\");\n          return;\n        }\n        this.minutes = this.minutes - 1;\n        this.seconds = 59;\n        this.requestUpdate(\"minutes\", this.minutes);\n        this.requestUpdate(\"seconds\", this.seconds);\n      } else {\n        this.seconds = this.seconds - 1;\n        this.requestUpdate(\"seconds\", this.seconds);\n      }\n      this.querySelector(\".watch .time .minutes .vr-span\").innerText = this._renderTime(this.minutes);\n      this.querySelector(\".watch .time .seconds .vr-span\").innerText = this._renderTime(this.seconds);\n      // this.requestUpdate();\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      // Click Handler here is delegated to the AFrame click handler, which listens on the entire entity.\n      // this.infoVisible = !this.infoVisible;\n      // console.log(\"Inside the click handler, evt is \", e);\n      this.web2vrComponent.aframe.container.emit(\"lit-click\", e);\n      // this.shadowRoot.getElementById(\"info\").innerText = \"Button Clicked!\";      \n    }\n  }], [{\n    key: \"properties\",\n    get: function get() {\n      return _objectSpread(_objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties), {}, {\n        //   text: { type: String, default: \"Hello world!\"},\n        \"minutes\": {\n          type: Number,\n          \"default\": 60\n        },\n        \"seconds\": {\n          type: Number,\n          \"default\": 0\n        },\n        \"hintsLeft\": {\n          type: Number,\n          \"default\": 3\n        },\n        \"tickTime\": {\n          type: Number,\n          \"default\": 0\n        },\n        \"timeDelta\": {\n          type: Number,\n          \"default\": 0\n        }\n      });\n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// Note: All elements are placed at -9999 to avoid the Flash of Unstyled Content (FOUC)\n// prior to AFrame loading.\n_defineProperty(Watch, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n    .watch {\\n      position: absolute;\\n      width: 200px;\\n      height: 200px;\\n      background-image: url(/images/backgroundWatch.png);\\n      background-size: cover;\\n      color: white;\\n      z-index: 0.5;\\n  }\\n  \\n  .watch .time_header {\\n      font-size: 20px;\\n      margin-left: 15%;\\n      margin-top: 20%;\\n      height: 18px;\\n  }\\n  \\n  .watch .time {\\n      font-size: 28px;\\n      margin-left: 30%;\\n      margin-top: 5%;\\n      height: 32px;\\n  }\\n\\n  .watch .hintsLeftHeader {\\n    font-size: 20px;\\n    margin-left: 25%;\\n    margin-top: 3%;\\n    height: 18px;\\n  }\\n  \\n  .watch .hintsLeft {\\n    font-size: 20px;\\n    margin-left: 50%;\\n    margin-top: 5%;\\n    height: 30px;\\n  }\\n\\n  .watch .hint-button {\\n    font-size: 30px;\\n    margin-left: 32%;\\n    margin-top: 5%;\\n    height: 38px;\\n  }\\n  \\n    \"])))]);\ncustomElements.define('esc-watch', Watch);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQ1Ny5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBaUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFVQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFLQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBdEZBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUE5REE7QUFDQTtBQUFBO0FBNklBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9saXQvV2F0Y2guanM/MjVhOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQUZSQU1FLCBUSFJFRSAqL1xuaW1wb3J0IHtodG1sLCBjc3MsIExpdEVsZW1lbnR9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBDb21wb25lbnRCYXNlRWxlbWVudCB9IGZyb20gJy4vQ29tcG9uZW50QmFzZSc7XG5cblxuZXhwb3J0IGNsYXNzIFdhdGNoIGV4dGVuZHMgQ29tcG9uZW50QmFzZUVsZW1lbnQge1xuICAvLyBOb3RlOiBBbGwgZWxlbWVudHMgYXJlIHBsYWNlZCBhdCAtOTk5OSB0byBhdm9pZCB0aGUgRmxhc2ggb2YgVW5zdHlsZWQgQ29udGVudCAoRk9VQylcbiAgLy8gcHJpb3IgdG8gQUZyYW1lIGxvYWRpbmcuXG4gIHN0YXRpYyBzdHlsZXMgPSBbXG4gICAgQ29tcG9uZW50QmFzZUVsZW1lbnQuc3R5bGVzID8/IFtdLFxuICAgIGNzc2BcbiAgICAud2F0Y2gge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgd2lkdGg6IDIwMHB4O1xuICAgICAgaGVpZ2h0OiAyMDBweDtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgvaW1hZ2VzL2JhY2tncm91bmRXYXRjaC5wbmcpO1xuICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIHotaW5kZXg6IDAuNTtcbiAgfVxuICBcbiAgLndhdGNoIC50aW1lX2hlYWRlciB7XG4gICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgICBtYXJnaW4tbGVmdDogMTUlO1xuICAgICAgbWFyZ2luLXRvcDogMjAlO1xuICAgICAgaGVpZ2h0OiAxOHB4O1xuICB9XG4gIFxuICAud2F0Y2ggLnRpbWUge1xuICAgICAgZm9udC1zaXplOiAyOHB4O1xuICAgICAgbWFyZ2luLWxlZnQ6IDMwJTtcbiAgICAgIG1hcmdpbi10b3A6IDUlO1xuICAgICAgaGVpZ2h0OiAzMnB4O1xuICB9XG5cbiAgLndhdGNoIC5oaW50c0xlZnRIZWFkZXIge1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBtYXJnaW4tbGVmdDogMjUlO1xuICAgIG1hcmdpbi10b3A6IDMlO1xuICAgIGhlaWdodDogMThweDtcbiAgfVxuICBcbiAgLndhdGNoIC5oaW50c0xlZnQge1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBtYXJnaW4tbGVmdDogNTAlO1xuICAgIG1hcmdpbi10b3A6IDUlO1xuICAgIGhlaWdodDogMzBweDtcbiAgfVxuXG4gIC53YXRjaCAuaGludC1idXR0b24ge1xuICAgIGZvbnQtc2l6ZTogMzBweDtcbiAgICBtYXJnaW4tbGVmdDogMzIlO1xuICAgIG1hcmdpbi10b3A6IDUlO1xuICAgIGhlaWdodDogMzhweDtcbiAgfVxuICBcbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpe1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICAgICAgLy8gICB0ZXh0OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJIZWxsbyB3b3JsZCFcIn0sXG4gICAgICAgIFwibWludXRlc1wiOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogNjB9LFxuICAgICAgICBcInNlY29uZHNcIjogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDB9LFxuICAgICAgICBcImhpbnRzTGVmdFwiOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogM30sXG4gICAgICAgIFwidGlja1RpbWVcIjogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDB9LFxuICAgICAgICBcInRpbWVEZWx0YVwiOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMH0sXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5taW51dGVzID0gNjA7XG4gICAgICB0aGlzLnNlY29uZHMgPSAwO1xuICAgICAgdGhpcy5oaW50c0xlZnQgPSAzO1xuICAgICAgdGhpcy50aWNrVGltZSA9IDA7XG4gICAgICB0aGlzLnRpbWVEZWx0YSA9IDA7XG4gICAgICBjb25zb2xlLmxvZyhcIkNyZWF0aW5nIFdhdGNoXCIpO1xuICAgIH1cbiAgICBcbiAgICBfcmVuZGVyVGltZSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlIDwgMTApIHsgdmFsdWUgPSBcIjBcIiArIHZhbHVlIH07ICAvLyBhZGQgemVybyBpbiBmcm9udCBvZiBudW1iZXJzIDwgMTBcbiAgICAgIHJldHVybiB2YWx1ZTsgICAgICBcbiAgICB9XG5cbiAgICBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgfVxuXG4gICAgLy8gUHV0IHRoZSBlbnRpcmUgd2F0Y2ggaW4gdGhlIGxpZ2h0IGRvbS5cbiAgICAvLyBjcmVhdGVSZW5kZXJSb290KCkge1xuICAgICAgLy8gY29uc3Qgcm9vdCA9IHN1cGVyLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAgIC8vIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIC8vICAgJ2NsaWNrJyxcbiAgICAgIC8vICAgKGUpID0+ICggcm9vdC5lbWl0KFwibGl0LWNsaWNrXCIsIGUudGFyZ2V0LmxvY2FsTmFtZSlcbiAgICAgIC8vICk7XG4gICAgICAvLyByZXR1cm4gcm9vdDtcbiAgICAgIC8vIHJldHVybiB0aGlzO1xuICAgIC8vIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgIHZhciByZW5kID0gaHRtbGBcbiAgICAgICAgPGRpdiBpZD1cImNvbnRhaW5lcl8ke3RoaXMuY2lkfVwiIEBjbGljaz1cIiR7dGhpcy5fY2xpY2tIYW5kbGVyfVwiPlxuICAgICAgICAgICAgPHNsb3Q+PC9zbG90PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgICByZXR1cm4gcmVuZDtcblxuICAgIH1cblxuICAgIHRpY2soe3RpbWUsIHRpbWVEZWx0YX0pIHtcbiAgICAgIC8vIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhLXNjZW5lXCIpLmVtaXQoXCJ0aWNrXCIsIHt0aW1lOiB0aW1lLCB0aW1lRGVsdGE6IHRpbWVEZWx0YX0pO1xuICAgICAgdGhpcy50aWNrVGltZSA9IHRoaXMudGlja1RpbWUgKyB0aW1lRGVsdGE7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIlRpY2sgcmVjZWl2ZWRcIiwgdGltZURlbHRhKTtcbiAgICAgIGlmICh0aGlzLnRpY2tUaW1lID4gMTAwMCkge1xuICAgICAgICB0aGlzLnRpY2tUaW1lID0gMDtcbiAgICAgICAgdGhpcy5fdXBkYXRlVGltZSgpO1xuICAgICAgfSAgICAgIFxuICAgIH1cbiAgXG4gICAgX3VwZGF0ZVRpbWUoKSB7XG4gICAgICBpZiAodGhpcy5zZWNvbmRzID09IDApIHtcbiAgICAgICAgaWYgKHRoaXMubWludXRlcyA9PSAwKSB7XG4gICAgICAgICAgdGhpcy53ZWIydnJDb21wb25lbnQuYWZyYW1lLmNvbnRhaW5lci5lbWl0KFwidGltZS11cFwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5taW51dGVzID0gdGhpcy5taW51dGVzIC0gMTtcbiAgICAgICAgdGhpcy5zZWNvbmRzID0gNTk7XG4gICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZShcIm1pbnV0ZXNcIiwgdGhpcy5taW51dGVzKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKFwic2Vjb25kc1wiLCB0aGlzLnNlY29uZHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZWNvbmRzID0gdGhpcy5zZWNvbmRzIC0gMTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKFwic2Vjb25kc1wiLCB0aGlzLnNlY29uZHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLndhdGNoIC50aW1lIC5taW51dGVzIC52ci1zcGFuXCIpLmlubmVyVGV4dCA9IHRoaXMuX3JlbmRlclRpbWUodGhpcy5taW51dGVzKTtcbiAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIi53YXRjaCAudGltZSAuc2Vjb25kcyAudnItc3BhblwiKS5pbm5lclRleHQgPSB0aGlzLl9yZW5kZXJUaW1lKHRoaXMuc2Vjb25kcyk7XG4gICAgICAvLyB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB9XG5cbiAgICBfY2xpY2tIYW5kbGVyKGUpIHtcbiAgICAgIC8vIENsaWNrIEhhbmRsZXIgaGVyZSBpcyBkZWxlZ2F0ZWQgdG8gdGhlIEFGcmFtZSBjbGljayBoYW5kbGVyLCB3aGljaCBsaXN0ZW5zIG9uIHRoZSBlbnRpcmUgZW50aXR5LlxuICAgICAgLy8gdGhpcy5pbmZvVmlzaWJsZSA9ICF0aGlzLmluZm9WaXNpYmxlO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJJbnNpZGUgdGhlIGNsaWNrIGhhbmRsZXIsIGV2dCBpcyBcIiwgZSk7XG4gICAgICB0aGlzLndlYjJ2ckNvbXBvbmVudC5hZnJhbWUuY29udGFpbmVyLmVtaXQoXCJsaXQtY2xpY2tcIiwgZSk7XG4gICAgICAvLyB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJpbmZvXCIpLmlubmVyVGV4dCA9IFwiQnV0dG9uIENsaWNrZWQhXCI7ICAgICAgXG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2VzYy13YXRjaCcsIFdhdGNoKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4457\n");

/***/ }),

/***/ 294:
/*!*************************************!*\
  !*** ./src/components/lit/index.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ComponentBase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ComponentBase.js */ 3484);\n/* harmony import */ var _InfoPanel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InfoPanel.js */ 7536);\n/* harmony import */ var _HtmlPanel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HtmlPanel.js */ 87);\n/* harmony import */ var _Button_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Button.js */ 4388);\n/* harmony import */ var _Watch_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Watch.js */ 4457);\n/* harmony import */ var _Tutorial_TutorialClickPanel_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Tutorial/TutorialClickPanel.js */ 3997);\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjk0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9saXQvaW5kZXguanM/YmYxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCIuL0NvbXBvbmVudEJhc2UuanNcIjtcbmltcG9ydCBcIi4vSW5mb1BhbmVsLmpzXCI7XG5pbXBvcnQgXCIuL0h0bWxQYW5lbC5qc1wiO1xuaW1wb3J0IFwiLi9CdXR0b24uanNcIjtcbmltcG9ydCBcIi4vV2F0Y2guanNcIlxuaW1wb3J0IFwiLi9UdXRvcmlhbC9UdXRvcmlhbENsaWNrUGFuZWwuanNcIjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///294\n");

/***/ }),

/***/ 5382:
/*!******************************************!*\
  !*** ./src/components/lit/rootstyles.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootStyleElement: () => (/* binding */ RootStyleElement)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var bootstrap_dist_css_bootstrap_min_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bootstrap/dist/css/bootstrap.min.css */ 7110);\n/* harmony import */ var animate_css_animate_min_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! animate.css/animate.min.css */ 2272);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\nvar RootStyleElement = /*#__PURE__*/function (_LitElement) {\n  function RootStyleElement() {\n    _classCallCheck(this, RootStyleElement);\n    return _callSuper(this, RootStyleElement, arguments);\n  }\n  _inherits(RootStyleElement, _LitElement);\n  return _createClass(RootStyleElement, [{\n    key: \"createRenderRoot\",\n    value: function createRenderRoot() {\n      return this;\n    }\n  }]);\n}(lit__WEBPACK_IMPORTED_MODULE_0__.LitElement);\n_defineProperty(RootStyleElement, \"styles\", [bootstrap_dist_css_bootstrap_min_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"], animate_css_animate_min_css__WEBPACK_IMPORTED_MODULE_2__[\"default\"]]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTM4Mi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQUE7QUFBQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9saXQvcm9vdHN0eWxlcy5qcz9kOGM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aHRtbCwgY3NzLCBMaXRFbGVtZW50fSBmcm9tICdsaXQnO1xuaW1wb3J0IGJvb3RzdHJhcCBmcm9tIFwiYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzXCI7XG5pbXBvcnQgYW5pbWF0ZSBmcm9tIFwiYW5pbWF0ZS5jc3MvYW5pbWF0ZS5taW4uY3NzXCI7XG5cbmV4cG9ydCBjbGFzcyBSb290U3R5bGVFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG5cbiAgICBzdGF0aWMgc3R5bGVzID0gWyAgICAgICAgXG4gICAgICAgIGJvb3RzdHJhcCxcbiAgICAgICAgYW5pbWF0ZVxuICAgIF1cbiAgICBcbiAgICBjcmVhdGVSZW5kZXJSb290KCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5382\n");

/***/ }),

/***/ 9571:
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ./components/lit/index.js */ 294);\n__webpack_require__(/*! ./components/aframe/index.js */ 4877);\n// require('aframe-locomotion');\n__webpack_require__(/*! aframe-extras */ 8551);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTU3MS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZShcIi4vY29tcG9uZW50cy9saXQvaW5kZXguanNcIik7XG5yZXF1aXJlKFwiLi9jb21wb25lbnRzL2FmcmFtZS9pbmRleC5qc1wiKTtcbi8vIHJlcXVpcmUoJ2FmcmFtZS1sb2NvbW90aW9uJyk7XG5yZXF1aXJlKFwiYWZyYW1lLWV4dHJhc1wiKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9571\n");

/***/ }),

/***/ 2051:
/*!********************************!*\
  !*** ../web2vr/dist/web2vr.js ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory(__webpack_require__(/*! aframe */ 6167));\n\telse {}\n})(self, (__WEBPACK_EXTERNAL_MODULE_aframe__) => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./aframe-super-hands-component/index.js\":\n/*!***********************************************!*\\\n  !*** ./aframe-super-hands-component/index.js ***!\n  \\***********************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_794__) => {\n\n/* global AFRAME */\n\nif (typeof AFRAME === 'undefined') {\n  throw new Error('Component attempted to register before AFRAME was available.');\n}\n__nested_webpack_require_794__(/*! ./systems/super-hands-system.js */ \"./aframe-super-hands-component/systems/super-hands-system.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/hoverable.js */ \"./aframe-super-hands-component/reaction_components/hoverable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/grabbable.js */ \"./aframe-super-hands-component/reaction_components/grabbable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/stretchable.js */ \"./aframe-super-hands-component/reaction_components/stretchable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/drag-droppable.js */ \"./aframe-super-hands-component/reaction_components/drag-droppable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/draggable.js */ \"./aframe-super-hands-component/reaction_components/draggable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/droppable.js */ \"./aframe-super-hands-component/reaction_components/droppable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/clickable.js */ \"./aframe-super-hands-component/reaction_components/clickable.js\");\n\n/**\n * Super Hands component for A-Frame.\n */\nAFRAME.registerComponent('super-hands', {\n  schema: {\n    colliderEvent: {\n      \"default\": 'hit'\n    },\n    colliderEventProperty: {\n      \"default\": 'el'\n    },\n    colliderEndEvent: {\n      \"default\": 'hitend'\n    },\n    colliderEndEventProperty: {\n      \"default\": 'el'\n    },\n    grabStartButtons: {\n      \"default\": ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown', 'pointup', 'thumbup', 'pointingstart', 'pistolstart', 'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    grabEndButtons: {\n      \"default\": ['gripup', 'trackpadup', 'triggerup', 'gripopen', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup', 'pointdown', 'thumbdown', 'pointingend', 'pistolend', 'thumbstickup', 'mouseup', 'touchend']\n    },\n    stretchStartButtons: {\n      \"default\": ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown', 'pointup', 'thumbup', 'pointingstart', 'pistolstart', 'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    stretchEndButtons: {\n      \"default\": ['gripup', 'trackpadup', 'triggerup', 'gripopen', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup', 'pointdown', 'thumbdown', 'pointingend', 'pistolend', 'thumbstickup', 'mouseup', 'touchend']\n    },\n    dragDropStartButtons: {\n      \"default\": ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown', 'pointup', 'thumbup', 'pointingstart', 'pistolstart', 'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    dragDropEndButtons: {\n      \"default\": ['gripup', 'trackpadup', 'triggerup', 'gripopen', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup', 'pointdown', 'thumbdown', 'pointingend', 'pistolend', 'thumbstickup', 'mouseup', 'touchend']\n    },\n    interval: {\n      \"default\": 0\n    }\n  },\n  /**\n   * Set if component needs multiple instancing.\n   */\n  multiple: false,\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function init() {\n    // constants\n    this.HOVER_EVENT = 'hover-start';\n    this.UNHOVER_EVENT = 'hover-end';\n    this.GRAB_EVENT = 'grab-start';\n    this.UNGRAB_EVENT = 'grab-end';\n    this.STRETCH_EVENT = 'stretch-start';\n    this.UNSTRETCH_EVENT = 'stretch-end';\n    this.DRAG_EVENT = 'drag-start';\n    this.UNDRAG_EVENT = 'drag-end';\n    this.DRAGOVER_EVENT = 'dragover-start';\n    this.UNDRAGOVER_EVENT = 'dragover-end';\n    this.DRAGDROP_EVENT = 'drag-drop';\n\n    // links to other systems/components\n    this.otherSuperHand = null;\n\n    // state tracking - global event handlers (GEH)\n    this.gehDragged = new Set();\n    this.gehClicking = new Set();\n\n    // state tracking - reaction components\n    this.hoverEls = [];\n    this.hoverElsIntersections = [];\n    this.prevCheckTime = null;\n    this.state = new Map();\n    this.dragging = false;\n    this.unHover = this.unHover.bind(this);\n    this.unWatch = this.unWatch.bind(this);\n    this.onHit = this.onHit.bind(this);\n    this.onGrabStartButton = this.onGrabStartButton.bind(this);\n    this.onGrabEndButton = this.onGrabEndButton.bind(this);\n    this.onStretchStartButton = this.onStretchStartButton.bind(this);\n    this.onStretchEndButton = this.onStretchEndButton.bind(this);\n    this.onDragDropStartButton = this.onDragDropStartButton.bind(this);\n    this.onDragDropEndButton = this.onDragDropEndButton.bind(this);\n    this.system.registerMe(this);\n  },\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function update(oldData) {\n    this.unRegisterListeners(oldData);\n    this.registerListeners();\n  },\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function remove() {\n    this.system.unregisterMe(this);\n    this.unRegisterListeners();\n    this.hoverEls.length = 0;\n    if (this.state.get(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT));\n    }\n    this.onGrabEndButton();\n    this.onStretchEndButton();\n    this.onDragDropEndButton();\n  },\n  tick: function () {\n    // closer objects and objects with no distance come later in list\n    function sorter(a, b) {\n      var aDist = a.distance == null ? -1 : a.distance;\n      var bDist = b.distance == null ? -1 : b.distance;\n      if (aDist < bDist) {\n        return 1;\n      }\n      if (bDist < aDist) {\n        return -1;\n      }\n      return 0;\n    }\n    return function (time) {\n      var data = this.data;\n      var prevCheckTime = this.prevCheckTime;\n      if (prevCheckTime && time - prevCheckTime < data.interval) {\n        return;\n      }\n      this.prevCheckTime = time;\n      var orderChanged = false;\n      this.hoverElsIntersections.sort(sorter);\n      for (var i = 0; i < this.hoverElsIntersections.length; i++) {\n        if (this.hoverEls[i] !== this.hoverElsIntersections[i].object.el) {\n          orderChanged = true;\n          this.hoverEls[i] = this.hoverElsIntersections[i].object.el;\n        }\n      }\n      if (orderChanged) {\n        this.hover();\n      }\n    };\n  }(),\n  onGrabStartButton: function onGrabStartButton(evt) {\n    var carried = this.state.get(this.GRAB_EVENT);\n    this.dispatchMouseEventAll('mousedown', this.el);\n    this.gehClicking = new Set(this.hoverEls);\n    if (!carried) {\n      carried = this.findTarget(this.GRAB_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      });\n      if (carried) {\n        this.state.set(this.GRAB_EVENT, carried);\n        this._unHover(carried);\n      }\n    }\n  },\n  onGrabEndButton: function onGrabEndButton(evt) {\n    var _this = this;\n    var clickables = this.hoverEls.filter(function (h) {\n      return _this.gehClicking.has(h);\n    });\n    var grabbed = this.state.get(this.GRAB_EVENT);\n    var endEvt = {\n      hand: this.el,\n      buttonEvent: evt\n    };\n    this.dispatchMouseEventAll('mouseup', this.el);\n    for (var i = 0; i < clickables.length; i++) {\n      this.dispatchMouseEvent(clickables[i], 'click', this.el);\n    }\n    this.gehClicking.clear();\n    // check if grabbed entity accepts ungrab event\n    if (grabbed && !this.emitCancelable(grabbed, this.UNGRAB_EVENT, endEvt)) {\n      /* push to top of stack so a drop followed by re-grab gets the same\n         target */\n      this.promoteHoveredEl(this.state.get(this.GRAB_EVENT));\n      this.state[\"delete\"](this.GRAB_EVENT);\n      this.hover();\n    }\n  },\n  onStretchStartButton: function onStretchStartButton(evt) {\n    var stretched = this.state.get(this.STRETCH_EVENT);\n    if (!stretched) {\n      stretched = this.findTarget(this.STRETCH_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      });\n      if (stretched) {\n        this.state.set(this.STRETCH_EVENT, stretched);\n        this._unHover(stretched);\n      }\n    }\n  },\n  onStretchEndButton: function onStretchEndButton(evt) {\n    var stretched = this.state.get(this.STRETCH_EVENT);\n    var endEvt = {\n      hand: this.el,\n      buttonEvent: evt\n    };\n    // check if end event accepted\n    if (stretched && !this.emitCancelable(stretched, this.UNSTRETCH_EVENT, endEvt)) {\n      this.promoteHoveredEl(stretched);\n      this.state[\"delete\"](this.STRETCH_EVENT);\n      this.hover();\n    }\n  },\n  onDragDropStartButton: function onDragDropStartButton(evt) {\n    var dragged = this.state.get(this.DRAG_EVENT);\n    this.dragging = true;\n    if (this.hoverEls.length) {\n      this.gehDragged = new Set(this.hoverEls);\n      this.dispatchMouseEventAll('dragstart', this.el);\n    }\n    if (!dragged) {\n      /* prefer carried so that a drag started after a grab will work\n       with carried element rather than a currently intersected drop target.\n       fall back to queue in case a drag is initiated independent\n       of a grab */\n      if (this.state.get(this.GRAB_EVENT) && !this.emitCancelable(this.state.get(this.GRAB_EVENT), this.DRAG_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      })) {\n        dragged = this.state.get(this.GRAB_EVENT);\n      } else {\n        dragged = this.findTarget(this.DRAG_EVENT, {\n          hand: this.el,\n          buttonEvent: evt\n        });\n      }\n      if (dragged) {\n        this.state.set(this.DRAG_EVENT, dragged);\n        this._unHover(dragged);\n      }\n    }\n  },\n  onDragDropEndButton: function onDragDropEndButton(evt) {\n    var _this2 = this;\n    var carried = this.state.get(this.DRAG_EVENT);\n    this.dragging = false; // keep _unHover() from activating another droptarget\n    this.gehDragged.forEach(function (carried) {\n      _this2.dispatchMouseEvent(carried, 'dragend', _this2.el);\n      // fire event both ways for all intersected targets\n      _this2.dispatchMouseEventAll('drop', carried, true, true);\n      _this2.dispatchMouseEventAll('dragleave', carried, true, true);\n    });\n    this.gehDragged.clear();\n    if (carried) {\n      var ddEvt = {\n        hand: this.el,\n        dropped: carried,\n        on: null,\n        buttonEvent: evt\n      };\n      var endEvt = {\n        hand: this.el,\n        buttonEvent: evt\n      };\n      var dropTarget = this.findTarget(this.DRAGDROP_EVENT, ddEvt, true);\n      if (dropTarget) {\n        ddEvt.on = dropTarget;\n        this.emitCancelable(carried, this.DRAGDROP_EVENT, ddEvt);\n        this._unHover(dropTarget);\n      }\n      // check if end event accepted\n      if (!this.emitCancelable(carried, this.UNDRAG_EVENT, endEvt)) {\n        this.promoteHoveredEl(carried);\n        this.state[\"delete\"](this.DRAG_EVENT);\n        this.hover();\n      }\n    }\n  },\n  processHitEl: function processHitEl(hitEl, intersection) {\n    var _this3 = this;\n    var dist = intersection && intersection.distance;\n    var sects = this.hoverElsIntersections;\n    var hoverEls = this.hoverEls;\n    var hitElIndex = this.hoverEls.indexOf(hitEl);\n    var hoverNeedsUpdate = false;\n    if (hitElIndex === -1) {\n      hoverNeedsUpdate = true;\n      // insert in order of distance when available\n      if (dist != null) {\n        var i = 0;\n        while (i < sects.length && dist < sects[i].distance) {\n          i++;\n        }\n        hoverEls.splice(i, 0, hitEl);\n        sects.splice(i, 0, intersection);\n      } else {\n        hoverEls.push(hitEl);\n        sects.push({\n          object: {\n            el: hitEl\n          }\n        });\n      }\n      this.dispatchMouseEvent(hitEl, 'mouseover', this.el);\n      if (this.dragging && this.gehDragged.size) {\n        // events on targets and on dragged\n        this.gehDragged.forEach(function (dragged) {\n          _this3.dispatchMouseEventAll('dragenter', dragged, true, true);\n        });\n      }\n    }\n    return hoverNeedsUpdate;\n  },\n  onHit: function onHit(evt) {\n    var hitEl = evt.detail[this.data.colliderEventProperty];\n    var hoverNeedsUpdate = 0;\n    if (!hitEl) {\n      return;\n    }\n    if (Array.isArray(hitEl)) {\n      for (var i = 0, sect; i < hitEl.length; i++) {\n        sect = evt.detail.intersections && evt.detail.intersections[i];\n        hoverNeedsUpdate += this.processHitEl(hitEl[i], sect);\n      }\n    } else {\n      hoverNeedsUpdate += this.processHitEl(hitEl, null);\n    }\n    if (hoverNeedsUpdate) {\n      this.hover();\n    }\n  },\n  /* search collided entities for target to hover/dragover */\n  hover: function hover() {\n    var hvrevt, hoverEl;\n    // end previous hover\n    if (this.state.has(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT), true);\n    }\n    if (this.state.has(this.DRAGOVER_EVENT)) {\n      this._unHover(this.state.get(this.DRAGOVER_EVENT), true);\n    }\n    if (this.dragging && this.state.get(this.DRAG_EVENT)) {\n      hvrevt = {\n        hand: this.el,\n        hovered: hoverEl,\n        carried: this.state.get(this.DRAG_EVENT)\n      };\n      hoverEl = this.findTarget(this.DRAGOVER_EVENT, hvrevt, true);\n      if (hoverEl) {\n        this.emitCancelable(this.state.get(this.DRAG_EVENT), this.DRAGOVER_EVENT, hvrevt);\n        this.state.set(this.DRAGOVER_EVENT, hoverEl);\n      }\n    }\n    // fallback to hover if not dragging or dragover wasn't successful\n    if (!this.state.has(this.DRAGOVER_EVENT)) {\n      hoverEl = this.findTarget(this.HOVER_EVENT, {\n        hand: this.el\n      }, true);\n      if (hoverEl) {\n        this.state.set(this.HOVER_EVENT, hoverEl);\n      }\n    }\n  },\n  /* called when controller moves out of collision range of entity */\n  unHover: function unHover(evt) {\n    var _this4 = this;\n    var clearedEls = evt.detail[this.data.colliderEndEventProperty];\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(function (el) {\n          return _this4._unHover(el);\n        });\n      } else {\n        this._unHover(clearedEls);\n      }\n    }\n  },\n  /* inner unHover steps needed regardless of cause of unHover */\n  _unHover: function _unHover(el, skipNextHover) {\n    var unHovered = false;\n    var evt;\n    if (el === this.state.get(this.DRAGOVER_EVENT)) {\n      this.state[\"delete\"](this.DRAGOVER_EVENT);\n      unHovered = true;\n      evt = {\n        hand: this.el,\n        hovered: el,\n        carried: this.state.get(this.DRAG_EVENT)\n      };\n      this.emitCancelable(el, this.UNDRAGOVER_EVENT, evt);\n      if (this.state.has(this.DRAG_EVENT)) {\n        this.emitCancelable(this.state.get(this.DRAG_EVENT), this.UNDRAGOVER_EVENT, evt);\n      }\n    }\n    if (el === this.state.get(this.HOVER_EVENT)) {\n      this.state[\"delete\"](this.HOVER_EVENT);\n      unHovered = true;\n      this.emitCancelable(el, this.UNHOVER_EVENT, {\n        hand: this.el\n      });\n    }\n    // activate next target, if present\n    if (unHovered && !skipNextHover) {\n      this.hover();\n    }\n  },\n  unWatch: function unWatch(evt) {\n    var _this5 = this;\n    var clearedEls = evt.detail[this.data.colliderEndEventProperty];\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(function (el) {\n          return _this5._unWatch(el);\n        });\n      } else {\n        // deprecation path: sphere-collider\n        this._unWatch(clearedEls);\n      }\n    }\n  },\n  _unWatch: function _unWatch(target) {\n    var _this6 = this;\n    var hoverIndex = this.hoverEls.indexOf(target);\n    if (hoverIndex !== -1) {\n      this.hoverEls.splice(hoverIndex, 1);\n      this.hoverElsIntersections.splice(hoverIndex, 1);\n    }\n    this.gehDragged.forEach(function (dragged) {\n      _this6.dispatchMouseEvent(target, 'dragleave', dragged);\n      _this6.dispatchMouseEvent(dragged, 'dragleave', target);\n    });\n    this.dispatchMouseEvent(target, 'mouseout', this.el);\n  },\n  registerListeners: function registerListeners() {\n    var _this7 = this;\n    this.el.addEventListener(this.data.colliderEvent, this.onHit);\n    this.el.addEventListener(this.data.colliderEndEvent, this.unWatch);\n    this.el.addEventListener(this.data.colliderEndEvent, this.unHover);\n\n    // binding order to keep grabEnd from triggering dragover\n    // again before dragDropEnd can delete its carried state\n    this.data.grabStartButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onGrabStartButton);\n    });\n    this.data.stretchStartButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onStretchStartButton);\n    });\n    this.data.dragDropStartButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onDragDropStartButton);\n    });\n    this.data.dragDropEndButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onDragDropEndButton);\n    });\n    this.data.stretchEndButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onStretchEndButton);\n    });\n    this.data.grabEndButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onGrabEndButton);\n    });\n  },\n  unRegisterListeners: function unRegisterListeners(data) {\n    var _this8 = this;\n    data = data || this.data;\n    if (Object.keys(data).length === 0) {\n      // Empty object passed on initalization\n      return;\n    }\n    this.el.removeEventListener(data.colliderEvent, this.onHit);\n    this.el.removeEventListener(data.colliderEndEvent, this.unHover);\n    this.el.removeEventListener(data.colliderEndEvent, this.unWatch);\n    data.grabStartButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onGrabStartButton);\n    });\n    data.grabEndButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onGrabEndButton);\n    });\n    data.stretchStartButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onStretchStartButton);\n    });\n    data.stretchEndButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onStretchEndButton);\n    });\n    data.dragDropStartButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onDragDropStartButton);\n    });\n    data.dragDropEndButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onDragDropEndButton);\n    });\n  },\n  emitCancelable: function emitCancelable(target, name, detail) {\n    detail = detail || {};\n    var data = {\n      bubbles: true,\n      cancelable: true,\n      detail: detail\n    };\n    data.detail.target = data.detail.target || target;\n    var evt = new window.CustomEvent(name, data);\n    return target.dispatchEvent(evt);\n  },\n  dispatchMouseEvent: function dispatchMouseEvent(target, name, relatedTarget) {\n    var mEvt = new window.MouseEvent(name, {\n      relatedTarget: relatedTarget\n    });\n    target.dispatchEvent(mEvt);\n  },\n  dispatchMouseEventAll: function dispatchMouseEventAll(name, relatedTarget, filterUsed, alsoReverse) {\n    var _this9 = this;\n    var els = this.hoverEls;\n    if (filterUsed) {\n      els = els.filter(function (el) {\n        return el !== _this9.state.get(_this9.GRAB_EVENT) && el !== _this9.state.get(_this9.DRAG_EVENT) && el !== _this9.state.get(_this9.STRETCH_EVENT) && !_this9.gehDragged.has(el);\n      });\n    }\n    if (alsoReverse) {\n      for (var i = 0; i < els.length; i++) {\n        this.dispatchMouseEvent(els[i], name, relatedTarget);\n        this.dispatchMouseEvent(relatedTarget, name, els[i]);\n      }\n    } else {\n      for (var _i = 0; _i < els.length; _i++) {\n        this.dispatchMouseEvent(els[_i], name, relatedTarget);\n      }\n    }\n  },\n  findTarget: function findTarget(evType, detail, filterUsed) {\n    var _this10 = this;\n    var elIndex;\n    var eligibleEls = this.hoverEls;\n    if (filterUsed) {\n      eligibleEls = eligibleEls.filter(function (el) {\n        return el !== _this10.state.get(_this10.GRAB_EVENT) && el !== _this10.state.get(_this10.DRAG_EVENT) && el !== _this10.state.get(_this10.STRETCH_EVENT);\n      });\n    }\n    for (elIndex = eligibleEls.length - 1; elIndex >= 0; elIndex--) {\n      if (!this.emitCancelable(eligibleEls[elIndex], evType, detail)) {\n        return eligibleEls[elIndex];\n      }\n    }\n    return null;\n  },\n  // Helper to ensure dropping and regrabbing finds the same target for\n  // for order-sorted hoverEls (grabbing; no-op for distance-sorted (pointing)\n  promoteHoveredEl: function promoteHoveredEl(el) {\n    var hoverIndex = this.hoverEls.indexOf(el);\n    if (hoverIndex !== -1 && this.hoverElsIntersections[hoverIndex].distance == null) {\n      this.hoverEls.splice(hoverIndex, 1);\n      var sect = this.hoverElsIntersections.splice(hoverIndex, 1);\n      this.hoverEls.push(el);\n      this.hoverElsIntersections.push(sect[0]);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/clickable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/clickable.js ***!\n  \\***********************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_21783__) => {\n\n/* global AFRAME */\nvar buttonCore = __nested_webpack_require_21783__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\nAFRAME.registerComponent('clickable', AFRAME.utils.extendDeep({}, buttonCore, {\n  schema: {\n    onclick: {\n      type: 'string'\n    }\n  },\n  init: function init() {\n    this.CLICKED_STATE = 'clicked';\n    this.CLICK_EVENT = 'grab-start';\n    this.UNCLICK_EVENT = 'grab-end';\n    this.clickers = [];\n    this.start = this.start.bind(this);\n    this.end = this.end.bind(this);\n    this.el.addEventListener(this.CLICK_EVENT, this.start);\n    this.el.addEventListener(this.UNCLICK_EVENT, this.end);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.CLICK_EVENT, this.start);\n    this.el.removeEventListener(this.UNCLICK_EVENT, this.end);\n  },\n  start: function start(evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return;\n    }\n    this.el.addState(this.CLICKED_STATE);\n    if (this.clickers.indexOf(evt.detail.hand) === -1) {\n      this.clickers.push(evt.detail.hand);\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      }\n    }\n  },\n  end: function end(evt) {\n    var handIndex = this.clickers.indexOf(evt.detail.hand);\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    if (handIndex !== -1) {\n      this.clickers.splice(handIndex, 1);\n    }\n    if (this.clickers.length < 1) {\n      this.el.removeState(this.CLICKED_STATE);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/drag-droppable.js\":\n/*!****************************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/drag-droppable.js ***!\n  \\****************************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_23779__) => {\n\n/* global AFRAME */\nvar inherit = AFRAME.utils.extendDeep;\nvar buttonCore = __nested_webpack_require_23779__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\nAFRAME.registerComponent('drag-droppable', inherit({}, buttonCore, {\n  init: function init() {\n    console.warn('Warning: drag-droppable is deprecated. Use draggable and droppable components instead');\n    this.HOVERED_STATE = 'dragover';\n    this.DRAGGED_STATE = 'dragged';\n    this.HOVER_EVENT = 'dragover-start';\n    this.UNHOVER_EVENT = 'dragover-end';\n    this.DRAG_EVENT = 'drag-start';\n    this.UNDRAG_EVENT = 'drag-end';\n    this.DRAGDROP_EVENT = 'drag-drop';\n    this.hoverStart = this.hoverStart.bind(this);\n    this.dragStart = this.dragStart.bind(this);\n    this.hoverEnd = this.hoverEnd.bind(this);\n    this.dragEnd = this.dragEnd.bind(this);\n    this.dragDrop = this.dragDrop.bind(this);\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStart);\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStart);\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEnd);\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEnd);\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDrop);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStart);\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart);\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEnd);\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd);\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDrop);\n  },\n  hoverStart: function hoverStart(evt) {\n    this.el.addState(this.HOVERED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  dragStart: function dragStart(evt) {\n    if (!this.startButtonOk(evt)) {\n      return;\n    }\n    this.el.addState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  hoverEnd: function hoverEnd(evt) {\n    this.el.removeState(this.HOVERED_STATE);\n  },\n  dragEnd: function dragEnd(evt) {\n    if (!this.endButtonOk(evt)) {\n      return;\n    }\n    this.el.removeState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  dragDrop: function dragDrop(evt) {\n    if (!this.endButtonOk(evt)) {\n      return;\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/draggable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/draggable.js ***!\n  \\***********************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_26609__) => {\n\n/* global AFRAME */\nvar inherit = AFRAME.utils.extendDeep;\nvar buttonCore = __nested_webpack_require_26609__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\nAFRAME.registerComponent('draggable', inherit({}, buttonCore, {\n  init: function init() {\n    this.DRAGGED_STATE = 'dragged';\n    this.DRAG_EVENT = 'drag-start';\n    this.UNDRAG_EVENT = 'drag-end';\n    this.dragStartBound = this.dragStart.bind(this);\n    this.dragEndBound = this.dragEnd.bind(this);\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStartBound);\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEndBound);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart);\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd);\n  },\n  dragStart: function dragStart(evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return;\n    }\n    this.el.addState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  dragEnd: function dragEnd(evt) {\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    this.el.removeState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/droppable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/droppable.js ***!\n  \\***********************************************************************/\n/***/ (() => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/* global AFRAME */\nfunction elementMatches(el, selector) {\n  if (el.matches) {\n    return el.matches(selector);\n  }\n  if (el.msMatchesSelector) {\n    return el.msMatchesSelector(selector);\n  }\n  if (el.webkitMatchesSelector) {\n    return el.webkitMatchesSelector(selector);\n  }\n}\nAFRAME.registerComponent('droppable', {\n  schema: {\n    accepts: {\n      \"default\": ''\n    },\n    autoUpdate: {\n      \"default\": true\n    },\n    acceptEvent: {\n      \"default\": ''\n    },\n    rejectEvent: {\n      \"default\": ''\n    }\n  },\n  multiple: true,\n  init: function init() {\n    this.HOVERED_STATE = 'dragover';\n    this.HOVER_EVENT = 'dragover-start';\n    this.UNHOVER_EVENT = 'dragover-end';\n    this.DRAGDROP_EVENT = 'drag-drop';\n\n    // better for Sinon spying if original method not overwritten\n    this.hoverStartBound = this.hoverStart.bind(this);\n    this.hoverEndBound = this.hoverEnd.bind(this);\n    this.dragDropBound = this.dragDrop.bind(this);\n    this.mutateAcceptsBound = this.mutateAccepts.bind(this);\n    this.acceptableEntities = [];\n    this.observer = new window.MutationObserver(this.mutateAcceptsBound);\n    this.observerOpts = {\n      childList: true,\n      subtree: true\n    };\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStartBound);\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEndBound);\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDropBound);\n  },\n  update: function update() {\n    if (this.data.accepts.length) {\n      this.acceptableEntities = Array.prototype.slice.call(this.el.sceneEl.querySelectorAll(this.data.accepts));\n    } else {\n      this.acceptableEntities = null;\n    }\n    if (this.data.autoUpdate && this.acceptableEntities != null) {\n      this.observer.observe(this.el.sceneEl, this.observerOpts);\n    } else {\n      this.observer.disconnect();\n    }\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStartBound);\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEndBound);\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDropBound);\n    this.observer.disconnect();\n  },\n  mutateAccepts: function mutateAccepts(mutations) {\n    var _this = this;\n    var query = this.data.accepts;\n    mutations.forEach(function (mutation) {\n      mutation.addedNodes.forEach(function (added) {\n        if (elementMatches(added, query)) {\n          _this.acceptableEntities.push(added);\n        }\n      });\n    });\n  },\n  entityAcceptable: function entityAcceptable(entity) {\n    var acceptableEntities = this.acceptableEntities;\n    if (acceptableEntities == null) {\n      return true;\n    }\n    var _iterator = _createForOfIteratorHelper(acceptableEntities),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var item = _step.value;\n        if (item === entity) {\n          return true;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return false;\n  },\n  hoverStart: function hoverStart(evt) {\n    if (evt.defaultPrevented || !this.entityAcceptable(evt.detail.carried)) {\n      return;\n    }\n    this.el.addState(this.HOVERED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  hoverEnd: function hoverEnd(evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    this.el.removeState(this.HOVERED_STATE);\n  },\n  dragDrop: function dragDrop(evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    var dropped = evt.detail.dropped;\n    if (!this.entityAcceptable(dropped)) {\n      if (this.data.rejectEvent.length) {\n        this.el.emit(this.data.rejectEvent, {\n          el: dropped\n        });\n      }\n      return;\n    }\n    if (this.data.acceptEvent.length) {\n      this.el.emit(this.data.acceptEvent, {\n        el: dropped\n      });\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/grabbable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/grabbable.js ***!\n  \\***********************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_34117__) => {\n\n/* global AFRAME, THREE */\nvar inherit = AFRAME.utils.extendDeep;\nvar physicsCore = __nested_webpack_require_34117__(/*! ./prototypes/physics-grab-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/physics-grab-proto.js\");\nvar buttonsCore = __nested_webpack_require_34117__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\n// new object with all core modules\nvar base = inherit({}, physicsCore, buttonsCore);\nAFRAME.registerComponent('sh-grabbable', inherit(base, {\n  schema: {\n    maxGrabbers: {\n      type: 'int',\n      \"default\": NaN\n    },\n    invert: {\n      \"default\": false\n    },\n    suppressY: {\n      \"default\": false\n    }\n  },\n  init: function init() {\n    var _this = this;\n    this.GRABBED_STATE = 'grabbed';\n    this.GRAB_EVENT = 'grab-start';\n    this.UNGRAB_EVENT = 'grab-end';\n    this.grabbed = false;\n    this.grabbers = [];\n    this.constraints = new Map();\n    this.deltaPositionIsValid = false;\n    this.grabDistance = undefined;\n    this.grabDirection = {\n      x: 0,\n      y: 0,\n      z: -1\n    };\n    this.grabOffset = {\n      x: 0,\n      y: 0,\n      z: 0\n    };\n    // persistent object speeds up repeat setAttribute calls\n    this.destPosition = {\n      x: 0,\n      y: 0,\n      z: 0\n    };\n    this.deltaPosition = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n    this.physicsInit();\n    this.el.addEventListener(this.GRAB_EVENT, function (e) {\n      return _this.start(e);\n    });\n    this.el.addEventListener(this.UNGRAB_EVENT, function (e) {\n      return _this.end(e);\n    });\n    this.el.addEventListener('mouseout', function (e) {\n      return _this.lostGrabber(e);\n    });\n  },\n  update: function update() {\n    this.physicsUpdate();\n    this.xFactor = this.data.invert ? -1 : 1;\n    this.zFactor = this.data.invert ? -1 : 1;\n    this.yFactor = (this.data.invert ? -1 : 1) * !this.data.suppressY;\n  },\n  tick: function () {\n    var q = new THREE.Quaternion();\n    var v = new THREE.Vector3();\n    return function () {\n      var entityPosition;\n      if (this.grabber) {\n        // reflect on z-axis to point in same direction as the laser\n        this.targetPosition.copy(this.grabDirection);\n        this.targetPosition.applyQuaternion(this.grabber.object3D.getWorldQuaternion(q)).setLength(this.grabDistance).add(this.grabber.object3D.getWorldPosition(v)).add(this.grabOffset);\n        if (this.deltaPositionIsValid) {\n          // relative position changes work better with nested entities\n          this.deltaPosition.sub(this.targetPosition);\n          entityPosition = this.el.getAttribute('position');\n          this.destPosition.x = entityPosition.x - this.deltaPosition.x * this.xFactor;\n          this.destPosition.y = entityPosition.y - this.deltaPosition.y * this.yFactor;\n          this.destPosition.z = entityPosition.z - this.deltaPosition.z * this.zFactor;\n          this.el.setAttribute('position', this.destPosition);\n        } else {\n          this.deltaPositionIsValid = true;\n        }\n        this.deltaPosition.copy(this.targetPosition);\n      }\n    };\n  }(),\n  remove: function remove() {\n    this.el.removeEventListener(this.GRAB_EVENT, this.start);\n    this.el.removeEventListener(this.UNGRAB_EVENT, this.end);\n    this.physicsRemove();\n  },\n  start: function start(evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return;\n    }\n    // room for more grabbers?\n    var grabAvailable = !Number.isFinite(this.data.maxGrabbers) || this.grabbers.length < this.data.maxGrabbers;\n    if (this.grabbers.indexOf(evt.detail.hand) === -1 && grabAvailable) {\n      if (!evt.detail.hand.object3D) {\n        console.warn('sh-grabbable entities must have an object3D');\n        return;\n      }\n      this.grabbers.push(evt.detail.hand);\n      // initiate physics if available, otherwise manual\n      if (!this.physicsStart(evt) && !this.grabber) {\n        this.grabber = evt.detail.hand;\n        this.resetGrabber();\n      }\n      // notify super-hands that the gesture was accepted\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      }\n      this.grabbed = true;\n      this.el.addState(this.GRABBED_STATE);\n    }\n  },\n  end: function end(evt) {\n    var handIndex = this.grabbers.indexOf(evt.detail.hand);\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    if (handIndex !== -1) {\n      this.grabbers.splice(handIndex, 1);\n      this.grabber = this.grabbers[0];\n    }\n    this.physicsEnd(evt);\n    if (!this.resetGrabber()) {\n      this.grabbed = false;\n      this.el.removeState(this.GRABBED_STATE);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  resetGrabber: function () {\n    var objPos = new THREE.Vector3();\n    var grabPos = new THREE.Vector3();\n    return function () {\n      if (!this.grabber) {\n        return false;\n      }\n      var raycaster = this.grabber.getAttribute('raycaster');\n      this.deltaPositionIsValid = false;\n      this.grabDistance = this.el.object3D.getWorldPosition(objPos).distanceTo(this.grabber.object3D.getWorldPosition(grabPos));\n      if (raycaster) {\n        this.grabDirection = raycaster.direction;\n        this.grabOffset = raycaster.origin;\n      }\n      return true;\n    };\n  }(),\n  lostGrabber: function lostGrabber(evt) {\n    var i = this.grabbers.indexOf(evt.relatedTarget);\n    // if a queued, non-physics grabber leaves the collision zone, forget it\n    if (i !== -1 && evt.relatedTarget !== this.grabber && !this.physicsIsConstrained(evt.relatedTarget)) {\n      this.grabbers.splice(i, 1);\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/hoverable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/hoverable.js ***!\n  \\***********************************************************************/\n/***/ (() => {\n\n/* global AFRAME */\nAFRAME.registerComponent('hoverable', {\n  init: function init() {\n    this.HOVERED_STATE = 'hovered';\n    this.HOVER_EVENT = 'hover-start';\n    this.UNHOVER_EVENT = 'hover-end';\n    this.hoverers = [];\n    this.start = this.start.bind(this);\n    this.end = this.end.bind(this);\n    this.el.addEventListener(this.HOVER_EVENT, this.start);\n    this.el.addEventListener(this.UNHOVER_EVENT, this.end);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.HOVER_EVENT, this.start);\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.end);\n  },\n  start: function start(evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    this.el.addState(this.HOVERED_STATE);\n    if (this.hoverers.indexOf(evt.detail.hand) === -1) {\n      this.hoverers.push(evt.detail.hand);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  end: function end(evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    var handIndex = this.hoverers.indexOf(evt.detail.hand);\n    if (handIndex !== -1) {\n      this.hoverers.splice(handIndex, 1);\n    }\n    if (this.hoverers.length < 1) {\n      this.el.removeState(this.HOVERED_STATE);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\":\n/*!**************************************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js ***!\n  \\**************************************************************************************/\n/***/ ((module) => {\n\n// common code used in customizing reaction components by button\nmodule.exports = function () {\n  function buttonIsValid(evt, buttonList) {\n    return buttonList.length === 0 || buttonList.indexOf(evt.detail.buttonEvent.type) !== -1;\n  }\n  return {\n    schema: {\n      startButtons: {\n        \"default\": []\n      },\n      endButtons: {\n        \"default\": []\n      }\n    },\n    startButtonOk: function startButtonOk(evt) {\n      return buttonIsValid(evt, this.data.startButtons);\n    },\n    endButtonOk: function endButtonOk(evt) {\n      return buttonIsValid(evt, this.data.endButtons);\n    }\n  };\n}();\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/prototypes/physics-grab-proto.js\":\n/*!*******************************************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/prototypes/physics-grab-proto.js ***!\n  \\*******************************************************************************************/\n/***/ ((module) => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n// base code used by grabbable for physics interactions\nmodule.exports = {\n  schema: {\n    usePhysics: {\n      \"default\": 'ifavailable'\n    }\n  },\n  physicsInit: function physicsInit() {\n    this.constraints = new Map();\n  },\n  physicsUpdate: function physicsUpdate() {\n    if (this.data.usePhysics === 'never' && this.constraints.size) {\n      this.physicsClear();\n    }\n  },\n  physicsRemove: function physicsRemove() {\n    this.physicsClear();\n  },\n  physicsStart: function physicsStart(evt) {\n    // initiate physics constraint if available and not already existing\n    if (this.data.usePhysics !== 'never' && this.el.body && evt.detail.hand.body && !this.constraints.has(evt.detail.hand)) {\n      var newConId = Math.random().toString(36).substr(2, 9);\n      this.el.setAttribute('constraint__' + newConId, {\n        target: evt.detail.hand\n      });\n      this.constraints.set(evt.detail.hand, newConId);\n      return true;\n    }\n    // Prevent manual grab by returning true\n    if (this.data.usePhysics === 'only') {\n      return true;\n    }\n    return false;\n  },\n  physicsEnd: function physicsEnd(evt) {\n    var constraintId = this.constraints.get(evt.detail.hand);\n    if (constraintId) {\n      this.el.removeAttribute('constraint__' + constraintId);\n      this.constraints[\"delete\"](evt.detail.hand);\n    }\n  },\n  physicsClear: function physicsClear() {\n    if (this.el.body) {\n      var _iterator = _createForOfIteratorHelper(this.constraints.values()),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var c = _step.value;\n          this.el.body.world.removeConstraint(c);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    this.constraints.clear();\n  },\n  physicsIsConstrained: function physicsIsConstrained(el) {\n    return this.constraints.has(el);\n  },\n  physicsIsGrabbing: function physicsIsGrabbing() {\n    return this.constraints.size > 0;\n  }\n};\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/stretchable.js\":\n/*!*************************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/stretchable.js ***!\n  \\*************************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_46646__) => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/* global AFRAME, THREE */\nvar inherit = AFRAME.utils.extendDeep;\nvar buttonsCore = __nested_webpack_require_46646__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\n// new object with all core modules\nvar base = inherit({}, buttonsCore);\nAFRAME.registerComponent('stretchable', inherit(base, {\n  schema: {\n    usePhysics: {\n      \"default\": 'ifavailable'\n    },\n    invert: {\n      \"default\": false\n    },\n    physicsUpdateRate: {\n      \"default\": 100\n    }\n  },\n  init: function init() {\n    this.STRETCHED_STATE = 'stretched';\n    this.STRETCH_EVENT = 'stretch-start';\n    this.UNSTRETCH_EVENT = 'stretch-end';\n    this.stretched = false;\n    this.stretchers = [];\n    this.scale = new THREE.Vector3();\n    this.handPos = new THREE.Vector3();\n    this.otherHandPos = new THREE.Vector3();\n    this.start = this.start.bind(this);\n    this.end = this.end.bind(this);\n    this.el.addEventListener(this.STRETCH_EVENT, this.start);\n    this.el.addEventListener(this.UNSTRETCH_EVENT, this.end);\n  },\n  update: function update(oldDat) {\n    this.updateBodies = AFRAME.utils.throttleTick(this._updateBodies, this.data.physicsUpdateRate, this);\n  },\n  tick: function tick(time, timeDelta) {\n    if (!this.stretched) {\n      return;\n    }\n    this.scale.copy(this.el.getAttribute('scale'));\n    this.stretchers[0].object3D.getWorldPosition(this.handPos);\n    this.stretchers[1].object3D.getWorldPosition(this.otherHandPos);\n    var currentStretch = this.handPos.distanceTo(this.otherHandPos);\n    var deltaStretch = 1;\n    if (this.previousStretch !== null && currentStretch !== 0) {\n      deltaStretch = Math.pow(currentStretch / this.previousStretch, this.data.invert ? -1 : 1);\n    }\n    this.previousStretch = currentStretch;\n    if (this.previousPhysicsStretch == null) {\n      // establish correct baseline even if throttled function isn't called\n      this.previousPhysicsStretch = currentStretch;\n    }\n    this.scale.multiplyScalar(deltaStretch);\n    this.el.setAttribute('scale', this.scale);\n    // scale update for all nested physics bodies (throttled)\n    this.updateBodies(time, timeDelta);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.STRETCH_EVENT, this.start);\n    this.el.removeEventListener(this.UNSTRETCH_EVENT, this.end);\n  },\n  start: function start(evt) {\n    if (this.stretched || this.stretchers.includes(evt.detail.hand) || !this.startButtonOk(evt) || evt.defaultPrevented) {\n      return;\n    } // already stretched or already captured this hand or wrong button\n    this.stretchers.push(evt.detail.hand);\n    if (this.stretchers.length === 2) {\n      this.stretched = true;\n      this.previousStretch = null;\n      this.previousPhysicsStretch = null;\n      this.el.addState(this.STRETCHED_STATE);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } // gesture accepted\n  },\n  end: function end(evt) {\n    var stretcherIndex = this.stretchers.indexOf(evt.detail.hand);\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    if (stretcherIndex !== -1) {\n      this.stretchers.splice(stretcherIndex, 1);\n      this.stretched = false;\n      this.el.removeState(this.STRETCHED_STATE);\n      // override throttle to push last stretch to physics bodies\n      this._updateBodies();\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  _updateBodies: function _updateBodies() {\n    if (!this.el.body || this.data.usePhysics === 'never') {\n      return;\n    }\n    var currentStretch = this.previousStretch; // last visible geometry stretch\n    var deltaStretch = 1;\n    if (this.previousPhysicsStretch !== null && currentStretch > 0) {\n      deltaStretch = Math.pow(currentStretch / this.previousPhysicsStretch, this.data.invert ? -1 : 1);\n    }\n    this.previousPhysicsStretch = currentStretch;\n    if (deltaStretch === 1) {\n      return;\n    }\n    var _iterator = _createForOfIteratorHelper(this.el.childNodes),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var c = _step.value;\n        this.stretchBody(c, deltaStretch);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    this.stretchBody(this.el, deltaStretch);\n  },\n  stretchBody: function stretchBody(el, deltaStretch) {\n    if (!el.body) {\n      return;\n    }\n    var physicsShape;\n    var offset;\n    for (var i = 0; i < el.body.shapes.length; i++) {\n      physicsShape = el.body.shapes[i];\n      if (physicsShape.halfExtents) {\n        physicsShape.halfExtents.scale(deltaStretch, physicsShape.halfExtents);\n        physicsShape.updateConvexPolyhedronRepresentation();\n      } else if (physicsShape.radius) {\n        physicsShape.radius *= deltaStretch;\n        physicsShape.updateBoundingSphereRadius();\n      } else if (!this.shapeWarned) {\n        console.warn('Unable to stretch physics body: unsupported shape');\n        this.shapeWarned = true;\n      }\n      // also move offset to match scale change\n      offset = el.body.shapeOffsets[i];\n      offset.scale(deltaStretch, offset);\n    }\n    el.body.updateBoundingRadius();\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/systems/super-hands-system.js\":\n/*!********************************************************************!*\\\n  !*** ./aframe-super-hands-component/systems/super-hands-system.js ***!\n  \\********************************************************************/\n/***/ (() => {\n\n/* global AFRAME */\nAFRAME.registerSystem('super-hands', {\n  init: function init() {\n    this.superHands = [];\n  },\n  registerMe: function registerMe(comp) {\n    // when second hand registers, store links\n    if (this.superHands.length === 1) {\n      this.superHands[0].otherSuperHand = comp;\n      comp.otherSuperHand = this.superHands[0];\n    }\n    this.superHands.push(comp);\n  },\n  unregisterMe: function unregisterMe(comp) {\n    var index = this.superHands.indexOf(comp);\n    if (index !== -1) {\n      this.superHands.splice(index, 1);\n    }\n    this.superHands.forEach(function (x) {\n      if (x.otherSuperHand === comp) {\n        x.otherSuperHand = null;\n      }\n    });\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/aframeContext.js\":\n/*!******************************!*\\\n  !*** ./src/aframeContext.js ***!\n  \\******************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_54640__) => {\n\n\"use strict\";\n__nested_webpack_require_54640__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_54640__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AframeContext)\n/* harmony export */ });\n/* harmony import */ var _assetManager__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_54640__(/*! ./assetManager */ \"./src/assetManager.js\");\n/* harmony import */ var _components_renderer__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_54640__(/*! ./components/renderer */ \"./src/components/renderer.js\");\n/* harmony import */ var _components_renderer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_54640__.n(_components_renderer__WEBPACK_IMPORTED_MODULE_1__);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar AframeContext = /*#__PURE__*/function () {\n  function AframeContext(settings) {\n    _classCallCheck(this, AframeContext);\n    this.inVR = false;\n    // settings pointer\n    this.settings = settings;\n    this.createScene();\n    // create asset manager\n    this.assetManager = new _assetManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.scene);\n  }\n  return _createClass(AframeContext, [{\n    key: \"createScene\",\n    value: function createScene() {\n      var _this = this;\n      // find scene if exists else create scene\n      var scene = document.getElementsByTagName(\"a-scene\");\n      if (scene.length > 0) this.scene = scene[0];else {\n        this.scene = document.createElement(\"a-scene\");\n        document.body.appendChild(this.scene);\n        this.newScene = true;\n      }\n\n      // add stats to scene if debug\n      if (this.settings.debug) this.scene.setAttribute(\"stats\", \"\");\n\n      //custom renderer params like local clipping\n      this.scene.setAttribute(\"vr-renderer\", \"\");\n\n      // check if in VR\n      this.scene.addEventListener(\"enter-vr\", function () {\n        _this.inVR = true;\n      }.bind(this));\n      this.scene.addEventListener(\"exit-vr\", function () {\n        _this.inVR = false;\n      }.bind(this));\n    }\n  }, {\n    key: \"createContainer\",\n    value: function createContainer(web2vr) {\n      // conttainer for all aframe elements\n      this.container = document.createElement(\"a-entity\");\n      this.container.classList.add(\"vr-container\");\n      this.container.classList.add(this.settings.interactiveTag);\n\n      // position container\n      var width = parseFloat(window.getComputedStyle(web2vr.container).width) * (1 / this.settings.scale);\n      var x = this.settings.position.x;\n      // if x=0 then then we want to be in center for testing and showcase\n      if (x == 0) x = x - width / 2;\n      this.container.object3D.position.set(x, this.settings.position.y, this.settings.position.z);\n      // update rotation from aframe(1.0.4) because there is bug(rotation x will be wrong) if you update with three.js\n      this.container.setAttribute(\"rotation\", {\n        x: this.settings.rotation.x,\n        y: this.settings.rotation.y,\n        z: this.settings.rotation.z\n      });\n      var parentElement = document.querySelector(this.settings.parentSelector);\n      if (parentElement) parentElement.appendChild(this.container);else {\n        this.container.setAttribute(\"vr-grab-rotate-static\", \"\");\n        this.container.setAttribute(\"sh-grabbable\", \"\");\n        this.container.setAttribute(\"stretchable\", \"\");\n        this.scene.appendChild(this.container);\n      }\n\n      // pointer for grabRotateStatic\n      this.container.web2vr = web2vr;\n    }\n  }, {\n    key: \"createSky\",\n    value: function createSky() {\n      // create sky if sky doesnt exist\n      if (document.getElementsByTagName(\"a-sky\").length == 0 && this.settings.skybox) {\n        this.sky = document.createElement(\"a-sky\");\n        this.sky.setAttribute(\"color\", \"#a9f8fe\");\n        this.scene.appendChild(this.sky);\n      }\n    }\n  }, {\n    key: \"createControllers\",\n    value: function createControllers() {\n      var _this2 = this;\n      // cursor only for dev testing on desktop\n      if (!document.getElementById(\"mouseCursor\")) {\n        var cursor = document.createElement(\"a-entity\");\n        cursor.id = \"mouseCursor\";\n        cursor.setAttribute(\"cursor\", \"rayOrigin\", \"mouse\");\n        cursor.setAttribute(\"raycaster\", \"objects: .\".concat(this.settings.interactiveTag, \", .collidable\"));\n        this.scene.appendChild(cursor);\n      }\n\n      // super hands 6DOF\n      if (this.settings.createControllers && !document.getElementById(\"leftHand\")) {\n        var raycaster = \"objects: .\".concat(this.settings.interactiveTag, \", .collidable; far: \").concat(this.settings.raycasterFar);\n        var superhands = \"colliderEvent: raycaster-intersection; colliderEventProperty: els; colliderEndEvent:raycaster-intersection-cleared; colliderEndEventProperty: clearedEls; grabStartButtons: gripdown; grabEndButtons: gripup; stretchStartButtons: gripdown; stretchEndButtons: gripup\";\n        var leftHand = document.createElement(\"a-entity\");\n        leftHand.id = \"leftHand\";\n        leftHand.setAttribute(\"hand-controls\", \"hand:left; handModelStyle: highPoly; color: #ffcccc\");\n        leftHand.setAttribute(\"laser-controls\", \"\");\n        leftHand.setAttribute(\"raycaster\", raycaster);\n        leftHand.setAttribute(\"super-hands\", superhands);\n        var rightHand = document.createElement(\"a-entity\");\n        rightHand.id = \"rightHand\";\n        rightHand.setAttribute(\"hand-controls\", \"hand:right; handModelStyle: highPoly; color: #ffcccc\");\n        rightHand.setAttribute(\"laser-controls\", \"\");\n        rightHand.setAttribute(\"raycaster\", raycaster);\n        rightHand.setAttribute(\"super-hands\", superhands);\n        this.scene.appendChild(leftHand);\n        this.scene.appendChild(rightHand);\n      }\n      // keyboard\n      this.keyboard = document.getElementById(\"vr-keyboard\");\n      if (!this.keyboard) {\n        this.keyboard = document.createElement(\"a-entity\");\n        this.keyboard.id = \"vr-keyboard\";\n        this.keyboard.setAttribute(\"a-keyboard\", \"\");\n        this.keyboard.setAttribute(\"sh-grabbable\", \"\");\n        this.scene.appendChild(this.keyboard);\n        this.keyboard.object3D.visible = false;\n\n        // current active input\n        this.keyboard.activeInput = null;\n        // event listener for the keyboard key press \n        document.addEventListener('a-keyboard-update', function (e) {\n          if (_this2.keyboard.activeInput) {\n            var code = parseInt(e.detail.code);\n            var value = _this2.keyboard.activeInput.value;\n\n            // backspace\n            if (code == 8) value = value.slice(0, -1);\n            // submit or cancel\n            else if (code == 6 || code == 24) {\n              _this2.keyboard.object3D.visible = false;\n              _this2.keyboard.object3D.position.y = 10000; // because raycasting still collides with invisible objects\n              _this2.keyboard.activeInput.element.active = false;\n              _this2.keyboard.activeInput.element.update();\n              _this2.keyboard.activeInput = null;\n              return;\n            }\n            // ignore arrow keys\n            else if (![37, 38, 39, 40].includes(code)) value += e.detail.value;\n            _this2.keyboard.activeInput.value = value;\n            _this2.keyboard.activeInput.element.update();\n          }\n        });\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/assetManager.js\":\n/*!*****************************!*\\\n  !*** ./src/assetManager.js ***!\n  \\*****************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_63585__) => {\n\n\"use strict\";\n__nested_webpack_require_63585__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_63585__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AssetManager)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar AssetManager = /*#__PURE__*/function () {\n  function AssetManager(scene) {\n    _classCallCheck(this, AssetManager);\n    var assets = document.getElementsByTagName(\"a-assets\")[0];\n    if (assets) this.assets = assets;else {\n      this.assets = document.createElement(\"a-assets\");\n      scene.appendChild(this.assets);\n    }\n  }\n\n  // update current-id attribute\n  return _createClass(AssetManager, [{\n    key: \"updateCurrentAssetId\",\n    value: function updateCurrentAssetId() {\n      var currentAssetId = parseInt(this.assets.getAttribute(\"current-id\"));\n      if (!this.assets.getAttribute(\"current-id\")) {\n        this.assets.setAttribute(\"current-id\", 0);\n        currentAssetId = 0;\n      }\n      this.assets.setAttribute(\"current-id\", currentAssetId + 1);\n    }\n    // update current-id attribute and return it.\n    // used for elements (ex. video) outside a-assets tag\n  }, {\n    key: \"updateCurrentAssetIdReturn\",\n    value: function updateCurrentAssetIdReturn() {\n      this.updateCurrentAssetId();\n      return \"asset-\" + this.assets.getAttribute(\"current-id\");\n    }\n\n    // find asset if exists if not create and return it\n  }, {\n    key: \"getAsset\",\n    value: function getAsset(path, type) {\n      var assets = this.assets.getChildren();\n      var _iterator = _createForOfIteratorHelper(assets),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var asset = _step.value;\n          if (asset.getAttribute(\"src\") === path) return asset.getAttribute(\"id\");\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return this.createAsset(path, type);\n    }\n  }, {\n    key: \"createAsset\",\n    value: function createAsset(path, type) {\n      var asset = document.createElement(type);\n      asset.setAttribute(\"src\", path);\n      this.updateCurrentAssetId();\n      var id = \"asset-\" + this.assets.getAttribute(\"current-id\");\n      asset.setAttribute(\"id\", id);\n      // have to manualy add crossorigin for all external assets to load\n      asset.setAttribute(\"crossorigin\", \"Anonymous\");\n      this.assets.appendChild(asset);\n      return id;\n    }\n  }, {\n    key: \"removeAsset\",\n    value: function removeAsset(id) {\n      this.assets.querySelector(\"#\" + id).remove();\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/components/animate.js\":\n/*!***********************************!*\\\n  !*** ./src/components/animate.js ***!\n  \\***********************************/\n/***/ (() => {\n\nAFRAME.registerComponent(\"vr-animate\", {\n  init: function init() {\n    var _this$el$element, _this$el$element2, _this$el$element3, _this$el$element4;\n    this.running = false;\n    // listenes for css animation and translation\n    (_this$el$element = this.el.element) === null || _this$el$element === void 0 || _this$el$element.domElement.addEventListener(\"animationstart\", this.startAnimation.bind(this));\n    (_this$el$element2 = this.el.element) === null || _this$el$element2 === void 0 || _this$el$element2.domElement.addEventListener(\"animationend\", this.stopAnimation.bind(this));\n    (_this$el$element3 = this.el.element) === null || _this$el$element3 === void 0 || _this$el$element3.domElement.addEventListener(\"transitionstart\", this.startAnimation.bind(this));\n    (_this$el$element4 = this.el.element) === null || _this$el$element4 === void 0 || _this$el$element4.domElement.addEventListener(\"transitionend\", this.stopAnimation.bind(this));\n  },\n  tick: function tick() {\n    var _this$el$element5;\n    if (this.running) (_this$el$element5 = this.el.element) === null || _this$el$element5 === void 0 || _this$el$element5.web2vr.update();\n  },\n  startAnimation: function startAnimation() {\n    this.running = true;\n  },\n  stopAnimation: function stopAnimation() {\n    var _this$el$element6;\n    this.running = false;\n    // one final update\n    (_this$el$element6 = this.el.element) === null || _this$el$element6 === void 0 || _this$el$element6.web2vr.update();\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/components/border.js\":\n/*!**********************************!*\\\n  !*** ./src/components/border.js ***!\n  \\**********************************/\n/***/ (() => {\n\nAFRAME.registerComponent(\"vr-border\", {\n  schema: {\n    width: {\n      type: \"number\"\n    },\n    color: {\n      type: \"string\"\n    }\n  },\n  init: function init() {\n    this.running = true;\n    var plane = this.el.object3D.children[0];\n    var edges = new THREE.EdgesGeometry(plane.geometry);\n    var line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({\n      color: 0x000000,\n      linewidth: this.data.width\n    }));\n    this.borderObject = line;\n    this.el.element.web2vr.aframe.container.object3D.add(this.borderObject);\n\n    //maybe clippingContext inside tick?\n    if (this.el.element.clippingContext) {\n      line.material.clippingPlanes = this.el.element.clippingContext.planes;\n      line.material.needsUpdate = true;\n    }\n  },\n  update: function update() {\n    // waiting for three.js(WebGL) to add lineWidth support for Windows(DirectX) browsers for now linewidth is 1 no matter what you set it.\n    // lineWidth works for other OS.\n    var borderWidth = this.data.width;\n\n    // custom element border width\n    if (this.el.element.borderWidth) this.borderObject.material.linewidth = this.el.element.borderWidth;else this.borderObject.material.linewidth = borderWidth;\n\n    // custom element border color\n    if (this.el.element.borderColor) this.borderObject.material.color = this.el.element.borderColor;else this.borderObject.material.color = new THREE.Color(this.data.color);\n  },\n  updateBorder: function updateBorder() {\n    var _this$el$element;\n    if ((_this$el$element = this.el.element) !== null && _this$el$element !== void 0 && _this$el$element.visible) {\n      this.running = true;\n      this.borderObject.material.visible = true;\n    } else this.borderObject.material.visible = false;\n  },\n  tick: function tick() {\n    if (this.running) {\n      var scale = this.el.object3D.scale;\n      var plane = this.el.object3D.children[0].geometry.clone();\n      plane.scale(scale.x, scale.y, scale.z);\n      var edges = new THREE.EdgesGeometry(plane);\n      var position = this.el.object3D.position;\n      this.borderObject.geometry = edges;\n      this.borderObject.position.set(position.x, position.y, position.z + this.el.element.web2vr.settings.layerStep * 2);\n      this.running = false;\n    }\n  },\n  remove: function remove() {\n    this.el.element.web2vr.aframe.container.object3D.remove(this.borderObject);\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/components/grabRotateStatic.js\":\n/*!********************************************!*\\\n  !*** ./src/components/grabRotateStatic.js ***!\n  \\********************************************/\n/***/ (() => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nAFRAME.registerComponent(\"vr-grab-rotate-static\", {\n  tick: function tick() {\n    if (this.el.components[\"sh-grabbable\"].grabbed) {\n      // update clipping when moving\n      if (this.el.web2vr.scroll.hasScroll) {\n        var _iterator = _createForOfIteratorHelper(this.el.web2vr.elements),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var element = _step.value;\n            element.updateClipping();\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      var obj = this.el.object3D;\n      var hand = this.el.components[\"sh-grabbable\"].grabbers[0].object3D;\n      obj.rotation.y = Math.atan2(hand.position.x - (obj.position.x + this.el.children[0].getAttribute(\"width\") / 2), hand.position.z - obj.position.z);\n\n      //obj.rotation.x = hand.rotation.x;\n      //obj.rotation.y = hand.rotation.y;\n      //obj.rotation.z = hand.rotation.z;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/components/renderer.js\":\n/*!************************************!*\\\n  !*** ./src/components/renderer.js ***!\n  \\************************************/\n/***/ (() => {\n\nAFRAME.registerComponent(\"vr-renderer\", {\n  init: function init() {\n    this.el.sceneEl.renderer.localClippingEnabled = true;\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/components/scrollbar.js\":\n/*!*************************************!*\\\n  !*** ./src/components/scrollbar.js ***!\n  \\*************************************/\n/***/ (() => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nAFRAME.registerComponent(\"vr-scrollbar\", {\n  init: function init() {\n    this.el.addEventListener(\"click\", function (evt) {\n      var scrollHeight = parseFloat(this.el.web2vr.aframe.container.firstElementChild.element.style.height) - this.el.web2vr.settings.scrollWindowHeight;\n      if (this.el.web2vr.scroll.scrollContainer == this.el.web2vr.container) scrollHeight = this.el.web2vr.scroll.scrollContainer.scrollHeight - this.el.web2vr.scroll.scrollContainer.clientHeight;\n      var scrollY = (1 - evt.detail.intersection.uv.y) * scrollHeight / this.el.web2vr.settings.scale;\n      var elements = _toConsumableArray(this.el.web2vr.elements);\n      // remove first element that is the backgorund of container\n      elements.shift();\n      this.el.pointer.object3D.position.setY(this.pointEndY + evt.detail.intersection.uv.y * (this.pointStartY - this.pointEndY));\n      var _iterator = _createForOfIteratorHelper(elements),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var element = _step.value;\n          element.position.scrollY = scrollY;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      this.el.web2vr.update();\n    }.bind(this));\n  },\n  play: function play() {\n    var width = parseFloat(this.el.web2vr.aframe.container.firstElementChild.getAttribute(\"width\"));\n    var height = parseFloat(this.el.web2vr.aframe.container.firstElementChild.getAttribute(\"height\"));\n\n    // init plane size\n    this.el.setAttribute(\"width\", width / 20);\n    this.el.setAttribute(\"height\", height);\n\n    //init scrollbar position\n    this.el.scrollbar.object3D.position.setX(width + parseFloat(this.el.getAttribute(\"width\") / 2));\n    this.el.scrollbar.object3D.position.setY(0 - height / 2); //1.96\n    this.el.scrollbar.object3D.position.setZ(-(this.el.web2vr.settings.layerStep * 4));\n\n    // init pointer position and size\n    this.el.pointer.setAttribute(\"height\", width / 20);\n    this.el.pointer.setAttribute(\"width\", width / 20);\n    this.pointStartY = height / 2 - parseFloat(this.el.pointer.getAttribute(\"height\")) / 2;\n    this.pointEndY = this.pointStartY - height + parseFloat(this.el.pointer.getAttribute(\"height\"));\n    this.el.pointer.object3D.position.setY(this.pointStartY);\n    this.el.pointer.object3D.position.setZ(this.el.web2vr.settings.layerStep * 2);\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/elements/buttonElement.js\":\n/*!***************************************!*\\\n  !*** ./src/elements/buttonElement.js ***!\n  \\***************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_81623__) => {\n\n\"use strict\";\n__nested_webpack_require_81623__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_81623__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ButtomElement)\n/* harmony export */ });\n/* harmony import */ var _textElement__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_81623__(/*! ./textElement */ \"./src/elements/textElement.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar ButtomElement = /*#__PURE__*/function (_TextElement) {\n  function ButtomElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, ButtomElement);\n    _this = _callSuper(this, ButtomElement, [web2vr, domElement, layer]);\n    _this.borderColor = new THREE.Color(0x000000);\n    _this.borderWidth = 1;\n    return _this;\n  }\n  _inherits(ButtomElement, _TextElement);\n  return _createClass(ButtomElement, [{\n    key: \"updateTextPadding\",\n    value: function updateTextPadding() {\n      // ignore padding for buttons\n    }\n  }, {\n    key: \"updateText\",\n    value: function updateText() {\n      if (this.domElement.tagName == \"INPUT\") this.textValue = this.domElement.value.replace(/\\s{2,}/g, ' ');\n    }\n  }]);\n}(_textElement__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/canvasElement.js\":\n/*!***************************************!*\\\n  !*** ./src/elements/canvasElement.js ***!\n  \\***************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_86332__) => {\n\n\"use strict\";\n__nested_webpack_require_86332__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_86332__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CanvasElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_86332__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar CanvasElement = /*#__PURE__*/function (_Element) {\n  function CanvasElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, CanvasElement);\n    _this = _callSuper(this, CanvasElement, [web2vr, domElement, layer]);\n    _this.imageId = null;\n    _this.entity = document.createElement(\"a-image\");\n    return _this;\n  }\n  _inherits(CanvasElement, _Element);\n  return _createClass(CanvasElement, [{\n    key: \"updateImage\",\n    value: function updateImage(src) {\n      var assetId = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\n\n      // remove old image if there is new image\n      if (this.imageId && this.imageId != assetId) this.web2vr.aframe.assetManager.removeAsset(this.imageId);\n      this.entity.setAttribute(\"id\", \"IMAGE_\" + assetId);\n      this.entity.setAttribute(\"src\", \"#\" + assetId);\n      this.imageId = assetId;\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      this.updateImage(this.domElement.toDataURL());\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/checkboxElement.js\":\n/*!*****************************************!*\\\n  !*** ./src/elements/checkboxElement.js ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_91308__) => {\n\n\"use strict\";\n__nested_webpack_require_91308__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_91308__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CheckBoxElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_91308__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar CheckBoxElement = /*#__PURE__*/function (_Element) {\n  function CheckBoxElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, CheckBoxElement);\n    _this = _callSuper(this, CheckBoxElement, [web2vr, domElement, layer]);\n    _this.borderColor = new THREE.Color(0x000000);\n    _this.borderWidth = 1;\n    _this.entity = document.createElement(\"a-plane\");\n    _this.domElement.addEventListener(\"click\", function () {\n      _this.specificUpdate();\n    }.bind(_this));\n    return _this;\n  }\n  _inherits(CheckBoxElement, _Element);\n  return _createClass(CheckBoxElement, [{\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      if (this.domElement.checked) this.entity.setAttribute(\"color\", \"#0075FF\");else this.entity.setAttribute(\"color\", \"#FFFFFF\");\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/containerElement.js\":\n/*!******************************************!*\\\n  !*** ./src/elements/containerElement.js ***!\n  \\******************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_96092__) => {\n\n\"use strict\";\n__nested_webpack_require_96092__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_96092__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ContainerElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_96092__(/*! ./element */ \"./src/elements/element.js\");\n/* harmony import */ var _utils_helper__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_96092__(/*! ../utils/helper */ \"./src/utils/helper.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\nvar ContainerElement = /*#__PURE__*/function (_Element) {\n  function ContainerElement(web2vr, domElement, layer) {\n    var _this;\n    var textOnly = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    _classCallCheck(this, ContainerElement);\n    _this = _callSuper(this, ContainerElement, [web2vr, domElement, layer]);\n    _this.textOnly = textOnly;\n    _this.entity = document.createElement(\"a-plane\");\n\n    // if hyperlink trigger a click event\n    if (_this.domElement.tagName == \"A\") {\n      _this.entity.addEventListener(\"click\", function () {\n        console.log(\"Link clicked!\", _this.domElement.click());\n      });\n    }\n    if (!_this.textOnly) {\n      // show back plane for the main container\n      if (_this.domElement == _this.web2vr.container) _this.entity.setAttribute(\"material\", \"side\", \"double\");\n\n      // only needed for experimental background\n      _this.expImageId = null;\n      _this.oldBackgroundImage = null;\n      _this.oldDomPosition = null;\n    }\n    return _this;\n  }\n  _inherits(ContainerElement, _Element);\n  return _createClass(ContainerElement, [{\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      var _this2 = this;\n      if (!this.textOnly) {\n        var backgroundColor = this.style.backgroundColor;\n        var backgroundImage = this.style.backgroundImage; // to get 1:1 as html have to use background-size: cover; or use experimental\n\n        if (backgroundImage != \"none\") {\n          // cannot use animations that require update to be called every frame. html2canvas is very performance heavy.\n          if (this.web2vr.settings.experimental) {\n            if (backgroundImage != this.oldBackgroundImage || this.oldDomPosition && !this.position.equalsDOMPosition(this.oldDomPosition)) {\n              var id = this.domElement.id;\n              var customId = false;\n              if (!id) {\n                customId = true;\n                id = \"html2canvas-\" + this.web2vr.html2canvasIDcounter++;\n                this.domElement.id = id;\n              }\n              html2canvas(this.domElement, {\n                onclone: function onclone(clone) {\n                  var style = document.createElement('style');\n                  clone.head.appendChild(style);\n                  // ignoring opacity because we use opacity from aframe\n                  style.sheet.insertRule(\"\\n                    #\".concat(id, \" {\\n                        opacity: 1;\\n                    }\"));\n                  // hide the text\n                  style.sheet.insertRule(\"\\n                    #\".concat(id, \" {\\n                        color: transparent;\\n                    }\"));\n                  // hide the children elements\n                  style.sheet.insertRule(\"\\n                    #\".concat(id, \" > * {\\n                        display:none\\n                    }\"));\n                  // vr-span has to be block so it can render properly\n                  style.sheet.insertRule(\"\\n                    #\".concat(id, \" > .vr-span {\\n                        display:block\\n                    }\"));\n                  if (customId) _this2.domElement.removeAttribute(\"id\");\n                }\n              }).then(function (canvas) {\n                if (_this2.expImageId) _this2.web2vr.aframe.assetManager.removeAsset(_this2.expImageId);\n                _this2.expImageId = _this2.web2vr.aframe.assetManager.getAsset(canvas.toDataURL(), \"img\");\n                _this2.entity.setAttribute(\"material\", \"src: #\" + _this2.expImageId);\n              });\n              this.oldBackgroundImage = backgroundImage;\n            }\n          } else if (_utils_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isUrl(backgroundImage)) {\n            // remove url(\"\")\n            backgroundImage = backgroundImage.substring(backgroundImage.lastIndexOf('(\\\"') + 2, backgroundImage.lastIndexOf('\\\")'));\n            this.entity.setAttribute(\"material\", \"src: #\" + this.web2vr.aframe.assetManager.getAsset(backgroundImage, \"img\"));\n            // transparent images support\n            this.entity.setAttribute(\"material\", \"transparent\", true);\n          }\n        } else {\n          // if there is no backgroundColor dont renders\n          if (backgroundColor == \"rgba(0, 0, 0, 0)\") {\n            this.entity.setAttribute(\"material\", \"visible\", false);\n          } else {\n            this.entity.setAttribute(\"material\", \"visible\", true);\n            this.entity.setAttribute(\"color\", backgroundColor);\n            this.updateOpacity();\n          }\n        }\n        this.oldDomPosition = this.position.domPosition;\n      }\n    }\n  }, {\n    key: \"updateOpacity\",\n    value: function updateOpacity() {\n      var alpha = parseFloat(this.style.backgroundColor.split(',')[3]);\n      // calculate final alpha channel result\n      if (alpha) {\n        var a = alpha;\n        var b = this.style.opacity;\n        if (a < b) {\n          b = alpha;\n          a = this.style.opacity;\n        }\n        this.entity.setAttribute(\"opacity\", a - (a - b));\n      }\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/element.js\":\n/*!*********************************!*\\\n  !*** ./src/elements/element.js ***!\n  \\*********************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_105208__) => {\n\n\"use strict\";\n__nested_webpack_require_105208__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_105208__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Element)\n/* harmony export */ });\n/* harmony import */ var _utils_position__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_105208__(/*! ../utils/position */ \"./src/utils/position.js\");\n/* harmony import */ var _utils_mouseEventHandler__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_105208__(/*! ../utils/mouseEventHandler */ \"./src/utils/mouseEventHandler.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar Element = /*#__PURE__*/function () {\n  function Element(web2vr, domElement, layer) {\n    _classCallCheck(this, Element);\n    this.web2vr = web2vr;\n    this.domElement = domElement;\n    this.layer = layer;\n    this.domElement.element = this; // so we can do domeElement.parentNode.element\n    this.childElements = new Set();\n    this.entity = null; // aframe entity this null becasue Element class is abstract\n    this.visible = true;\n    if (this.domElement.classList.contains(\"vr-span\")) this.paddingToMargin();\n    this.position = new _utils_position__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.domElement.getBoundingClientRect(), layer * this.web2vr.settings.layerStep, web2vr.settings.scale);\n    this.style = window.getComputedStyle(this.domElement);\n    this.parentTransform = \"none\";\n    this.needsStartingTransformSize = true;\n    this.initComplete = false;\n  }\n\n  // call after entity is created in inheriting class\n  return _createClass(Element, [{\n    key: \"initEventHandlers\",\n    value: function initEventHandlers() {\n      var _this = this;\n      this.initHover();\n\n      // setting up MouseEventHandler\n      this.mouseEventHandle = new _utils_mouseEventHandler__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this);\n\n      // dynamic listeners\n      this.domElement.addEventListener(\"eventListenerAdded\", function () {\n        return _this.mouseEventHandle.resync();\n      });\n      this.domElement.addEventListener(\"eventListenerRemoved\", function () {\n        return _this.mouseEventHandle.resync();\n      });\n    }\n\n    // add animation compoment if dom element has animation\n  }, {\n    key: \"checkAnimation\",\n    value: function checkAnimation() {\n      if (parseFloat(this.style.animationDuration) || parseFloat(this.style.transitionDuration)) this.entity.setAttribute(\"vr-animate\", \"\");else this.entity.removeAttribute(\"vr-animate\");\n    }\n  }, {\n    key: \"initHover\",\n    value: function initHover() {\n      var _this2 = this;\n      // find what has hover\n      var tag = null;\n      if (this.web2vr.hoverSelectors.has(this.domElement.tagName.toLowerCase())) tag = this.domElement.tagName.toLowerCase();\n      var classes = [];\n      var _iterator = _createForOfIteratorHelper(this.domElement.classList),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var cls = _step.value;\n          if (this.web2vr.hoverSelectors.has(\".\" + cls)) classes.push(cls);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var id = null;\n      if (this.web2vr.hoverSelectors.has(\"#\" + this.domElement.id)) id = this.domElement.id;\n\n      // add mouseenter and mouseleave if element has hover.\n      if (tag || classes.length > 0 || id) {\n        this.entity.addEventListener(\"mouseenter\", function () {\n          if (tag) _this2.domElement.classList.add(tag + \"hover\");\n          if (classes.length > 0) {\n            var _iterator2 = _createForOfIteratorHelper(classes),\n              _step2;\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var cls = _step2.value;\n                _this2.domElement.classList.add(cls + \"hover\");\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n          }\n          if (id) _this2.domElement.classList.add(id + \"hover\");\n          // this is only for hover transform. Update all elements when transform gets added\n          if (_this2.style.transform != \"none\") {\n            _this2.web2vr.update();\n            _this2.hoverTransform = true;\n          }\n        });\n        this.entity.addEventListener(\"mouseleave\", function () {\n          if (tag) _this2.domElement.classList.remove(tag + \"hover\");\n          if (classes.length > 0) {\n            var _iterator3 = _createForOfIteratorHelper(classes),\n              _step3;\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                var cls = _step3.value;\n                _this2.domElement.classList.remove(cls + \"hover\");\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n          }\n          if (id) _this2.domElement.classList.remove(id + \"hover\");\n          if (_this2.hoverTransform) {\n            _this2.position.depth = _this2.position.startDepth;\n            var _iterator4 = _createForOfIteratorHelper(_this2.domElement.querySelectorAll('*')),\n              _step4;\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                var element = _step4.value;\n                if (element.element) {\n                  element.element.parentTransform = \"none\";\n                  element.element.position.depth = element.element.position.startDepth;\n                }\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n          }\n        });\n      }\n    }\n\n    // getBoundingClientRect works great with margin while with padding it has problems with paddingRight that needs to be manualy calculated and set\n    // because dealing with paddingRight is problematic we can make the padding be margin for the textNode(vr-span)\n  }, {\n    key: \"paddingToMargin\",\n    value: function paddingToMargin() {\n      // only if element has text\n      if (this.domElement.textContent.trim()) {\n        //const left = this.domElement.parentElement.element.style.paddingLeft;\n        var right = this.domElement.parentElement.element.style.paddingRight;\n        //const top = this.domElement.parentElement.element.style.paddingTop;\n        //const bottom = this.domElement.parentElement.element.style.paddingBottom;\n\n        /*if (parseFloat(left)) {\n            this.domElement.style.marginLeft = left;\n            this.domElement.parentElement.style.paddingLeft = \"0px\";\n        }*/\n        if (parseFloat(right)) {\n          this.domElement.style.marginRight = right;\n          this.domElement.parentElement.style.paddingRight = \"0px\";\n        }\n        /*if (parseFloat(top)) {\n            this.domElement.style.marginTop = top;\n            //this.domElement.parentElement.style.paddingTop = \"0px\";\n        }\n        if (parseFloat(bottom)) {\n            this.domElement.style.marginBottom = bottom;\n            //this.domElement.parentElement.style.paddingBottom = \"0px\";\n        }*/\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      // reference of the element for aframe compoment\n      this.entity.element = this;\n\n      // dont need light to affect material\n      this.entity.setAttribute(\"material\", \"shader\", \"flat\");\n\n      //init sizes at start\n      this.entity.setAttribute(\"width\", this.position.width);\n      this.entity.setAttribute(\"height\", this.position.height);\n      this.initEventHandlers();\n      this.setupClipping();\n      this.finalizeInit();\n    }\n  }, {\n    key: \"finalizeInit\",\n    value: function finalizeInit() {\n      this.initComplete = true;\n      this.domElement.dispatchEvent(new Event('initComplete'));\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _this3 = this,\n        _this$web2vr$scroll,\n        _this$web2vr$scroll2;\n      if (!this.initComplete) {\n        // Try again later.\n        this.domElement.addEventListener(new Event('initComplete'), function () {\n          return _this3.update();\n        });\n        return;\n      }\n      var clientRect = this.domElement.getBoundingClientRect();\n\n      // its not on the screen\n      if (clientRect.width == 0 || clientRect.height == 0) {\n        this.entity.object3D.visible = false;\n        if (!this.domElement.classList.contains(\"vr-span\")) this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n        this.position.aframePosition.y = 1000; // for some reason raycast still hits so have to move position\n        return;\n      }\n\n      // for future move this in TextElement class\n      if (this.domElement.classList.contains(\"vr-span\")) {\n        // dont need interaction with the text when we always have the background as interaction\n        this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n        // so all inline text width is good, dont do this if its text inside button\n        if (this.domElement.parentElement.tagName != \"BUTTON\") {\n          clientRect.width += 8;\n          clientRect.x -= 2;\n        }\n      }\n\n      // set fixed container height if its using scrollBody, best is to move this code outside update loop for future\n      if ((_this$web2vr$scroll = this.web2vr.scroll) !== null && _this$web2vr$scroll !== void 0 && _this$web2vr$scroll.hasScroll && this.domElement == this.web2vr.container && (_this$web2vr$scroll2 = this.web2vr.scroll) !== null && _this$web2vr$scroll2 !== void 0 && _this$web2vr$scroll2.scrollBody) clientRect.height = this.web2vr.settings.scrollWindowHeight;\n      this.position.updatePosition(clientRect);\n      this.checkVisible();\n      if (this.visible) {\n        this.style = window.getComputedStyle(this.domElement);\n\n        // its on visible screen but its hidden by style\n        if (this.style.visibility === \"hidden\" || this.style.display === \"none\") {\n          this.entity.object3D.visible = false;\n          if (!this.domElement.classList.contains(\"vr-span\")) this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n          this.position.aframePosition.y = 1000; // for some reason raycast still hits so have to move position\n          // update border so we can remove it because element is hidden\n          this.updateBorder();\n          return;\n        } else {\n          this.entity.object3D.visible = true;\n          // for input text because it has custom event for entity it cannot detect with this.mouseEventHandle.listeningForMouseEvents\n          // we have to check tagName and type to see if its input text, for future make this work with mouseEventHandle\n          // also add interactiveTag if its main container\n          if (!this.domElement.classList.contains(\"vr-span\") && (this.mouseEventHandle.listeningForMouseEvents || this.domElement.tagName == \"INPUT\" && this.domElement.type == \"text\") || this.domElement == this.web2vr.container) this.entity.classList.add(this.web2vr.settings.interactiveTag);\n        }\n\n        // if there is transform then width and height will be set with the transform matrix scale\n        // using needsStartingTransformSize so width and height are never 0 when doing transform scale\n        if (this.style.transform == \"none\" || this.needsStartingTransformSize) {\n          this.entity.setAttribute(\"width\", this.position.width);\n          this.entity.setAttribute(\"height\", this.position.height);\n        }\n        this.checkAnimation();\n        var opacity = this.style.opacity;\n        this.entity.setAttribute(\"opacity\", opacity);\n        this.specificUpdate();\n        this.updateTransform();\n        this.updateClipping();\n      }\n      this.updateBorder();\n    }\n  }, {\n    key: \"updateTransform\",\n    value: function updateTransform() {\n      var transform = this.style.transform;\n      if (transform == \"none\") transform = this.parentTransform;else {\n        // give transform to all descendents\n        var _iterator5 = _createForOfIteratorHelper(this.domElement.querySelectorAll('*')),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var element = _step5.value;\n            if (element.element) element.element.parentTransform = transform;\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n      if (transform != \"none\") {\n        this.needsStartingTransformSize = false;\n        var matrixType = transform.split('(')[0];\n        // get matrix values in float\n        var values = transform.split('(')[1];\n        values = values.split(')')[0];\n        values = values.split(',');\n        values = values.map(function (v) {\n          return parseFloat(v);\n        });\n        var matrix = null;\n        if (matrixType == \"matrix\") {\n          // transform to matrix4x4 and invert skewX to match three.js\n          matrix = new THREE.Matrix4().fromArray([values[0], values[1], 0, 0, -values[2], values[3], 0, 0, 0, 0, 1, 0, values[4], values[5], 0, 1]);\n        } else if (matrixType == \"matrix3d\") {\n          // invert skewX and skewZ? to match three.js\n          values[4] *= -1;\n          values[9] *= -1;\n          matrix = new THREE.Matrix4().fromArray(values);\n        }\n        var position = new THREE.Vector3();\n        var quaternion = new THREE.Quaternion();\n        var scale = new THREE.Vector3();\n        matrix.decompose(position, quaternion, scale);\n\n        // position\n        this.position.domPosition.x += position.x;\n        this.position.domPosition.y += position.y;\n        if (position.z != 0) this.position.depth = position.z * this.position.scalingFactor + this.position.startDepth;\n\n        // rotation\n        this.entity.object3D.rotation.setFromRotationMatrix(matrix);\n\n        // calcualte scale and set it to entity\n        if (this.parentTransform == \"none\") {\n          var elements = matrix.elements;\n          var scaleX = Math.sqrt(elements[0] * elements[0] + elements[1] * elements[1]);\n          var scaleY = Math.sqrt(elements[5] * elements[5] + elements[4] * elements[4]);\n          // for radio scale is 2 times smaller because its circle, for some rason checkbox scale needs to be in half else its too big\n          if (this.domElement.tagName == \"INPUT\" && (this.domElement.type == \"radio\" || this.domElement.type == \"checkbox\")) this.entity.object3D.scale.set(scaleX / 2, scaleY / 2, 1);else this.entity.object3D.scale.set(scaleX, scaleY, 1);\n        }\n      }\n      this.entity.object3D.position.set(this.position.x, this.position.y, this.position.z);\n    }\n\n    // abstract method\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {}\n  }, {\n    key: \"updateBorder\",\n    value: function updateBorder() {\n      if (this.web2vr.settings.border) {\n        // using borderTopWidth and borderTopColor because borderWidth and borderColor doesnt work in firefox\n        var borderWidth = parseFloat(this.style.borderTopWidth);\n        if ((borderWidth || this.borderWidth) && this.entity.object3D.visible) {\n          this.entity.setAttribute(\"vr-border\", \"width:\".concat(borderWidth, \"; color:\").concat(this.style.borderTopColor, \";\"));\n          this.entity.components[\"vr-border\"].updateBorder();\n        } else if (this.entity.components[\"vr-border\"]) this.entity.removeAttribute(\"vr-border\");\n      }\n    }\n  }, {\n    key: \"rotateNormal\",\n    value: function rotateNormal(normal) {\n      var normalMatrix = new THREE.Matrix3().getNormalMatrix(this.web2vr.aframe.container.object3D.matrixWorld);\n      var output = normal.clone().applyMatrix3(normalMatrix).normalize();\n      return output;\n    }\n  }, {\n    key: \"getClippingContext\",\n    value: function getClippingContext() {\n      var output = null;\n      if (this.domElement.parentNode && this.domElement.parentNode.element && this.domElement.parentNode.element.clippingContext) output = this.domElement.parentNode.element.clippingContext;else {\n        var _this$web2vr$scroll3;\n        if (this.style.overflow && this.style.overflow == \"hidden\" || (_this$web2vr$scroll3 = this.web2vr.scroll) !== null && _this$web2vr$scroll3 !== void 0 && _this$web2vr$scroll3.hasScroll && this.domElement == this.web2vr.container || this.web2vr.settings.forceClipping && this.domElement == this.web2vr.container) {\n          // ignore if its svg\n          if (this.domElement.tagName != \"svg\") {\n            var clippingContext = {};\n            clippingContext.authority = this;\n            clippingContext.bottom = new THREE.Plane(this.rotateNormal(new THREE.Vector3(0, 1, 0))); // normal up\n            clippingContext.top = new THREE.Plane(this.rotateNormal(new THREE.Vector3(0, -1, 0))); // normal down\n            clippingContext.left = new THREE.Plane(this.rotateNormal(new THREE.Vector3(1, 0, 0))); // normal right\n            clippingContext.right = new THREE.Plane(this.rotateNormal(new THREE.Vector3(-1, 0, 0))); // normal left\n\n            clippingContext.planes = [clippingContext.bottom, clippingContext.top, clippingContext.left, clippingContext.right];\n            output = clippingContext;\n          }\n        }\n      }\n      return output;\n    }\n  }, {\n    key: \"setupClipping\",\n    value: function setupClipping() {\n      var _this4 = this;\n      var clippingContext = this.getClippingContext();\n      if (clippingContext) {\n        this.clippingContext = clippingContext;\n\n        // we are sure the renderer is loaded\n        var object3D = this.entity.object3D;\n        if (!object3D || !object3D.children || !object3D.children.length > 0 || !object3D.children[0].material) {\n          return;\n        }\n        var material = object3D.children[0].material;\n        material.clippingPlanes = clippingContext.planes;\n\n        //this.updateClipping();\n        setTimeout(function () {\n          _this4.updateClipping();\n        }, 200); // if it doesnt work use this\n        // return new Promise();\n      }\n    }\n  }, {\n    key: \"updateClipping\",\n    value: function updateClipping() {\n      // only element with authority can change the clipping planes position\n      if (!this.clippingContext || this.clippingContext.authority != this) return;\n      var position = this.entity.object3D.position;\n      var bottomLocal = position.clone().add(new THREE.Vector3(0, -1, 0).multiplyScalar(this.position.height / 2));\n      var topLocal = position.clone().add(new THREE.Vector3(0, 1, 0).multiplyScalar(this.position.height / 2));\n      var leftLocal = position.clone().add(new THREE.Vector3(-1, 0, 0).multiplyScalar(this.position.width / 2));\n      var rightLocal = position.clone().add(new THREE.Vector3(1, 0, 0).multiplyScalar(this.position.width / 2));\n      var bottomGlobal = this.web2vr.aframe.container.object3D.localToWorld(bottomLocal.clone());\n      var topGlobal = this.web2vr.aframe.container.object3D.localToWorld(topLocal.clone());\n      var leftGlobal = this.web2vr.aframe.container.object3D.localToWorld(leftLocal.clone());\n      var rightGlobal = this.web2vr.aframe.container.object3D.localToWorld(rightLocal.clone());\n      this.clippingContext.bottom.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(0, 1, 0)), bottomGlobal).normalize();\n      this.clippingContext.top.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(0, -1, 0)), topGlobal).normalize();\n      this.clippingContext.left.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(1, 0, 0)), leftGlobal).normalize();\n      this.clippingContext.right.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(-1, 0, 0)), rightGlobal).normalize();\n      if (this.web2vr.settings.showClipping) {\n        if (!this.clippingPlaneHelpers) {\n          this.clippingPlaneHelpers = [];\n          var _iterator6 = _createForOfIteratorHelper(this.clippingContext.planes),\n            _step6;\n          try {\n            for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n              var plane = _step6.value;\n              var material = new THREE.MeshBasicMaterial({\n                color: 0x00e33d,\n                side: THREE.DoubleSide\n              });\n              var geometry = new THREE.PlaneGeometry(200 * this.position.scalingFactor, 200 * this.position.scalingFactor); // no need same width and height as container because this is only for debugging\n              var mesh = new THREE.Mesh(geometry, material);\n              mesh.debugPlane = plane;\n              this.clippingPlaneHelpers.push(mesh);\n              var axisHelper = new THREE.AxesHelper(5);\n              mesh.add(axisHelper);\n            }\n          } catch (err) {\n            _iterator6.e(err);\n          } finally {\n            _iterator6.f();\n          }\n          var _iterator7 = _createForOfIteratorHelper(this.clippingPlaneHelpers),\n            _step7;\n          try {\n            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n              var helper = _step7.value;\n              this.web2vr.aframe.scene.object3D.add(helper);\n            }\n          } catch (err) {\n            _iterator7.e(err);\n          } finally {\n            _iterator7.f();\n          }\n        }\n        var _iterator8 = _createForOfIteratorHelper(this.clippingPlaneHelpers),\n          _step8;\n        try {\n          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n            var _mesh = _step8.value;\n            _mesh.visible = true;\n            var worldPos = new THREE.Vector3();\n            this.entity.object3D.getWorldPosition(worldPos);\n            var point = new THREE.Vector3();\n            _mesh.debugPlane.projectPoint(worldPos, point);\n            _mesh.position.set(point.x, point.y, point.z);\n\n            // clipping plane normals are inverted, we multiply by -1\n            var focalPoint = point.clone().add(_mesh.debugPlane.normal.clone().multiplyScalar(-1));\n            _mesh.lookAt(focalPoint);\n          }\n        } catch (err) {\n          _iterator8.e(err);\n        } finally {\n          _iterator8.f();\n        }\n      } else {\n        if (this.clippingPlaneHelpers) {\n          var _iterator9 = _createForOfIteratorHelper(this.clippingPlaneHelpers),\n            _step9;\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var _mesh2 = _step9.value;\n              _mesh2.visible = false;\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"checkVisible\",\n    value: function checkVisible() {\n      if (this.clippingContext) {\n        var container = this.clippingContext.authority;\n        if (this.position.bottom.y > container.position.top.y || this.position.top.y < container.position.bottom.y) {\n          this.visible = false;\n          this.entity.object3D.visible = false;\n          // remove interactive tag\n          if (!this.domElement.classList.contains(\"vr-span\")) this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n        } else {\n          this.visible = true;\n          this.entity.object3D.visible = true;\n          // interactive tag so we can do raycasting if it has mouse events or its container background\n          if (!this.domElement.classList.contains(\"vr-span\") && this.mouseEventHandle.listeningForMouseEvents || this.domElement == this.web2vr.container) this.entity.classList.add(this.web2vr.settings.interactiveTag);\n        }\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/elements/imageElement.js\":\n/*!**************************************!*\\\n  !*** ./src/elements/imageElement.js ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_131928__) => {\n\n\"use strict\";\n__nested_webpack_require_131928__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_131928__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ImageElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_131928__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar ImageElement = /*#__PURE__*/function (_Element) {\n  function ImageElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, ImageElement);\n    _this = _callSuper(this, ImageElement, [web2vr, domElement, layer]);\n    _this.currentSrc = null;\n    _this.changed = false;\n    _this.entity = document.createElement(\"a-image\");\n    _this.entity.setAttribute(\"material\", \"side\", \"front\");\n    // know when image is loaded\n    _this.loaded = false;\n    _this.domElement.addEventListener(\"load\", function () {\n      _this.loaded = true;\n      // if image changed update all after image loaded\n      if (_this.changed) {\n        _this.changed = false;\n        _this.web2vr.update();\n      }\n    });\n    return _this;\n  }\n  _inherits(ImageElement, _Element);\n  return _createClass(ImageElement, [{\n    key: \"updateImage\",\n    value: function updateImage(src) {\n      var assetID = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\n      this.entity.setAttribute(\"id\", \"IMAGE_\" + assetID);\n      var isGif = /\\.(gif)$/i;\n      if (isGif.test(src)) {\n        this.entity.setAttribute(\"material\", \"shader\", \"gif\");\n        this.entity.setAttribute(\"material\", \"src\", \"#\" + assetID);\n      } else {\n        this.entity.setAttribute(\"material\", \"shader\", \"flat\");\n        this.entity.setAttribute(\"src\", \"#\" + assetID);\n      }\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      var src = this.domElement.getAttribute(\"src\");\n      if (src != this.currentSrc) {\n        if (this.currentSrc) {\n          this.loaded = false;\n          this.changed = true;\n        }\n        this.currentSrc = src;\n        this.updateImage(this.currentSrc);\n      }\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]); // TODO: No need to save image copy in assets you can directly read it from the orignal\n\n\n/***/ }),\n\n/***/ \"./src/elements/inputElement.js\":\n/*!**************************************!*\\\n  !*** ./src/elements/inputElement.js ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_137682__) => {\n\n\"use strict\";\n__nested_webpack_require_137682__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_137682__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InputElement)\n/* harmony export */ });\n/* harmony import */ var _textElement__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_137682__(/*! ./textElement */ \"./src/elements/textElement.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar InputElement = /*#__PURE__*/function (_TextElement) {\n  function InputElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, InputElement);\n    _this = _callSuper(this, InputElement, [web2vr, domElement, layer]);\n    _this.borderColor = new THREE.Color(0x000000);\n    _this.borderWidth = 1;\n    _this.active = false;\n\n    // update when there is change of value\n    _this.domElement.addEventListener(\"input\", function () {\n      return _this.update();\n    });\n    // when clicked make it active input for the keyboard and position the keyboard relative to camera\n    _this.entity.addEventListener(\"click\", function () {\n      var camera = _this.web2vr.aframe.scene.camera.parent;\n      var keyboard = _this.web2vr.aframe.keyboard.object3D;\n      var cameraWorldPos = new THREE.Vector3();\n      cameraWorldPos.setFromMatrixPosition(camera.matrixWorld);\n      keyboard.position.copy(cameraWorldPos);\n      keyboard.rotation.copy(camera.rotation);\n      keyboard.rotation.z = 0;\n      keyboard.rotation.x = THREE.MathUtils.degToRad(-30);\n      keyboard.translateX(-0.24);\n      keyboard.translateY(-0.1);\n      keyboard.translateZ(-0.6);\n      keyboard.visible = true;\n      if (_this.web2vr.aframe.keyboard.activeInput) {\n        _this.web2vr.aframe.keyboard.activeInput.element.active = false;\n        // update web2vr where activeInput is located\n        _this.web2vr.aframe.keyboard.activeInput.element.web2vr.update();\n      }\n      _this.active = true;\n      _this.web2vr.aframe.keyboard.activeInput = _this.domElement;\n      _this.web2vr.update();\n    });\n    return _this;\n  }\n  _inherits(InputElement, _TextElement);\n  return _createClass(InputElement, [{\n    key: \"updateText\",\n    value: function updateText() {\n      var value = this.domElement.value;\n      if (value) this.textValue = value;else this.textValue = this.domElement.placeholder;\n    }\n  }, {\n    key: \"updateTextColor\",\n    value: function updateTextColor() {\n      var value = this.domElement.value;\n      if (value) _get(_getPrototypeOf(InputElement.prototype), \"updateTextColor\", this).call(this);else this.entity.setAttribute(\"text\", \"color\", \"#999\");\n      if (this.active) this.entity.setAttribute(\"color\", \"#ffffcc\");\n    }\n  }]);\n}(_textElement__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/radioElement.js\":\n/*!**************************************!*\\\n  !*** ./src/elements/radioElement.js ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_144513__) => {\n\n\"use strict\";\n__nested_webpack_require_144513__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_144513__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RadioElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_144513__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar RadioElement = /*#__PURE__*/function (_Element) {\n  function RadioElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, RadioElement);\n    _this = _callSuper(this, RadioElement, [web2vr, domElement, layer]);\n    _this.borderColor = new THREE.Color(0x000000);\n    _this.borderWidth = 1;\n    _this.entity = document.createElement(\"a-circle\");\n    _this.domElement.addEventListener(\"click\", function () {\n      _this.web2vr.update();\n    }.bind(_this));\n    return _this;\n  }\n  _inherits(RadioElement, _Element);\n  return _createClass(RadioElement, [{\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      this.entity.setAttribute(\"radius\", this.position.width / 2);\n      if (this.domElement.checked) this.entity.setAttribute(\"color\", \"#0075FF\");else this.entity.setAttribute(\"color\", \"#FFFFFF\");\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/svgElement.js\":\n/*!************************************!*\\\n  !*** ./src/elements/svgElement.js ***!\n  \\************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_149319__) => {\n\n\"use strict\";\n__nested_webpack_require_149319__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_149319__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SvgElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_149319__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar SvgElement = /*#__PURE__*/function (_Element) {\n  function SvgElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, SvgElement);\n    _this = _callSuper(this, SvgElement, [web2vr, domElement, layer]);\n    _this.imageId = null;\n    _this.entity = document.createElement(\"a-image\");\n    return _this;\n  }\n  _inherits(SvgElement, _Element);\n  return _createClass(SvgElement, [{\n    key: \"svgToImage\",\n    value: function svgToImage() {\n      var _this2 = this;\n      var svgString = new XMLSerializer().serializeToString(this.domElement);\n      var canvas = document.createElement(\"canvas\");\n      var ctx = canvas.getContext(\"2d\");\n      canvas.width = this.position.domPosition.width * 2;\n      canvas.height = this.position.domPosition.height * 2;\n      var DOMURL = self.URL || self.webkitURL || self;\n      var img = new Image();\n      var svg = new Blob([svgString], {\n        type: \"image/svg+xml;charset=utf-8\"\n      });\n      var url = DOMURL.createObjectURL(svg);\n      img.onload = function () {\n        if (_this2.domElement.style.width) ctx.drawImage(img, 0, 0, canvas.width * 2, canvas.height * 2);else ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n        DOMURL.revokeObjectURL(url);\n        _this2.updateImage(canvas.toDataURL());\n        canvas.remove();\n      };\n      img.src = url;\n    }\n  }, {\n    key: \"updateImage\",\n    value: function updateImage(src) {\n      var assetId = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\n\n      // remove old image if there is new image\n      if (this.imageId && this.imageId != assetId) this.web2vr.aframe.assetManager.removeAsset(this.imageId);\n      this.entity.setAttribute(\"id\", \"IMAGE_\" + assetId);\n      this.entity.setAttribute(\"src\", \"#\" + assetId);\n      this.imageId = assetId;\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      this.svgToImage();\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/textElement.js\":\n/*!*************************************!*\\\n  !*** ./src/elements/textElement.js ***!\n  \\*************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_155177__) => {\n\n\"use strict\";\n__nested_webpack_require_155177__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_155177__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ TextElement)\n/* harmony export */ });\n/* harmony import */ var _containerElement__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_155177__(/*! ./containerElement */ \"./src/elements/containerElement.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar TextElement = /*#__PURE__*/function (_ContainerElement) {\n  function TextElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, TextElement);\n    _this = _callSuper(this, TextElement, [web2vr, domElement, layer, false]);\n    _this.entity.setAttribute(\"text\", \"value\", \"\");\n    _this.textValue = null;\n    return _this;\n  }\n  _inherits(TextElement, _ContainerElement);\n  return _createClass(TextElement, [{\n    key: \"setupClipping\",\n    value: function setupClipping() {\n      var clippingContext = this.getClippingContext();\n      if (clippingContext) {\n        this.clippingContext = clippingContext;\n        var material = this.entity.components.text.material;\n\n        // text component uses custom shader so default three.js clipping doesnt work, needed to inject clipping shader code inside the custom shader code(RawShaderMaterial)\n        // help from https://stackoverflow.com/questions/42532545/add-clipping-to-three-shadermaterial\n        // 1.1.0 version changes: Because Aframe 1.1.0 changes text material shader to use webgl 2(glsl 3) some of the three.js ShaderChunk had to be converted to glsl 3.\n        var fragmentShader = \"#version 300 es\\n            precision highp float;\\n            uniform bool negate;\\n            uniform float alphaTest;\\n            uniform float opacity;\\n            uniform sampler2D map;\\n            uniform vec3 color;\\n            in vec2 vUV;\\n            out vec4 fragColor;\\n            float median(float r, float g, float b) {\\n                return max(min(r, g), min(max(r, g), b));\\n            }\\n            #define BIG_ENOUGH 0.001\\n            #define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\\n            \\n            // clipping_planes_pars_fragment converted to glsl 3\\n            #if NUM_CLIPPING_PLANES > 0\\n                in vec3 vClipPosition;\\n                uniform vec4 clippingPlanes[NUM_CLIPPING_PLANES];\\n            #endif\\n            \\n            void main() {\\n                // compatible with glsl 3\\n                #include <clipping_planes_fragment>\\n\\n                vec3 sampleColor = texture(map, vUV).rgb;\\n                if (negate) { sampleColor = 1.0 - sampleColor; }\\n                float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;\\n                float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);\\n                float dscale = 0.353505;\\n                vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));\\n                float isBigEnough = max(abs(duv.x), abs(duv.y));\\n                // Do modified alpha test.\\n                if (isBigEnough > BIG_ENOUGH) {\\n                    float ratio = BIG_ENOUGH / isBigEnough;\\n                    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);\\n                }\\n                // Do modified alpha test.\\n                if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\\n                fragColor = vec4(color.xyz, alpha * opacity);\\n            }\";\n        var vertexShader = \"#version 300 es\\n            in vec2 uv;\\n            in vec3 position;\\n            uniform mat4 projectionMatrix;\\n            uniform mat4 modelViewMatrix;\\n            out vec2 vUV;\\n\\n            // clipping_planes_pars_vertex converted to glsl 3\\n            #if NUM_CLIPPING_PLANES > 0\\n\\t            out vec3 vClipPosition;\\n            #endif\\n\\n            void main(void) {\\n                // compatible with glsl 3\\n                #include <begin_vertex>\\n\\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n                vUV = uv;\\n\\n                // compatible with glsl 3\\n                #include <project_vertex>\\n                #include <clipping_planes_vertex>\\n\\n            }\";\n        material.fragmentShader = fragmentShader;\n        material.vertexShader = vertexShader;\n        material.clipping = true;\n        material.clippingPlanes = clippingContext.planes;\n        this.updateClipping();\n      }\n    }\n  }, {\n    key: \"updateTextAlignment\",\n    value: function updateTextAlignment() {\n      // align css text-align to text component\n      var align = this.style.textAlign;\n      if (![\"left\", \"right\", \"center\"].includes(align)) align = \"left\";\n      this.entity.setAttribute(\"text\", \"align\", align);\n\n      // set text lineHeight if it has custom css lineHeight\n      var text = this.entity.components.text;\n      if (this.style.lineHeight != \"normal\" && typeof text.currentFont != \"undefined\") {\n        this.entity.setAttribute(\"text\", \"lineHeight\", text.currentFont.common.lineHeight + parseFloat(this.style.lineHeight));\n      }\n    }\n  }, {\n    key: \"updateTextSize\",\n    value: function updateTextSize() {\n      var actualFontSize = parseFloat(this.style.fontSize);\n      var width = this.position.width;\n      var widthInPixels = width / this.position.scalingFactor;\n      var wrapPixels = widthInPixels * 42 / actualFontSize;\n      wrapPixels *= 1.107; //1.10706774183070233\n      this.entity.setAttribute(\"text\", \"wrapPixels\", wrapPixels);\n      this.entity.setAttribute(\"text\", \"width\", width);\n    }\n  }, {\n    key: \"updateTextColor\",\n    value: function updateTextColor() {\n      // opacity from parent because it doesnt pass it to children\n      var opacity = this.domElement.parentElement.element.style.opacity;\n      this.entity.setAttribute(\"text\", \"opacity\", opacity);\n      var textColor = this.style.color;\n      this.entity.setAttribute(\"text\", \"color\", textColor);\n    }\n  }, {\n    key: \"updateText\",\n    value: function updateText() {\n      // remove new lines and whitespaces\n      this.textValue = this.domElement.textContent.replace(/\\s{2,}/g, ' ');\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      _get(_getPrototypeOf(TextElement.prototype), \"specificUpdate\", this).call(this);\n      this.updateTextSize();\n      this.updateTextAlignment();\n      this.updateText();\n      this.entity.setAttribute(\"text\", \"value\", this.textValue);\n      this.updateTextColor();\n    }\n  }]);\n}(_containerElement__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/videoElement.js\":\n/*!**************************************!*\\\n  !*** ./src/elements/videoElement.js ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_165841__) => {\n\n\"use strict\";\n__nested_webpack_require_165841__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_165841__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ VideoElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_165841__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar VideoElement = /*#__PURE__*/function (_Element) {\n  function VideoElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, VideoElement);\n    _this = _callSuper(this, VideoElement, [web2vr, domElement, layer]);\n    // normal video\n    _this.entity = document.createElement(\"a-video\");\n    // 360 video\n    _this.video360 = document.createElement(\"a-videosphere\");\n    _this.web2vr.aframe.scene.appendChild(_this.video360);\n    _this.createClickEvent();\n    _this.domElement.addEventListener(\"play\", function () {\n      if (_this.domElement.hasAttribute(\"vr\")) _this.video360.components.material.material.map.image.play();\n    });\n    _this.domElement.addEventListener(\"pause\", function () {\n      if (_this.domElement.hasAttribute(\"vr\")) _this.video360.components.material.material.map.image.pause();\n    });\n    return _this;\n  }\n  _inherits(VideoElement, _Element);\n  return _createClass(VideoElement, [{\n    key: \"createClickEvent\",\n    value: function createClickEvent() {\n      var _this2 = this;\n      // for normal video\n      this.domElement.addEventListener(\"click\", function () {\n        _this2.domElement.paused ? _this2.domElement.play() : _this2.domElement.pause();\n      });\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      var src = this.domElement.currentSrc;\n      var id = this.domElement.id;\n\n      // if there is no video id generate new id\n      if (!id) {\n        id = this.web2vr.aframe.assetManager.updateCurrentAssetIdReturn();\n        this.domElement.id = id;\n      }\n      if (this.domElement.hasAttribute(\"vr\")) {\n        this.video360.object3D.visible = true;\n        this.video360.classList.add(this.web2vr.settings.interactiveTag);\n        this.entity.object3D.visible = false;\n        this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n        this.video360.setAttribute(\"src\", \"#\" + id);\n        // set video360 rotation\n        var rotation = this.domElement.getAttribute(\"vr\");\n        if (rotation) this.video360.object3D.rotation.y = THREE.MathUtils.degToRad(rotation);else this.video360.object3D.rotation.y = 0;\n      } else {\n        this.video360.object3D.visible = false;\n        this.video360.classList.remove(this.web2vr.settings.interactiveTag);\n        this.entity.object3D.visible = true;\n        this.entity.classList.add(this.web2vr.settings.interactiveTag);\n        this.entity.setAttribute(\"src\", \"#\" + id);\n      }\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/plugins/aframe-keyboard.min.js\":\n/*!********************************************!*\\\n  !*** ./src/plugins/aframe-keyboard.min.js ***!\n  \\********************************************/\n/***/ (() => {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n!function (e) {\n  var t = {};\n  function a(d) {\n    if (t[d]) return t[d].exports;\n    var n = t[d] = {\n      i: d,\n      l: !1,\n      exports: {}\n    };\n    return e[d].call(n.exports, n, n.exports, a), n.l = !0, n.exports;\n  }\n  a.m = e, a.c = t, a.d = function (e, t, d) {\n    a.o(e, t) || Object.defineProperty(e, t, {\n      enumerable: !0,\n      get: d\n    });\n  }, a.r = function (e) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, a.t = function (e, t) {\n    if (1 & t && (e = a(e)), 8 & t) return e;\n    if (4 & t && \"object\" == _typeof(e) && e && e.__esModule) return e;\n    var d = Object.create(null);\n    if (a.r(d), Object.defineProperty(d, \"default\", {\n      enumerable: !0,\n      value: e\n    }), 2 & t && \"string\" != typeof e) for (var n in e) a.d(d, n, function (t) {\n      return e[t];\n    }.bind(null, n));\n    return d;\n  }, a.n = function (e) {\n    var t = e && e.__esModule ? function () {\n      return e[\"default\"];\n    } : function () {\n      return e;\n    };\n    return a.d(t, \"a\", t), t;\n  }, a.o = function (e, t) {\n    return Object.prototype.hasOwnProperty.call(e, t);\n  }, a.p = \"\", a(a.s = 0);\n}([function (e, t, a) {\n  a(1), a(3);\n  var d = a(4),\n    n = {\n      mode: \"normal\"\n    };\n  n.template = new d(), e.exports = window.AFK = n;\n}, function (e, t, a) {\n  var d = a(2);\n  if (\"undefined\" == typeof AFRAME) throw new Error(\"Component attempted to register before AFRAME was available.\");\n  AFRAME.registerComponent(\"a-keyboard\", {\n    schema: {\n      audio: {\n        \"default\": !1\n      },\n      color: {\n        \"default\": \"#fff\"\n      },\n      highlightColor: {\n        \"default\": \"#1a79dc\"\n      },\n      dismissable: {\n        \"default\": !0\n      },\n      font: {\n        \"default\": \"monoid\"\n      },\n      fontSize: {\n        \"default\": \"0.39\"\n      },\n      locale: {\n        \"default\": \"en\"\n      },\n      model: {\n        \"default\": \"\"\n      },\n      baseTexture: {\n        \"default\": \"\"\n      },\n      keyTexture: {\n        \"default\": \"\"\n      },\n      verticalAlign: {\n        \"default\": \"center\"\n      }\n    },\n    init: function init() {\n      AFK.template.draw(_objectSpread(_objectSpread({}, this.data), {}, {\n        el: this.el\n      })), this.attachEventListeners();\n    },\n    attachEventListeners: function attachEventListeners() {\n      window.addEventListener(\"keydown\", this.handleKeyboardPress), this.el.addEventListener(\"click\", this.handleKeyboardVR);\n    },\n    removeEventListeners: function removeEventListeners() {\n      window.removeEventListener(\"keydown\", this.handleKeyboardPress), this.el.removeEventListener(\"click\", this.handleKeyboardVR);\n    },\n    handleKeyboardPress: function handleKeyboardPress(e) {\n      d(e);\n    },\n    handleKeyboardVR: function handleKeyboardVR(e) {\n      d(e, \"vr\");\n    },\n    remove: function remove() {\n      this.removeEventListeners();\n    }\n  });\n}, function (e, t) {\n  e.exports = function (e, t) {\n    var a;\n    var d = new Set([16, 17, 18, 20, 33, 34, 35, 36, 45, 46, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123]),\n      n = e.key && e.key.charCodeAt(0);\n    var r = e.key,\n      s = e.keyCode;\n    if (\"vr\" === t) s = parseInt(document.querySelector(\"#\".concat(e.target.id)).getAttribute(\"key-code\")), r = document.querySelector(\"#\".concat(e.target.id)).getAttribute(\"value\");else if (d.has(e.keyCode)) return;\n    switch (s) {\n      case 9:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \"\\t\"\n          }\n        }), document.dispatchEvent(a);\n        break;\n      case 8:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \"\"\n          }\n        }), document.dispatchEvent(a);\n        break;\n      case 13:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \"\\n\"\n          }\n        }), document.dispatchEvent(a);\n        break;\n      case 16:\n        AFK.template.toggleActiveMode(\"shift\");\n        break;\n      case 18:\n        AFK.template.toggleActiveMode(\"alt\");\n        break;\n      case 27:\n        this.dismissable && (a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \"\"\n          }\n        }), document.dispatchEvent(a));\n        break;\n      case 32:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \" \"\n          }\n        }), document.dispatchEvent(a);\n        break;\n      default:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: r\n          }\n        }), document.dispatchEvent(a);\n    }\n    if (\"vr\" !== t) {\n      var _t = document.querySelector(\"#a-keyboard-\".concat(n)) || document.querySelector(\"#a-keyboard-\".concat(e.keyCode));\n      _t && (_t.dispatchEvent(new Event(\"mousedown\")), setTimeout(function () {\n        _t.dispatchEvent(new Event(\"mouseleave\"));\n      }, 80));\n    }\n  };\n}, function (e, t) {\n  if (\"undefined\" == typeof AFRAME) throw new Error(\"Component attempted to register before AFRAME was available.\");\n  AFRAME.registerComponent(\"keyboard-button\", {\n    init: function init() {\n      var _this = this;\n      var e = this.el;\n      e.addEventListener(\"mousedown\", function () {\n        e.setAttribute(\"material\", \"opacity\", \"0.7\");\n      }), e.addEventListener(\"mouseup\", function () {\n        e.setAttribute(\"material\", \"opacity\", _this.isMouseEnter ? \"0.9\" : \"0\");\n      }), e.addEventListener(\"mouseenter\", function () {\n        e.setAttribute(\"material\", \"opacity\", \"0.9\"), self.isMouseEnter = !0;\n      }), e.addEventListener(\"mouseleave\", function () {\n        e.setAttribute(\"material\", \"opacity\", \"0\"), self.isMouseEnter = !1;\n      });\n    }\n  });\n}, function (e, t, a) {\n  var d = a(5);\n  e.exports = /*#__PURE__*/function () {\n    function _class() {\n      _classCallCheck(this, _class);\n      this.keyboardKeys = {}, this.activeMode = \"normal\";\n    }\n    return _createClass(_class, [{\n      key: \"draw\",\n      value: function draw(e) {\n        for (var _t2 in e) this[_t2] = e[_t2];\n        this.keyboardKeys = d(e.locale), this.drawKeyboard();\n      }\n    }, {\n      key: \"drawButton\",\n      value: function drawButton(e) {\n        var t = e.key,\n          a = t.size.split(\" \")[0],\n          d = t.size.split(\" \")[1],\n          n = document.createElement(\"a-entity\");\n        n.setAttribute(\"position\", e.position);\n        var r = document.createElement(\"a-entity\");\n        r.setAttribute(\"geometry\", \"primitive: plane; width: \".concat(a, \"; height: \").concat(d, \";\")), this.keyTexture && this.keyTexture.length > 0 ? r.setAttribute(\"material\", \"src: \".concat(this.keyTexture)) : r.setAttribute(\"material\", \"color: #4a4a4a; opacity: 0.9\");\n        var s = document.createElement(\"a-text\");\n        s.id = \"a-keyboard-\".concat(t.code), s.setAttribute(\"key-code\", t.code), s.setAttribute(\"value\", t.value), s.setAttribute(\"align\", \"center\"), s.setAttribute(\"baseline\", this.verticalAlign), s.setAttribute(\"position\", \"0 0 0.001\"), s.setAttribute(\"width\", this.fontSize), s.setAttribute(\"height\", this.fontSize), s.setAttribute(\"geometry\", \"primitive: plane; width: \".concat(a, \"; height: \").concat(d)), s.setAttribute(\"material\", \"opacity: 0.0; transparent: true; color: \".concat(this.highlightColor)), s.setAttribute(\"color\", this.color), s.setAttribute(\"font\", this.font), s.setAttribute(\"shader\", \"msdf\"), s.setAttribute(\"negate\", \"false\"), s.setAttribute(\"keyboard-button\", !0), s.setAttribute(\"class\", \"collidable\"), n.appendChild(r), n.appendChild(s), this.el.appendChild(n);\n      }\n    }, {\n      key: \"drawKeyboard\",\n      value: function drawKeyboard() {\n        for (; this.el.firstChild;) this.el.removeChild(this.el.firstChild);\n        if (this.keyboardKeys) {\n          var _e = this.keyboardKeys[this.activeMode] || this.keyboardKeys.normal,\n            _t3 = document.createElement(\"a-entity\"),\n            _a = .52,\n            _d = .04 * _e.length + .004 * (_e.length - 1) + .04;\n          _t3.setAttribute(\"position\", \"\".concat(_a / 2 - .02, \" \").concat(-_d / 2 + .02, \" -0.01\")), _t3.setAttribute(\"geometry\", \"primitive: plane; width: \".concat(_a, \"; height: \").concat(_d)), this.baseTexture && this.baseTexture.length > 0 ? _t3.setAttribute(\"material\", \"src: \".concat(this.baseTexture)) : _t3.setAttribute(\"material\", \"color: #4a4a4a; side: double; opacity: 0.7\"), this.el.appendChild(_t3);\n          var n = 0;\n          for (var _t4 = 0; _t4 < _e.length; _t4++) {\n            var _a2 = _e[_t4];\n            var _d2 = 0;\n            for (var _e2 = 0; _e2 < _a2.length; _e2++) {\n              var _t5 = _a2[_e2],\n                r = this.parseKeyObjects(_t5);\n              if (!this.dismissable && \"cancel\" === _t5.type) continue;\n              var s = r.size.split(\" \")[0],\n                l = r.size.split(\" \")[1];\n              this.drawButton({\n                key: r,\n                position: \"\".concat(_d2 + s / 2, \" \").concat(n - l / 2, \" 0\")\n              }), _d2 += parseFloat(s) + .004, _a2.length === _e2 + 1 && (n -= .044);\n            }\n          }\n        }\n      }\n    }, {\n      key: \"toggleActiveMode\",\n      value: function toggleActiveMode(e) {\n        e === this.activeMode ? (this.activeMode = \"normal\", this.drawKeyboard()) : (this.activeMode = e, this.drawKeyboard());\n      }\n    }, {\n      key: \"parseKeyObjects\",\n      value: function parseKeyObjects(e) {\n        var t = e.type,\n          a = e.value;\n        switch (t) {\n          case \"delete\":\n            return {\n              size: \"0.04 0.04 0\",\n              value: a,\n              code: \"8\"\n            };\n          case \"enter\":\n            return {\n              size: \"0.04 0.084 0\",\n              value: a,\n              code: \"13\"\n            };\n          case \"shift\":\n            return {\n              size: \"0.084 0.04 0\",\n              value: a,\n              code: \"16\"\n            };\n          case \"alt\":\n            return {\n              size: \"0.084 0.04 0\",\n              value: a,\n              code: \"18\"\n            };\n          case \"space\":\n            return {\n              size: \"\".concat(.2 + .016, \" 0.04 0\"),\n              value: a,\n              code: \"32\"\n            };\n          case \"cancel\":\n            return {\n              size: \"0.084 0.04 0\",\n              value: a,\n              code: \"24\"\n            };\n          case \"submit\":\n            return {\n              size: \"0.084 0.04 0\",\n              value: a,\n              code: \"06\"\n            };\n          default:\n            return {\n              size: \"0.04 0.04 0\",\n              value: a,\n              code: a.charCodeAt(0)\n            };\n        }\n      }\n    }]);\n  }();\n}, function (e, t, a) {\n  var d = a(6);\n  e.exports = function (e) {\n    switch (e) {\n      case \"en\":\n      default:\n        return d;\n    }\n  };\n}, function (e, t) {\n  e.exports = {\n    name: \"ms-US-International\",\n    normal: [[{\n      value: \"1\",\n      type: \"standard\"\n    }, {\n      value: \"2\",\n      type: \"standard\"\n    }, {\n      value: \"3\",\n      type: \"standard\"\n    }, {\n      value: \"4\",\n      type: \"standard\"\n    }, {\n      value: \"5\",\n      type: \"standard\"\n    }, {\n      value: \"6\",\n      type: \"standard\"\n    }, {\n      value: \"7\",\n      type: \"standard\"\n    }, {\n      value: \"8\",\n      type: \"standard\"\n    }, {\n      value: \"9\",\n      type: \"standard\"\n    }, {\n      value: \"0\",\n      type: \"standard\"\n    }, {\n      value: \"<-\",\n      type: \"delete\"\n    }], [{\n      value: \"q\",\n      type: \"standard\"\n    }, {\n      value: \"w\",\n      type: \"standard\"\n    }, {\n      value: \"e\",\n      type: \"standard\"\n    }, {\n      value: \"r\",\n      type: \"standard\"\n    }, {\n      value: \"t\",\n      type: \"standard\"\n    }, {\n      value: \"y\",\n      type: \"standard\"\n    }, {\n      value: \"u\",\n      type: \"standard\"\n    }, {\n      value: \"i\",\n      type: \"standard\"\n    }, {\n      value: \"o\",\n      type: \"standard\"\n    }, {\n      value: \"p\",\n      type: \"standard\"\n    }, {\n      value: \"Ent\",\n      type: \"enter\"\n    }], [{\n      value: \"a\",\n      type: \"standard\"\n    }, {\n      value: \"s\",\n      type: \"standard\"\n    }, {\n      value: \"d\",\n      type: \"standard\"\n    }, {\n      value: \"f\",\n      type: \"standard\"\n    }, {\n      value: \"g\",\n      type: \"standard\"\n    }, {\n      value: \"h\",\n      type: \"standard\"\n    }, {\n      value: \"j\",\n      type: \"standard\"\n    }, {\n      value: \"k\",\n      type: \"standard\"\n    }, {\n      value: \"l\",\n      type: \"standard\"\n    }, {\n      value: '\"',\n      type: \"standard\"\n    }], [{\n      value: \"Shift\",\n      type: \"shift\"\n    }, {\n      value: \"z\",\n      type: \"standard\"\n    }, {\n      value: \"x\",\n      type: \"standard\"\n    }, {\n      value: \"c\",\n      type: \"standard\"\n    }, {\n      value: \"v\",\n      type: \"standard\"\n    }, {\n      value: \"b\",\n      type: \"standard\"\n    }, {\n      value: \"n\",\n      type: \"standard\"\n    }, {\n      value: \"m\",\n      type: \"standard\"\n    }, {\n      value: \"Alt\",\n      type: \"alt\"\n    }], [{\n      value: \"Cancel\",\n      type: \"cancel\"\n    }, {\n      value: \"\",\n      type: \"space\"\n    }, {\n      value: \",\",\n      type: \"standard\"\n    }, {\n      value: \".\",\n      type: \"standard\"\n    }, {\n      value: \"Submit\",\n      type: \"submit\"\n    }]],\n    shift: [[{\n      value: \"1\",\n      type: \"standard\"\n    }, {\n      value: \"2\",\n      type: \"standard\"\n    }, {\n      value: \"3\",\n      type: \"standard\"\n    }, {\n      value: \"4\",\n      type: \"standard\"\n    }, {\n      value: \"5\",\n      type: \"standard\"\n    }, {\n      value: \"6\",\n      type: \"standard\"\n    }, {\n      value: \"7\",\n      type: \"standard\"\n    }, {\n      value: \"8\",\n      type: \"standard\"\n    }, {\n      value: \"9\",\n      type: \"standard\"\n    }, {\n      value: \"0\",\n      type: \"standard\"\n    }, {\n      value: \"<-\",\n      type: \"delete\"\n    }], [{\n      value: \"Q\",\n      type: \"standard\"\n    }, {\n      value: \"W\",\n      type: \"standard\"\n    }, {\n      value: \"E\",\n      type: \"standard\"\n    }, {\n      value: \"R\",\n      type: \"standard\"\n    }, {\n      value: \"T\",\n      type: \"standard\"\n    }, {\n      value: \"Y\",\n      type: \"standard\"\n    }, {\n      value: \"U\",\n      type: \"standard\"\n    }, {\n      value: \"I\",\n      type: \"standard\"\n    }, {\n      value: \"O\",\n      type: \"standard\"\n    }, {\n      value: \"P\",\n      type: \"standard\"\n    }, {\n      value: \"Ent\",\n      type: \"enter\"\n    }], [{\n      value: \"A\",\n      type: \"standard\"\n    }, {\n      value: \"S\",\n      type: \"standard\"\n    }, {\n      value: \"D\",\n      type: \"standard\"\n    }, {\n      value: \"F\",\n      type: \"standard\"\n    }, {\n      value: \"G\",\n      type: \"standard\"\n    }, {\n      value: \"H\",\n      type: \"standard\"\n    }, {\n      value: \"J\",\n      type: \"standard\"\n    }, {\n      value: \"K\",\n      type: \"standard\"\n    }, {\n      value: \"L\",\n      type: \"standard\"\n    }, {\n      value: '\"',\n      type: \"standard\"\n    }], [{\n      value: \"Shift\",\n      type: \"shift\"\n    }, {\n      value: \"Z\",\n      type: \"standard\"\n    }, {\n      value: \"X\",\n      type: \"standard\"\n    }, {\n      value: \"C\",\n      type: \"standard\"\n    }, {\n      value: \"V\",\n      type: \"standard\"\n    }, {\n      value: \"B\",\n      type: \"standard\"\n    }, {\n      value: \"N\",\n      type: \"standard\"\n    }, {\n      value: \"M\",\n      type: \"standard\"\n    }, {\n      value: \"Alt\",\n      type: \"alt\"\n    }], [{\n      value: \"Cancel\",\n      type: \"cancel\"\n    }, {\n      value: \"\",\n      type: \"space\"\n    }, {\n      value: \",\",\n      type: \"standard\"\n    }, {\n      value: \".\",\n      type: \"standard\"\n    }, {\n      value: \"Submit\",\n      type: \"submit\"\n    }]],\n    alt: [[{\n      value: \"1\",\n      type: \"standard\"\n    }, {\n      value: \"2\",\n      type: \"standard\"\n    }, {\n      value: \"3\",\n      type: \"standard\"\n    }, {\n      value: \"4\",\n      type: \"standard\"\n    }, {\n      value: \"5\",\n      type: \"standard\"\n    }, {\n      value: \"6\",\n      type: \"standard\"\n    }, {\n      value: \"7\",\n      type: \"standard\"\n    }, {\n      value: \"8\",\n      type: \"standard\"\n    }, {\n      value: \"9\",\n      type: \"standard\"\n    }, {\n      value: \"0\",\n      type: \"standard\"\n    }, {\n      value: \"<-\",\n      type: \"delete\"\n    }], [{\n      value: \"~\",\n      type: \"standard\"\n    }, {\n      value: \"`\",\n      type: \"standard\"\n    }, {\n      value: \"|\",\n      type: \"standard\"\n    }, {\n      value: \"(\",\n      type: \"standard\"\n    }, {\n      value: \")\",\n      type: \"standard\"\n    }, {\n      value: \"^\",\n      type: \"standard\"\n    }, {\n      value: \"_\",\n      type: \"standard\"\n    }, {\n      value: \"-\",\n      type: \"standard\"\n    }, {\n      value: \"=\",\n      type: \"standard\"\n    }, {\n      value: \"!\",\n      type: \"standard\"\n    }, {\n      value: \"Ent\",\n      type: \"enter\"\n    }], [{\n      value: \"@\",\n      type: \"standard\"\n    }, {\n      value: \"#\",\n      type: \"standard\"\n    }, {\n      value: \"$\",\n      type: \"standard\"\n    }, {\n      value: \"%\",\n      type: \"standard\"\n    }, {\n      value: \"*\",\n      type: \"standard\"\n    }, {\n      value: \"[\",\n      type: \"standard\"\n    }, {\n      value: \"]\",\n      type: \"standard\"\n    }, {\n      value: \"#\",\n      type: \"standard\"\n    }, {\n      value: \"<\",\n      type: \"standard\"\n    }, {\n      value: \"?\",\n      type: \"standard\"\n    }], [{\n      value: \"Shift\",\n      type: \"shift\"\n    }, {\n      value: \":\",\n      type: \"standard\"\n    }, {\n      value: \";\",\n      type: \"standard\"\n    }, {\n      value: \"{\",\n      type: \"standard\"\n    }, {\n      value: \"}\",\n      type: \"standard\"\n    }, {\n      value: \"/\",\n      type: \"standard\"\n    }, {\n      value: \"\\\\\",\n      type: \"standard\"\n    }, {\n      value: \">\",\n      type: \"standard\"\n    }, {\n      value: \"Alt\",\n      type: \"alt\"\n    }], [{\n      value: \"Cancel\",\n      type: \"cancel\"\n    }, {\n      value: \"\",\n      type: \"space\"\n    }, {\n      value: \",\",\n      type: \"standard\"\n    }, {\n      value: \".\",\n      type: \"standard\"\n    }, {\n      value: \"Submit\",\n      type: \"submit\"\n    }]]\n  };\n}]);\n\n/***/ }),\n\n/***/ \"./src/plugins/eventListenerListPlugin.js\":\n/*!************************************************!*\\\n  !*** ./src/plugins/eventListenerListPlugin.js ***!\n  \\************************************************/\n/***/ (() => {\n\n// https://gist.github.com/stringparser/a3b0555fd915138a0ed3 edited version from DOM2AFrame\n;\n[Element].forEach(function (self) {\n  //self.prototype.eventListenerList = {}; // shared STATIC object across all instances... NOT what we want\n  self.prototype._addEventListener = self.prototype.addEventListener;\n  self.prototype.addEventListener = function (type, handle, useCapture) {\n    if (!this.eventListenerList) this.eventListenerList = {};\n    useCapture = useCapture === void 0 ? false : useCapture;\n    var node = this;\n    node._addEventListener(type, handle, useCapture);\n    if (!node.eventListenerList[type]) {\n      node.eventListenerList[type] = [];\n    }\n    node.eventListenerList[type].push({\n      type: type,\n      handle: handle,\n      useCapture: useCapture,\n      remove: function remove() {\n        node.removeEventListener(this.type, this.handle, this.useCapture);\n        return node.eventListenerList[type];\n      }\n    });\n    if (type != \"eventListenerAdded\" && type != \"eventListenerRemoved\") {\n      var eventDetail = {\n        'type': type,\n        'handle': handle,\n        'useCapture': useCapture\n      };\n      var addedEvent = new CustomEvent(\"eventListenerAdded\", {\n        detail: eventDetail\n      });\n      this.dispatchEvent(addedEvent);\n    }\n  };\n  self.prototype._removeEventListener = self.prototype.removeEventListener;\n  self.prototype.removeEventListener = function (type, handle, useCapture) {\n    if (!this.eventListenerList) this.eventListenerList = {};\n    var node = this;\n    if (!node.eventListenerList[type]) return;\n    node._removeEventListener(type, handle, useCapture);\n    node.eventListenerList[type] = node.eventListenerList[type].filter(function (listener) {\n      return listener && listener.handle && handle && listener.handle.toString() !== handle.toString(); // native event listener API supports empty handles/listeners, but .toString obviously doesn't\n    });\n    if (node.eventListenerList[type].length === 0) {\n      delete node.eventListenerList[type];\n    }\n    if (type != \"eventListenerAdded\" && type != \"eventListenerRemoved\") {\n      var eventDetail = {\n        'type': type,\n        'handle': handle,\n        'useCapture': useCapture\n      };\n      var removedEvent = new CustomEvent(\"eventListenerRemoved\", {\n        detail: eventDetail\n      });\n      this.dispatchEvent(removedEvent);\n    }\n  };\n});\n\n/***/ }),\n\n/***/ \"./src/scroll.js\":\n/*!***********************!*\\\n  !*** ./src/scroll.js ***!\n  \\***********************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_195580__) => {\n\n\"use strict\";\n__nested_webpack_require_195580__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_195580__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Scroll)\n/* harmony export */ });\n/* harmony import */ var _components_scrollbar__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_195580__(/*! ./components/scrollbar */ \"./src/components/scrollbar.js\");\n/* harmony import */ var _components_scrollbar__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_195580__.n(_components_scrollbar__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar Scroll = /*#__PURE__*/function () {\n  function Scroll(web2vr) {\n    _classCallCheck(this, Scroll);\n    this.web2vr = web2vr;\n    this.hasScroll = false;\n    this.scrollBody = false;\n    this.scrollContainer = null;\n    if (this.web2vr.settings.scroll) {\n      this.checkScrollbar();\n      if (this.hasScroll) this.createScrollbar();\n    }\n  }\n  return _createClass(Scroll, [{\n    key: \"checkScrollbar\",\n    value: function checkScrollbar() {\n      // entire body scroll\n      var body = document.scrollingElement;\n      // div container scroll\n      var container = this.web2vr.container;\n      if (body.scrollHeight > body.clientHeight) {\n        this.hasScroll = true;\n        this.scrollContainer = body;\n        this.scrollBody = true;\n      } else if (container.element.style.overflow == \"scroll\") {\n        //container.scrollHeight > container.clientHeight\n        this.hasScroll = true;\n        this.scrollContainer = container;\n      }\n    }\n  }, {\n    key: \"createScrollbar\",\n    value: function createScrollbar() {\n      this.scrollbar = document.createElement(\"a-entity\");\n      this.pointer = document.createElement(\"a-plane\");\n      this.pointer.setAttribute(\"material\", \"shader\", \"flat\");\n      this.pointer.setAttribute(\"color\", \"#C1C1C1\");\n      this.plane = document.createElement(\"a-plane\");\n      this.plane.setAttribute(\"material\", \"shader\", \"flat\");\n      this.plane.setAttribute(\"material\", \"side\", \"double\");\n      this.plane.classList.add(this.web2vr.settings.interactiveTag);\n      this.plane.setAttribute(\"color\", \"#F1F1F1\");\n      this.plane.setAttribute(\"width\", 1);\n      this.plane.setAttribute(\"vr-scrollbar\", \"\");\n\n      // pointers for scroll compoment\n      this.plane.web2vr = this.web2vr;\n      this.plane.pointer = this.pointer;\n      this.plane.scrollbar = this.scrollbar;\n      this.plane.appendChild(this.pointer);\n      this.scrollbar.appendChild(this.plane);\n      this.web2vr.aframe.container.appendChild(this.scrollbar);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      // there is no need to show scrollbar if the main container is hidden\n      if (this.hasScroll) {\n        if (this.web2vr.container.element.style.visibility == \"visible\") {\n          this.scrollbar.object3D.visible = true;\n          this.plane.classList.add(this.web2vr.settings.interactiveTag);\n        } else if (this.web2vr.container.element.style.visibility == \"hidden\") {\n          this.scrollbar.object3D.visible = false;\n          this.plane.classList.remove(this.web2vr.settings.interactiveTag);\n        }\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/settings.js\":\n/*!*************************!*\\\n  !*** ./src/settings.js ***!\n  \\*************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_200440__) => {\n\n\"use strict\";\n__nested_webpack_require_200440__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_200440__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Settings)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar Settings = /*#__PURE__*/_createClass(function Settings() {\n  _classCallCheck(this, Settings);\n  this.scale = 600;\n  this.position = {\n    x: 0,\n    y: 2,\n    z: -1\n  };\n  this.rotation = {\n    x: 0,\n    y: 0,\n    z: 0\n  };\n  this.layerStep = 0.0005; // z space between the layers\n\n  this.parentSelector = null;\n  this.interactiveTag = \"vr-interactable\";\n  this.ignoreTags = [\"BR\", \"SOURCE\", \"SCRIPT\", \"AUDIO\", \"NOSCRIPT\"];\n  this.debug = false;\n  this.showClipping = false;\n  this.forceClipping = false;\n  this.experimental = false;\n  this.scroll = true;\n  this.scrollWindowHeight = 800;\n  this.createControllers = true;\n  this.raycasterFar = 5;\n  this.skybox = true;\n  this.border = true;\n});\n\n\n/***/ }),\n\n/***/ \"./src/utils/helper.js\":\n/*!*****************************!*\\\n  !*** ./src/utils/helper.js ***!\n  \\*****************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_203101__) => {\n\n\"use strict\";\n__nested_webpack_require_203101__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_203101__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Helper)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar Helper = /*#__PURE__*/function () {\n  function Helper() {\n    _classCallCheck(this, Helper);\n  }\n  return _createClass(Helper, null, [{\n    key: \"isUrl\",\n    value: function isUrl(string) {\n      var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n      return regexp.test(string);\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(value, min, max) {\n      return Math.min(max, Math.max(min, value));\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/utils/mouseEventHandler.js\":\n/*!****************************************!*\\\n  !*** ./src/utils/mouseEventHandler.js ***!\n  \\****************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_205582__) => {\n\n\"use strict\";\n__nested_webpack_require_205582__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_205582__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MouseEventHandler)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar MouseEventHandler = /*#__PURE__*/function () {\n  function MouseEventHandler(element) {\n    _classCallCheck(this, MouseEventHandler);\n    this.element = element;\n    this.listeningForMouseEvents = false;\n    this.resync();\n    this.checkEntityEvents();\n  }\n  return _createClass(MouseEventHandler, [{\n    key: \"resync\",\n    value: function resync() {\n      var mouseEvents = [\"click\", \"mouseenter\", \"mouseleave\", \"mousedown\", \"mouseup\"];\n      var mouseProperties = [\"onclick\", \"onmouseenter\", \"onmouseleave\", \"onmousedown\", \"onmouseup\"];\n      var hasMouseEventRegistered = false;\n      for (var _i = 0, _mouseEvents = mouseEvents; _i < _mouseEvents.length; _i++) {\n        var mouseEvent = _mouseEvents[_i];\n        if (this.element.domElement.eventListenerList && this.element.domElement.eventListenerList[mouseEvent]) {\n          hasMouseEventRegistered = true;\n          break;\n        }\n      }\n      var hasMouseProperty = false;\n      for (var _i2 = 0, _mouseProperties = mouseProperties; _i2 < _mouseProperties.length; _i2++) {\n        var mouseProperty = _mouseProperties[_i2];\n        if (this.element.domElement[mouseProperty]) {\n          hasMouseProperty = true;\n          break;\n        }\n      }\n      if (hasMouseEventRegistered || hasMouseProperty) {\n        if (!this.listeningForMouseEvents) {\n          this.addMouseListeners(mouseEvents);\n          this.listeningForMouseEvents = true;\n        }\n      }\n      // no event handlers or event properties registered, so we can safely remove our listeners\n      else if (this.listeningForMouseEvents) {\n        this.removeMouseListeners(mouseEvents);\n        this.listeningForMouseEvents = false;\n      }\n    }\n  }, {\n    key: \"mouseEventHandler\",\n    value: function mouseEventHandler(evt) {\n      var mouseEvent = new MouseEvent(evt.type, {\n        \"view\": window,\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"target\": this.element.domElement // maybe?\n      });\n      this.element.domElement.dispatchEvent(mouseEvent);\n    }\n  }, {\n    key: \"addMouseListeners\",\n    value: function addMouseListeners(mouseEvents) {\n      var _this = this;\n      mouseEvents.forEach(function (eventName) {\n        _this.element.entity.addEventListener(eventName, _this.mouseEventHandler.bind(_this));\n      });\n    }\n  }, {\n    key: \"removeMouseListeners\",\n    value: function removeMouseListeners(mouseEvents) {\n      var _this2 = this;\n      mouseEvents.forEach(function (eventName) {\n        _this2.element.entity.removeEventListener(eventName, _this2.mouseEventHandler.bind(_this2));\n      });\n    }\n\n    // for hover and input element\n  }, {\n    key: \"checkEntityEvents\",\n    value: function checkEntityEvents() {\n      var mouseEvents = [\"click\", \"mouseenter\", \"mouseleave\", \"mousedown\", \"mouseup\"];\n      for (var _i3 = 0, _mouseEvents2 = mouseEvents; _i3 < _mouseEvents2.length; _i3++) {\n        var mouseEvent = _mouseEvents2[_i3];\n        if (this.element.entity.eventListenerList && this.element.entity.eventListenerList[mouseEvent]) {\n          this.listeningForMouseEvents = true;\n          break;\n        }\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/utils/position.js\":\n/*!*******************************!*\\\n  !*** ./src/utils/position.js ***!\n  \\*******************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_210681__) => {\n\n\"use strict\";\n__nested_webpack_require_210681__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_210681__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Position)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar Position = /*#__PURE__*/function () {\n  function Position(domPosition, depth, scale) {\n    _classCallCheck(this, Position);\n    // depth = z\n    this.depth = depth;\n    this.startDepth = depth;\n    this.scale = scale;\n    this.scrollY = 0;\n    this.updatePosition(domPosition);\n  }\n  return _createClass(Position, [{\n    key: \"updatePosition\",\n    value: function updatePosition(domPosition) {\n      this.domPosition = domPosition;\n      this.aframePosition = this.calculateAFramePosition(this.domPosition);\n    }\n  }, {\n    key: \"calculateAFramePosition\",\n    value: function calculateAFramePosition(domPosition) {\n      // making positions be in center because dom positions are in top left\n      var aframePosition = {\n        x: domPosition.x + domPosition.width / 2,\n        y: domPosition.y + domPosition.height / 2,\n        z: this.depth\n      };\n\n      // scaling\n      aframePosition.x *= this.scalingFactor;\n      aframePosition.y *= this.scalingFactor * -1; // * -1 to match aframe y-axis\n\n      aframePosition.width = domPosition.width * this.scalingFactor;\n      aframePosition.height = domPosition.height * this.scalingFactor;\n      return aframePosition;\n    }\n  }, {\n    key: \"equalsDOMPosition\",\n    value: function equalsDOMPosition(domPosition) {\n      return this.domPosition.top == domPosition.top && this.domPosition.bottom == domPosition.bottom && this.domPosition.left == domPosition.left && this.domPosition.right == domPosition.right;\n    }\n  }, {\n    key: \"scalingFactor\",\n    get: function get() {\n      return 1 / this.scale;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.aframePosition.x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.aframePosition.y + this.scrollY;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this.aframePosition.z;\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.aframePosition.width;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.aframePosition.height;\n    }\n\n    // vector3\n  }, {\n    key: \"xyz\",\n    get: function get() {\n      return {\n        x: this.x,\n        y: this.y,\n        z: this.z\n      };\n    }\n  }, {\n    key: \"left\",\n    get: function get() {\n      return {\n        x: this.x - this.width / 2,\n        y: this.y,\n        z: this.z\n      };\n    }\n  }, {\n    key: \"right\",\n    get: function get() {\n      return {\n        x: this.x + this.width / 2,\n        y: this.y,\n        z: this.z\n      };\n    }\n  }, {\n    key: \"top\",\n    get: function get() {\n      return {\n        x: this.x,\n        y: this.y + this.height / 2,\n        z: this.z\n      };\n    }\n  }, {\n    key: \"bottom\",\n    get: function get() {\n      return {\n        x: this.x,\n        y: this.y - this.height / 2,\n        z: this.z\n      };\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"../node_modules/deepmerge/dist/cjs.js\":\n/*!*********************************************!*\\\n  !*** ../node_modules/deepmerge/dist/cjs.js ***!\n  \\*********************************************/\n/***/ ((module) => {\n\n\"use strict\";\n\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n\n\n/***/ }),\n\n/***/ \"aframe\":\n/*!*************************!*\\\n  !*** external \"aframe\" ***!\n  \\*************************/\n/***/ ((module) => {\n\n\"use strict\";\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_aframe__;\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __nested_webpack_require_219987__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __nested_webpack_require_219987__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__nested_webpack_require_219987__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__nested_webpack_require_219987__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__nested_webpack_require_219987__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__nested_webpack_require_219987__.o(definition, key) && !__nested_webpack_require_219987__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__nested_webpack_require_219987__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__nested_webpack_require_219987__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __nested_webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n(() => {\n\"use strict\";\n/*!***********************!*\\\n  !*** ./src/web2vr.js ***!\n  \\***********************/\n__nested_webpack_require_219987__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_219987__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Web2VR)\n/* harmony export */ });\n/* harmony import */ var _plugins_eventListenerListPlugin__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_219987__(/*! ./plugins/eventListenerListPlugin */ \"./src/plugins/eventListenerListPlugin.js\");\n/* harmony import */ var _plugins_eventListenerListPlugin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_219987__.n(_plugins_eventListenerListPlugin__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_219987__(/*! deepmerge */ \"../node_modules/deepmerge/dist/cjs.js\");\n/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_219987__.n(deepmerge__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var aframe__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_219987__(/*! aframe */ \"aframe\");\n/* harmony import */ var aframe__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__nested_webpack_require_219987__.n(aframe__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _plugins_aframe_keyboard_min__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_219987__(/*! ./plugins/aframe-keyboard.min */ \"./src/plugins/aframe-keyboard.min.js\");\n/* harmony import */ var _plugins_aframe_keyboard_min__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__nested_webpack_require_219987__.n(_plugins_aframe_keyboard_min__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var super_hands__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_219987__(/*! super-hands */ \"./aframe-super-hands-component/index.js\");\n/* harmony import */ var super_hands__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__nested_webpack_require_219987__.n(super_hands__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_219987__(/*! ./settings */ \"./src/settings.js\");\n/* harmony import */ var _components_border__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_219987__(/*! ./components/border */ \"./src/components/border.js\");\n/* harmony import */ var _components_border__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__nested_webpack_require_219987__.n(_components_border__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _components_animate__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_219987__(/*! ./components/animate */ \"./src/components/animate.js\");\n/* harmony import */ var _components_animate__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__nested_webpack_require_219987__.n(_components_animate__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _components_grabRotateStatic__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_219987__(/*! ./components/grabRotateStatic */ \"./src/components/grabRotateStatic.js\");\n/* harmony import */ var _components_grabRotateStatic__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__nested_webpack_require_219987__.n(_components_grabRotateStatic__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _scroll__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_219987__(/*! ./scroll */ \"./src/scroll.js\");\n/* harmony import */ var _aframeContext__WEBPACK_IMPORTED_MODULE_10__ = __nested_webpack_require_219987__(/*! ./aframeContext */ \"./src/aframeContext.js\");\n/* harmony import */ var _elements_containerElement__WEBPACK_IMPORTED_MODULE_11__ = __nested_webpack_require_219987__(/*! ./elements/containerElement */ \"./src/elements/containerElement.js\");\n/* harmony import */ var _elements_textElement__WEBPACK_IMPORTED_MODULE_12__ = __nested_webpack_require_219987__(/*! ./elements/textElement */ \"./src/elements/textElement.js\");\n/* harmony import */ var _elements_imageElement__WEBPACK_IMPORTED_MODULE_13__ = __nested_webpack_require_219987__(/*! ./elements/imageElement */ \"./src/elements/imageElement.js\");\n/* harmony import */ var _elements_videoElement__WEBPACK_IMPORTED_MODULE_14__ = __nested_webpack_require_219987__(/*! ./elements/videoElement */ \"./src/elements/videoElement.js\");\n/* harmony import */ var _elements_checkboxElement__WEBPACK_IMPORTED_MODULE_15__ = __nested_webpack_require_219987__(/*! ./elements/checkboxElement */ \"./src/elements/checkboxElement.js\");\n/* harmony import */ var _elements_radioElement__WEBPACK_IMPORTED_MODULE_16__ = __nested_webpack_require_219987__(/*! ./elements/radioElement */ \"./src/elements/radioElement.js\");\n/* harmony import */ var _elements_inputElement__WEBPACK_IMPORTED_MODULE_17__ = __nested_webpack_require_219987__(/*! ./elements/inputElement */ \"./src/elements/inputElement.js\");\n/* harmony import */ var _elements_buttonElement__WEBPACK_IMPORTED_MODULE_18__ = __nested_webpack_require_219987__(/*! ./elements/buttonElement */ \"./src/elements/buttonElement.js\");\n/* harmony import */ var _elements_svgElement__WEBPACK_IMPORTED_MODULE_19__ = __nested_webpack_require_219987__(/*! ./elements/svgElement */ \"./src/elements/svgElement.js\");\n/* harmony import */ var _elements_canvasElement__WEBPACK_IMPORTED_MODULE_20__ = __nested_webpack_require_219987__(/*! ./elements/canvasElement */ \"./src/elements/canvasElement.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n // Get all event listeners for DOM elements\n\n\n\n// import \"aframe-gif-shader\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Web2VR = /*#__PURE__*/function () {\n  function Web2VR(container) {\n    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Web2VR);\n    // main div container\n    if (container.nodeType == Node.ELEMENT_NODE) this.container = container;else this.container = document.querySelector(container);\n\n    // deep merge settings\n    this.settings = deepmerge__WEBPACK_IMPORTED_MODULE_1___default()(new _settings__WEBPACK_IMPORTED_MODULE_5__[\"default\"](), settings, {\n      arrayMerge: function arrayMerge(destination, source) {\n        return [].concat(_toConsumableArray(destination), _toConsumableArray(source));\n      }\n    });\n\n    // aframe context\n    this.aframe = new _aframeContext__WEBPACK_IMPORTED_MODULE_10__[\"default\"](this.settings);\n    // vr elements\n    this.elements = new Set();\n    // set of all the hover css selectors\n    this.hoverSelectors = new Set();\n    this.observer = null;\n    // observer parametars\n    this.observerConfig = {\n      childList: true,\n      subtree: true,\n      characterData: true,\n      attributes: true\n    }; //attributeFilter: [\"style\", \"class\", \"id\"]\n    this.updating = false;\n\n    // experimental only\n    this.html2canvasIDcounter = 0;\n  }\n\n  // find all hover css rules and add {selector}hover class to them\n  return _createClass(Web2VR, [{\n    key: \"findHoverCss\",\n    value: function findHoverCss() {\n      try {\n        for (var _i = 0, _arr = _toConsumableArray(document.styleSheets); _i < _arr.length; _i++) {\n          var styleSheet = _arr[_i];\n          for (var _i2 = 0, _arr2 = _toConsumableArray(styleSheet.cssRules); _i2 < _arr2.length; _i2++) {\n            var rule = _arr2[_i2];\n            if (rule instanceof CSSStyleRule) {\n              var selectors = rule.selectorText.split(\",\");\n              var _iterator = _createForOfIteratorHelper(selectors),\n                _step;\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  var selector = _step.value;\n                  var sel = selector.split(\":\");\n                  // is hover\n                  if (sel[1] == \"hover\") {\n                    var s = sel[0].replace(/\\s/g, '');\n                    if (s[0] == \".\") rule.selectorText += \", \".concat(s, \"hover\");else if (s[0] == \"#\") rule.selectorText += \", .\".concat(s.substr(1), \"hover\");else rule.selectorText += \", .\".concat(s, \"hover\");\n                    this.hoverSelectors.add(s);\n                  }\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n            }\n          }\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n\n    // add all svg needed styles to defs inside svg so we can convert svg to png with all styles applied \n  }, {\n    key: \"generateStyleDefs\",\n    value: function generateStyleDefs(svgDomElement) {\n      var styleDefs = \"\";\n      var sheets = document.styleSheets;\n      for (var i = 0; i < sheets.length; i++) {\n        var rules = sheets[i].cssRules;\n        for (var j = 0; j < rules.length; j++) {\n          var rule = rules[j];\n          if (rule.style) {\n            var selectorText = rule.selectorText;\n            var elems = svgDomElement.querySelectorAll(selectorText);\n            if (elems.length) {\n              styleDefs += selectorText + \" { \" + rule.style.cssText + \" }\\n\";\n            }\n          }\n        }\n      }\n      var s = document.createElement('style');\n      s.setAttribute('type', 'text/css');\n      s.innerHTML = styleDefs;\n      var defs = document.createElement('defs');\n      defs.appendChild(s);\n      svgDomElement.insertBefore(defs, svgDomElement.firstChild);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n      // Return a promise that will resolve when the VR elements are added / scene is loaded.\n      return new Promise(function (resolve, reject) {\n        _this.findHoverCss();\n        if (!_this.aframe.scene.hasLoaded) {\n          _this.aframe.scene.addEventListener(\"loaded\", function (resolve, init, context) {\n            init.call(context);\n            resolve();\n          }(resolve, _this.init, _this), {\n            once: true\n          });\n        } else _this.init().then(function () {\n          resolve();\n        });\n      });\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n      this.aframe.createContainer(this);\n      this.aframe.createSky();\n      this.aframe.createControllers();\n      // scroll feature\n\n      return this.convertToVR().then(function () {\n        _this2.scroll = new _scroll__WEBPACK_IMPORTED_MODULE_9__[\"default\"](_this2);\n        return _this2.allLoadedUpdate();\n      }).then(function () {\n        return _this2.update();\n      });\n    }\n\n    // update once after all images are loaded in the dom\n  }, {\n    key: \"allLoadedUpdate\",\n    value: function allLoadedUpdate() {\n      var _this3 = this;\n      return new Promise(function (resolve, reject) {\n        var interval = setInterval(function () {\n          var allLoaded = true;\n          var _iterator2 = _createForOfIteratorHelper(_this3.elements),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var element = _step2.value;\n              if (element instanceof _elements_imageElement__WEBPACK_IMPORTED_MODULE_13__[\"default\"] && !element.loaded) allLoaded = false;\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n          if (allLoaded) {\n            resolve();\n            clearInterval(interval);\n          }\n        }, 100);\n      });\n    }\n  }, {\n    key: \"addElement\",\n    value: function addElement(domElement, parentElement, layer) {\n      var _this4 = this;\n      // ignore tag if in ignoreTags list or text element(vr-span) is already added\n      if (this.settings.ignoreTags.includes(domElement.tagName) || domElement.classList && domElement.classList.contains(\"vr-span\")) return null;\n      var element = null;\n      // its text node and not empty\n      if (domElement.nodeType == Node.TEXT_NODE && domElement.nodeValue.trim()) {\n        var span = document.createElement(\"span\");\n        span.classList.add(\"vr-span\");\n        span.textContent = domElement.textContent;\n\n        // dont want observer to listen changes when adding(replacing) span text into dom\n        if (this.observer) this.observer.disconnect();\n        domElement.replaceWith(span);\n        if (this.observer) {\n          this.observer.observe(this.container, this.observerConfig);\n          // We need to add the observer to every slot inside the container as well.\n          this.container.querySelectorAll(\"slot\").forEach(function (slot) {\n            _this4.observer.observe(slot, _this4.observerConfig);\n          });\n        }\n        element = new _elements_textElement__WEBPACK_IMPORTED_MODULE_12__[\"default\"](this, span, layer);\n      }\n      // for future convert this to switch statement\n      else if (domElement.tagName == \"VIDEO\") element = new _elements_videoElement__WEBPACK_IMPORTED_MODULE_14__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"IMG\") element = new _elements_imageElement__WEBPACK_IMPORTED_MODULE_13__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"svg\") element = new _elements_svgElement__WEBPACK_IMPORTED_MODULE_19__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"CANVAS\") element = new _elements_canvasElement__WEBPACK_IMPORTED_MODULE_20__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"BUTTON\") element = new _elements_buttonElement__WEBPACK_IMPORTED_MODULE_18__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"TEXTAREA\") element = new _elements_inputElement__WEBPACK_IMPORTED_MODULE_17__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"INPUT\") {\n        var type = domElement.getAttribute(\"type\");\n        if (type == \"checkbox\") element = new _elements_checkboxElement__WEBPACK_IMPORTED_MODULE_15__[\"default\"](this, domElement, layer);else if (type == \"radio\") element = new _elements_radioElement__WEBPACK_IMPORTED_MODULE_16__[\"default\"](this, domElement, layer);else if ([\"text\", \"email\", \"number\", \"password\", \"search\", \"tel\", \"url\"].includes(type)) element = new _elements_inputElement__WEBPACK_IMPORTED_MODULE_17__[\"default\"](this, domElement, layer);else if ([\"button\", \"submit\", \"reset\"].includes(type)) {\n          element = new _elements_buttonElement__WEBPACK_IMPORTED_MODULE_18__[\"default\"](this, domElement, layer);\n        } else return;\n      }\n      // If this element is hosting a shadow root, we want to make sure elements are observed.\n      else if (!!domElement.shadowRoot) {\n        // console.log(\"Shadow root found\", domElement.shadowRoot);\n        this.addElementChildren(domElement.shadowRoot, parentElement, layer);\n      }\n      // any other type of element will be container\n      else if (domElement.nodeType == Node.ELEMENT_NODE) {\n        element = new _elements_containerElement__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this, domElement, layer);\n      } else return;\n      this.elements.add(element);\n      this.aframe.container.appendChild(element.entity);\n      if (this.settings.debug) console.log(\"Added element\", element);\n\n      // init element and add element to parent children when aframe entity is loaded(play)\n      var onLoaded = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                if (parentElement) parentElement.childElements.add(element);\n                element.init();\n                element.update();\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }));\n        return function onLoaded(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      element.entity.addEventListener(\"play\", onLoaded, {\n        once: true\n      });\n      return element;\n    }\n  }, {\n    key: \"removeElement\",\n    value: function removeElement(element) {\n      // remove the element\n      this.aframe.container.removeChild(element.entity);\n      this.elements[\"delete\"](element);\n      // remove all the children of the element recursively\n      var _iterator3 = _createForOfIteratorHelper(element.childElements),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var child = _step3.value;\n          this.removeElement(child);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n\n    // start at root and interate over child nodes recursively\n  }, {\n    key: \"addElementChildren\",\n    value: function addElementChildren(currentNode) {\n      var _this5 = this;\n      var parentElement = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var layer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      return new Promise(function (resolve, reject) {\n        if (currentNode.tagName == \"svg\") _this5.generateStyleDefs(currentNode);\n\n        // If this is a slot element, we're using a web component and need to fetch the child elements using .assignedNodes()\n        if (currentNode.tagName == \"SLOT\") {\n          // Note: we don't increase the layer here because slots don't render directly.\n          // console.log(\"*********Slot element found\");\n          var assignedNodes = currentNode.assignedNodes();\n          var promisesToResolve = [];\n          var _iterator4 = _createForOfIteratorHelper(assignedNodes),\n            _step4;\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var assignedNode = _step4.value;\n              promisesToResolve.push(_this5.addElementChildren(assignedNode, parentElement, layer));\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n          Promise.all(promisesToResolve).then(function () {\n            resolve();\n          });\n        }\n        var element = _this5.addElement(currentNode, parentElement, layer);\n        // not supported tags or svg element that we dont need to check its children\n        if (!element || element instanceof _elements_svgElement__WEBPACK_IMPORTED_MODULE_19__[\"default\"]) return;\n        if (currentNode.childNodes && currentNode.childNodes.length > 0) {\n          layer++;\n          var promisesToResolve = [];\n          var _iterator5 = _createForOfIteratorHelper(currentNode.childNodes),\n            _step5;\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var child = _step5.value;\n              promisesToResolve.push(_this5.addElementChildren(child, element, layer));\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n          Promise.all(promisesToResolve).then(function () {\n            resolve();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"convertToVR\",\n    value: function convertToVR() {\n      var _this6 = this;\n      return new Promise(function (resolve, reject) {\n        _this6.addElementChildren(_this6.container).then(function () {\n          // observer dom element changes and for newly added and deleted dom elements\n          _this6.observer = new MutationObserver(function (mutations) {\n            var _iterator6 = _createForOfIteratorHelper(mutations),\n              _step6;\n            try {\n              for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n                var mutation = _step6.value;\n                console.log(\"Mutation encountered\", mutation);\n                var emptyRemove = false;\n                var _iterator7 = _createForOfIteratorHelper(mutation.removedNodes),\n                  _step7;\n                try {\n                  for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                    var node = _step7.value;\n                    // not empty textNode\n                    if (!(node.nodeType == Node.TEXT_NODE && !node.nodeValue.trim())) _this6.removeElement(node.element);else emptyRemove = true;\n                  }\n                } catch (err) {\n                  _iterator7.e(err);\n                } finally {\n                  _iterator7.f();\n                }\n                var _iterator8 = _createForOfIteratorHelper(mutation.addedNodes),\n                  _step8;\n                try {\n                  for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n                    var _node = _step8.value;\n                    _this6.addElementChildren(_node, mutation.target.element, mutation.target.element.layer + 1);\n                  }\n                } catch (err) {\n                  _iterator8.e(err);\n                } finally {\n                  _iterator8.f();\n                }\n                if (!emptyRemove) {\n                  // when adding new nodes we also need to check for new loaded images\n                  if (mutation.addedNodes.length > 0) _this6.allLoadedUpdate();else _this6.update();\n                }\n\n                // Listen for text changes and update when they occur.\n                if (mutation.type == \"characterData\") {\n                  _this6.update();\n                }\n              }\n            } catch (err) {\n              _iterator6.e(err);\n            } finally {\n              _iterator6.f();\n            }\n          });\n          _this6.observer.observe(_this6.container, _this6.observerConfig);\n\n          // We need to add the observer to every slot inside the container as well.\n          _this6.container.querySelectorAll(\"slot\").forEach(function (slot) {\n            slot.addEventListener(\"slotchange\", function (ev) {\n              // console.log(\"Slot change event\", ev);\n            });\n            _this6.observer.observe(slot, _this6.observerConfig);\n          });\n          resolve();\n        });\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _this7 = this;\n      return new Promise(function (resolve, reject) {\n        // we check for updating so we dont do multiple updating at same time from the async functions\n        _this7.updating = true;\n        if (_this7.updating) {\n          var _this7$scroll;\n          // using try and catch because sometimes when element is removed it calls update after and it wont find element, the errors doesnt matter because the final result is the same\n          try {\n            var _iterator9 = _createForOfIteratorHelper(_this7.elements),\n              _step9;\n            try {\n              for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n                var element = _step9.value;\n                element.update();\n              }\n            } catch (err) {\n              _iterator9.e(err);\n            } finally {\n              _iterator9.f();\n            }\n          } catch (err) {\n            console.error(err);\n          }\n          (_this7$scroll = _this7.scroll) === null || _this7$scroll === void 0 || _this7$scroll.update();\n          _this7.updating = false;\n          resolve();\n        }\n        resolve();\n      });\n    }\n  }]);\n}();\n\n})();\n\n__nested_webpack_exports__ = __nested_webpack_exports__[\"default\"];\n/******/ \treturn __nested_webpack_exports__;\n/******/ })()\n;\n});\n//# sourceMappingURL=web2vr.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA1MS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4uL3dlYjJ2ci9kaXN0L3dlYjJ2ci5qcz8yZDMzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImFmcmFtZVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJhZnJhbWVcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiV2ViMlZSXCJdID0gZmFjdG9yeShyZXF1aXJlKFwiYWZyYW1lXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJXZWIyVlJcIl0gPSBmYWN0b3J5KHJvb3RbXCJhZnJhbWVcIl0pO1xufSkoc2VsZiwgKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfYWZyYW1lX18pID0+IHtcbnJldHVybiAvKioqKioqLyAoKCkgPT4geyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdHZhciBfX3dlYnBhY2tfbW9kdWxlc19fID0gKHtcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3VudXNlZF93ZWJwYWNrX2V4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuLyogZ2xvYmFsIEFGUkFNRSAqL1xuXG5pZiAodHlwZW9mIEFGUkFNRSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdDb21wb25lbnQgYXR0ZW1wdGVkIHRvIHJlZ2lzdGVyIGJlZm9yZSBBRlJBTUUgd2FzIGF2YWlsYWJsZS4nKTtcbn1cbl9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3lzdGVtcy9zdXBlci1oYW5kcy1zeXN0ZW0uanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvc3lzdGVtcy9zdXBlci1oYW5kcy1zeXN0ZW0uanNcIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0aW9uX2NvbXBvbmVudHMvaG92ZXJhYmxlLmpzICovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvaG92ZXJhYmxlLmpzXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdGlvbl9jb21wb25lbnRzL2dyYWJiYWJsZS5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2dyYWJiYWJsZS5qc1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3Rpb25fY29tcG9uZW50cy9zdHJldGNoYWJsZS5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL3N0cmV0Y2hhYmxlLmpzXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdGlvbl9jb21wb25lbnRzL2RyYWctZHJvcHBhYmxlLmpzICovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvZHJhZy1kcm9wcGFibGUuanNcIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0aW9uX2NvbXBvbmVudHMvZHJhZ2dhYmxlLmpzICovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvZHJhZ2dhYmxlLmpzXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdGlvbl9jb21wb25lbnRzL2Ryb3BwYWJsZS5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2Ryb3BwYWJsZS5qc1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3Rpb25fY29tcG9uZW50cy9jbGlja2FibGUuanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9jbGlja2FibGUuanNcIik7XG5cbi8qKlxuICogU3VwZXIgSGFuZHMgY29tcG9uZW50IGZvciBBLUZyYW1lLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3N1cGVyLWhhbmRzJywge1xuICBzY2hlbWE6IHtcbiAgICBjb2xsaWRlckV2ZW50OiB7XG4gICAgICBcImRlZmF1bHRcIjogJ2hpdCdcbiAgICB9LFxuICAgIGNvbGxpZGVyRXZlbnRQcm9wZXJ0eToge1xuICAgICAgXCJkZWZhdWx0XCI6ICdlbCdcbiAgICB9LFxuICAgIGNvbGxpZGVyRW5kRXZlbnQ6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnaGl0ZW5kJ1xuICAgIH0sXG4gICAgY29sbGlkZXJFbmRFdmVudFByb3BlcnR5OiB7XG4gICAgICBcImRlZmF1bHRcIjogJ2VsJ1xuICAgIH0sXG4gICAgZ3JhYlN0YXJ0QnV0dG9uczoge1xuICAgICAgXCJkZWZhdWx0XCI6IFsnZ3JpcGRvd24nLCAndHJhY2twYWRkb3duJywgJ3RyaWdnZXJkb3duJywgJ2dyaXBjbG9zZScsICdhYnV0dG9uZG93bicsICdiYnV0dG9uZG93bicsICd4YnV0dG9uZG93bicsICd5YnV0dG9uZG93bicsICdwb2ludHVwJywgJ3RodW1idXAnLCAncG9pbnRpbmdzdGFydCcsICdwaXN0b2xzdGFydCcsICd0aHVtYnN0aWNrZG93bicsICdtb3VzZWRvd24nLCAndG91Y2hzdGFydCddXG4gICAgfSxcbiAgICBncmFiRW5kQnV0dG9uczoge1xuICAgICAgXCJkZWZhdWx0XCI6IFsnZ3JpcHVwJywgJ3RyYWNrcGFkdXAnLCAndHJpZ2dlcnVwJywgJ2dyaXBvcGVuJywgJ2FidXR0b251cCcsICdiYnV0dG9udXAnLCAneGJ1dHRvbnVwJywgJ3lidXR0b251cCcsICdwb2ludGRvd24nLCAndGh1bWJkb3duJywgJ3BvaW50aW5nZW5kJywgJ3Bpc3RvbGVuZCcsICd0aHVtYnN0aWNrdXAnLCAnbW91c2V1cCcsICd0b3VjaGVuZCddXG4gICAgfSxcbiAgICBzdHJldGNoU3RhcnRCdXR0b25zOiB7XG4gICAgICBcImRlZmF1bHRcIjogWydncmlwZG93bicsICd0cmFja3BhZGRvd24nLCAndHJpZ2dlcmRvd24nLCAnZ3JpcGNsb3NlJywgJ2FidXR0b25kb3duJywgJ2JidXR0b25kb3duJywgJ3hidXR0b25kb3duJywgJ3lidXR0b25kb3duJywgJ3BvaW50dXAnLCAndGh1bWJ1cCcsICdwb2ludGluZ3N0YXJ0JywgJ3Bpc3RvbHN0YXJ0JywgJ3RodW1ic3RpY2tkb3duJywgJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J11cbiAgICB9LFxuICAgIHN0cmV0Y2hFbmRCdXR0b25zOiB7XG4gICAgICBcImRlZmF1bHRcIjogWydncmlwdXAnLCAndHJhY2twYWR1cCcsICd0cmlnZ2VydXAnLCAnZ3JpcG9wZW4nLCAnYWJ1dHRvbnVwJywgJ2JidXR0b251cCcsICd4YnV0dG9udXAnLCAneWJ1dHRvbnVwJywgJ3BvaW50ZG93bicsICd0aHVtYmRvd24nLCAncG9pbnRpbmdlbmQnLCAncGlzdG9sZW5kJywgJ3RodW1ic3RpY2t1cCcsICdtb3VzZXVwJywgJ3RvdWNoZW5kJ11cbiAgICB9LFxuICAgIGRyYWdEcm9wU3RhcnRCdXR0b25zOiB7XG4gICAgICBcImRlZmF1bHRcIjogWydncmlwZG93bicsICd0cmFja3BhZGRvd24nLCAndHJpZ2dlcmRvd24nLCAnZ3JpcGNsb3NlJywgJ2FidXR0b25kb3duJywgJ2JidXR0b25kb3duJywgJ3hidXR0b25kb3duJywgJ3lidXR0b25kb3duJywgJ3BvaW50dXAnLCAndGh1bWJ1cCcsICdwb2ludGluZ3N0YXJ0JywgJ3Bpc3RvbHN0YXJ0JywgJ3RodW1ic3RpY2tkb3duJywgJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J11cbiAgICB9LFxuICAgIGRyYWdEcm9wRW5kQnV0dG9uczoge1xuICAgICAgXCJkZWZhdWx0XCI6IFsnZ3JpcHVwJywgJ3RyYWNrcGFkdXAnLCAndHJpZ2dlcnVwJywgJ2dyaXBvcGVuJywgJ2FidXR0b251cCcsICdiYnV0dG9udXAnLCAneGJ1dHRvbnVwJywgJ3lidXR0b251cCcsICdwb2ludGRvd24nLCAndGh1bWJkb3duJywgJ3BvaW50aW5nZW5kJywgJ3Bpc3RvbGVuZCcsICd0aHVtYnN0aWNrdXAnLCAnbW91c2V1cCcsICd0b3VjaGVuZCddXG4gICAgfSxcbiAgICBpbnRlcnZhbDoge1xuICAgICAgXCJkZWZhdWx0XCI6IDBcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBTZXQgaWYgY29tcG9uZW50IG5lZWRzIG11bHRpcGxlIGluc3RhbmNpbmcuXG4gICAqL1xuICBtdWx0aXBsZTogZmFsc2UsXG4gIC8qKlxuICAgKiBDYWxsZWQgb25jZSB3aGVuIGNvbXBvbmVudCBpcyBhdHRhY2hlZC4gR2VuZXJhbGx5IGZvciBpbml0aWFsIHNldHVwLlxuICAgKi9cbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyBjb25zdGFudHNcbiAgICB0aGlzLkhPVkVSX0VWRU5UID0gJ2hvdmVyLXN0YXJ0JztcbiAgICB0aGlzLlVOSE9WRVJfRVZFTlQgPSAnaG92ZXItZW5kJztcbiAgICB0aGlzLkdSQUJfRVZFTlQgPSAnZ3JhYi1zdGFydCc7XG4gICAgdGhpcy5VTkdSQUJfRVZFTlQgPSAnZ3JhYi1lbmQnO1xuICAgIHRoaXMuU1RSRVRDSF9FVkVOVCA9ICdzdHJldGNoLXN0YXJ0JztcbiAgICB0aGlzLlVOU1RSRVRDSF9FVkVOVCA9ICdzdHJldGNoLWVuZCc7XG4gICAgdGhpcy5EUkFHX0VWRU5UID0gJ2RyYWctc3RhcnQnO1xuICAgIHRoaXMuVU5EUkFHX0VWRU5UID0gJ2RyYWctZW5kJztcbiAgICB0aGlzLkRSQUdPVkVSX0VWRU5UID0gJ2RyYWdvdmVyLXN0YXJ0JztcbiAgICB0aGlzLlVORFJBR09WRVJfRVZFTlQgPSAnZHJhZ292ZXItZW5kJztcbiAgICB0aGlzLkRSQUdEUk9QX0VWRU5UID0gJ2RyYWctZHJvcCc7XG5cbiAgICAvLyBsaW5rcyB0byBvdGhlciBzeXN0ZW1zL2NvbXBvbmVudHNcbiAgICB0aGlzLm90aGVyU3VwZXJIYW5kID0gbnVsbDtcblxuICAgIC8vIHN0YXRlIHRyYWNraW5nIC0gZ2xvYmFsIGV2ZW50IGhhbmRsZXJzIChHRUgpXG4gICAgdGhpcy5nZWhEcmFnZ2VkID0gbmV3IFNldCgpO1xuICAgIHRoaXMuZ2VoQ2xpY2tpbmcgPSBuZXcgU2V0KCk7XG5cbiAgICAvLyBzdGF0ZSB0cmFja2luZyAtIHJlYWN0aW9uIGNvbXBvbmVudHNcbiAgICB0aGlzLmhvdmVyRWxzID0gW107XG4gICAgdGhpcy5ob3ZlckVsc0ludGVyc2VjdGlvbnMgPSBbXTtcbiAgICB0aGlzLnByZXZDaGVja1RpbWUgPSBudWxsO1xuICAgIHRoaXMuc3RhdGUgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIHRoaXMudW5Ib3ZlciA9IHRoaXMudW5Ib3Zlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMudW5XYXRjaCA9IHRoaXMudW5XYXRjaC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25IaXQgPSB0aGlzLm9uSGl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkdyYWJTdGFydEJ1dHRvbiA9IHRoaXMub25HcmFiU3RhcnRCdXR0b24uYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uR3JhYkVuZEJ1dHRvbiA9IHRoaXMub25HcmFiRW5kQnV0dG9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblN0cmV0Y2hTdGFydEJ1dHRvbiA9IHRoaXMub25TdHJldGNoU3RhcnRCdXR0b24uYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uU3RyZXRjaEVuZEJ1dHRvbiA9IHRoaXMub25TdHJldGNoRW5kQnV0dG9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkRyYWdEcm9wU3RhcnRCdXR0b24gPSB0aGlzLm9uRHJhZ0Ryb3BTdGFydEJ1dHRvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25EcmFnRHJvcEVuZEJ1dHRvbiA9IHRoaXMub25EcmFnRHJvcEVuZEJ1dHRvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc3lzdGVtLnJlZ2lzdGVyTWUodGhpcyk7XG4gIH0sXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBjb21wb25lbnQgaXMgYXR0YWNoZWQgYW5kIHdoZW4gY29tcG9uZW50IGRhdGEgY2hhbmdlcy5cbiAgICogR2VuZXJhbGx5IG1vZGlmaWVzIHRoZSBlbnRpdHkgYmFzZWQgb24gdGhlIGRhdGEuXG4gICAqL1xuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvbGREYXRhKSB7XG4gICAgdGhpcy51blJlZ2lzdGVyTGlzdGVuZXJzKG9sZERhdGEpO1xuICAgIHRoaXMucmVnaXN0ZXJMaXN0ZW5lcnMoKTtcbiAgfSxcbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGEgY29tcG9uZW50IGlzIHJlbW92ZWQgKGUuZy4sIHZpYSByZW1vdmVBdHRyaWJ1dGUpLlxuICAgKiBHZW5lcmFsbHkgdW5kb2VzIGFsbCBtb2RpZmljYXRpb25zIHRvIHRoZSBlbnRpdHkuXG4gICAqL1xuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICB0aGlzLnN5c3RlbS51bnJlZ2lzdGVyTWUodGhpcyk7XG4gICAgdGhpcy51blJlZ2lzdGVyTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5ob3ZlckVscy5sZW5ndGggPSAwO1xuICAgIGlmICh0aGlzLnN0YXRlLmdldCh0aGlzLkhPVkVSX0VWRU5UKSkge1xuICAgICAgdGhpcy5fdW5Ib3Zlcih0aGlzLnN0YXRlLmdldCh0aGlzLkhPVkVSX0VWRU5UKSk7XG4gICAgfVxuICAgIHRoaXMub25HcmFiRW5kQnV0dG9uKCk7XG4gICAgdGhpcy5vblN0cmV0Y2hFbmRCdXR0b24oKTtcbiAgICB0aGlzLm9uRHJhZ0Ryb3BFbmRCdXR0b24oKTtcbiAgfSxcbiAgdGljazogZnVuY3Rpb24gKCkge1xuICAgIC8vIGNsb3NlciBvYmplY3RzIGFuZCBvYmplY3RzIHdpdGggbm8gZGlzdGFuY2UgY29tZSBsYXRlciBpbiBsaXN0XG4gICAgZnVuY3Rpb24gc29ydGVyKGEsIGIpIHtcbiAgICAgIHZhciBhRGlzdCA9IGEuZGlzdGFuY2UgPT0gbnVsbCA/IC0xIDogYS5kaXN0YW5jZTtcbiAgICAgIHZhciBiRGlzdCA9IGIuZGlzdGFuY2UgPT0gbnVsbCA/IC0xIDogYi5kaXN0YW5jZTtcbiAgICAgIGlmIChhRGlzdCA8IGJEaXN0KSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgaWYgKGJEaXN0IDwgYURpc3QpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGltZSkge1xuICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICB2YXIgcHJldkNoZWNrVGltZSA9IHRoaXMucHJldkNoZWNrVGltZTtcbiAgICAgIGlmIChwcmV2Q2hlY2tUaW1lICYmIHRpbWUgLSBwcmV2Q2hlY2tUaW1lIDwgZGF0YS5pbnRlcnZhbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnByZXZDaGVja1RpbWUgPSB0aW1lO1xuICAgICAgdmFyIG9yZGVyQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5ob3ZlckVsc0ludGVyc2VjdGlvbnMuc29ydChzb3J0ZXIpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmhvdmVyRWxzSW50ZXJzZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5ob3ZlckVsc1tpXSAhPT0gdGhpcy5ob3ZlckVsc0ludGVyc2VjdGlvbnNbaV0ub2JqZWN0LmVsKSB7XG4gICAgICAgICAgb3JkZXJDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmhvdmVyRWxzW2ldID0gdGhpcy5ob3ZlckVsc0ludGVyc2VjdGlvbnNbaV0ub2JqZWN0LmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob3JkZXJDaGFuZ2VkKSB7XG4gICAgICAgIHRoaXMuaG92ZXIoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KCksXG4gIG9uR3JhYlN0YXJ0QnV0dG9uOiBmdW5jdGlvbiBvbkdyYWJTdGFydEJ1dHRvbihldnQpIHtcbiAgICB2YXIgY2FycmllZCA9IHRoaXMuc3RhdGUuZ2V0KHRoaXMuR1JBQl9FVkVOVCk7XG4gICAgdGhpcy5kaXNwYXRjaE1vdXNlRXZlbnRBbGwoJ21vdXNlZG93bicsIHRoaXMuZWwpO1xuICAgIHRoaXMuZ2VoQ2xpY2tpbmcgPSBuZXcgU2V0KHRoaXMuaG92ZXJFbHMpO1xuICAgIGlmICghY2FycmllZCkge1xuICAgICAgY2FycmllZCA9IHRoaXMuZmluZFRhcmdldCh0aGlzLkdSQUJfRVZFTlQsIHtcbiAgICAgICAgaGFuZDogdGhpcy5lbCxcbiAgICAgICAgYnV0dG9uRXZlbnQ6IGV2dFxuICAgICAgfSk7XG4gICAgICBpZiAoY2FycmllZCkge1xuICAgICAgICB0aGlzLnN0YXRlLnNldCh0aGlzLkdSQUJfRVZFTlQsIGNhcnJpZWQpO1xuICAgICAgICB0aGlzLl91bkhvdmVyKGNhcnJpZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgb25HcmFiRW5kQnV0dG9uOiBmdW5jdGlvbiBvbkdyYWJFbmRCdXR0b24oZXZ0KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICB2YXIgY2xpY2thYmxlcyA9IHRoaXMuaG92ZXJFbHMuZmlsdGVyKGZ1bmN0aW9uIChoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuZ2VoQ2xpY2tpbmcuaGFzKGgpO1xuICAgIH0pO1xuICAgIHZhciBncmFiYmVkID0gdGhpcy5zdGF0ZS5nZXQodGhpcy5HUkFCX0VWRU5UKTtcbiAgICB2YXIgZW5kRXZ0ID0ge1xuICAgICAgaGFuZDogdGhpcy5lbCxcbiAgICAgIGJ1dHRvbkV2ZW50OiBldnRcbiAgICB9O1xuICAgIHRoaXMuZGlzcGF0Y2hNb3VzZUV2ZW50QWxsKCdtb3VzZXVwJywgdGhpcy5lbCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGlja2FibGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoTW91c2VFdmVudChjbGlja2FibGVzW2ldLCAnY2xpY2snLCB0aGlzLmVsKTtcbiAgICB9XG4gICAgdGhpcy5nZWhDbGlja2luZy5jbGVhcigpO1xuICAgIC8vIGNoZWNrIGlmIGdyYWJiZWQgZW50aXR5IGFjY2VwdHMgdW5ncmFiIGV2ZW50XG4gICAgaWYgKGdyYWJiZWQgJiYgIXRoaXMuZW1pdENhbmNlbGFibGUoZ3JhYmJlZCwgdGhpcy5VTkdSQUJfRVZFTlQsIGVuZEV2dCkpIHtcbiAgICAgIC8qIHB1c2ggdG8gdG9wIG9mIHN0YWNrIHNvIGEgZHJvcCBmb2xsb3dlZCBieSByZS1ncmFiIGdldHMgdGhlIHNhbWVcbiAgICAgICAgIHRhcmdldCAqL1xuICAgICAgdGhpcy5wcm9tb3RlSG92ZXJlZEVsKHRoaXMuc3RhdGUuZ2V0KHRoaXMuR1JBQl9FVkVOVCkpO1xuICAgICAgdGhpcy5zdGF0ZVtcImRlbGV0ZVwiXSh0aGlzLkdSQUJfRVZFTlQpO1xuICAgICAgdGhpcy5ob3ZlcigpO1xuICAgIH1cbiAgfSxcbiAgb25TdHJldGNoU3RhcnRCdXR0b246IGZ1bmN0aW9uIG9uU3RyZXRjaFN0YXJ0QnV0dG9uKGV2dCkge1xuICAgIHZhciBzdHJldGNoZWQgPSB0aGlzLnN0YXRlLmdldCh0aGlzLlNUUkVUQ0hfRVZFTlQpO1xuICAgIGlmICghc3RyZXRjaGVkKSB7XG4gICAgICBzdHJldGNoZWQgPSB0aGlzLmZpbmRUYXJnZXQodGhpcy5TVFJFVENIX0VWRU5ULCB7XG4gICAgICAgIGhhbmQ6IHRoaXMuZWwsXG4gICAgICAgIGJ1dHRvbkV2ZW50OiBldnRcbiAgICAgIH0pO1xuICAgICAgaWYgKHN0cmV0Y2hlZCkge1xuICAgICAgICB0aGlzLnN0YXRlLnNldCh0aGlzLlNUUkVUQ0hfRVZFTlQsIHN0cmV0Y2hlZCk7XG4gICAgICAgIHRoaXMuX3VuSG92ZXIoc3RyZXRjaGVkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIG9uU3RyZXRjaEVuZEJ1dHRvbjogZnVuY3Rpb24gb25TdHJldGNoRW5kQnV0dG9uKGV2dCkge1xuICAgIHZhciBzdHJldGNoZWQgPSB0aGlzLnN0YXRlLmdldCh0aGlzLlNUUkVUQ0hfRVZFTlQpO1xuICAgIHZhciBlbmRFdnQgPSB7XG4gICAgICBoYW5kOiB0aGlzLmVsLFxuICAgICAgYnV0dG9uRXZlbnQ6IGV2dFxuICAgIH07XG4gICAgLy8gY2hlY2sgaWYgZW5kIGV2ZW50IGFjY2VwdGVkXG4gICAgaWYgKHN0cmV0Y2hlZCAmJiAhdGhpcy5lbWl0Q2FuY2VsYWJsZShzdHJldGNoZWQsIHRoaXMuVU5TVFJFVENIX0VWRU5ULCBlbmRFdnQpKSB7XG4gICAgICB0aGlzLnByb21vdGVIb3ZlcmVkRWwoc3RyZXRjaGVkKTtcbiAgICAgIHRoaXMuc3RhdGVbXCJkZWxldGVcIl0odGhpcy5TVFJFVENIX0VWRU5UKTtcbiAgICAgIHRoaXMuaG92ZXIoKTtcbiAgICB9XG4gIH0sXG4gIG9uRHJhZ0Ryb3BTdGFydEJ1dHRvbjogZnVuY3Rpb24gb25EcmFnRHJvcFN0YXJ0QnV0dG9uKGV2dCkge1xuICAgIHZhciBkcmFnZ2VkID0gdGhpcy5zdGF0ZS5nZXQodGhpcy5EUkFHX0VWRU5UKTtcbiAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5ob3ZlckVscy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuZ2VoRHJhZ2dlZCA9IG5ldyBTZXQodGhpcy5ob3ZlckVscyk7XG4gICAgICB0aGlzLmRpc3BhdGNoTW91c2VFdmVudEFsbCgnZHJhZ3N0YXJ0JywgdGhpcy5lbCk7XG4gICAgfVxuICAgIGlmICghZHJhZ2dlZCkge1xuICAgICAgLyogcHJlZmVyIGNhcnJpZWQgc28gdGhhdCBhIGRyYWcgc3RhcnRlZCBhZnRlciBhIGdyYWIgd2lsbCB3b3JrXG4gICAgICAgd2l0aCBjYXJyaWVkIGVsZW1lbnQgcmF0aGVyIHRoYW4gYSBjdXJyZW50bHkgaW50ZXJzZWN0ZWQgZHJvcCB0YXJnZXQuXG4gICAgICAgZmFsbCBiYWNrIHRvIHF1ZXVlIGluIGNhc2UgYSBkcmFnIGlzIGluaXRpYXRlZCBpbmRlcGVuZGVudFxuICAgICAgIG9mIGEgZ3JhYiAqL1xuICAgICAgaWYgKHRoaXMuc3RhdGUuZ2V0KHRoaXMuR1JBQl9FVkVOVCkgJiYgIXRoaXMuZW1pdENhbmNlbGFibGUodGhpcy5zdGF0ZS5nZXQodGhpcy5HUkFCX0VWRU5UKSwgdGhpcy5EUkFHX0VWRU5ULCB7XG4gICAgICAgIGhhbmQ6IHRoaXMuZWwsXG4gICAgICAgIGJ1dHRvbkV2ZW50OiBldnRcbiAgICAgIH0pKSB7XG4gICAgICAgIGRyYWdnZWQgPSB0aGlzLnN0YXRlLmdldCh0aGlzLkdSQUJfRVZFTlQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHJhZ2dlZCA9IHRoaXMuZmluZFRhcmdldCh0aGlzLkRSQUdfRVZFTlQsIHtcbiAgICAgICAgICBoYW5kOiB0aGlzLmVsLFxuICAgICAgICAgIGJ1dHRvbkV2ZW50OiBldnRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZHJhZ2dlZCkge1xuICAgICAgICB0aGlzLnN0YXRlLnNldCh0aGlzLkRSQUdfRVZFTlQsIGRyYWdnZWQpO1xuICAgICAgICB0aGlzLl91bkhvdmVyKGRyYWdnZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgb25EcmFnRHJvcEVuZEJ1dHRvbjogZnVuY3Rpb24gb25EcmFnRHJvcEVuZEJ1dHRvbihldnQpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICB2YXIgY2FycmllZCA9IHRoaXMuc3RhdGUuZ2V0KHRoaXMuRFJBR19FVkVOVCk7XG4gICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlOyAvLyBrZWVwIF91bkhvdmVyKCkgZnJvbSBhY3RpdmF0aW5nIGFub3RoZXIgZHJvcHRhcmdldFxuICAgIHRoaXMuZ2VoRHJhZ2dlZC5mb3JFYWNoKGZ1bmN0aW9uIChjYXJyaWVkKSB7XG4gICAgICBfdGhpczIuZGlzcGF0Y2hNb3VzZUV2ZW50KGNhcnJpZWQsICdkcmFnZW5kJywgX3RoaXMyLmVsKTtcbiAgICAgIC8vIGZpcmUgZXZlbnQgYm90aCB3YXlzIGZvciBhbGwgaW50ZXJzZWN0ZWQgdGFyZ2V0c1xuICAgICAgX3RoaXMyLmRpc3BhdGNoTW91c2VFdmVudEFsbCgnZHJvcCcsIGNhcnJpZWQsIHRydWUsIHRydWUpO1xuICAgICAgX3RoaXMyLmRpc3BhdGNoTW91c2VFdmVudEFsbCgnZHJhZ2xlYXZlJywgY2FycmllZCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSk7XG4gICAgdGhpcy5nZWhEcmFnZ2VkLmNsZWFyKCk7XG4gICAgaWYgKGNhcnJpZWQpIHtcbiAgICAgIHZhciBkZEV2dCA9IHtcbiAgICAgICAgaGFuZDogdGhpcy5lbCxcbiAgICAgICAgZHJvcHBlZDogY2FycmllZCxcbiAgICAgICAgb246IG51bGwsXG4gICAgICAgIGJ1dHRvbkV2ZW50OiBldnRcbiAgICAgIH07XG4gICAgICB2YXIgZW5kRXZ0ID0ge1xuICAgICAgICBoYW5kOiB0aGlzLmVsLFxuICAgICAgICBidXR0b25FdmVudDogZXZ0XG4gICAgICB9O1xuICAgICAgdmFyIGRyb3BUYXJnZXQgPSB0aGlzLmZpbmRUYXJnZXQodGhpcy5EUkFHRFJPUF9FVkVOVCwgZGRFdnQsIHRydWUpO1xuICAgICAgaWYgKGRyb3BUYXJnZXQpIHtcbiAgICAgICAgZGRFdnQub24gPSBkcm9wVGFyZ2V0O1xuICAgICAgICB0aGlzLmVtaXRDYW5jZWxhYmxlKGNhcnJpZWQsIHRoaXMuRFJBR0RST1BfRVZFTlQsIGRkRXZ0KTtcbiAgICAgICAgdGhpcy5fdW5Ib3Zlcihkcm9wVGFyZ2V0KTtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIGlmIGVuZCBldmVudCBhY2NlcHRlZFxuICAgICAgaWYgKCF0aGlzLmVtaXRDYW5jZWxhYmxlKGNhcnJpZWQsIHRoaXMuVU5EUkFHX0VWRU5ULCBlbmRFdnQpKSB7XG4gICAgICAgIHRoaXMucHJvbW90ZUhvdmVyZWRFbChjYXJyaWVkKTtcbiAgICAgICAgdGhpcy5zdGF0ZVtcImRlbGV0ZVwiXSh0aGlzLkRSQUdfRVZFTlQpO1xuICAgICAgICB0aGlzLmhvdmVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBwcm9jZXNzSGl0RWw6IGZ1bmN0aW9uIHByb2Nlc3NIaXRFbChoaXRFbCwgaW50ZXJzZWN0aW9uKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG4gICAgdmFyIGRpc3QgPSBpbnRlcnNlY3Rpb24gJiYgaW50ZXJzZWN0aW9uLmRpc3RhbmNlO1xuICAgIHZhciBzZWN0cyA9IHRoaXMuaG92ZXJFbHNJbnRlcnNlY3Rpb25zO1xuICAgIHZhciBob3ZlckVscyA9IHRoaXMuaG92ZXJFbHM7XG4gICAgdmFyIGhpdEVsSW5kZXggPSB0aGlzLmhvdmVyRWxzLmluZGV4T2YoaGl0RWwpO1xuICAgIHZhciBob3Zlck5lZWRzVXBkYXRlID0gZmFsc2U7XG4gICAgaWYgKGhpdEVsSW5kZXggPT09IC0xKSB7XG4gICAgICBob3Zlck5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgIC8vIGluc2VydCBpbiBvcmRlciBvZiBkaXN0YW5jZSB3aGVuIGF2YWlsYWJsZVxuICAgICAgaWYgKGRpc3QgIT0gbnVsbCkge1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgc2VjdHMubGVuZ3RoICYmIGRpc3QgPCBzZWN0c1tpXS5kaXN0YW5jZSkge1xuICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICBob3ZlckVscy5zcGxpY2UoaSwgMCwgaGl0RWwpO1xuICAgICAgICBzZWN0cy5zcGxpY2UoaSwgMCwgaW50ZXJzZWN0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhvdmVyRWxzLnB1c2goaGl0RWwpO1xuICAgICAgICBzZWN0cy5wdXNoKHtcbiAgICAgICAgICBvYmplY3Q6IHtcbiAgICAgICAgICAgIGVsOiBoaXRFbFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLmRpc3BhdGNoTW91c2VFdmVudChoaXRFbCwgJ21vdXNlb3ZlcicsIHRoaXMuZWwpO1xuICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcgJiYgdGhpcy5nZWhEcmFnZ2VkLnNpemUpIHtcbiAgICAgICAgLy8gZXZlbnRzIG9uIHRhcmdldHMgYW5kIG9uIGRyYWdnZWRcbiAgICAgICAgdGhpcy5nZWhEcmFnZ2VkLmZvckVhY2goZnVuY3Rpb24gKGRyYWdnZWQpIHtcbiAgICAgICAgICBfdGhpczMuZGlzcGF0Y2hNb3VzZUV2ZW50QWxsKCdkcmFnZW50ZXInLCBkcmFnZ2VkLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBob3Zlck5lZWRzVXBkYXRlO1xuICB9LFxuICBvbkhpdDogZnVuY3Rpb24gb25IaXQoZXZ0KSB7XG4gICAgdmFyIGhpdEVsID0gZXZ0LmRldGFpbFt0aGlzLmRhdGEuY29sbGlkZXJFdmVudFByb3BlcnR5XTtcbiAgICB2YXIgaG92ZXJOZWVkc1VwZGF0ZSA9IDA7XG4gICAgaWYgKCFoaXRFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShoaXRFbCkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBzZWN0OyBpIDwgaGl0RWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2VjdCA9IGV2dC5kZXRhaWwuaW50ZXJzZWN0aW9ucyAmJiBldnQuZGV0YWlsLmludGVyc2VjdGlvbnNbaV07XG4gICAgICAgIGhvdmVyTmVlZHNVcGRhdGUgKz0gdGhpcy5wcm9jZXNzSGl0RWwoaGl0RWxbaV0sIHNlY3QpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBob3Zlck5lZWRzVXBkYXRlICs9IHRoaXMucHJvY2Vzc0hpdEVsKGhpdEVsLCBudWxsKTtcbiAgICB9XG4gICAgaWYgKGhvdmVyTmVlZHNVcGRhdGUpIHtcbiAgICAgIHRoaXMuaG92ZXIoKTtcbiAgICB9XG4gIH0sXG4gIC8qIHNlYXJjaCBjb2xsaWRlZCBlbnRpdGllcyBmb3IgdGFyZ2V0IHRvIGhvdmVyL2RyYWdvdmVyICovXG4gIGhvdmVyOiBmdW5jdGlvbiBob3ZlcigpIHtcbiAgICB2YXIgaHZyZXZ0LCBob3ZlckVsO1xuICAgIC8vIGVuZCBwcmV2aW91cyBob3ZlclxuICAgIGlmICh0aGlzLnN0YXRlLmhhcyh0aGlzLkhPVkVSX0VWRU5UKSkge1xuICAgICAgdGhpcy5fdW5Ib3Zlcih0aGlzLnN0YXRlLmdldCh0aGlzLkhPVkVSX0VWRU5UKSwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLnN0YXRlLmhhcyh0aGlzLkRSQUdPVkVSX0VWRU5UKSkge1xuICAgICAgdGhpcy5fdW5Ib3Zlcih0aGlzLnN0YXRlLmdldCh0aGlzLkRSQUdPVkVSX0VWRU5UKSwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmRyYWdnaW5nICYmIHRoaXMuc3RhdGUuZ2V0KHRoaXMuRFJBR19FVkVOVCkpIHtcbiAgICAgIGh2cmV2dCA9IHtcbiAgICAgICAgaGFuZDogdGhpcy5lbCxcbiAgICAgICAgaG92ZXJlZDogaG92ZXJFbCxcbiAgICAgICAgY2FycmllZDogdGhpcy5zdGF0ZS5nZXQodGhpcy5EUkFHX0VWRU5UKVxuICAgICAgfTtcbiAgICAgIGhvdmVyRWwgPSB0aGlzLmZpbmRUYXJnZXQodGhpcy5EUkFHT1ZFUl9FVkVOVCwgaHZyZXZ0LCB0cnVlKTtcbiAgICAgIGlmIChob3ZlckVsKSB7XG4gICAgICAgIHRoaXMuZW1pdENhbmNlbGFibGUodGhpcy5zdGF0ZS5nZXQodGhpcy5EUkFHX0VWRU5UKSwgdGhpcy5EUkFHT1ZFUl9FVkVOVCwgaHZyZXZ0KTtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXQodGhpcy5EUkFHT1ZFUl9FVkVOVCwgaG92ZXJFbCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGZhbGxiYWNrIHRvIGhvdmVyIGlmIG5vdCBkcmFnZ2luZyBvciBkcmFnb3ZlciB3YXNuJ3Qgc3VjY2Vzc2Z1bFxuICAgIGlmICghdGhpcy5zdGF0ZS5oYXModGhpcy5EUkFHT1ZFUl9FVkVOVCkpIHtcbiAgICAgIGhvdmVyRWwgPSB0aGlzLmZpbmRUYXJnZXQodGhpcy5IT1ZFUl9FVkVOVCwge1xuICAgICAgICBoYW5kOiB0aGlzLmVsXG4gICAgICB9LCB0cnVlKTtcbiAgICAgIGlmIChob3ZlckVsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2V0KHRoaXMuSE9WRVJfRVZFTlQsIGhvdmVyRWwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgLyogY2FsbGVkIHdoZW4gY29udHJvbGxlciBtb3ZlcyBvdXQgb2YgY29sbGlzaW9uIHJhbmdlIG9mIGVudGl0eSAqL1xuICB1bkhvdmVyOiBmdW5jdGlvbiB1bkhvdmVyKGV2dCkge1xuICAgIHZhciBfdGhpczQgPSB0aGlzO1xuICAgIHZhciBjbGVhcmVkRWxzID0gZXZ0LmRldGFpbFt0aGlzLmRhdGEuY29sbGlkZXJFbmRFdmVudFByb3BlcnR5XTtcbiAgICBpZiAoY2xlYXJlZEVscykge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2xlYXJlZEVscykpIHtcbiAgICAgICAgY2xlYXJlZEVscy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczQuX3VuSG92ZXIoZWwpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3VuSG92ZXIoY2xlYXJlZEVscyk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAvKiBpbm5lciB1bkhvdmVyIHN0ZXBzIG5lZWRlZCByZWdhcmRsZXNzIG9mIGNhdXNlIG9mIHVuSG92ZXIgKi9cbiAgX3VuSG92ZXI6IGZ1bmN0aW9uIF91bkhvdmVyKGVsLCBza2lwTmV4dEhvdmVyKSB7XG4gICAgdmFyIHVuSG92ZXJlZCA9IGZhbHNlO1xuICAgIHZhciBldnQ7XG4gICAgaWYgKGVsID09PSB0aGlzLnN0YXRlLmdldCh0aGlzLkRSQUdPVkVSX0VWRU5UKSkge1xuICAgICAgdGhpcy5zdGF0ZVtcImRlbGV0ZVwiXSh0aGlzLkRSQUdPVkVSX0VWRU5UKTtcbiAgICAgIHVuSG92ZXJlZCA9IHRydWU7XG4gICAgICBldnQgPSB7XG4gICAgICAgIGhhbmQ6IHRoaXMuZWwsXG4gICAgICAgIGhvdmVyZWQ6IGVsLFxuICAgICAgICBjYXJyaWVkOiB0aGlzLnN0YXRlLmdldCh0aGlzLkRSQUdfRVZFTlQpXG4gICAgICB9O1xuICAgICAgdGhpcy5lbWl0Q2FuY2VsYWJsZShlbCwgdGhpcy5VTkRSQUdPVkVSX0VWRU5ULCBldnQpO1xuICAgICAgaWYgKHRoaXMuc3RhdGUuaGFzKHRoaXMuRFJBR19FVkVOVCkpIHtcbiAgICAgICAgdGhpcy5lbWl0Q2FuY2VsYWJsZSh0aGlzLnN0YXRlLmdldCh0aGlzLkRSQUdfRVZFTlQpLCB0aGlzLlVORFJBR09WRVJfRVZFTlQsIGV2dCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbCA9PT0gdGhpcy5zdGF0ZS5nZXQodGhpcy5IT1ZFUl9FVkVOVCkpIHtcbiAgICAgIHRoaXMuc3RhdGVbXCJkZWxldGVcIl0odGhpcy5IT1ZFUl9FVkVOVCk7XG4gICAgICB1bkhvdmVyZWQgPSB0cnVlO1xuICAgICAgdGhpcy5lbWl0Q2FuY2VsYWJsZShlbCwgdGhpcy5VTkhPVkVSX0VWRU5ULCB7XG4gICAgICAgIGhhbmQ6IHRoaXMuZWxcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBhY3RpdmF0ZSBuZXh0IHRhcmdldCwgaWYgcHJlc2VudFxuICAgIGlmICh1bkhvdmVyZWQgJiYgIXNraXBOZXh0SG92ZXIpIHtcbiAgICAgIHRoaXMuaG92ZXIoKTtcbiAgICB9XG4gIH0sXG4gIHVuV2F0Y2g6IGZ1bmN0aW9uIHVuV2F0Y2goZXZ0KSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG4gICAgdmFyIGNsZWFyZWRFbHMgPSBldnQuZGV0YWlsW3RoaXMuZGF0YS5jb2xsaWRlckVuZEV2ZW50UHJvcGVydHldO1xuICAgIGlmIChjbGVhcmVkRWxzKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjbGVhcmVkRWxzKSkge1xuICAgICAgICBjbGVhcmVkRWxzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzNS5fdW5XYXRjaChlbCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGVwcmVjYXRpb24gcGF0aDogc3BoZXJlLWNvbGxpZGVyXG4gICAgICAgIHRoaXMuX3VuV2F0Y2goY2xlYXJlZEVscyk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBfdW5XYXRjaDogZnVuY3Rpb24gX3VuV2F0Y2godGFyZ2V0KSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG4gICAgdmFyIGhvdmVySW5kZXggPSB0aGlzLmhvdmVyRWxzLmluZGV4T2YodGFyZ2V0KTtcbiAgICBpZiAoaG92ZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuaG92ZXJFbHMuc3BsaWNlKGhvdmVySW5kZXgsIDEpO1xuICAgICAgdGhpcy5ob3ZlckVsc0ludGVyc2VjdGlvbnMuc3BsaWNlKGhvdmVySW5kZXgsIDEpO1xuICAgIH1cbiAgICB0aGlzLmdlaERyYWdnZWQuZm9yRWFjaChmdW5jdGlvbiAoZHJhZ2dlZCkge1xuICAgICAgX3RoaXM2LmRpc3BhdGNoTW91c2VFdmVudCh0YXJnZXQsICdkcmFnbGVhdmUnLCBkcmFnZ2VkKTtcbiAgICAgIF90aGlzNi5kaXNwYXRjaE1vdXNlRXZlbnQoZHJhZ2dlZCwgJ2RyYWdsZWF2ZScsIHRhcmdldCk7XG4gICAgfSk7XG4gICAgdGhpcy5kaXNwYXRjaE1vdXNlRXZlbnQodGFyZ2V0LCAnbW91c2VvdXQnLCB0aGlzLmVsKTtcbiAgfSxcbiAgcmVnaXN0ZXJMaXN0ZW5lcnM6IGZ1bmN0aW9uIHJlZ2lzdGVyTGlzdGVuZXJzKCkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmRhdGEuY29sbGlkZXJFdmVudCwgdGhpcy5vbkhpdCk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuZGF0YS5jb2xsaWRlckVuZEV2ZW50LCB0aGlzLnVuV2F0Y2gpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmRhdGEuY29sbGlkZXJFbmRFdmVudCwgdGhpcy51bkhvdmVyKTtcblxuICAgIC8vIGJpbmRpbmcgb3JkZXIgdG8ga2VlcCBncmFiRW5kIGZyb20gdHJpZ2dlcmluZyBkcmFnb3ZlclxuICAgIC8vIGFnYWluIGJlZm9yZSBkcmFnRHJvcEVuZCBjYW4gZGVsZXRlIGl0cyBjYXJyaWVkIHN0YXRlXG4gICAgdGhpcy5kYXRhLmdyYWJTdGFydEJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgX3RoaXM3LmVsLmFkZEV2ZW50TGlzdGVuZXIoYiwgX3RoaXM3Lm9uR3JhYlN0YXJ0QnV0dG9uKTtcbiAgICB9KTtcbiAgICB0aGlzLmRhdGEuc3RyZXRjaFN0YXJ0QnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICBfdGhpczcuZWwuYWRkRXZlbnRMaXN0ZW5lcihiLCBfdGhpczcub25TdHJldGNoU3RhcnRCdXR0b24pO1xuICAgIH0pO1xuICAgIHRoaXMuZGF0YS5kcmFnRHJvcFN0YXJ0QnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICBfdGhpczcuZWwuYWRkRXZlbnRMaXN0ZW5lcihiLCBfdGhpczcub25EcmFnRHJvcFN0YXJ0QnV0dG9uKTtcbiAgICB9KTtcbiAgICB0aGlzLmRhdGEuZHJhZ0Ryb3BFbmRCdXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICAgIF90aGlzNy5lbC5hZGRFdmVudExpc3RlbmVyKGIsIF90aGlzNy5vbkRyYWdEcm9wRW5kQnV0dG9uKTtcbiAgICB9KTtcbiAgICB0aGlzLmRhdGEuc3RyZXRjaEVuZEJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgX3RoaXM3LmVsLmFkZEV2ZW50TGlzdGVuZXIoYiwgX3RoaXM3Lm9uU3RyZXRjaEVuZEJ1dHRvbik7XG4gICAgfSk7XG4gICAgdGhpcy5kYXRhLmdyYWJFbmRCdXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICAgIF90aGlzNy5lbC5hZGRFdmVudExpc3RlbmVyKGIsIF90aGlzNy5vbkdyYWJFbmRCdXR0b24pO1xuICAgIH0pO1xuICB9LFxuICB1blJlZ2lzdGVyTGlzdGVuZXJzOiBmdW5jdGlvbiB1blJlZ2lzdGVyTGlzdGVuZXJzKGRhdGEpIHtcbiAgICB2YXIgX3RoaXM4ID0gdGhpcztcbiAgICBkYXRhID0gZGF0YSB8fCB0aGlzLmRhdGE7XG4gICAgaWYgKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gRW1wdHkgb2JqZWN0IHBhc3NlZCBvbiBpbml0YWxpemF0aW9uXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihkYXRhLmNvbGxpZGVyRXZlbnQsIHRoaXMub25IaXQpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihkYXRhLmNvbGxpZGVyRW5kRXZlbnQsIHRoaXMudW5Ib3Zlcik7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKGRhdGEuY29sbGlkZXJFbmRFdmVudCwgdGhpcy51bldhdGNoKTtcbiAgICBkYXRhLmdyYWJTdGFydEJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgX3RoaXM4LmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoYiwgX3RoaXM4Lm9uR3JhYlN0YXJ0QnV0dG9uKTtcbiAgICB9KTtcbiAgICBkYXRhLmdyYWJFbmRCdXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICAgIF90aGlzOC5lbC5yZW1vdmVFdmVudExpc3RlbmVyKGIsIF90aGlzOC5vbkdyYWJFbmRCdXR0b24pO1xuICAgIH0pO1xuICAgIGRhdGEuc3RyZXRjaFN0YXJ0QnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICBfdGhpczguZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLCBfdGhpczgub25TdHJldGNoU3RhcnRCdXR0b24pO1xuICAgIH0pO1xuICAgIGRhdGEuc3RyZXRjaEVuZEJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgX3RoaXM4LmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoYiwgX3RoaXM4Lm9uU3RyZXRjaEVuZEJ1dHRvbik7XG4gICAgfSk7XG4gICAgZGF0YS5kcmFnRHJvcFN0YXJ0QnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICBfdGhpczguZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLCBfdGhpczgub25EcmFnRHJvcFN0YXJ0QnV0dG9uKTtcbiAgICB9KTtcbiAgICBkYXRhLmRyYWdEcm9wRW5kQnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICBfdGhpczguZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLCBfdGhpczgub25EcmFnRHJvcEVuZEJ1dHRvbik7XG4gICAgfSk7XG4gIH0sXG4gIGVtaXRDYW5jZWxhYmxlOiBmdW5jdGlvbiBlbWl0Q2FuY2VsYWJsZSh0YXJnZXQsIG5hbWUsIGRldGFpbCkge1xuICAgIGRldGFpbCA9IGRldGFpbCB8fCB7fTtcbiAgICB2YXIgZGF0YSA9IHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgZGV0YWlsOiBkZXRhaWxcbiAgICB9O1xuICAgIGRhdGEuZGV0YWlsLnRhcmdldCA9IGRhdGEuZGV0YWlsLnRhcmdldCB8fCB0YXJnZXQ7XG4gICAgdmFyIGV2dCA9IG5ldyB3aW5kb3cuQ3VzdG9tRXZlbnQobmFtZSwgZGF0YSk7XG4gICAgcmV0dXJuIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gIH0sXG4gIGRpc3BhdGNoTW91c2VFdmVudDogZnVuY3Rpb24gZGlzcGF0Y2hNb3VzZUV2ZW50KHRhcmdldCwgbmFtZSwgcmVsYXRlZFRhcmdldCkge1xuICAgIHZhciBtRXZ0ID0gbmV3IHdpbmRvdy5Nb3VzZUV2ZW50KG5hbWUsIHtcbiAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXRcbiAgICB9KTtcbiAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChtRXZ0KTtcbiAgfSxcbiAgZGlzcGF0Y2hNb3VzZUV2ZW50QWxsOiBmdW5jdGlvbiBkaXNwYXRjaE1vdXNlRXZlbnRBbGwobmFtZSwgcmVsYXRlZFRhcmdldCwgZmlsdGVyVXNlZCwgYWxzb1JldmVyc2UpIHtcbiAgICB2YXIgX3RoaXM5ID0gdGhpcztcbiAgICB2YXIgZWxzID0gdGhpcy5ob3ZlckVscztcbiAgICBpZiAoZmlsdGVyVXNlZCkge1xuICAgICAgZWxzID0gZWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsICE9PSBfdGhpczkuc3RhdGUuZ2V0KF90aGlzOS5HUkFCX0VWRU5UKSAmJiBlbCAhPT0gX3RoaXM5LnN0YXRlLmdldChfdGhpczkuRFJBR19FVkVOVCkgJiYgZWwgIT09IF90aGlzOS5zdGF0ZS5nZXQoX3RoaXM5LlNUUkVUQ0hfRVZFTlQpICYmICFfdGhpczkuZ2VoRHJhZ2dlZC5oYXMoZWwpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChhbHNvUmV2ZXJzZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaE1vdXNlRXZlbnQoZWxzW2ldLCBuYW1lLCByZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaE1vdXNlRXZlbnQocmVsYXRlZFRhcmdldCwgbmFtZSwgZWxzW2ldKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGVscy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaE1vdXNlRXZlbnQoZWxzW19pXSwgbmFtZSwgcmVsYXRlZFRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBmaW5kVGFyZ2V0OiBmdW5jdGlvbiBmaW5kVGFyZ2V0KGV2VHlwZSwgZGV0YWlsLCBmaWx0ZXJVc2VkKSB7XG4gICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuICAgIHZhciBlbEluZGV4O1xuICAgIHZhciBlbGlnaWJsZUVscyA9IHRoaXMuaG92ZXJFbHM7XG4gICAgaWYgKGZpbHRlclVzZWQpIHtcbiAgICAgIGVsaWdpYmxlRWxzID0gZWxpZ2libGVFbHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwgIT09IF90aGlzMTAuc3RhdGUuZ2V0KF90aGlzMTAuR1JBQl9FVkVOVCkgJiYgZWwgIT09IF90aGlzMTAuc3RhdGUuZ2V0KF90aGlzMTAuRFJBR19FVkVOVCkgJiYgZWwgIT09IF90aGlzMTAuc3RhdGUuZ2V0KF90aGlzMTAuU1RSRVRDSF9FVkVOVCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZm9yIChlbEluZGV4ID0gZWxpZ2libGVFbHMubGVuZ3RoIC0gMTsgZWxJbmRleCA+PSAwOyBlbEluZGV4LS0pIHtcbiAgICAgIGlmICghdGhpcy5lbWl0Q2FuY2VsYWJsZShlbGlnaWJsZUVsc1tlbEluZGV4XSwgZXZUeXBlLCBkZXRhaWwpKSB7XG4gICAgICAgIHJldHVybiBlbGlnaWJsZUVsc1tlbEluZGV4XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIC8vIEhlbHBlciB0byBlbnN1cmUgZHJvcHBpbmcgYW5kIHJlZ3JhYmJpbmcgZmluZHMgdGhlIHNhbWUgdGFyZ2V0IGZvclxuICAvLyBmb3Igb3JkZXItc29ydGVkIGhvdmVyRWxzIChncmFiYmluZzsgbm8tb3AgZm9yIGRpc3RhbmNlLXNvcnRlZCAocG9pbnRpbmcpXG4gIHByb21vdGVIb3ZlcmVkRWw6IGZ1bmN0aW9uIHByb21vdGVIb3ZlcmVkRWwoZWwpIHtcbiAgICB2YXIgaG92ZXJJbmRleCA9IHRoaXMuaG92ZXJFbHMuaW5kZXhPZihlbCk7XG4gICAgaWYgKGhvdmVySW5kZXggIT09IC0xICYmIHRoaXMuaG92ZXJFbHNJbnRlcnNlY3Rpb25zW2hvdmVySW5kZXhdLmRpc3RhbmNlID09IG51bGwpIHtcbiAgICAgIHRoaXMuaG92ZXJFbHMuc3BsaWNlKGhvdmVySW5kZXgsIDEpO1xuICAgICAgdmFyIHNlY3QgPSB0aGlzLmhvdmVyRWxzSW50ZXJzZWN0aW9ucy5zcGxpY2UoaG92ZXJJbmRleCwgMSk7XG4gICAgICB0aGlzLmhvdmVyRWxzLnB1c2goZWwpO1xuICAgICAgdGhpcy5ob3ZlckVsc0ludGVyc2VjdGlvbnMucHVzaChzZWN0WzBdKTtcbiAgICB9XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9jbGlja2FibGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2NsaWNrYWJsZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3VudXNlZF93ZWJwYWNrX2V4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuLyogZ2xvYmFsIEFGUkFNRSAqL1xudmFyIGJ1dHRvbkNvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3Byb3RvdHlwZXMvYnV0dG9ucy1wcm90by5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL3Byb3RvdHlwZXMvYnV0dG9ucy1wcm90by5qc1wiKTtcbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnY2xpY2thYmxlJywgQUZSQU1FLnV0aWxzLmV4dGVuZERlZXAoe30sIGJ1dHRvbkNvcmUsIHtcbiAgc2NoZW1hOiB7XG4gICAgb25jbGljazoge1xuICAgICAgdHlwZTogJ3N0cmluZydcbiAgICB9XG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdGhpcy5DTElDS0VEX1NUQVRFID0gJ2NsaWNrZWQnO1xuICAgIHRoaXMuQ0xJQ0tfRVZFTlQgPSAnZ3JhYi1zdGFydCc7XG4gICAgdGhpcy5VTkNMSUNLX0VWRU5UID0gJ2dyYWItZW5kJztcbiAgICB0aGlzLmNsaWNrZXJzID0gW107XG4gICAgdGhpcy5zdGFydCA9IHRoaXMuc3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmVuZCA9IHRoaXMuZW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuQ0xJQ0tfRVZFTlQsIHRoaXMuc3RhcnQpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlVOQ0xJQ0tfRVZFTlQsIHRoaXMuZW5kKTtcbiAgfSxcbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuQ0xJQ0tfRVZFTlQsIHRoaXMuc3RhcnQpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLlVOQ0xJQ0tfRVZFTlQsIHRoaXMuZW5kKTtcbiAgfSxcbiAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0KGV2dCkge1xuICAgIGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCB8fCAhdGhpcy5zdGFydEJ1dHRvbk9rKGV2dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbC5hZGRTdGF0ZSh0aGlzLkNMSUNLRURfU1RBVEUpO1xuICAgIGlmICh0aGlzLmNsaWNrZXJzLmluZGV4T2YoZXZ0LmRldGFpbC5oYW5kKSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuY2xpY2tlcnMucHVzaChldnQuZGV0YWlsLmhhbmQpO1xuICAgICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGVuZDogZnVuY3Rpb24gZW5kKGV2dCkge1xuICAgIHZhciBoYW5kSW5kZXggPSB0aGlzLmNsaWNrZXJzLmluZGV4T2YoZXZ0LmRldGFpbC5oYW5kKTtcbiAgICBpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQgfHwgIXRoaXMuZW5kQnV0dG9uT2soZXZ0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaGFuZEluZGV4ICE9PSAtMSkge1xuICAgICAgdGhpcy5jbGlja2Vycy5zcGxpY2UoaGFuZEluZGV4LCAxKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2xpY2tlcnMubGVuZ3RoIDwgMSkge1xuICAgICAgdGhpcy5lbC5yZW1vdmVTdGF0ZSh0aGlzLkNMSUNLRURfU1RBVEUpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cbn0pKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvZHJhZy1kcm9wcGFibGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvZHJhZy1kcm9wcGFibGUuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3VudXNlZF93ZWJwYWNrX2V4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuLyogZ2xvYmFsIEFGUkFNRSAqL1xudmFyIGluaGVyaXQgPSBBRlJBTUUudXRpbHMuZXh0ZW5kRGVlcDtcbnZhciBidXR0b25Db3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanNcIik7XG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2RyYWctZHJvcHBhYmxlJywgaW5oZXJpdCh7fSwgYnV0dG9uQ29yZSwge1xuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIGNvbnNvbGUud2FybignV2FybmluZzogZHJhZy1kcm9wcGFibGUgaXMgZGVwcmVjYXRlZC4gVXNlIGRyYWdnYWJsZSBhbmQgZHJvcHBhYmxlIGNvbXBvbmVudHMgaW5zdGVhZCcpO1xuICAgIHRoaXMuSE9WRVJFRF9TVEFURSA9ICdkcmFnb3Zlcic7XG4gICAgdGhpcy5EUkFHR0VEX1NUQVRFID0gJ2RyYWdnZWQnO1xuICAgIHRoaXMuSE9WRVJfRVZFTlQgPSAnZHJhZ292ZXItc3RhcnQnO1xuICAgIHRoaXMuVU5IT1ZFUl9FVkVOVCA9ICdkcmFnb3Zlci1lbmQnO1xuICAgIHRoaXMuRFJBR19FVkVOVCA9ICdkcmFnLXN0YXJ0JztcbiAgICB0aGlzLlVORFJBR19FVkVOVCA9ICdkcmFnLWVuZCc7XG4gICAgdGhpcy5EUkFHRFJPUF9FVkVOVCA9ICdkcmFnLWRyb3AnO1xuICAgIHRoaXMuaG92ZXJTdGFydCA9IHRoaXMuaG92ZXJTdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZHJhZ1N0YXJ0ID0gdGhpcy5kcmFnU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhvdmVyRW5kID0gdGhpcy5ob3ZlckVuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZHJhZ0VuZCA9IHRoaXMuZHJhZ0VuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZHJhZ0Ryb3AgPSB0aGlzLmRyYWdEcm9wLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuSE9WRVJfRVZFTlQsIHRoaXMuaG92ZXJTdGFydCk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuRFJBR19FVkVOVCwgdGhpcy5kcmFnU3RhcnQpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlVOSE9WRVJfRVZFTlQsIHRoaXMuaG92ZXJFbmQpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlVORFJBR19FVkVOVCwgdGhpcy5kcmFnRW5kKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5EUkFHRFJPUF9FVkVOVCwgdGhpcy5kcmFnRHJvcCk7XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLkhPVkVSX0VWRU5ULCB0aGlzLmhvdmVyU3RhcnQpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLkRSQUdfRVZFTlQsIHRoaXMuZHJhZ1N0YXJ0KTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5VTkhPVkVSX0VWRU5ULCB0aGlzLmhvdmVyRW5kKTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5VTkRSQUdfRVZFTlQsIHRoaXMuZHJhZ0VuZCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuRFJBR0RST1BfRVZFTlQsIHRoaXMuZHJhZ0Ryb3ApO1xuICB9LFxuICBob3ZlclN0YXJ0OiBmdW5jdGlvbiBob3ZlclN0YXJ0KGV2dCkge1xuICAgIHRoaXMuZWwuYWRkU3RhdGUodGhpcy5IT1ZFUkVEX1NUQVRFKTtcbiAgICBpZiAoZXZ0LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sXG4gIGRyYWdTdGFydDogZnVuY3Rpb24gZHJhZ1N0YXJ0KGV2dCkge1xuICAgIGlmICghdGhpcy5zdGFydEJ1dHRvbk9rKGV2dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbC5hZGRTdGF0ZSh0aGlzLkRSQUdHRURfU1RBVEUpO1xuICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSxcbiAgaG92ZXJFbmQ6IGZ1bmN0aW9uIGhvdmVyRW5kKGV2dCkge1xuICAgIHRoaXMuZWwucmVtb3ZlU3RhdGUodGhpcy5IT1ZFUkVEX1NUQVRFKTtcbiAgfSxcbiAgZHJhZ0VuZDogZnVuY3Rpb24gZHJhZ0VuZChldnQpIHtcbiAgICBpZiAoIXRoaXMuZW5kQnV0dG9uT2soZXZ0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVsLnJlbW92ZVN0YXRlKHRoaXMuRFJBR0dFRF9TVEFURSk7XG4gICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LFxuICBkcmFnRHJvcDogZnVuY3Rpb24gZHJhZ0Ryb3AoZXZ0KSB7XG4gICAgaWYgKCF0aGlzLmVuZEJ1dHRvbk9rKGV2dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG59KSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2RyYWdnYWJsZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvZHJhZ2dhYmxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fdW51c2VkX3dlYnBhY2tfZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG4vKiBnbG9iYWwgQUZSQU1FICovXG52YXIgaW5oZXJpdCA9IEFGUkFNRS51dGlscy5leHRlbmREZWVwO1xudmFyIGJ1dHRvbkNvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3Byb3RvdHlwZXMvYnV0dG9ucy1wcm90by5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL3Byb3RvdHlwZXMvYnV0dG9ucy1wcm90by5qc1wiKTtcbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZHJhZ2dhYmxlJywgaW5oZXJpdCh7fSwgYnV0dG9uQ29yZSwge1xuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMuRFJBR0dFRF9TVEFURSA9ICdkcmFnZ2VkJztcbiAgICB0aGlzLkRSQUdfRVZFTlQgPSAnZHJhZy1zdGFydCc7XG4gICAgdGhpcy5VTkRSQUdfRVZFTlQgPSAnZHJhZy1lbmQnO1xuICAgIHRoaXMuZHJhZ1N0YXJ0Qm91bmQgPSB0aGlzLmRyYWdTdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZHJhZ0VuZEJvdW5kID0gdGhpcy5kcmFnRW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuRFJBR19FVkVOVCwgdGhpcy5kcmFnU3RhcnRCb3VuZCk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuVU5EUkFHX0VWRU5ULCB0aGlzLmRyYWdFbmRCb3VuZCk7XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLkRSQUdfRVZFTlQsIHRoaXMuZHJhZ1N0YXJ0KTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5VTkRSQUdfRVZFTlQsIHRoaXMuZHJhZ0VuZCk7XG4gIH0sXG4gIGRyYWdTdGFydDogZnVuY3Rpb24gZHJhZ1N0YXJ0KGV2dCkge1xuICAgIGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCB8fCAhdGhpcy5zdGFydEJ1dHRvbk9rKGV2dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbC5hZGRTdGF0ZSh0aGlzLkRSQUdHRURfU1RBVEUpO1xuICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSxcbiAgZHJhZ0VuZDogZnVuY3Rpb24gZHJhZ0VuZChldnQpIHtcbiAgICBpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQgfHwgIXRoaXMuZW5kQnV0dG9uT2soZXZ0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVsLnJlbW92ZVN0YXRlKHRoaXMuRFJBR0dFRF9TVEFURSk7XG4gICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG59KSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2Ryb3BwYWJsZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvZHJvcHBhYmxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoKSA9PiB7XG5cbmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXRbXCJyZXR1cm5cIl0gIT0gbnVsbCkgaXRbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfVxuLyogZ2xvYmFsIEFGUkFNRSAqL1xuZnVuY3Rpb24gZWxlbWVudE1hdGNoZXMoZWwsIHNlbGVjdG9yKSB7XG4gIGlmIChlbC5tYXRjaGVzKSB7XG4gICAgcmV0dXJuIGVsLm1hdGNoZXMoc2VsZWN0b3IpO1xuICB9XG4gIGlmIChlbC5tc01hdGNoZXNTZWxlY3Rvcikge1xuICAgIHJldHVybiBlbC5tc01hdGNoZXNTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cbiAgaWYgKGVsLndlYmtpdE1hdGNoZXNTZWxlY3Rvcikge1xuICAgIHJldHVybiBlbC53ZWJraXRNYXRjaGVzU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG59XG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2Ryb3BwYWJsZScsIHtcbiAgc2NoZW1hOiB7XG4gICAgYWNjZXB0czoge1xuICAgICAgXCJkZWZhdWx0XCI6ICcnXG4gICAgfSxcbiAgICBhdXRvVXBkYXRlOiB7XG4gICAgICBcImRlZmF1bHRcIjogdHJ1ZVxuICAgIH0sXG4gICAgYWNjZXB0RXZlbnQ6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnJ1xuICAgIH0sXG4gICAgcmVqZWN0RXZlbnQ6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnJ1xuICAgIH1cbiAgfSxcbiAgbXVsdGlwbGU6IHRydWUsXG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdGhpcy5IT1ZFUkVEX1NUQVRFID0gJ2RyYWdvdmVyJztcbiAgICB0aGlzLkhPVkVSX0VWRU5UID0gJ2RyYWdvdmVyLXN0YXJ0JztcbiAgICB0aGlzLlVOSE9WRVJfRVZFTlQgPSAnZHJhZ292ZXItZW5kJztcbiAgICB0aGlzLkRSQUdEUk9QX0VWRU5UID0gJ2RyYWctZHJvcCc7XG5cbiAgICAvLyBiZXR0ZXIgZm9yIFNpbm9uIHNweWluZyBpZiBvcmlnaW5hbCBtZXRob2Qgbm90IG92ZXJ3cml0dGVuXG4gICAgdGhpcy5ob3ZlclN0YXJ0Qm91bmQgPSB0aGlzLmhvdmVyU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhvdmVyRW5kQm91bmQgPSB0aGlzLmhvdmVyRW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kcmFnRHJvcEJvdW5kID0gdGhpcy5kcmFnRHJvcC5iaW5kKHRoaXMpO1xuICAgIHRoaXMubXV0YXRlQWNjZXB0c0JvdW5kID0gdGhpcy5tdXRhdGVBY2NlcHRzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5hY2NlcHRhYmxlRW50aXRpZXMgPSBbXTtcbiAgICB0aGlzLm9ic2VydmVyID0gbmV3IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKHRoaXMubXV0YXRlQWNjZXB0c0JvdW5kKTtcbiAgICB0aGlzLm9ic2VydmVyT3B0cyA9IHtcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgIHN1YnRyZWU6IHRydWVcbiAgICB9O1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLkhPVkVSX0VWRU5ULCB0aGlzLmhvdmVyU3RhcnRCb3VuZCk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuVU5IT1ZFUl9FVkVOVCwgdGhpcy5ob3ZlckVuZEJvdW5kKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5EUkFHRFJPUF9FVkVOVCwgdGhpcy5kcmFnRHJvcEJvdW5kKTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5hY2NlcHRzLmxlbmd0aCkge1xuICAgICAgdGhpcy5hY2NlcHRhYmxlRW50aXRpZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmVsLnNjZW5lRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLmRhdGEuYWNjZXB0cykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFjY2VwdGFibGVFbnRpdGllcyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuYXV0b1VwZGF0ZSAmJiB0aGlzLmFjY2VwdGFibGVFbnRpdGllcyAhPSBudWxsKSB7XG4gICAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy5lbC5zY2VuZUVsLCB0aGlzLm9ic2VydmVyT3B0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgfSxcbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuSE9WRVJfRVZFTlQsIHRoaXMuaG92ZXJTdGFydEJvdW5kKTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5VTkhPVkVSX0VWRU5ULCB0aGlzLmhvdmVyRW5kQm91bmQpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLkRSQUdEUk9QX0VWRU5ULCB0aGlzLmRyYWdEcm9wQm91bmQpO1xuICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICB9LFxuICBtdXRhdGVBY2NlcHRzOiBmdW5jdGlvbiBtdXRhdGVBY2NlcHRzKG11dGF0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgdmFyIHF1ZXJ5ID0gdGhpcy5kYXRhLmFjY2VwdHM7XG4gICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG11dGF0aW9uKSB7XG4gICAgICBtdXRhdGlvbi5hZGRlZE5vZGVzLmZvckVhY2goZnVuY3Rpb24gKGFkZGVkKSB7XG4gICAgICAgIGlmIChlbGVtZW50TWF0Y2hlcyhhZGRlZCwgcXVlcnkpKSB7XG4gICAgICAgICAgX3RoaXMuYWNjZXB0YWJsZUVudGl0aWVzLnB1c2goYWRkZWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbiAgZW50aXR5QWNjZXB0YWJsZTogZnVuY3Rpb24gZW50aXR5QWNjZXB0YWJsZShlbnRpdHkpIHtcbiAgICB2YXIgYWNjZXB0YWJsZUVudGl0aWVzID0gdGhpcy5hY2NlcHRhYmxlRW50aXRpZXM7XG4gICAgaWYgKGFjY2VwdGFibGVFbnRpdGllcyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGFjY2VwdGFibGVFbnRpdGllcyksXG4gICAgICBfc3RlcDtcbiAgICB0cnkge1xuICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgaWYgKGl0ZW0gPT09IGVudGl0eSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBfaXRlcmF0b3IuZShlcnIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBfaXRlcmF0b3IuZigpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG4gIGhvdmVyU3RhcnQ6IGZ1bmN0aW9uIGhvdmVyU3RhcnQoZXZ0KSB7XG4gICAgaWYgKGV2dC5kZWZhdWx0UHJldmVudGVkIHx8ICF0aGlzLmVudGl0eUFjY2VwdGFibGUoZXZ0LmRldGFpbC5jYXJyaWVkKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVsLmFkZFN0YXRlKHRoaXMuSE9WRVJFRF9TVEFURSk7XG4gICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LFxuICBob3ZlckVuZDogZnVuY3Rpb24gaG92ZXJFbmQoZXZ0KSB7XG4gICAgaWYgKGV2dC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZWwucmVtb3ZlU3RhdGUodGhpcy5IT1ZFUkVEX1NUQVRFKTtcbiAgfSxcbiAgZHJhZ0Ryb3A6IGZ1bmN0aW9uIGRyYWdEcm9wKGV2dCkge1xuICAgIGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgZHJvcHBlZCA9IGV2dC5kZXRhaWwuZHJvcHBlZDtcbiAgICBpZiAoIXRoaXMuZW50aXR5QWNjZXB0YWJsZShkcm9wcGVkKSkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5yZWplY3RFdmVudC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5lbC5lbWl0KHRoaXMuZGF0YS5yZWplY3RFdmVudCwge1xuICAgICAgICAgIGVsOiBkcm9wcGVkXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmFjY2VwdEV2ZW50Lmxlbmd0aCkge1xuICAgICAgdGhpcy5lbC5lbWl0KHRoaXMuZGF0YS5hY2NlcHRFdmVudCwge1xuICAgICAgICBlbDogZHJvcHBlZFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2dyYWJiYWJsZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvZ3JhYmJhYmxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fdW51c2VkX3dlYnBhY2tfZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG4vKiBnbG9iYWwgQUZSQU1FLCBUSFJFRSAqL1xudmFyIGluaGVyaXQgPSBBRlJBTUUudXRpbHMuZXh0ZW5kRGVlcDtcbnZhciBwaHlzaWNzQ29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcHJvdG90eXBlcy9waHlzaWNzLWdyYWItcHJvdG8uanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9wcm90b3R5cGVzL3BoeXNpY3MtZ3JhYi1wcm90by5qc1wiKTtcbnZhciBidXR0b25zQ29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcHJvdG90eXBlcy9idXR0b25zLXByb3RvLmpzICovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvcHJvdG90eXBlcy9idXR0b25zLXByb3RvLmpzXCIpO1xuLy8gbmV3IG9iamVjdCB3aXRoIGFsbCBjb3JlIG1vZHVsZXNcbnZhciBiYXNlID0gaW5oZXJpdCh7fSwgcGh5c2ljc0NvcmUsIGJ1dHRvbnNDb3JlKTtcbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnc2gtZ3JhYmJhYmxlJywgaW5oZXJpdChiYXNlLCB7XG4gIHNjaGVtYToge1xuICAgIG1heEdyYWJiZXJzOiB7XG4gICAgICB0eXBlOiAnaW50JyxcbiAgICAgIFwiZGVmYXVsdFwiOiBOYU5cbiAgICB9LFxuICAgIGludmVydDoge1xuICAgICAgXCJkZWZhdWx0XCI6IGZhbHNlXG4gICAgfSxcbiAgICBzdXBwcmVzc1k6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiBmYWxzZVxuICAgIH1cbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHRoaXMuR1JBQkJFRF9TVEFURSA9ICdncmFiYmVkJztcbiAgICB0aGlzLkdSQUJfRVZFTlQgPSAnZ3JhYi1zdGFydCc7XG4gICAgdGhpcy5VTkdSQUJfRVZFTlQgPSAnZ3JhYi1lbmQnO1xuICAgIHRoaXMuZ3JhYmJlZCA9IGZhbHNlO1xuICAgIHRoaXMuZ3JhYmJlcnMgPSBbXTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZGVsdGFQb3NpdGlvbklzVmFsaWQgPSBmYWxzZTtcbiAgICB0aGlzLmdyYWJEaXN0YW5jZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmdyYWJEaXJlY3Rpb24gPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHo6IC0xXG4gICAgfTtcbiAgICB0aGlzLmdyYWJPZmZzZXQgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHo6IDBcbiAgICB9O1xuICAgIC8vIHBlcnNpc3RlbnQgb2JqZWN0IHNwZWVkcyB1cCByZXBlYXQgc2V0QXR0cmlidXRlIGNhbGxzXG4gICAgdGhpcy5kZXN0UG9zaXRpb24gPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHo6IDBcbiAgICB9O1xuICAgIHRoaXMuZGVsdGFQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy50YXJnZXRQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy5waHlzaWNzSW5pdCgpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLkdSQUJfRVZFTlQsIGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gX3RoaXMuc3RhcnQoZSk7XG4gICAgfSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuVU5HUkFCX0VWRU5ULCBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIF90aGlzLmVuZChlKTtcbiAgICB9KTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBfdGhpcy5sb3N0R3JhYmJlcihlKTtcbiAgICB9KTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgdGhpcy5waHlzaWNzVXBkYXRlKCk7XG4gICAgdGhpcy54RmFjdG9yID0gdGhpcy5kYXRhLmludmVydCA/IC0xIDogMTtcbiAgICB0aGlzLnpGYWN0b3IgPSB0aGlzLmRhdGEuaW52ZXJ0ID8gLTEgOiAxO1xuICAgIHRoaXMueUZhY3RvciA9ICh0aGlzLmRhdGEuaW52ZXJ0ID8gLTEgOiAxKSAqICF0aGlzLmRhdGEuc3VwcHJlc3NZO1xuICB9LFxuICB0aWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHEgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgIHZhciB2ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGVudGl0eVBvc2l0aW9uO1xuICAgICAgaWYgKHRoaXMuZ3JhYmJlcikge1xuICAgICAgICAvLyByZWZsZWN0IG9uIHotYXhpcyB0byBwb2ludCBpbiBzYW1lIGRpcmVjdGlvbiBhcyB0aGUgbGFzZXJcbiAgICAgICAgdGhpcy50YXJnZXRQb3NpdGlvbi5jb3B5KHRoaXMuZ3JhYkRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMudGFyZ2V0UG9zaXRpb24uYXBwbHlRdWF0ZXJuaW9uKHRoaXMuZ3JhYmJlci5vYmplY3QzRC5nZXRXb3JsZFF1YXRlcm5pb24ocSkpLnNldExlbmd0aCh0aGlzLmdyYWJEaXN0YW5jZSkuYWRkKHRoaXMuZ3JhYmJlci5vYmplY3QzRC5nZXRXb3JsZFBvc2l0aW9uKHYpKS5hZGQodGhpcy5ncmFiT2Zmc2V0KTtcbiAgICAgICAgaWYgKHRoaXMuZGVsdGFQb3NpdGlvbklzVmFsaWQpIHtcbiAgICAgICAgICAvLyByZWxhdGl2ZSBwb3NpdGlvbiBjaGFuZ2VzIHdvcmsgYmV0dGVyIHdpdGggbmVzdGVkIGVudGl0aWVzXG4gICAgICAgICAgdGhpcy5kZWx0YVBvc2l0aW9uLnN1Yih0aGlzLnRhcmdldFBvc2l0aW9uKTtcbiAgICAgICAgICBlbnRpdHlQb3NpdGlvbiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdwb3NpdGlvbicpO1xuICAgICAgICAgIHRoaXMuZGVzdFBvc2l0aW9uLnggPSBlbnRpdHlQb3NpdGlvbi54IC0gdGhpcy5kZWx0YVBvc2l0aW9uLnggKiB0aGlzLnhGYWN0b3I7XG4gICAgICAgICAgdGhpcy5kZXN0UG9zaXRpb24ueSA9IGVudGl0eVBvc2l0aW9uLnkgLSB0aGlzLmRlbHRhUG9zaXRpb24ueSAqIHRoaXMueUZhY3RvcjtcbiAgICAgICAgICB0aGlzLmRlc3RQb3NpdGlvbi56ID0gZW50aXR5UG9zaXRpb24ueiAtIHRoaXMuZGVsdGFQb3NpdGlvbi56ICogdGhpcy56RmFjdG9yO1xuICAgICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHRoaXMuZGVzdFBvc2l0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRlbHRhUG9zaXRpb25Jc1ZhbGlkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlbHRhUG9zaXRpb24uY29weSh0aGlzLnRhcmdldFBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KCksXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLkdSQUJfRVZFTlQsIHRoaXMuc3RhcnQpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLlVOR1JBQl9FVkVOVCwgdGhpcy5lbmQpO1xuICAgIHRoaXMucGh5c2ljc1JlbW92ZSgpO1xuICB9LFxuICBzdGFydDogZnVuY3Rpb24gc3RhcnQoZXZ0KSB7XG4gICAgaWYgKGV2dC5kZWZhdWx0UHJldmVudGVkIHx8ICF0aGlzLnN0YXJ0QnV0dG9uT2soZXZ0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyByb29tIGZvciBtb3JlIGdyYWJiZXJzP1xuICAgIHZhciBncmFiQXZhaWxhYmxlID0gIU51bWJlci5pc0Zpbml0ZSh0aGlzLmRhdGEubWF4R3JhYmJlcnMpIHx8IHRoaXMuZ3JhYmJlcnMubGVuZ3RoIDwgdGhpcy5kYXRhLm1heEdyYWJiZXJzO1xuICAgIGlmICh0aGlzLmdyYWJiZXJzLmluZGV4T2YoZXZ0LmRldGFpbC5oYW5kKSA9PT0gLTEgJiYgZ3JhYkF2YWlsYWJsZSkge1xuICAgICAgaWYgKCFldnQuZGV0YWlsLmhhbmQub2JqZWN0M0QpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdzaC1ncmFiYmFibGUgZW50aXRpZXMgbXVzdCBoYXZlIGFuIG9iamVjdDNEJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuZ3JhYmJlcnMucHVzaChldnQuZGV0YWlsLmhhbmQpO1xuICAgICAgLy8gaW5pdGlhdGUgcGh5c2ljcyBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBtYW51YWxcbiAgICAgIGlmICghdGhpcy5waHlzaWNzU3RhcnQoZXZ0KSAmJiAhdGhpcy5ncmFiYmVyKSB7XG4gICAgICAgIHRoaXMuZ3JhYmJlciA9IGV2dC5kZXRhaWwuaGFuZDtcbiAgICAgICAgdGhpcy5yZXNldEdyYWJiZXIoKTtcbiAgICAgIH1cbiAgICAgIC8vIG5vdGlmeSBzdXBlci1oYW5kcyB0aGF0IHRoZSBnZXN0dXJlIHdhcyBhY2NlcHRlZFxuICAgICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZ3JhYmJlZCA9IHRydWU7XG4gICAgICB0aGlzLmVsLmFkZFN0YXRlKHRoaXMuR1JBQkJFRF9TVEFURSk7XG4gICAgfVxuICB9LFxuICBlbmQ6IGZ1bmN0aW9uIGVuZChldnQpIHtcbiAgICB2YXIgaGFuZEluZGV4ID0gdGhpcy5ncmFiYmVycy5pbmRleE9mKGV2dC5kZXRhaWwuaGFuZCk7XG4gICAgaWYgKGV2dC5kZWZhdWx0UHJldmVudGVkIHx8ICF0aGlzLmVuZEJ1dHRvbk9rKGV2dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGhhbmRJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuZ3JhYmJlcnMuc3BsaWNlKGhhbmRJbmRleCwgMSk7XG4gICAgICB0aGlzLmdyYWJiZXIgPSB0aGlzLmdyYWJiZXJzWzBdO1xuICAgIH1cbiAgICB0aGlzLnBoeXNpY3NFbmQoZXZ0KTtcbiAgICBpZiAoIXRoaXMucmVzZXRHcmFiYmVyKCkpIHtcbiAgICAgIHRoaXMuZ3JhYmJlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5lbC5yZW1vdmVTdGF0ZSh0aGlzLkdSQUJCRURfU1RBVEUpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sXG4gIHJlc2V0R3JhYmJlcjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYmpQb3MgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHZhciBncmFiUG9zID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmdyYWJiZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHJheWNhc3RlciA9IHRoaXMuZ3JhYmJlci5nZXRBdHRyaWJ1dGUoJ3JheWNhc3RlcicpO1xuICAgICAgdGhpcy5kZWx0YVBvc2l0aW9uSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgdGhpcy5ncmFiRGlzdGFuY2UgPSB0aGlzLmVsLm9iamVjdDNELmdldFdvcmxkUG9zaXRpb24ob2JqUG9zKS5kaXN0YW5jZVRvKHRoaXMuZ3JhYmJlci5vYmplY3QzRC5nZXRXb3JsZFBvc2l0aW9uKGdyYWJQb3MpKTtcbiAgICAgIGlmIChyYXljYXN0ZXIpIHtcbiAgICAgICAgdGhpcy5ncmFiRGlyZWN0aW9uID0gcmF5Y2FzdGVyLmRpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5ncmFiT2Zmc2V0ID0gcmF5Y2FzdGVyLm9yaWdpbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gIH0oKSxcbiAgbG9zdEdyYWJiZXI6IGZ1bmN0aW9uIGxvc3RHcmFiYmVyKGV2dCkge1xuICAgIHZhciBpID0gdGhpcy5ncmFiYmVycy5pbmRleE9mKGV2dC5yZWxhdGVkVGFyZ2V0KTtcbiAgICAvLyBpZiBhIHF1ZXVlZCwgbm9uLXBoeXNpY3MgZ3JhYmJlciBsZWF2ZXMgdGhlIGNvbGxpc2lvbiB6b25lLCBmb3JnZXQgaXRcbiAgICBpZiAoaSAhPT0gLTEgJiYgZXZ0LnJlbGF0ZWRUYXJnZXQgIT09IHRoaXMuZ3JhYmJlciAmJiAhdGhpcy5waHlzaWNzSXNDb25zdHJhaW5lZChldnQucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgIHRoaXMuZ3JhYmJlcnMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxufSkpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9ob3ZlcmFibGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2hvdmVyYWJsZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKCkgPT4ge1xuXG4vKiBnbG9iYWwgQUZSQU1FICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2hvdmVyYWJsZScsIHtcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0aGlzLkhPVkVSRURfU1RBVEUgPSAnaG92ZXJlZCc7XG4gICAgdGhpcy5IT1ZFUl9FVkVOVCA9ICdob3Zlci1zdGFydCc7XG4gICAgdGhpcy5VTkhPVkVSX0VWRU5UID0gJ2hvdmVyLWVuZCc7XG4gICAgdGhpcy5ob3ZlcmVycyA9IFtdO1xuICAgIHRoaXMuc3RhcnQgPSB0aGlzLnN0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbmQgPSB0aGlzLmVuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLkhPVkVSX0VWRU5ULCB0aGlzLnN0YXJ0KTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5VTkhPVkVSX0VWRU5ULCB0aGlzLmVuZCk7XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLkhPVkVSX0VWRU5ULCB0aGlzLnN0YXJ0KTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5VTkhPVkVSX0VWRU5ULCB0aGlzLmVuZCk7XG4gIH0sXG4gIHN0YXJ0OiBmdW5jdGlvbiBzdGFydChldnQpIHtcbiAgICBpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbC5hZGRTdGF0ZSh0aGlzLkhPVkVSRURfU1RBVEUpO1xuICAgIGlmICh0aGlzLmhvdmVyZXJzLmluZGV4T2YoZXZ0LmRldGFpbC5oYW5kKSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuaG92ZXJlcnMucHVzaChldnQuZGV0YWlsLmhhbmQpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sXG4gIGVuZDogZnVuY3Rpb24gZW5kKGV2dCkge1xuICAgIGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaGFuZEluZGV4ID0gdGhpcy5ob3ZlcmVycy5pbmRleE9mKGV2dC5kZXRhaWwuaGFuZCk7XG4gICAgaWYgKGhhbmRJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuaG92ZXJlcnMuc3BsaWNlKGhhbmRJbmRleCwgMSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmhvdmVyZXJzLmxlbmd0aCA8IDEpIHtcbiAgICAgIHRoaXMuZWwucmVtb3ZlU3RhdGUodGhpcy5IT1ZFUkVEX1NUQVRFKTtcbiAgICB9XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL3Byb3RvdHlwZXMvYnV0dG9ucy1wcm90by5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKG1vZHVsZSkgPT4ge1xuXG4vLyBjb21tb24gY29kZSB1c2VkIGluIGN1c3RvbWl6aW5nIHJlYWN0aW9uIGNvbXBvbmVudHMgYnkgYnV0dG9uXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYnV0dG9uSXNWYWxpZChldnQsIGJ1dHRvbkxpc3QpIHtcbiAgICByZXR1cm4gYnV0dG9uTGlzdC5sZW5ndGggPT09IDAgfHwgYnV0dG9uTGlzdC5pbmRleE9mKGV2dC5kZXRhaWwuYnV0dG9uRXZlbnQudHlwZSkgIT09IC0xO1xuICB9XG4gIHJldHVybiB7XG4gICAgc2NoZW1hOiB7XG4gICAgICBzdGFydEJ1dHRvbnM6IHtcbiAgICAgICAgXCJkZWZhdWx0XCI6IFtdXG4gICAgICB9LFxuICAgICAgZW5kQnV0dG9uczoge1xuICAgICAgICBcImRlZmF1bHRcIjogW11cbiAgICAgIH1cbiAgICB9LFxuICAgIHN0YXJ0QnV0dG9uT2s6IGZ1bmN0aW9uIHN0YXJ0QnV0dG9uT2soZXZ0KSB7XG4gICAgICByZXR1cm4gYnV0dG9uSXNWYWxpZChldnQsIHRoaXMuZGF0YS5zdGFydEJ1dHRvbnMpO1xuICAgIH0sXG4gICAgZW5kQnV0dG9uT2s6IGZ1bmN0aW9uIGVuZEJ1dHRvbk9rKGV2dCkge1xuICAgICAgcmV0dXJuIGJ1dHRvbklzVmFsaWQoZXZ0LCB0aGlzLmRhdGEuZW5kQnV0dG9ucyk7XG4gICAgfVxuICB9O1xufSgpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9wcm90b3R5cGVzL3BoeXNpY3MtZ3JhYi1wcm90by5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9wcm90b3R5cGVzL3BoeXNpY3MtZ3JhYi1wcm90by5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgobW9kdWxlKSA9PiB7XG5cbmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXRbXCJyZXR1cm5cIl0gIT0gbnVsbCkgaXRbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfVxuLy8gYmFzZSBjb2RlIHVzZWQgYnkgZ3JhYmJhYmxlIGZvciBwaHlzaWNzIGludGVyYWN0aW9uc1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNjaGVtYToge1xuICAgIHVzZVBoeXNpY3M6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnaWZhdmFpbGFibGUnXG4gICAgfVxuICB9LFxuICBwaHlzaWNzSW5pdDogZnVuY3Rpb24gcGh5c2ljc0luaXQoKSB7XG4gICAgdGhpcy5jb25zdHJhaW50cyA9IG5ldyBNYXAoKTtcbiAgfSxcbiAgcGh5c2ljc1VwZGF0ZTogZnVuY3Rpb24gcGh5c2ljc1VwZGF0ZSgpIHtcbiAgICBpZiAodGhpcy5kYXRhLnVzZVBoeXNpY3MgPT09ICduZXZlcicgJiYgdGhpcy5jb25zdHJhaW50cy5zaXplKSB7XG4gICAgICB0aGlzLnBoeXNpY3NDbGVhcigpO1xuICAgIH1cbiAgfSxcbiAgcGh5c2ljc1JlbW92ZTogZnVuY3Rpb24gcGh5c2ljc1JlbW92ZSgpIHtcbiAgICB0aGlzLnBoeXNpY3NDbGVhcigpO1xuICB9LFxuICBwaHlzaWNzU3RhcnQ6IGZ1bmN0aW9uIHBoeXNpY3NTdGFydChldnQpIHtcbiAgICAvLyBpbml0aWF0ZSBwaHlzaWNzIGNvbnN0cmFpbnQgaWYgYXZhaWxhYmxlIGFuZCBub3QgYWxyZWFkeSBleGlzdGluZ1xuICAgIGlmICh0aGlzLmRhdGEudXNlUGh5c2ljcyAhPT0gJ25ldmVyJyAmJiB0aGlzLmVsLmJvZHkgJiYgZXZ0LmRldGFpbC5oYW5kLmJvZHkgJiYgIXRoaXMuY29uc3RyYWludHMuaGFzKGV2dC5kZXRhaWwuaGFuZCkpIHtcbiAgICAgIHZhciBuZXdDb25JZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdjb25zdHJhaW50X18nICsgbmV3Q29uSWQsIHtcbiAgICAgICAgdGFyZ2V0OiBldnQuZGV0YWlsLmhhbmRcbiAgICAgIH0pO1xuICAgICAgdGhpcy5jb25zdHJhaW50cy5zZXQoZXZ0LmRldGFpbC5oYW5kLCBuZXdDb25JZCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gUHJldmVudCBtYW51YWwgZ3JhYiBieSByZXR1cm5pbmcgdHJ1ZVxuICAgIGlmICh0aGlzLmRhdGEudXNlUGh5c2ljcyA9PT0gJ29ubHknKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBwaHlzaWNzRW5kOiBmdW5jdGlvbiBwaHlzaWNzRW5kKGV2dCkge1xuICAgIHZhciBjb25zdHJhaW50SWQgPSB0aGlzLmNvbnN0cmFpbnRzLmdldChldnQuZGV0YWlsLmhhbmQpO1xuICAgIGlmIChjb25zdHJhaW50SWQpIHtcbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdjb25zdHJhaW50X18nICsgY29uc3RyYWludElkKTtcbiAgICAgIHRoaXMuY29uc3RyYWludHNbXCJkZWxldGVcIl0oZXZ0LmRldGFpbC5oYW5kKTtcbiAgICB9XG4gIH0sXG4gIHBoeXNpY3NDbGVhcjogZnVuY3Rpb24gcGh5c2ljc0NsZWFyKCkge1xuICAgIGlmICh0aGlzLmVsLmJvZHkpIHtcbiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmNvbnN0cmFpbnRzLnZhbHVlcygpKSxcbiAgICAgICAgX3N0ZXA7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBjID0gX3N0ZXAudmFsdWU7XG4gICAgICAgICAgdGhpcy5lbC5ib2R5LndvcmxkLnJlbW92ZUNvbnN0cmFpbnQoYyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfaXRlcmF0b3IuZShlcnIpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2l0ZXJhdG9yLmYoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jb25zdHJhaW50cy5jbGVhcigpO1xuICB9LFxuICBwaHlzaWNzSXNDb25zdHJhaW5lZDogZnVuY3Rpb24gcGh5c2ljc0lzQ29uc3RyYWluZWQoZWwpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50cy5oYXMoZWwpO1xuICB9LFxuICBwaHlzaWNzSXNHcmFiYmluZzogZnVuY3Rpb24gcGh5c2ljc0lzR3JhYmJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHMuc2l6ZSA+IDA7XG4gIH1cbn07XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL3N0cmV0Y2hhYmxlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL3N0cmV0Y2hhYmxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX191bnVzZWRfd2VicGFja19leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cbmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXRbXCJyZXR1cm5cIl0gIT0gbnVsbCkgaXRbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfVxuLyogZ2xvYmFsIEFGUkFNRSwgVEhSRUUgKi9cbnZhciBpbmhlcml0ID0gQUZSQU1FLnV0aWxzLmV4dGVuZERlZXA7XG52YXIgYnV0dG9uc0NvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3Byb3RvdHlwZXMvYnV0dG9ucy1wcm90by5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL3Byb3RvdHlwZXMvYnV0dG9ucy1wcm90by5qc1wiKTtcbi8vIG5ldyBvYmplY3Qgd2l0aCBhbGwgY29yZSBtb2R1bGVzXG52YXIgYmFzZSA9IGluaGVyaXQoe30sIGJ1dHRvbnNDb3JlKTtcbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnc3RyZXRjaGFibGUnLCBpbmhlcml0KGJhc2UsIHtcbiAgc2NoZW1hOiB7XG4gICAgdXNlUGh5c2ljczoge1xuICAgICAgXCJkZWZhdWx0XCI6ICdpZmF2YWlsYWJsZSdcbiAgICB9LFxuICAgIGludmVydDoge1xuICAgICAgXCJkZWZhdWx0XCI6IGZhbHNlXG4gICAgfSxcbiAgICBwaHlzaWNzVXBkYXRlUmF0ZToge1xuICAgICAgXCJkZWZhdWx0XCI6IDEwMFxuICAgIH1cbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0aGlzLlNUUkVUQ0hFRF9TVEFURSA9ICdzdHJldGNoZWQnO1xuICAgIHRoaXMuU1RSRVRDSF9FVkVOVCA9ICdzdHJldGNoLXN0YXJ0JztcbiAgICB0aGlzLlVOU1RSRVRDSF9FVkVOVCA9ICdzdHJldGNoLWVuZCc7XG4gICAgdGhpcy5zdHJldGNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLnN0cmV0Y2hlcnMgPSBbXTtcbiAgICB0aGlzLnNjYWxlID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB0aGlzLmhhbmRQb3MgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHRoaXMub3RoZXJIYW5kUG9zID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB0aGlzLnN0YXJ0ID0gdGhpcy5zdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZW5kID0gdGhpcy5lbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5TVFJFVENIX0VWRU5ULCB0aGlzLnN0YXJ0KTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5VTlNUUkVUQ0hfRVZFTlQsIHRoaXMuZW5kKTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUob2xkRGF0KSB7XG4gICAgdGhpcy51cGRhdGVCb2RpZXMgPSBBRlJBTUUudXRpbHMudGhyb3R0bGVUaWNrKHRoaXMuX3VwZGF0ZUJvZGllcywgdGhpcy5kYXRhLnBoeXNpY3NVcGRhdGVSYXRlLCB0aGlzKTtcbiAgfSxcbiAgdGljazogZnVuY3Rpb24gdGljayh0aW1lLCB0aW1lRGVsdGEpIHtcbiAgICBpZiAoIXRoaXMuc3RyZXRjaGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2NhbGUuY29weSh0aGlzLmVsLmdldEF0dHJpYnV0ZSgnc2NhbGUnKSk7XG4gICAgdGhpcy5zdHJldGNoZXJzWzBdLm9iamVjdDNELmdldFdvcmxkUG9zaXRpb24odGhpcy5oYW5kUG9zKTtcbiAgICB0aGlzLnN0cmV0Y2hlcnNbMV0ub2JqZWN0M0QuZ2V0V29ybGRQb3NpdGlvbih0aGlzLm90aGVySGFuZFBvcyk7XG4gICAgdmFyIGN1cnJlbnRTdHJldGNoID0gdGhpcy5oYW5kUG9zLmRpc3RhbmNlVG8odGhpcy5vdGhlckhhbmRQb3MpO1xuICAgIHZhciBkZWx0YVN0cmV0Y2ggPSAxO1xuICAgIGlmICh0aGlzLnByZXZpb3VzU3RyZXRjaCAhPT0gbnVsbCAmJiBjdXJyZW50U3RyZXRjaCAhPT0gMCkge1xuICAgICAgZGVsdGFTdHJldGNoID0gTWF0aC5wb3coY3VycmVudFN0cmV0Y2ggLyB0aGlzLnByZXZpb3VzU3RyZXRjaCwgdGhpcy5kYXRhLmludmVydCA/IC0xIDogMSk7XG4gICAgfVxuICAgIHRoaXMucHJldmlvdXNTdHJldGNoID0gY3VycmVudFN0cmV0Y2g7XG4gICAgaWYgKHRoaXMucHJldmlvdXNQaHlzaWNzU3RyZXRjaCA9PSBudWxsKSB7XG4gICAgICAvLyBlc3RhYmxpc2ggY29ycmVjdCBiYXNlbGluZSBldmVuIGlmIHRocm90dGxlZCBmdW5jdGlvbiBpc24ndCBjYWxsZWRcbiAgICAgIHRoaXMucHJldmlvdXNQaHlzaWNzU3RyZXRjaCA9IGN1cnJlbnRTdHJldGNoO1xuICAgIH1cbiAgICB0aGlzLnNjYWxlLm11bHRpcGx5U2NhbGFyKGRlbHRhU3RyZXRjaCk7XG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ3NjYWxlJywgdGhpcy5zY2FsZSk7XG4gICAgLy8gc2NhbGUgdXBkYXRlIGZvciBhbGwgbmVzdGVkIHBoeXNpY3MgYm9kaWVzICh0aHJvdHRsZWQpXG4gICAgdGhpcy51cGRhdGVCb2RpZXModGltZSwgdGltZURlbHRhKTtcbiAgfSxcbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuU1RSRVRDSF9FVkVOVCwgdGhpcy5zdGFydCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuVU5TVFJFVENIX0VWRU5ULCB0aGlzLmVuZCk7XG4gIH0sXG4gIHN0YXJ0OiBmdW5jdGlvbiBzdGFydChldnQpIHtcbiAgICBpZiAodGhpcy5zdHJldGNoZWQgfHwgdGhpcy5zdHJldGNoZXJzLmluY2x1ZGVzKGV2dC5kZXRhaWwuaGFuZCkgfHwgIXRoaXMuc3RhcnRCdXR0b25PayhldnQpIHx8IGV2dC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBhbHJlYWR5IHN0cmV0Y2hlZCBvciBhbHJlYWR5IGNhcHR1cmVkIHRoaXMgaGFuZCBvciB3cm9uZyBidXR0b25cbiAgICB0aGlzLnN0cmV0Y2hlcnMucHVzaChldnQuZGV0YWlsLmhhbmQpO1xuICAgIGlmICh0aGlzLnN0cmV0Y2hlcnMubGVuZ3RoID09PSAyKSB7XG4gICAgICB0aGlzLnN0cmV0Y2hlZCA9IHRydWU7XG4gICAgICB0aGlzLnByZXZpb3VzU3RyZXRjaCA9IG51bGw7XG4gICAgICB0aGlzLnByZXZpb3VzUGh5c2ljc1N0cmV0Y2ggPSBudWxsO1xuICAgICAgdGhpcy5lbC5hZGRTdGF0ZSh0aGlzLlNUUkVUQ0hFRF9TVEFURSk7XG4gICAgfVxuICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gLy8gZ2VzdHVyZSBhY2NlcHRlZFxuICB9LFxuICBlbmQ6IGZ1bmN0aW9uIGVuZChldnQpIHtcbiAgICB2YXIgc3RyZXRjaGVySW5kZXggPSB0aGlzLnN0cmV0Y2hlcnMuaW5kZXhPZihldnQuZGV0YWlsLmhhbmQpO1xuICAgIGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCB8fCAhdGhpcy5lbmRCdXR0b25PayhldnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzdHJldGNoZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuc3RyZXRjaGVycy5zcGxpY2Uoc3RyZXRjaGVySW5kZXgsIDEpO1xuICAgICAgdGhpcy5zdHJldGNoZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlU3RhdGUodGhpcy5TVFJFVENIRURfU1RBVEUpO1xuICAgICAgLy8gb3ZlcnJpZGUgdGhyb3R0bGUgdG8gcHVzaCBsYXN0IHN0cmV0Y2ggdG8gcGh5c2ljcyBib2RpZXNcbiAgICAgIHRoaXMuX3VwZGF0ZUJvZGllcygpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sXG4gIF91cGRhdGVCb2RpZXM6IGZ1bmN0aW9uIF91cGRhdGVCb2RpZXMoKSB7XG4gICAgaWYgKCF0aGlzLmVsLmJvZHkgfHwgdGhpcy5kYXRhLnVzZVBoeXNpY3MgPT09ICduZXZlcicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGN1cnJlbnRTdHJldGNoID0gdGhpcy5wcmV2aW91c1N0cmV0Y2g7IC8vIGxhc3QgdmlzaWJsZSBnZW9tZXRyeSBzdHJldGNoXG4gICAgdmFyIGRlbHRhU3RyZXRjaCA9IDE7XG4gICAgaWYgKHRoaXMucHJldmlvdXNQaHlzaWNzU3RyZXRjaCAhPT0gbnVsbCAmJiBjdXJyZW50U3RyZXRjaCA+IDApIHtcbiAgICAgIGRlbHRhU3RyZXRjaCA9IE1hdGgucG93KGN1cnJlbnRTdHJldGNoIC8gdGhpcy5wcmV2aW91c1BoeXNpY3NTdHJldGNoLCB0aGlzLmRhdGEuaW52ZXJ0ID8gLTEgOiAxKTtcbiAgICB9XG4gICAgdGhpcy5wcmV2aW91c1BoeXNpY3NTdHJldGNoID0gY3VycmVudFN0cmV0Y2g7XG4gICAgaWYgKGRlbHRhU3RyZXRjaCA9PT0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5lbC5jaGlsZE5vZGVzKSxcbiAgICAgIF9zdGVwO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykge1xuICAgICAgICB2YXIgYyA9IF9zdGVwLnZhbHVlO1xuICAgICAgICB0aGlzLnN0cmV0Y2hCb2R5KGMsIGRlbHRhU3RyZXRjaCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBfaXRlcmF0b3IuZShlcnIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBfaXRlcmF0b3IuZigpO1xuICAgIH1cbiAgICB0aGlzLnN0cmV0Y2hCb2R5KHRoaXMuZWwsIGRlbHRhU3RyZXRjaCk7XG4gIH0sXG4gIHN0cmV0Y2hCb2R5OiBmdW5jdGlvbiBzdHJldGNoQm9keShlbCwgZGVsdGFTdHJldGNoKSB7XG4gICAgaWYgKCFlbC5ib2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwaHlzaWNzU2hhcGU7XG4gICAgdmFyIG9mZnNldDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsLmJvZHkuc2hhcGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwaHlzaWNzU2hhcGUgPSBlbC5ib2R5LnNoYXBlc1tpXTtcbiAgICAgIGlmIChwaHlzaWNzU2hhcGUuaGFsZkV4dGVudHMpIHtcbiAgICAgICAgcGh5c2ljc1NoYXBlLmhhbGZFeHRlbnRzLnNjYWxlKGRlbHRhU3RyZXRjaCwgcGh5c2ljc1NoYXBlLmhhbGZFeHRlbnRzKTtcbiAgICAgICAgcGh5c2ljc1NoYXBlLnVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpO1xuICAgICAgfSBlbHNlIGlmIChwaHlzaWNzU2hhcGUucmFkaXVzKSB7XG4gICAgICAgIHBoeXNpY3NTaGFwZS5yYWRpdXMgKj0gZGVsdGFTdHJldGNoO1xuICAgICAgICBwaHlzaWNzU2hhcGUudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuc2hhcGVXYXJuZWQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdVbmFibGUgdG8gc3RyZXRjaCBwaHlzaWNzIGJvZHk6IHVuc3VwcG9ydGVkIHNoYXBlJyk7XG4gICAgICAgIHRoaXMuc2hhcGVXYXJuZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgLy8gYWxzbyBtb3ZlIG9mZnNldCB0byBtYXRjaCBzY2FsZSBjaGFuZ2VcbiAgICAgIG9mZnNldCA9IGVsLmJvZHkuc2hhcGVPZmZzZXRzW2ldO1xuICAgICAgb2Zmc2V0LnNjYWxlKGRlbHRhU3RyZXRjaCwgb2Zmc2V0KTtcbiAgICB9XG4gICAgZWwuYm9keS51cGRhdGVCb3VuZGluZ1JhZGl1cygpO1xuICB9XG59KSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9zeXN0ZW1zL3N1cGVyLWhhbmRzLXN5c3RlbS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3N5c3RlbXMvc3VwZXItaGFuZHMtc3lzdGVtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoKSA9PiB7XG5cbi8qIGdsb2JhbCBBRlJBTUUgKi9cbkFGUkFNRS5yZWdpc3RlclN5c3RlbSgnc3VwZXItaGFuZHMnLCB7XG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdGhpcy5zdXBlckhhbmRzID0gW107XG4gIH0sXG4gIHJlZ2lzdGVyTWU6IGZ1bmN0aW9uIHJlZ2lzdGVyTWUoY29tcCkge1xuICAgIC8vIHdoZW4gc2Vjb25kIGhhbmQgcmVnaXN0ZXJzLCBzdG9yZSBsaW5rc1xuICAgIGlmICh0aGlzLnN1cGVySGFuZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLnN1cGVySGFuZHNbMF0ub3RoZXJTdXBlckhhbmQgPSBjb21wO1xuICAgICAgY29tcC5vdGhlclN1cGVySGFuZCA9IHRoaXMuc3VwZXJIYW5kc1swXTtcbiAgICB9XG4gICAgdGhpcy5zdXBlckhhbmRzLnB1c2goY29tcCk7XG4gIH0sXG4gIHVucmVnaXN0ZXJNZTogZnVuY3Rpb24gdW5yZWdpc3Rlck1lKGNvbXApIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLnN1cGVySGFuZHMuaW5kZXhPZihjb21wKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLnN1cGVySGFuZHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgdGhpcy5zdXBlckhhbmRzLmZvckVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh4Lm90aGVyU3VwZXJIYW5kID09PSBjb21wKSB7XG4gICAgICAgIHgub3RoZXJTdXBlckhhbmQgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvYWZyYW1lQ29udGV4dC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2FmcmFtZUNvbnRleHQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQWZyYW1lQ29udGV4dClcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9hc3NldE1hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vYXNzZXRNYW5hZ2VyICovIFwiLi9zcmMvYXNzZXRNYW5hZ2VyLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3JlbmRlcmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvcmVuZGVyZXIgKi8gXCIuL3NyYy9jb21wb25lbnRzL3JlbmRlcmVyLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3JlbmRlcmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oX2NvbXBvbmVudHNfcmVuZGVyZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyk7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuXG5cbnZhciBBZnJhbWVDb250ZXh0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQWZyYW1lQ29udGV4dChzZXR0aW5ncykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBZnJhbWVDb250ZXh0KTtcbiAgICB0aGlzLmluVlIgPSBmYWxzZTtcbiAgICAvLyBzZXR0aW5ncyBwb2ludGVyXG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuY3JlYXRlU2NlbmUoKTtcbiAgICAvLyBjcmVhdGUgYXNzZXQgbWFuYWdlclxuICAgIHRoaXMuYXNzZXRNYW5hZ2VyID0gbmV3IF9hc3NldE1hbmFnZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0odGhpcy5zY2VuZSk7XG4gIH1cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhBZnJhbWVDb250ZXh0LCBbe1xuICAgIGtleTogXCJjcmVhdGVTY2VuZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVTY2VuZSgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAvLyBmaW5kIHNjZW5lIGlmIGV4aXN0cyBlbHNlIGNyZWF0ZSBzY2VuZVxuICAgICAgdmFyIHNjZW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhLXNjZW5lXCIpO1xuICAgICAgaWYgKHNjZW5lLmxlbmd0aCA+IDApIHRoaXMuc2NlbmUgPSBzY2VuZVswXTtlbHNlIHtcbiAgICAgICAgdGhpcy5zY2VuZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLXNjZW5lXCIpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuc2NlbmUpO1xuICAgICAgICB0aGlzLm5ld1NjZW5lID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gYWRkIHN0YXRzIHRvIHNjZW5lIGlmIGRlYnVnXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1ZykgdGhpcy5zY2VuZS5zZXRBdHRyaWJ1dGUoXCJzdGF0c1wiLCBcIlwiKTtcblxuICAgICAgLy9jdXN0b20gcmVuZGVyZXIgcGFyYW1zIGxpa2UgbG9jYWwgY2xpcHBpbmdcbiAgICAgIHRoaXMuc2NlbmUuc2V0QXR0cmlidXRlKFwidnItcmVuZGVyZXJcIiwgXCJcIik7XG5cbiAgICAgIC8vIGNoZWNrIGlmIGluIFZSXG4gICAgICB0aGlzLnNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoXCJlbnRlci12clwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLmluVlIgPSB0cnVlO1xuICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgIHRoaXMuc2NlbmUuYWRkRXZlbnRMaXN0ZW5lcihcImV4aXQtdnJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5pblZSID0gZmFsc2U7XG4gICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVDb250YWluZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQ29udGFpbmVyKHdlYjJ2cikge1xuICAgICAgLy8gY29udHRhaW5lciBmb3IgYWxsIGFmcmFtZSBlbGVtZW50c1xuICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1lbnRpdHlcIik7XG4gICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidnItY29udGFpbmVyXCIpO1xuICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmludGVyYWN0aXZlVGFnKTtcblxuICAgICAgLy8gcG9zaXRpb24gY29udGFpbmVyXG4gICAgICB2YXIgd2lkdGggPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHdlYjJ2ci5jb250YWluZXIpLndpZHRoKSAqICgxIC8gdGhpcy5zZXR0aW5ncy5zY2FsZSk7XG4gICAgICB2YXIgeCA9IHRoaXMuc2V0dGluZ3MucG9zaXRpb24ueDtcbiAgICAgIC8vIGlmIHg9MCB0aGVuIHRoZW4gd2Ugd2FudCB0byBiZSBpbiBjZW50ZXIgZm9yIHRlc3RpbmcgYW5kIHNob3djYXNlXG4gICAgICBpZiAoeCA9PSAwKSB4ID0geCAtIHdpZHRoIC8gMjtcbiAgICAgIHRoaXMuY29udGFpbmVyLm9iamVjdDNELnBvc2l0aW9uLnNldCh4LCB0aGlzLnNldHRpbmdzLnBvc2l0aW9uLnksIHRoaXMuc2V0dGluZ3MucG9zaXRpb24ueik7XG4gICAgICAvLyB1cGRhdGUgcm90YXRpb24gZnJvbSBhZnJhbWUoMS4wLjQpIGJlY2F1c2UgdGhlcmUgaXMgYnVnKHJvdGF0aW9uIHggd2lsbCBiZSB3cm9uZykgaWYgeW91IHVwZGF0ZSB3aXRoIHRocmVlLmpzXG4gICAgICB0aGlzLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJyb3RhdGlvblwiLCB7XG4gICAgICAgIHg6IHRoaXMuc2V0dGluZ3Mucm90YXRpb24ueCxcbiAgICAgICAgeTogdGhpcy5zZXR0aW5ncy5yb3RhdGlvbi55LFxuICAgICAgICB6OiB0aGlzLnNldHRpbmdzLnJvdGF0aW9uLnpcbiAgICAgIH0pO1xuICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuc2V0dGluZ3MucGFyZW50U2VsZWN0b3IpO1xuICAgICAgaWYgKHBhcmVudEVsZW1lbnQpIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpO2Vsc2Uge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJ2ci1ncmFiLXJvdGF0ZS1zdGF0aWNcIiwgXCJcIik7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZShcInNoLWdyYWJiYWJsZVwiLCBcIlwiKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc2V0QXR0cmlidXRlKFwic3RyZXRjaGFibGVcIiwgXCJcIik7XG4gICAgICAgIHRoaXMuc2NlbmUuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBwb2ludGVyIGZvciBncmFiUm90YXRlU3RhdGljXG4gICAgICB0aGlzLmNvbnRhaW5lci53ZWIydnIgPSB3ZWIydnI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZVNreVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVTa3koKSB7XG4gICAgICAvLyBjcmVhdGUgc2t5IGlmIHNreSBkb2VzbnQgZXhpc3RcbiAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImEtc2t5XCIpLmxlbmd0aCA9PSAwICYmIHRoaXMuc2V0dGluZ3Muc2t5Ym94KSB7XG4gICAgICAgIHRoaXMuc2t5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtc2t5XCIpO1xuICAgICAgICB0aGlzLnNreS5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLCBcIiNhOWY4ZmVcIik7XG4gICAgICAgIHRoaXMuc2NlbmUuYXBwZW5kQ2hpbGQodGhpcy5za3kpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVDb250cm9sbGVyc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVDb250cm9sbGVycygpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgICAgLy8gY3Vyc29yIG9ubHkgZm9yIGRldiB0ZXN0aW5nIG9uIGRlc2t0b3BcbiAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb3VzZUN1cnNvclwiKSkge1xuICAgICAgICB2YXIgY3Vyc29yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtZW50aXR5XCIpO1xuICAgICAgICBjdXJzb3IuaWQgPSBcIm1vdXNlQ3Vyc29yXCI7XG4gICAgICAgIGN1cnNvci5zZXRBdHRyaWJ1dGUoXCJjdXJzb3JcIiwgXCJyYXlPcmlnaW5cIiwgXCJtb3VzZVwiKTtcbiAgICAgICAgY3Vyc29yLnNldEF0dHJpYnV0ZShcInJheWNhc3RlclwiLCBcIm9iamVjdHM6IC5cIi5jb25jYXQodGhpcy5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZywgXCIsIC5jb2xsaWRhYmxlXCIpKTtcbiAgICAgICAgdGhpcy5zY2VuZS5hcHBlbmRDaGlsZChjdXJzb3IpO1xuICAgICAgfVxuXG4gICAgICAvLyBzdXBlciBoYW5kcyA2RE9GXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5jcmVhdGVDb250cm9sbGVycyAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsZWZ0SGFuZFwiKSkge1xuICAgICAgICB2YXIgcmF5Y2FzdGVyID0gXCJvYmplY3RzOiAuXCIuY29uY2F0KHRoaXMuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcsIFwiLCAuY29sbGlkYWJsZTsgZmFyOiBcIikuY29uY2F0KHRoaXMuc2V0dGluZ3MucmF5Y2FzdGVyRmFyKTtcbiAgICAgICAgdmFyIHN1cGVyaGFuZHMgPSBcImNvbGxpZGVyRXZlbnQ6IHJheWNhc3Rlci1pbnRlcnNlY3Rpb247IGNvbGxpZGVyRXZlbnRQcm9wZXJ0eTogZWxzOyBjb2xsaWRlckVuZEV2ZW50OnJheWNhc3Rlci1pbnRlcnNlY3Rpb24tY2xlYXJlZDsgY29sbGlkZXJFbmRFdmVudFByb3BlcnR5OiBjbGVhcmVkRWxzOyBncmFiU3RhcnRCdXR0b25zOiBncmlwZG93bjsgZ3JhYkVuZEJ1dHRvbnM6IGdyaXB1cDsgc3RyZXRjaFN0YXJ0QnV0dG9uczogZ3JpcGRvd247IHN0cmV0Y2hFbmRCdXR0b25zOiBncmlwdXBcIjtcbiAgICAgICAgdmFyIGxlZnRIYW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtZW50aXR5XCIpO1xuICAgICAgICBsZWZ0SGFuZC5pZCA9IFwibGVmdEhhbmRcIjtcbiAgICAgICAgbGVmdEhhbmQuc2V0QXR0cmlidXRlKFwiaGFuZC1jb250cm9sc1wiLCBcImhhbmQ6bGVmdDsgaGFuZE1vZGVsU3R5bGU6IGhpZ2hQb2x5OyBjb2xvcjogI2ZmY2NjY1wiKTtcbiAgICAgICAgbGVmdEhhbmQuc2V0QXR0cmlidXRlKFwibGFzZXItY29udHJvbHNcIiwgXCJcIik7XG4gICAgICAgIGxlZnRIYW5kLnNldEF0dHJpYnV0ZShcInJheWNhc3RlclwiLCByYXljYXN0ZXIpO1xuICAgICAgICBsZWZ0SGFuZC5zZXRBdHRyaWJ1dGUoXCJzdXBlci1oYW5kc1wiLCBzdXBlcmhhbmRzKTtcbiAgICAgICAgdmFyIHJpZ2h0SGFuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLWVudGl0eVwiKTtcbiAgICAgICAgcmlnaHRIYW5kLmlkID0gXCJyaWdodEhhbmRcIjtcbiAgICAgICAgcmlnaHRIYW5kLnNldEF0dHJpYnV0ZShcImhhbmQtY29udHJvbHNcIiwgXCJoYW5kOnJpZ2h0OyBoYW5kTW9kZWxTdHlsZTogaGlnaFBvbHk7IGNvbG9yOiAjZmZjY2NjXCIpO1xuICAgICAgICByaWdodEhhbmQuc2V0QXR0cmlidXRlKFwibGFzZXItY29udHJvbHNcIiwgXCJcIik7XG4gICAgICAgIHJpZ2h0SGFuZC5zZXRBdHRyaWJ1dGUoXCJyYXljYXN0ZXJcIiwgcmF5Y2FzdGVyKTtcbiAgICAgICAgcmlnaHRIYW5kLnNldEF0dHJpYnV0ZShcInN1cGVyLWhhbmRzXCIsIHN1cGVyaGFuZHMpO1xuICAgICAgICB0aGlzLnNjZW5lLmFwcGVuZENoaWxkKGxlZnRIYW5kKTtcbiAgICAgICAgdGhpcy5zY2VuZS5hcHBlbmRDaGlsZChyaWdodEhhbmQpO1xuICAgICAgfVxuICAgICAgLy8ga2V5Ym9hcmRcbiAgICAgIHRoaXMua2V5Ym9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZyLWtleWJvYXJkXCIpO1xuICAgICAgaWYgKCF0aGlzLmtleWJvYXJkKSB7XG4gICAgICAgIHRoaXMua2V5Ym9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1lbnRpdHlcIik7XG4gICAgICAgIHRoaXMua2V5Ym9hcmQuaWQgPSBcInZyLWtleWJvYXJkXCI7XG4gICAgICAgIHRoaXMua2V5Ym9hcmQuc2V0QXR0cmlidXRlKFwiYS1rZXlib2FyZFwiLCBcIlwiKTtcbiAgICAgICAgdGhpcy5rZXlib2FyZC5zZXRBdHRyaWJ1dGUoXCJzaC1ncmFiYmFibGVcIiwgXCJcIik7XG4gICAgICAgIHRoaXMuc2NlbmUuYXBwZW5kQ2hpbGQodGhpcy5rZXlib2FyZCk7XG4gICAgICAgIHRoaXMua2V5Ym9hcmQub2JqZWN0M0QudmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIGN1cnJlbnQgYWN0aXZlIGlucHV0XG4gICAgICAgIHRoaXMua2V5Ym9hcmQuYWN0aXZlSW5wdXQgPSBudWxsO1xuICAgICAgICAvLyBldmVudCBsaXN0ZW5lciBmb3IgdGhlIGtleWJvYXJkIGtleSBwcmVzcyBcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYS1rZXlib2FyZC11cGRhdGUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGlmIChfdGhpczIua2V5Ym9hcmQuYWN0aXZlSW5wdXQpIHtcbiAgICAgICAgICAgIHZhciBjb2RlID0gcGFyc2VJbnQoZS5kZXRhaWwuY29kZSk7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBfdGhpczIua2V5Ym9hcmQuYWN0aXZlSW5wdXQudmFsdWU7XG5cbiAgICAgICAgICAgIC8vIGJhY2tzcGFjZVxuICAgICAgICAgICAgaWYgKGNvZGUgPT0gOCkgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICAvLyBzdWJtaXQgb3IgY2FuY2VsXG4gICAgICAgICAgICBlbHNlIGlmIChjb2RlID09IDYgfHwgY29kZSA9PSAyNCkge1xuICAgICAgICAgICAgICBfdGhpczIua2V5Ym9hcmQub2JqZWN0M0QudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICBfdGhpczIua2V5Ym9hcmQub2JqZWN0M0QucG9zaXRpb24ueSA9IDEwMDAwOyAvLyBiZWNhdXNlIHJheWNhc3Rpbmcgc3RpbGwgY29sbGlkZXMgd2l0aCBpbnZpc2libGUgb2JqZWN0c1xuICAgICAgICAgICAgICBfdGhpczIua2V5Ym9hcmQuYWN0aXZlSW5wdXQuZWxlbWVudC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgX3RoaXMyLmtleWJvYXJkLmFjdGl2ZUlucHV0LmVsZW1lbnQudXBkYXRlKCk7XG4gICAgICAgICAgICAgIF90aGlzMi5rZXlib2FyZC5hY3RpdmVJbnB1dCA9IG51bGw7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlnbm9yZSBhcnJvdyBrZXlzXG4gICAgICAgICAgICBlbHNlIGlmICghWzM3LCAzOCwgMzksIDQwXS5pbmNsdWRlcyhjb2RlKSkgdmFsdWUgKz0gZS5kZXRhaWwudmFsdWU7XG4gICAgICAgICAgICBfdGhpczIua2V5Ym9hcmQuYWN0aXZlSW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIF90aGlzMi5rZXlib2FyZC5hY3RpdmVJbnB1dC5lbGVtZW50LnVwZGF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG59KCk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvYXNzZXRNYW5hZ2VyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9hc3NldE1hbmFnZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBBc3NldE1hbmFnZXIpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXRbXCJyZXR1cm5cIl0gIT0gbnVsbCkgaXRbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbnZhciBBc3NldE1hbmFnZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBBc3NldE1hbmFnZXIoc2NlbmUpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXNzZXRNYW5hZ2VyKTtcbiAgICB2YXIgYXNzZXRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhLWFzc2V0c1wiKVswXTtcbiAgICBpZiAoYXNzZXRzKSB0aGlzLmFzc2V0cyA9IGFzc2V0cztlbHNlIHtcbiAgICAgIHRoaXMuYXNzZXRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtYXNzZXRzXCIpO1xuICAgICAgc2NlbmUuYXBwZW5kQ2hpbGQodGhpcy5hc3NldHMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHVwZGF0ZSBjdXJyZW50LWlkIGF0dHJpYnV0ZVxuICByZXR1cm4gX2NyZWF0ZUNsYXNzKEFzc2V0TWFuYWdlciwgW3tcbiAgICBrZXk6IFwidXBkYXRlQ3VycmVudEFzc2V0SWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ3VycmVudEFzc2V0SWQoKSB7XG4gICAgICB2YXIgY3VycmVudEFzc2V0SWQgPSBwYXJzZUludCh0aGlzLmFzc2V0cy5nZXRBdHRyaWJ1dGUoXCJjdXJyZW50LWlkXCIpKTtcbiAgICAgIGlmICghdGhpcy5hc3NldHMuZ2V0QXR0cmlidXRlKFwiY3VycmVudC1pZFwiKSkge1xuICAgICAgICB0aGlzLmFzc2V0cy5zZXRBdHRyaWJ1dGUoXCJjdXJyZW50LWlkXCIsIDApO1xuICAgICAgICBjdXJyZW50QXNzZXRJZCA9IDA7XG4gICAgICB9XG4gICAgICB0aGlzLmFzc2V0cy5zZXRBdHRyaWJ1dGUoXCJjdXJyZW50LWlkXCIsIGN1cnJlbnRBc3NldElkICsgMSk7XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBjdXJyZW50LWlkIGF0dHJpYnV0ZSBhbmQgcmV0dXJuIGl0LlxuICAgIC8vIHVzZWQgZm9yIGVsZW1lbnRzIChleC4gdmlkZW8pIG91dHNpZGUgYS1hc3NldHMgdGFnXG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlQ3VycmVudEFzc2V0SWRSZXR1cm5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ3VycmVudEFzc2V0SWRSZXR1cm4oKSB7XG4gICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRBc3NldElkKCk7XG4gICAgICByZXR1cm4gXCJhc3NldC1cIiArIHRoaXMuYXNzZXRzLmdldEF0dHJpYnV0ZShcImN1cnJlbnQtaWRcIik7XG4gICAgfVxuXG4gICAgLy8gZmluZCBhc3NldCBpZiBleGlzdHMgaWYgbm90IGNyZWF0ZSBhbmQgcmV0dXJuIGl0XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0QXNzZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXNzZXQocGF0aCwgdHlwZSkge1xuICAgICAgdmFyIGFzc2V0cyA9IHRoaXMuYXNzZXRzLmdldENoaWxkcmVuKCk7XG4gICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYXNzZXRzKSxcbiAgICAgICAgX3N0ZXA7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBhc3NldCA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgIGlmIChhc3NldC5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgPT09IHBhdGgpIHJldHVybiBhc3NldC5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9pdGVyYXRvci5lKGVycik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfaXRlcmF0b3IuZigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQXNzZXQocGF0aCwgdHlwZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNyZWF0ZUFzc2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUFzc2V0KHBhdGgsIHR5cGUpIHtcbiAgICAgIHZhciBhc3NldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gICAgICBhc3NldC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgcGF0aCk7XG4gICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRBc3NldElkKCk7XG4gICAgICB2YXIgaWQgPSBcImFzc2V0LVwiICsgdGhpcy5hc3NldHMuZ2V0QXR0cmlidXRlKFwiY3VycmVudC1pZFwiKTtcbiAgICAgIGFzc2V0LnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcbiAgICAgIC8vIGhhdmUgdG8gbWFudWFseSBhZGQgY3Jvc3NvcmlnaW4gZm9yIGFsbCBleHRlcm5hbCBhc3NldHMgdG8gbG9hZFxuICAgICAgYXNzZXQuc2V0QXR0cmlidXRlKFwiY3Jvc3NvcmlnaW5cIiwgXCJBbm9ueW1vdXNcIik7XG4gICAgICB0aGlzLmFzc2V0cy5hcHBlbmRDaGlsZChhc3NldCk7XG4gICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUFzc2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUFzc2V0KGlkKSB7XG4gICAgICB0aGlzLmFzc2V0cy5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaWQpLnJlbW92ZSgpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2NvbXBvbmVudHMvYW5pbWF0ZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvY29tcG9uZW50cy9hbmltYXRlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoKSA9PiB7XG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcInZyLWFuaW1hdGVcIiwge1xuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBfdGhpcyRlbCRlbGVtZW50LCBfdGhpcyRlbCRlbGVtZW50MiwgX3RoaXMkZWwkZWxlbWVudDMsIF90aGlzJGVsJGVsZW1lbnQ0O1xuICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgIC8vIGxpc3RlbmVzIGZvciBjc3MgYW5pbWF0aW9uIGFuZCB0cmFuc2xhdGlvblxuICAgIChfdGhpcyRlbCRlbGVtZW50ID0gdGhpcy5lbC5lbGVtZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRlbCRlbGVtZW50ID09PSB2b2lkIDAgfHwgX3RoaXMkZWwkZWxlbWVudC5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25zdGFydFwiLCB0aGlzLnN0YXJ0QW5pbWF0aW9uLmJpbmQodGhpcykpO1xuICAgIChfdGhpcyRlbCRlbGVtZW50MiA9IHRoaXMuZWwuZWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXMkZWwkZWxlbWVudDIgPT09IHZvaWQgMCB8fCBfdGhpcyRlbCRlbGVtZW50Mi5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJhbmltYXRpb25lbmRcIiwgdGhpcy5zdG9wQW5pbWF0aW9uLmJpbmQodGhpcykpO1xuICAgIChfdGhpcyRlbCRlbGVtZW50MyA9IHRoaXMuZWwuZWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXMkZWwkZWxlbWVudDMgPT09IHZvaWQgMCB8fCBfdGhpcyRlbCRlbGVtZW50My5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uc3RhcnRcIiwgdGhpcy5zdGFydEFuaW1hdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAoX3RoaXMkZWwkZWxlbWVudDQgPSB0aGlzLmVsLmVsZW1lbnQpID09PSBudWxsIHx8IF90aGlzJGVsJGVsZW1lbnQ0ID09PSB2b2lkIDAgfHwgX3RoaXMkZWwkZWxlbWVudDQuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCB0aGlzLnN0b3BBbmltYXRpb24uYmluZCh0aGlzKSk7XG4gIH0sXG4gIHRpY2s6IGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgdmFyIF90aGlzJGVsJGVsZW1lbnQ1O1xuICAgIGlmICh0aGlzLnJ1bm5pbmcpIChfdGhpcyRlbCRlbGVtZW50NSA9IHRoaXMuZWwuZWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXMkZWwkZWxlbWVudDUgPT09IHZvaWQgMCB8fCBfdGhpcyRlbCRlbGVtZW50NS53ZWIydnIudXBkYXRlKCk7XG4gIH0sXG4gIHN0YXJ0QW5pbWF0aW9uOiBmdW5jdGlvbiBzdGFydEFuaW1hdGlvbigpIHtcbiAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICB9LFxuICBzdG9wQW5pbWF0aW9uOiBmdW5jdGlvbiBzdG9wQW5pbWF0aW9uKCkge1xuICAgIHZhciBfdGhpcyRlbCRlbGVtZW50NjtcbiAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAvLyBvbmUgZmluYWwgdXBkYXRlXG4gICAgKF90aGlzJGVsJGVsZW1lbnQ2ID0gdGhpcy5lbC5lbGVtZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRlbCRlbGVtZW50NiA9PT0gdm9pZCAwIHx8IF90aGlzJGVsJGVsZW1lbnQ2LndlYjJ2ci51cGRhdGUoKTtcbiAgfVxufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2NvbXBvbmVudHMvYm9yZGVyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2NvbXBvbmVudHMvYm9yZGVyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKCgpID0+IHtcblxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwidnItYm9yZGVyXCIsIHtcbiAgc2NoZW1hOiB7XG4gICAgd2lkdGg6IHtcbiAgICAgIHR5cGU6IFwibnVtYmVyXCJcbiAgICB9LFxuICAgIGNvbG9yOiB7XG4gICAgICB0eXBlOiBcInN0cmluZ1wiXG4gICAgfVxuICB9LFxuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMucnVubmluZyA9IHRydWU7XG4gICAgdmFyIHBsYW5lID0gdGhpcy5lbC5vYmplY3QzRC5jaGlsZHJlblswXTtcbiAgICB2YXIgZWRnZXMgPSBuZXcgVEhSRUUuRWRnZXNHZW9tZXRyeShwbGFuZS5nZW9tZXRyeSk7XG4gICAgdmFyIGxpbmUgPSBuZXcgVEhSRUUuTGluZVNlZ21lbnRzKGVkZ2VzLCBuZXcgVEhSRUUuTGluZUJhc2ljTWF0ZXJpYWwoe1xuICAgICAgY29sb3I6IDB4MDAwMDAwLFxuICAgICAgbGluZXdpZHRoOiB0aGlzLmRhdGEud2lkdGhcbiAgICB9KSk7XG4gICAgdGhpcy5ib3JkZXJPYmplY3QgPSBsaW5lO1xuICAgIHRoaXMuZWwuZWxlbWVudC53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5vYmplY3QzRC5hZGQodGhpcy5ib3JkZXJPYmplY3QpO1xuXG4gICAgLy9tYXliZSBjbGlwcGluZ0NvbnRleHQgaW5zaWRlIHRpY2s/XG4gICAgaWYgKHRoaXMuZWwuZWxlbWVudC5jbGlwcGluZ0NvbnRleHQpIHtcbiAgICAgIGxpbmUubWF0ZXJpYWwuY2xpcHBpbmdQbGFuZXMgPSB0aGlzLmVsLmVsZW1lbnQuY2xpcHBpbmdDb250ZXh0LnBsYW5lcztcbiAgICAgIGxpbmUubWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH1cbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgLy8gd2FpdGluZyBmb3IgdGhyZWUuanMoV2ViR0wpIHRvIGFkZCBsaW5lV2lkdGggc3VwcG9ydCBmb3IgV2luZG93cyhEaXJlY3RYKSBicm93c2VycyBmb3Igbm93IGxpbmV3aWR0aCBpcyAxIG5vIG1hdHRlciB3aGF0IHlvdSBzZXQgaXQuXG4gICAgLy8gbGluZVdpZHRoIHdvcmtzIGZvciBvdGhlciBPUy5cbiAgICB2YXIgYm9yZGVyV2lkdGggPSB0aGlzLmRhdGEud2lkdGg7XG5cbiAgICAvLyBjdXN0b20gZWxlbWVudCBib3JkZXIgd2lkdGhcbiAgICBpZiAodGhpcy5lbC5lbGVtZW50LmJvcmRlcldpZHRoKSB0aGlzLmJvcmRlck9iamVjdC5tYXRlcmlhbC5saW5ld2lkdGggPSB0aGlzLmVsLmVsZW1lbnQuYm9yZGVyV2lkdGg7ZWxzZSB0aGlzLmJvcmRlck9iamVjdC5tYXRlcmlhbC5saW5ld2lkdGggPSBib3JkZXJXaWR0aDtcblxuICAgIC8vIGN1c3RvbSBlbGVtZW50IGJvcmRlciBjb2xvclxuICAgIGlmICh0aGlzLmVsLmVsZW1lbnQuYm9yZGVyQ29sb3IpIHRoaXMuYm9yZGVyT2JqZWN0Lm1hdGVyaWFsLmNvbG9yID0gdGhpcy5lbC5lbGVtZW50LmJvcmRlckNvbG9yO2Vsc2UgdGhpcy5ib3JkZXJPYmplY3QubWF0ZXJpYWwuY29sb3IgPSBuZXcgVEhSRUUuQ29sb3IodGhpcy5kYXRhLmNvbG9yKTtcbiAgfSxcbiAgdXBkYXRlQm9yZGVyOiBmdW5jdGlvbiB1cGRhdGVCb3JkZXIoKSB7XG4gICAgdmFyIF90aGlzJGVsJGVsZW1lbnQ7XG4gICAgaWYgKChfdGhpcyRlbCRlbGVtZW50ID0gdGhpcy5lbC5lbGVtZW50KSAhPT0gbnVsbCAmJiBfdGhpcyRlbCRlbGVtZW50ICE9PSB2b2lkIDAgJiYgX3RoaXMkZWwkZWxlbWVudC52aXNpYmxlKSB7XG4gICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICAgICAgdGhpcy5ib3JkZXJPYmplY3QubWF0ZXJpYWwudmlzaWJsZSA9IHRydWU7XG4gICAgfSBlbHNlIHRoaXMuYm9yZGVyT2JqZWN0Lm1hdGVyaWFsLnZpc2libGUgPSBmYWxzZTtcbiAgfSxcbiAgdGljazogZnVuY3Rpb24gdGljaygpIHtcbiAgICBpZiAodGhpcy5ydW5uaW5nKSB7XG4gICAgICB2YXIgc2NhbGUgPSB0aGlzLmVsLm9iamVjdDNELnNjYWxlO1xuICAgICAgdmFyIHBsYW5lID0gdGhpcy5lbC5vYmplY3QzRC5jaGlsZHJlblswXS5nZW9tZXRyeS5jbG9uZSgpO1xuICAgICAgcGxhbmUuc2NhbGUoc2NhbGUueCwgc2NhbGUueSwgc2NhbGUueik7XG4gICAgICB2YXIgZWRnZXMgPSBuZXcgVEhSRUUuRWRnZXNHZW9tZXRyeShwbGFuZSk7XG4gICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLmVsLm9iamVjdDNELnBvc2l0aW9uO1xuICAgICAgdGhpcy5ib3JkZXJPYmplY3QuZ2VvbWV0cnkgPSBlZGdlcztcbiAgICAgIHRoaXMuYm9yZGVyT2JqZWN0LnBvc2l0aW9uLnNldChwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56ICsgdGhpcy5lbC5lbGVtZW50LndlYjJ2ci5zZXR0aW5ncy5sYXllclN0ZXAgKiAyKTtcbiAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgIH1cbiAgfSxcbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgdGhpcy5lbC5lbGVtZW50LndlYjJ2ci5hZnJhbWUuY29udGFpbmVyLm9iamVjdDNELnJlbW92ZSh0aGlzLmJvcmRlck9iamVjdCk7XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb21wb25lbnRzL2dyYWJSb3RhdGVTdGF0aWMuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2NvbXBvbmVudHMvZ3JhYlJvdGF0ZVN0YXRpYy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKCkgPT4ge1xuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0W1wicmV0dXJuXCJdICE9IG51bGwpIGl0W1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH1cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcInZyLWdyYWItcm90YXRlLXN0YXRpY1wiLCB7XG4gIHRpY2s6IGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgaWYgKHRoaXMuZWwuY29tcG9uZW50c1tcInNoLWdyYWJiYWJsZVwiXS5ncmFiYmVkKSB7XG4gICAgICAvLyB1cGRhdGUgY2xpcHBpbmcgd2hlbiBtb3ZpbmdcbiAgICAgIGlmICh0aGlzLmVsLndlYjJ2ci5zY3JvbGwuaGFzU2Nyb2xsKSB7XG4gICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmVsLndlYjJ2ci5lbGVtZW50cyksXG4gICAgICAgICAgX3N0ZXA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX3N0ZXAudmFsdWU7XG4gICAgICAgICAgICBlbGVtZW50LnVwZGF0ZUNsaXBwaW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIF9pdGVyYXRvci5mKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBvYmogPSB0aGlzLmVsLm9iamVjdDNEO1xuICAgICAgdmFyIGhhbmQgPSB0aGlzLmVsLmNvbXBvbmVudHNbXCJzaC1ncmFiYmFibGVcIl0uZ3JhYmJlcnNbMF0ub2JqZWN0M0Q7XG4gICAgICBvYmoucm90YXRpb24ueSA9IE1hdGguYXRhbjIoaGFuZC5wb3NpdGlvbi54IC0gKG9iai5wb3NpdGlvbi54ICsgdGhpcy5lbC5jaGlsZHJlblswXS5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSAvIDIpLCBoYW5kLnBvc2l0aW9uLnogLSBvYmoucG9zaXRpb24ueik7XG5cbiAgICAgIC8vb2JqLnJvdGF0aW9uLnggPSBoYW5kLnJvdGF0aW9uLng7XG4gICAgICAvL29iai5yb3RhdGlvbi55ID0gaGFuZC5yb3RhdGlvbi55O1xuICAgICAgLy9vYmoucm90YXRpb24ueiA9IGhhbmQucm90YXRpb24uejtcbiAgICB9XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb21wb25lbnRzL3JlbmRlcmVyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvY29tcG9uZW50cy9yZW5kZXJlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKCgpID0+IHtcblxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwidnItcmVuZGVyZXJcIiwge1xuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMuZWwuc2NlbmVFbC5yZW5kZXJlci5sb2NhbENsaXBwaW5nRW5hYmxlZCA9IHRydWU7XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb21wb25lbnRzL3Njcm9sbGJhci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9jb21wb25lbnRzL3Njcm9sbGJhci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoKSA9PiB7XG5cbmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXRbXCJyZXR1cm5cIl0gIT0gbnVsbCkgaXRbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfVxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpdGVyW1N5bWJvbC5pdGVyYXRvcl0gIT0gbnVsbCB8fCBpdGVyW1wiQEBpdGVyYXRvclwiXSAhPSBudWxsKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfVxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH1cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcInZyLXNjcm9sbGJhclwiLCB7XG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IHBhcnNlRmxvYXQodGhpcy5lbC53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZC5lbGVtZW50LnN0eWxlLmhlaWdodCkgLSB0aGlzLmVsLndlYjJ2ci5zZXR0aW5ncy5zY3JvbGxXaW5kb3dIZWlnaHQ7XG4gICAgICBpZiAodGhpcy5lbC53ZWIydnIuc2Nyb2xsLnNjcm9sbENvbnRhaW5lciA9PSB0aGlzLmVsLndlYjJ2ci5jb250YWluZXIpIHNjcm9sbEhlaWdodCA9IHRoaXMuZWwud2ViMnZyLnNjcm9sbC5zY3JvbGxDb250YWluZXIuc2Nyb2xsSGVpZ2h0IC0gdGhpcy5lbC53ZWIydnIuc2Nyb2xsLnNjcm9sbENvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICB2YXIgc2Nyb2xsWSA9ICgxIC0gZXZ0LmRldGFpbC5pbnRlcnNlY3Rpb24udXYueSkgKiBzY3JvbGxIZWlnaHQgLyB0aGlzLmVsLndlYjJ2ci5zZXR0aW5ncy5zY2FsZTtcbiAgICAgIHZhciBlbGVtZW50cyA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLmVsLndlYjJ2ci5lbGVtZW50cyk7XG4gICAgICAvLyByZW1vdmUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHRoZSBiYWNrZ29ydW5kIG9mIGNvbnRhaW5lclxuICAgICAgZWxlbWVudHMuc2hpZnQoKTtcbiAgICAgIHRoaXMuZWwucG9pbnRlci5vYmplY3QzRC5wb3NpdGlvbi5zZXRZKHRoaXMucG9pbnRFbmRZICsgZXZ0LmRldGFpbC5pbnRlcnNlY3Rpb24udXYueSAqICh0aGlzLnBvaW50U3RhcnRZIC0gdGhpcy5wb2ludEVuZFkpKTtcbiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihlbGVtZW50cyksXG4gICAgICAgIF9zdGVwO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgZWxlbWVudCA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgIGVsZW1lbnQucG9zaXRpb24uc2Nyb2xsWSA9IHNjcm9sbFk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfaXRlcmF0b3IuZShlcnIpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2l0ZXJhdG9yLmYoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWwud2ViMnZyLnVwZGF0ZSgpO1xuICAgIH0uYmluZCh0aGlzKSk7XG4gIH0sXG4gIHBsYXk6IGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgdmFyIHdpZHRoID0gcGFyc2VGbG9hdCh0aGlzLmVsLndlYjJ2ci5hZnJhbWUuY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpKTtcbiAgICB2YXIgaGVpZ2h0ID0gcGFyc2VGbG9hdCh0aGlzLmVsLndlYjJ2ci5hZnJhbWUuY29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSk7XG5cbiAgICAvLyBpbml0IHBsYW5lIHNpemVcbiAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHdpZHRoIC8gMjApO1xuICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGhlaWdodCk7XG5cbiAgICAvL2luaXQgc2Nyb2xsYmFyIHBvc2l0aW9uXG4gICAgdGhpcy5lbC5zY3JvbGxiYXIub2JqZWN0M0QucG9zaXRpb24uc2V0WCh3aWR0aCArIHBhcnNlRmxvYXQodGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSAvIDIpKTtcbiAgICB0aGlzLmVsLnNjcm9sbGJhci5vYmplY3QzRC5wb3NpdGlvbi5zZXRZKDAgLSBoZWlnaHQgLyAyKTsgLy8xLjk2XG4gICAgdGhpcy5lbC5zY3JvbGxiYXIub2JqZWN0M0QucG9zaXRpb24uc2V0WigtKHRoaXMuZWwud2ViMnZyLnNldHRpbmdzLmxheWVyU3RlcCAqIDQpKTtcblxuICAgIC8vIGluaXQgcG9pbnRlciBwb3NpdGlvbiBhbmQgc2l6ZVxuICAgIHRoaXMuZWwucG9pbnRlci5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgd2lkdGggLyAyMCk7XG4gICAgdGhpcy5lbC5wb2ludGVyLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHdpZHRoIC8gMjApO1xuICAgIHRoaXMucG9pbnRTdGFydFkgPSBoZWlnaHQgLyAyIC0gcGFyc2VGbG9hdCh0aGlzLmVsLnBvaW50ZXIuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpKSAvIDI7XG4gICAgdGhpcy5wb2ludEVuZFkgPSB0aGlzLnBvaW50U3RhcnRZIC0gaGVpZ2h0ICsgcGFyc2VGbG9hdCh0aGlzLmVsLnBvaW50ZXIuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpKTtcbiAgICB0aGlzLmVsLnBvaW50ZXIub2JqZWN0M0QucG9zaXRpb24uc2V0WSh0aGlzLnBvaW50U3RhcnRZKTtcbiAgICB0aGlzLmVsLnBvaW50ZXIub2JqZWN0M0QucG9zaXRpb24uc2V0Wih0aGlzLmVsLndlYjJ2ci5zZXR0aW5ncy5sYXllclN0ZXAgKiAyKTtcbiAgfVxufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2VsZW1lbnRzL2J1dHRvbkVsZW1lbnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9lbGVtZW50cy9idXR0b25FbGVtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEJ1dHRvbUVsZW1lbnQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdGV4dEVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdGV4dEVsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy90ZXh0RWxlbWVudC5qc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfY2FsbFN1cGVyKHQsIG8sIGUpIHsgcmV0dXJuIG8gPSBfZ2V0UHJvdG90eXBlT2YobyksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSA/IFJlZmxlY3QuY29uc3RydWN0KG8sIGUgfHwgW10sIF9nZXRQcm90b3R5cGVPZih0KS5jb25zdHJ1Y3RvcikgOiBvLmFwcGx5KHQsIGUpKTsgfVxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG52YXIgQnV0dG9tRWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1RleHRFbGVtZW50KSB7XG4gIGZ1bmN0aW9uIEJ1dHRvbUVsZW1lbnQod2ViMnZyLCBkb21FbGVtZW50LCBsYXllcikge1xuICAgIHZhciBfdGhpcztcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnV0dG9tRWxlbWVudCk7XG4gICAgX3RoaXMgPSBfY2FsbFN1cGVyKHRoaXMsIEJ1dHRvbUVsZW1lbnQsIFt3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyXSk7XG4gICAgX3RoaXMuYm9yZGVyQ29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoMHgwMDAwMDApO1xuICAgIF90aGlzLmJvcmRlcldpZHRoID0gMTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgX2luaGVyaXRzKEJ1dHRvbUVsZW1lbnQsIF9UZXh0RWxlbWVudCk7XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoQnV0dG9tRWxlbWVudCwgW3tcbiAgICBrZXk6IFwidXBkYXRlVGV4dFBhZGRpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVGV4dFBhZGRpbmcoKSB7XG4gICAgICAvLyBpZ25vcmUgcGFkZGluZyBmb3IgYnV0dG9uc1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVUZXh0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRleHQoKSB7XG4gICAgICBpZiAodGhpcy5kb21FbGVtZW50LnRhZ05hbWUgPT0gXCJJTlBVVFwiKSB0aGlzLnRleHRWYWx1ZSA9IHRoaXMuZG9tRWxlbWVudC52YWx1ZS5yZXBsYWNlKC9cXHN7Mix9L2csICcgJyk7XG4gICAgfVxuICB9XSk7XG59KF90ZXh0RWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZWxlbWVudHMvY2FudmFzRWxlbWVudC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2VsZW1lbnRzL2NhbnZhc0VsZW1lbnQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQ2FudmFzRWxlbWVudClcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy9lbGVtZW50LmpzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9XG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbnZhciBDYW52YXNFbGVtZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRWxlbWVudCkge1xuICBmdW5jdGlvbiBDYW52YXNFbGVtZW50KHdlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXIpIHtcbiAgICB2YXIgX3RoaXM7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbnZhc0VsZW1lbnQpO1xuICAgIF90aGlzID0gX2NhbGxTdXBlcih0aGlzLCBDYW52YXNFbGVtZW50LCBbd2ViMnZyLCBkb21FbGVtZW50LCBsYXllcl0pO1xuICAgIF90aGlzLmltYWdlSWQgPSBudWxsO1xuICAgIF90aGlzLmVudGl0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLWltYWdlXCIpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICBfaW5oZXJpdHMoQ2FudmFzRWxlbWVudCwgX0VsZW1lbnQpO1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKENhbnZhc0VsZW1lbnQsIFt7XG4gICAga2V5OiBcInVwZGF0ZUltYWdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUltYWdlKHNyYykge1xuICAgICAgdmFyIGFzc2V0SWQgPSB0aGlzLndlYjJ2ci5hZnJhbWUuYXNzZXRNYW5hZ2VyLmdldEFzc2V0KHNyYywgXCJpbWdcIik7XG5cbiAgICAgIC8vIHJlbW92ZSBvbGQgaW1hZ2UgaWYgdGhlcmUgaXMgbmV3IGltYWdlXG4gICAgICBpZiAodGhpcy5pbWFnZUlkICYmIHRoaXMuaW1hZ2VJZCAhPSBhc3NldElkKSB0aGlzLndlYjJ2ci5hZnJhbWUuYXNzZXRNYW5hZ2VyLnJlbW92ZUFzc2V0KHRoaXMuaW1hZ2VJZCk7XG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIklNQUdFX1wiICsgYXNzZXRJZCk7XG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIjXCIgKyBhc3NldElkKTtcbiAgICAgIHRoaXMuaW1hZ2VJZCA9IGFzc2V0SWQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNwZWNpZmljVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNwZWNpZmljVXBkYXRlKCkge1xuICAgICAgdGhpcy51cGRhdGVJbWFnZSh0aGlzLmRvbUVsZW1lbnQudG9EYXRhVVJMKCkpO1xuICAgIH1cbiAgfV0pO1xufShfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZWxlbWVudHMvY2hlY2tib3hFbGVtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9lbGVtZW50cy9jaGVja2JveEVsZW1lbnQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBDaGVja0JveEVsZW1lbnQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvZWxlbWVudC5qc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfY2FsbFN1cGVyKHQsIG8sIGUpIHsgcmV0dXJuIG8gPSBfZ2V0UHJvdG90eXBlT2YobyksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSA/IFJlZmxlY3QuY29uc3RydWN0KG8sIGUgfHwgW10sIF9nZXRQcm90b3R5cGVPZih0KS5jb25zdHJ1Y3RvcikgOiBvLmFwcGx5KHQsIGUpKTsgfVxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG52YXIgQ2hlY2tCb3hFbGVtZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRWxlbWVudCkge1xuICBmdW5jdGlvbiBDaGVja0JveEVsZW1lbnQod2ViMnZyLCBkb21FbGVtZW50LCBsYXllcikge1xuICAgIHZhciBfdGhpcztcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2hlY2tCb3hFbGVtZW50KTtcbiAgICBfdGhpcyA9IF9jYWxsU3VwZXIodGhpcywgQ2hlY2tCb3hFbGVtZW50LCBbd2ViMnZyLCBkb21FbGVtZW50LCBsYXllcl0pO1xuICAgIF90aGlzLmJvcmRlckNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKDB4MDAwMDAwKTtcbiAgICBfdGhpcy5ib3JkZXJXaWR0aCA9IDE7XG4gICAgX3RoaXMuZW50aXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtcGxhbmVcIik7XG4gICAgX3RoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc3BlY2lmaWNVcGRhdGUoKTtcbiAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgX2luaGVyaXRzKENoZWNrQm94RWxlbWVudCwgX0VsZW1lbnQpO1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKENoZWNrQm94RWxlbWVudCwgW3tcbiAgICBrZXk6IFwic3BlY2lmaWNVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3BlY2lmaWNVcGRhdGUoKSB7XG4gICAgICBpZiAodGhpcy5kb21FbGVtZW50LmNoZWNrZWQpIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcImNvbG9yXCIsIFwiIzAwNzVGRlwiKTtlbHNlIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcImNvbG9yXCIsIFwiI0ZGRkZGRlwiKTtcbiAgICB9XG4gIH1dKTtcbn0oX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2VsZW1lbnRzL2NvbnRhaW5lckVsZW1lbnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9lbGVtZW50cy9jb250YWluZXJFbGVtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIENvbnRhaW5lckVsZW1lbnQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvZWxlbWVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbHNfaGVscGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9oZWxwZXIgKi8gXCIuL3NyYy91dGlscy9oZWxwZXIuanNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH1cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyB0cnkgeyB2YXIgdCA9ICFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IH0gY2F0Y2ggKHQpIHt9IHJldHVybiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHJldHVybiAhIXQ7IH0pKCk7IH1cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuXG52YXIgQ29udGFpbmVyRWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0VsZW1lbnQpIHtcbiAgZnVuY3Rpb24gQ29udGFpbmVyRWxlbWVudCh3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIHZhciB0ZXh0T25seSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRhaW5lckVsZW1lbnQpO1xuICAgIF90aGlzID0gX2NhbGxTdXBlcih0aGlzLCBDb250YWluZXJFbGVtZW50LCBbd2ViMnZyLCBkb21FbGVtZW50LCBsYXllcl0pO1xuICAgIF90aGlzLnRleHRPbmx5ID0gdGV4dE9ubHk7XG4gICAgX3RoaXMuZW50aXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtcGxhbmVcIik7XG5cbiAgICAvLyBpZiBoeXBlcmxpbmsgdHJpZ2dlciBhIGNsaWNrIGV2ZW50XG4gICAgaWYgKF90aGlzLmRvbUVsZW1lbnQudGFnTmFtZSA9PSBcIkFcIikge1xuICAgICAgX3RoaXMuZW50aXR5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTGluayBjbGlja2VkIVwiLCBfdGhpcy5kb21FbGVtZW50LmNsaWNrKCkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghX3RoaXMudGV4dE9ubHkpIHtcbiAgICAgIC8vIHNob3cgYmFjayBwbGFuZSBmb3IgdGhlIG1haW4gY29udGFpbmVyXG4gICAgICBpZiAoX3RoaXMuZG9tRWxlbWVudCA9PSBfdGhpcy53ZWIydnIuY29udGFpbmVyKSBfdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzaWRlXCIsIFwiZG91YmxlXCIpO1xuXG4gICAgICAvLyBvbmx5IG5lZWRlZCBmb3IgZXhwZXJpbWVudGFsIGJhY2tncm91bmRcbiAgICAgIF90aGlzLmV4cEltYWdlSWQgPSBudWxsO1xuICAgICAgX3RoaXMub2xkQmFja2dyb3VuZEltYWdlID0gbnVsbDtcbiAgICAgIF90aGlzLm9sZERvbVBvc2l0aW9uID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIF9pbmhlcml0cyhDb250YWluZXJFbGVtZW50LCBfRWxlbWVudCk7XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoQ29udGFpbmVyRWxlbWVudCwgW3tcbiAgICBrZXk6IFwic3BlY2lmaWNVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3BlY2lmaWNVcGRhdGUoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICAgIGlmICghdGhpcy50ZXh0T25seSkge1xuICAgICAgICB2YXIgYmFja2dyb3VuZENvbG9yID0gdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgIHZhciBiYWNrZ3JvdW5kSW1hZ2UgPSB0aGlzLnN0eWxlLmJhY2tncm91bmRJbWFnZTsgLy8gdG8gZ2V0IDE6MSBhcyBodG1sIGhhdmUgdG8gdXNlIGJhY2tncm91bmQtc2l6ZTogY292ZXI7IG9yIHVzZSBleHBlcmltZW50YWxcblxuICAgICAgICBpZiAoYmFja2dyb3VuZEltYWdlICE9IFwibm9uZVwiKSB7XG4gICAgICAgICAgLy8gY2Fubm90IHVzZSBhbmltYXRpb25zIHRoYXQgcmVxdWlyZSB1cGRhdGUgdG8gYmUgY2FsbGVkIGV2ZXJ5IGZyYW1lLiBodG1sMmNhbnZhcyBpcyB2ZXJ5IHBlcmZvcm1hbmNlIGhlYXZ5LlxuICAgICAgICAgIGlmICh0aGlzLndlYjJ2ci5zZXR0aW5ncy5leHBlcmltZW50YWwpIHtcbiAgICAgICAgICAgIGlmIChiYWNrZ3JvdW5kSW1hZ2UgIT0gdGhpcy5vbGRCYWNrZ3JvdW5kSW1hZ2UgfHwgdGhpcy5vbGREb21Qb3NpdGlvbiAmJiAhdGhpcy5wb3NpdGlvbi5lcXVhbHNET01Qb3NpdGlvbih0aGlzLm9sZERvbVBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICB2YXIgaWQgPSB0aGlzLmRvbUVsZW1lbnQuaWQ7XG4gICAgICAgICAgICAgIHZhciBjdXN0b21JZCA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAoIWlkKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tSWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlkID0gXCJodG1sMmNhbnZhcy1cIiArIHRoaXMud2ViMnZyLmh0bWwyY2FudmFzSURjb3VudGVyKys7XG4gICAgICAgICAgICAgICAgdGhpcy5kb21FbGVtZW50LmlkID0gaWQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaHRtbDJjYW52YXModGhpcy5kb21FbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgb25jbG9uZTogZnVuY3Rpb24gb25jbG9uZShjbG9uZSkge1xuICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgIGNsb25lLmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgICAgICAgICAgICAgLy8gaWdub3Jpbmcgb3BhY2l0eSBiZWNhdXNlIHdlIHVzZSBvcGFjaXR5IGZyb20gYWZyYW1lXG4gICAgICAgICAgICAgICAgICBzdHlsZS5zaGVldC5pbnNlcnRSdWxlKFwiXFxuICAgICAgICAgICAgICAgICAgICAjXCIuY29uY2F0KGlkLCBcIiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcXG4gICAgICAgICAgICAgICAgICAgIH1cIikpO1xuICAgICAgICAgICAgICAgICAgLy8gaGlkZSB0aGUgdGV4dFxuICAgICAgICAgICAgICAgICAgc3R5bGUuc2hlZXQuaW5zZXJ0UnVsZShcIlxcbiAgICAgICAgICAgICAgICAgICAgI1wiLmNvbmNhdChpZCwgXCIge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0cmFuc3BhcmVudDtcXG4gICAgICAgICAgICAgICAgICAgIH1cIikpO1xuICAgICAgICAgICAgICAgICAgLy8gaGlkZSB0aGUgY2hpbGRyZW4gZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgIHN0eWxlLnNoZWV0Lmluc2VydFJ1bGUoXCJcXG4gICAgICAgICAgICAgICAgICAgICNcIi5jb25jYXQoaWQsIFwiID4gKiB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpub25lXFxuICAgICAgICAgICAgICAgICAgICB9XCIpKTtcbiAgICAgICAgICAgICAgICAgIC8vIHZyLXNwYW4gaGFzIHRvIGJlIGJsb2NrIHNvIGl0IGNhbiByZW5kZXIgcHJvcGVybHlcbiAgICAgICAgICAgICAgICAgIHN0eWxlLnNoZWV0Lmluc2VydFJ1bGUoXCJcXG4gICAgICAgICAgICAgICAgICAgICNcIi5jb25jYXQoaWQsIFwiID4gLnZyLXNwYW4ge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6YmxvY2tcXG4gICAgICAgICAgICAgICAgICAgIH1cIikpO1xuICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbUlkKSBfdGhpczIuZG9tRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpczIuZXhwSW1hZ2VJZCkgX3RoaXMyLndlYjJ2ci5hZnJhbWUuYXNzZXRNYW5hZ2VyLnJlbW92ZUFzc2V0KF90aGlzMi5leHBJbWFnZUlkKTtcbiAgICAgICAgICAgICAgICBfdGhpczIuZXhwSW1hZ2VJZCA9IF90aGlzMi53ZWIydnIuYWZyYW1lLmFzc2V0TWFuYWdlci5nZXRBc3NldChjYW52YXMudG9EYXRhVVJMKCksIFwiaW1nXCIpO1xuICAgICAgICAgICAgICAgIF90aGlzMi5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzcmM6ICNcIiArIF90aGlzMi5leHBJbWFnZUlkKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHRoaXMub2xkQmFja2dyb3VuZEltYWdlID0gYmFja2dyb3VuZEltYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoX3V0aWxzX2hlbHBlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXS5pc1VybChiYWNrZ3JvdW5kSW1hZ2UpKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgdXJsKFwiXCIpXG4gICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2UgPSBiYWNrZ3JvdW5kSW1hZ2Uuc3Vic3RyaW5nKGJhY2tncm91bmRJbWFnZS5sYXN0SW5kZXhPZignKFxcXCInKSArIDIsIGJhY2tncm91bmRJbWFnZS5sYXN0SW5kZXhPZignXFxcIiknKSk7XG4gICAgICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcInNyYzogI1wiICsgdGhpcy53ZWIydnIuYWZyYW1lLmFzc2V0TWFuYWdlci5nZXRBc3NldChiYWNrZ3JvdW5kSW1hZ2UsIFwiaW1nXCIpKTtcbiAgICAgICAgICAgIC8vIHRyYW5zcGFyZW50IGltYWdlcyBzdXBwb3J0XG4gICAgICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcInRyYW5zcGFyZW50XCIsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyBiYWNrZ3JvdW5kQ29sb3IgZG9udCByZW5kZXJzXG4gICAgICAgICAgaWYgKGJhY2tncm91bmRDb2xvciA9PSBcInJnYmEoMCwgMCwgMCwgMClcIikge1xuICAgICAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJ2aXNpYmxlXCIsIGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJ2aXNpYmxlXCIsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwiY29sb3JcIiwgYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlT3BhY2l0eSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9sZERvbVBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbi5kb21Qb3NpdGlvbjtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlT3BhY2l0eVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVPcGFjaXR5KCkge1xuICAgICAgdmFyIGFscGhhID0gcGFyc2VGbG9hdCh0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvci5zcGxpdCgnLCcpWzNdKTtcbiAgICAgIC8vIGNhbGN1bGF0ZSBmaW5hbCBhbHBoYSBjaGFubmVsIHJlc3VsdFxuICAgICAgaWYgKGFscGhhKSB7XG4gICAgICAgIHZhciBhID0gYWxwaGE7XG4gICAgICAgIHZhciBiID0gdGhpcy5zdHlsZS5vcGFjaXR5O1xuICAgICAgICBpZiAoYSA8IGIpIHtcbiAgICAgICAgICBiID0gYWxwaGE7XG4gICAgICAgICAgYSA9IHRoaXMuc3R5bGUub3BhY2l0eTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJvcGFjaXR5XCIsIGEgLSAoYSAtIGIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcbn0oX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2VsZW1lbnRzL2VsZW1lbnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9lbGVtZW50cy9lbGVtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEVsZW1lbnQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXRpbHNfcG9zaXRpb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3V0aWxzL3Bvc2l0aW9uICovIFwiLi9zcmMvdXRpbHMvcG9zaXRpb24uanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxzX21vdXNlRXZlbnRIYW5kbGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9tb3VzZUV2ZW50SGFuZGxlciAqLyBcIi4vc3JjL3V0aWxzL21vdXNlRXZlbnRIYW5kbGVyLmpzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdFtcInJldHVyblwiXSAhPSBudWxsKSBpdFtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuXG5cbnZhciBFbGVtZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRWxlbWVudCh3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVsZW1lbnQpO1xuICAgIHRoaXMud2ViMnZyID0gd2ViMnZyO1xuICAgIHRoaXMuZG9tRWxlbWVudCA9IGRvbUVsZW1lbnQ7XG4gICAgdGhpcy5sYXllciA9IGxheWVyO1xuICAgIHRoaXMuZG9tRWxlbWVudC5lbGVtZW50ID0gdGhpczsgLy8gc28gd2UgY2FuIGRvIGRvbWVFbGVtZW50LnBhcmVudE5vZGUuZWxlbWVudFxuICAgIHRoaXMuY2hpbGRFbGVtZW50cyA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLmVudGl0eSA9IG51bGw7IC8vIGFmcmFtZSBlbnRpdHkgdGhpcyBudWxsIGJlY2FzdWUgRWxlbWVudCBjbGFzcyBpcyBhYnN0cmFjdFxuICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKHRoaXMuZG9tRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJ2ci1zcGFuXCIpKSB0aGlzLnBhZGRpbmdUb01hcmdpbigpO1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgX3V0aWxzX3Bvc2l0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKHRoaXMuZG9tRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgbGF5ZXIgKiB0aGlzLndlYjJ2ci5zZXR0aW5ncy5sYXllclN0ZXAsIHdlYjJ2ci5zZXR0aW5ncy5zY2FsZSk7XG4gICAgdGhpcy5zdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZG9tRWxlbWVudCk7XG4gICAgdGhpcy5wYXJlbnRUcmFuc2Zvcm0gPSBcIm5vbmVcIjtcbiAgICB0aGlzLm5lZWRzU3RhcnRpbmdUcmFuc2Zvcm1TaXplID0gdHJ1ZTtcbiAgICB0aGlzLmluaXRDb21wbGV0ZSA9IGZhbHNlO1xuICB9XG5cbiAgLy8gY2FsbCBhZnRlciBlbnRpdHkgaXMgY3JlYXRlZCBpbiBpbmhlcml0aW5nIGNsYXNzXG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoRWxlbWVudCwgW3tcbiAgICBrZXk6IFwiaW5pdEV2ZW50SGFuZGxlcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgdGhpcy5pbml0SG92ZXIoKTtcblxuICAgICAgLy8gc2V0dGluZyB1cCBNb3VzZUV2ZW50SGFuZGxlclxuICAgICAgdGhpcy5tb3VzZUV2ZW50SGFuZGxlID0gbmV3IF91dGlsc19tb3VzZUV2ZW50SGFuZGxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSh0aGlzKTtcblxuICAgICAgLy8gZHluYW1pYyBsaXN0ZW5lcnNcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZXZlbnRMaXN0ZW5lckFkZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm1vdXNlRXZlbnRIYW5kbGUucmVzeW5jKCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZXZlbnRMaXN0ZW5lclJlbW92ZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMubW91c2VFdmVudEhhbmRsZS5yZXN5bmMoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGFkZCBhbmltYXRpb24gY29tcG9tZW50IGlmIGRvbSBlbGVtZW50IGhhcyBhbmltYXRpb25cbiAgfSwge1xuICAgIGtleTogXCJjaGVja0FuaW1hdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0FuaW1hdGlvbigpIHtcbiAgICAgIGlmIChwYXJzZUZsb2F0KHRoaXMuc3R5bGUuYW5pbWF0aW9uRHVyYXRpb24pIHx8IHBhcnNlRmxvYXQodGhpcy5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24pKSB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ2ci1hbmltYXRlXCIsIFwiXCIpO2Vsc2UgdGhpcy5lbnRpdHkucmVtb3ZlQXR0cmlidXRlKFwidnItYW5pbWF0ZVwiKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdEhvdmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRIb3ZlcigpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgICAgLy8gZmluZCB3aGF0IGhhcyBob3ZlclxuICAgICAgdmFyIHRhZyA9IG51bGw7XG4gICAgICBpZiAodGhpcy53ZWIydnIuaG92ZXJTZWxlY3RvcnMuaGFzKHRoaXMuZG9tRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpKSB0YWcgPSB0aGlzLmRvbUVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIGNsYXNzZXMgPSBbXTtcbiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmRvbUVsZW1lbnQuY2xhc3NMaXN0KSxcbiAgICAgICAgX3N0ZXA7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBjbHMgPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgICBpZiAodGhpcy53ZWIydnIuaG92ZXJTZWxlY3RvcnMuaGFzKFwiLlwiICsgY2xzKSkgY2xhc3Nlcy5wdXNoKGNscyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfaXRlcmF0b3IuZShlcnIpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2l0ZXJhdG9yLmYoKTtcbiAgICAgIH1cbiAgICAgIHZhciBpZCA9IG51bGw7XG4gICAgICBpZiAodGhpcy53ZWIydnIuaG92ZXJTZWxlY3RvcnMuaGFzKFwiI1wiICsgdGhpcy5kb21FbGVtZW50LmlkKSkgaWQgPSB0aGlzLmRvbUVsZW1lbnQuaWQ7XG5cbiAgICAgIC8vIGFkZCBtb3VzZWVudGVyIGFuZCBtb3VzZWxlYXZlIGlmIGVsZW1lbnQgaGFzIGhvdmVyLlxuICAgICAgaWYgKHRhZyB8fCBjbGFzc2VzLmxlbmd0aCA+IDAgfHwgaWQpIHtcbiAgICAgICAgdGhpcy5lbnRpdHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICh0YWcpIF90aGlzMi5kb21FbGVtZW50LmNsYXNzTGlzdC5hZGQodGFnICsgXCJob3ZlclwiKTtcbiAgICAgICAgICBpZiAoY2xhc3Nlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNsYXNzZXMpLFxuICAgICAgICAgICAgICBfc3RlcDI7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykge1xuICAgICAgICAgICAgICAgIHZhciBjbHMgPSBfc3RlcDIudmFsdWU7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmRvbUVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbHMgKyBcImhvdmVyXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlkKSBfdGhpczIuZG9tRWxlbWVudC5jbGFzc0xpc3QuYWRkKGlkICsgXCJob3ZlclwiKTtcbiAgICAgICAgICAvLyB0aGlzIGlzIG9ubHkgZm9yIGhvdmVyIHRyYW5zZm9ybS4gVXBkYXRlIGFsbCBlbGVtZW50cyB3aGVuIHRyYW5zZm9ybSBnZXRzIGFkZGVkXG4gICAgICAgICAgaWYgKF90aGlzMi5zdHlsZS50cmFuc2Zvcm0gIT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIF90aGlzMi53ZWIydnIudXBkYXRlKCk7XG4gICAgICAgICAgICBfdGhpczIuaG92ZXJUcmFuc2Zvcm0gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZW50aXR5LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAodGFnKSBfdGhpczIuZG9tRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRhZyArIFwiaG92ZXJcIik7XG4gICAgICAgICAgaWYgKGNsYXNzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjbGFzc2VzKSxcbiAgICAgICAgICAgICAgX3N0ZXAzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xzID0gX3N0ZXAzLnZhbHVlO1xuICAgICAgICAgICAgICAgIF90aGlzMi5kb21FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xzICsgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgIF9pdGVyYXRvcjMuZShlcnIpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpZCkgX3RoaXMyLmRvbUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpZCArIFwiaG92ZXJcIik7XG4gICAgICAgICAgaWYgKF90aGlzMi5ob3ZlclRyYW5zZm9ybSkge1xuICAgICAgICAgICAgX3RoaXMyLnBvc2l0aW9uLmRlcHRoID0gX3RoaXMyLnBvc2l0aW9uLnN0YXJ0RGVwdGg7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKF90aGlzMi5kb21FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKSksXG4gICAgICAgICAgICAgIF9zdGVwNDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfc3RlcDQudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgZWxlbWVudC5lbGVtZW50LnBhcmVudFRyYW5zZm9ybSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgZWxlbWVudC5lbGVtZW50LnBvc2l0aW9uLmRlcHRoID0gZWxlbWVudC5lbGVtZW50LnBvc2l0aW9uLnN0YXJ0RGVwdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICBfaXRlcmF0b3I0LmYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCB3b3JrcyBncmVhdCB3aXRoIG1hcmdpbiB3aGlsZSB3aXRoIHBhZGRpbmcgaXQgaGFzIHByb2JsZW1zIHdpdGggcGFkZGluZ1JpZ2h0IHRoYXQgbmVlZHMgdG8gYmUgbWFudWFseSBjYWxjdWxhdGVkIGFuZCBzZXRcbiAgICAvLyBiZWNhdXNlIGRlYWxpbmcgd2l0aCBwYWRkaW5nUmlnaHQgaXMgcHJvYmxlbWF0aWMgd2UgY2FuIG1ha2UgdGhlIHBhZGRpbmcgYmUgbWFyZ2luIGZvciB0aGUgdGV4dE5vZGUodnItc3BhbilcbiAgfSwge1xuICAgIGtleTogXCJwYWRkaW5nVG9NYXJnaW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFkZGluZ1RvTWFyZ2luKCkge1xuICAgICAgLy8gb25seSBpZiBlbGVtZW50IGhhcyB0ZXh0XG4gICAgICBpZiAodGhpcy5kb21FbGVtZW50LnRleHRDb250ZW50LnRyaW0oKSkge1xuICAgICAgICAvL2NvbnN0IGxlZnQgPSB0aGlzLmRvbUVsZW1lbnQucGFyZW50RWxlbWVudC5lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0O1xuICAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmRvbUVsZW1lbnQucGFyZW50RWxlbWVudC5lbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodDtcbiAgICAgICAgLy9jb25zdCB0b3AgPSB0aGlzLmRvbUVsZW1lbnQucGFyZW50RWxlbWVudC5lbGVtZW50LnN0eWxlLnBhZGRpbmdUb3A7XG4gICAgICAgIC8vY29uc3QgYm90dG9tID0gdGhpcy5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQuZWxlbWVudC5zdHlsZS5wYWRkaW5nQm90dG9tO1xuXG4gICAgICAgIC8qaWYgKHBhcnNlRmxvYXQobGVmdCkpIHtcbiAgICAgICAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgIHRoaXMuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gXCIwcHhcIjtcbiAgICAgICAgfSovXG4gICAgICAgIGlmIChwYXJzZUZsb2F0KHJpZ2h0KSkge1xuICAgICAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5tYXJnaW5SaWdodCA9IHJpZ2h0O1xuICAgICAgICAgIHRoaXMuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiMHB4XCI7XG4gICAgICAgIH1cbiAgICAgICAgLyppZiAocGFyc2VGbG9hdCh0b3ApKSB7XG4gICAgICAgICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUubWFyZ2luVG9wID0gdG9wO1xuICAgICAgICAgICAgLy90aGlzLmRvbUVsZW1lbnQucGFyZW50RWxlbWVudC5zdHlsZS5wYWRkaW5nVG9wID0gXCIwcHhcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VGbG9hdChib3R0b20pKSB7XG4gICAgICAgICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gYm90dG9tO1xuICAgICAgICAgICAgLy90aGlzLmRvbUVsZW1lbnQucGFyZW50RWxlbWVudC5zdHlsZS5wYWRkaW5nQm90dG9tID0gXCIwcHhcIjtcbiAgICAgICAgfSovXG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImluaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIC8vIHJlZmVyZW5jZSBvZiB0aGUgZWxlbWVudCBmb3IgYWZyYW1lIGNvbXBvbWVudFxuICAgICAgdGhpcy5lbnRpdHkuZWxlbWVudCA9IHRoaXM7XG5cbiAgICAgIC8vIGRvbnQgbmVlZCBsaWdodCB0byBhZmZlY3QgbWF0ZXJpYWxcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwic2hhZGVyXCIsIFwiZmxhdFwiKTtcblxuICAgICAgLy9pbml0IHNpemVzIGF0IHN0YXJ0XG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB0aGlzLnBvc2l0aW9uLndpZHRoKTtcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCB0aGlzLnBvc2l0aW9uLmhlaWdodCk7XG4gICAgICB0aGlzLmluaXRFdmVudEhhbmRsZXJzKCk7XG4gICAgICB0aGlzLnNldHVwQ2xpcHBpbmcoKTtcbiAgICAgIHRoaXMuZmluYWxpemVJbml0KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZpbmFsaXplSW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5hbGl6ZUluaXQoKSB7XG4gICAgICB0aGlzLmluaXRDb21wbGV0ZSA9IHRydWU7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2luaXRDb21wbGV0ZScpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzLFxuICAgICAgICBfdGhpcyR3ZWIydnIkc2Nyb2xsLFxuICAgICAgICBfdGhpcyR3ZWIydnIkc2Nyb2xsMjtcbiAgICAgIGlmICghdGhpcy5pbml0Q29tcGxldGUpIHtcbiAgICAgICAgLy8gVHJ5IGFnYWluIGxhdGVyLlxuICAgICAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihuZXcgRXZlbnQoJ2luaXRDb21wbGV0ZScpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMy51cGRhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBjbGllbnRSZWN0ID0gdGhpcy5kb21FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAvLyBpdHMgbm90IG9uIHRoZSBzY3JlZW5cbiAgICAgIGlmIChjbGllbnRSZWN0LndpZHRoID09IDAgfHwgY2xpZW50UmVjdC5oZWlnaHQgPT0gMCkge1xuICAgICAgICB0aGlzLmVudGl0eS5vYmplY3QzRC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIGlmICghdGhpcy5kb21FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInZyLXNwYW5cIikpIHRoaXMuZW50aXR5LmNsYXNzTGlzdC5yZW1vdmUodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uLmFmcmFtZVBvc2l0aW9uLnkgPSAxMDAwOyAvLyBmb3Igc29tZSByZWFzb24gcmF5Y2FzdCBzdGlsbCBoaXRzIHNvIGhhdmUgdG8gbW92ZSBwb3NpdGlvblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIGZvciBmdXR1cmUgbW92ZSB0aGlzIGluIFRleHRFbGVtZW50IGNsYXNzXG4gICAgICBpZiAodGhpcy5kb21FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInZyLXNwYW5cIikpIHtcbiAgICAgICAgLy8gZG9udCBuZWVkIGludGVyYWN0aW9uIHdpdGggdGhlIHRleHQgd2hlbiB3ZSBhbHdheXMgaGF2ZSB0aGUgYmFja2dyb3VuZCBhcyBpbnRlcmFjdGlvblxuICAgICAgICB0aGlzLmVudGl0eS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMud2ViMnZyLnNldHRpbmdzLmludGVyYWN0aXZlVGFnKTtcbiAgICAgICAgLy8gc28gYWxsIGlubGluZSB0ZXh0IHdpZHRoIGlzIGdvb2QsIGRvbnQgZG8gdGhpcyBpZiBpdHMgdGV4dCBpbnNpZGUgYnV0dG9uXG4gICAgICAgIGlmICh0aGlzLmRvbUVsZW1lbnQucGFyZW50RWxlbWVudC50YWdOYW1lICE9IFwiQlVUVE9OXCIpIHtcbiAgICAgICAgICBjbGllbnRSZWN0LndpZHRoICs9IDg7XG4gICAgICAgICAgY2xpZW50UmVjdC54IC09IDI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gc2V0IGZpeGVkIGNvbnRhaW5lciBoZWlnaHQgaWYgaXRzIHVzaW5nIHNjcm9sbEJvZHksIGJlc3QgaXMgdG8gbW92ZSB0aGlzIGNvZGUgb3V0c2lkZSB1cGRhdGUgbG9vcCBmb3IgZnV0dXJlXG4gICAgICBpZiAoKF90aGlzJHdlYjJ2ciRzY3JvbGwgPSB0aGlzLndlYjJ2ci5zY3JvbGwpICE9PSBudWxsICYmIF90aGlzJHdlYjJ2ciRzY3JvbGwgIT09IHZvaWQgMCAmJiBfdGhpcyR3ZWIydnIkc2Nyb2xsLmhhc1Njcm9sbCAmJiB0aGlzLmRvbUVsZW1lbnQgPT0gdGhpcy53ZWIydnIuY29udGFpbmVyICYmIChfdGhpcyR3ZWIydnIkc2Nyb2xsMiA9IHRoaXMud2ViMnZyLnNjcm9sbCkgIT09IG51bGwgJiYgX3RoaXMkd2ViMnZyJHNjcm9sbDIgIT09IHZvaWQgMCAmJiBfdGhpcyR3ZWIydnIkc2Nyb2xsMi5zY3JvbGxCb2R5KSBjbGllbnRSZWN0LmhlaWdodCA9IHRoaXMud2ViMnZyLnNldHRpbmdzLnNjcm9sbFdpbmRvd0hlaWdodDtcbiAgICAgIHRoaXMucG9zaXRpb24udXBkYXRlUG9zaXRpb24oY2xpZW50UmVjdCk7XG4gICAgICB0aGlzLmNoZWNrVmlzaWJsZSgpO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZSkge1xuICAgICAgICB0aGlzLnN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5kb21FbGVtZW50KTtcblxuICAgICAgICAvLyBpdHMgb24gdmlzaWJsZSBzY3JlZW4gYnV0IGl0cyBoaWRkZW4gYnkgc3R5bGVcbiAgICAgICAgaWYgKHRoaXMuc3R5bGUudmlzaWJpbGl0eSA9PT0gXCJoaWRkZW5cIiB8fCB0aGlzLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgdGhpcy5lbnRpdHkub2JqZWN0M0QudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgIGlmICghdGhpcy5kb21FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInZyLXNwYW5cIikpIHRoaXMuZW50aXR5LmNsYXNzTGlzdC5yZW1vdmUodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgICAgIHRoaXMucG9zaXRpb24uYWZyYW1lUG9zaXRpb24ueSA9IDEwMDA7IC8vIGZvciBzb21lIHJlYXNvbiByYXljYXN0IHN0aWxsIGhpdHMgc28gaGF2ZSB0byBtb3ZlIHBvc2l0aW9uXG4gICAgICAgICAgLy8gdXBkYXRlIGJvcmRlciBzbyB3ZSBjYW4gcmVtb3ZlIGl0IGJlY2F1c2UgZWxlbWVudCBpcyBoaWRkZW5cbiAgICAgICAgICB0aGlzLnVwZGF0ZUJvcmRlcigpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVudGl0eS5vYmplY3QzRC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAvLyBmb3IgaW5wdXQgdGV4dCBiZWNhdXNlIGl0IGhhcyBjdXN0b20gZXZlbnQgZm9yIGVudGl0eSBpdCBjYW5ub3QgZGV0ZWN0IHdpdGggdGhpcy5tb3VzZUV2ZW50SGFuZGxlLmxpc3RlbmluZ0Zvck1vdXNlRXZlbnRzXG4gICAgICAgICAgLy8gd2UgaGF2ZSB0byBjaGVjayB0YWdOYW1lIGFuZCB0eXBlIHRvIHNlZSBpZiBpdHMgaW5wdXQgdGV4dCwgZm9yIGZ1dHVyZSBtYWtlIHRoaXMgd29yayB3aXRoIG1vdXNlRXZlbnRIYW5kbGVcbiAgICAgICAgICAvLyBhbHNvIGFkZCBpbnRlcmFjdGl2ZVRhZyBpZiBpdHMgbWFpbiBjb250YWluZXJcbiAgICAgICAgICBpZiAoIXRoaXMuZG9tRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJ2ci1zcGFuXCIpICYmICh0aGlzLm1vdXNlRXZlbnRIYW5kbGUubGlzdGVuaW5nRm9yTW91c2VFdmVudHMgfHwgdGhpcy5kb21FbGVtZW50LnRhZ05hbWUgPT0gXCJJTlBVVFwiICYmIHRoaXMuZG9tRWxlbWVudC50eXBlID09IFwidGV4dFwiKSB8fCB0aGlzLmRvbUVsZW1lbnQgPT0gdGhpcy53ZWIydnIuY29udGFpbmVyKSB0aGlzLmVudGl0eS5jbGFzc0xpc3QuYWRkKHRoaXMud2ViMnZyLnNldHRpbmdzLmludGVyYWN0aXZlVGFnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIHRyYW5zZm9ybSB0aGVuIHdpZHRoIGFuZCBoZWlnaHQgd2lsbCBiZSBzZXQgd2l0aCB0aGUgdHJhbnNmb3JtIG1hdHJpeCBzY2FsZVxuICAgICAgICAvLyB1c2luZyBuZWVkc1N0YXJ0aW5nVHJhbnNmb3JtU2l6ZSBzbyB3aWR0aCBhbmQgaGVpZ2h0IGFyZSBuZXZlciAwIHdoZW4gZG9pbmcgdHJhbnNmb3JtIHNjYWxlXG4gICAgICAgIGlmICh0aGlzLnN0eWxlLnRyYW5zZm9ybSA9PSBcIm5vbmVcIiB8fCB0aGlzLm5lZWRzU3RhcnRpbmdUcmFuc2Zvcm1TaXplKSB7XG4gICAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgdGhpcy5wb3NpdGlvbi53aWR0aCk7XG4gICAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIHRoaXMucG9zaXRpb24uaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoZWNrQW5pbWF0aW9uKCk7XG4gICAgICAgIHZhciBvcGFjaXR5ID0gdGhpcy5zdHlsZS5vcGFjaXR5O1xuICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJvcGFjaXR5XCIsIG9wYWNpdHkpO1xuICAgICAgICB0aGlzLnNwZWNpZmljVXBkYXRlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ2xpcHBpbmcoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlQm9yZGVyKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZVRyYW5zZm9ybVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVUcmFuc2Zvcm0oKSB7XG4gICAgICB2YXIgdHJhbnNmb3JtID0gdGhpcy5zdHlsZS50cmFuc2Zvcm07XG4gICAgICBpZiAodHJhbnNmb3JtID09IFwibm9uZVwiKSB0cmFuc2Zvcm0gPSB0aGlzLnBhcmVudFRyYW5zZm9ybTtlbHNlIHtcbiAgICAgICAgLy8gZ2l2ZSB0cmFuc2Zvcm0gdG8gYWxsIGRlc2NlbmRlbnRzXG4gICAgICAgIHZhciBfaXRlcmF0b3I1ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5kb21FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKSksXG4gICAgICAgICAgX3N0ZXA1O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNS5zKCk7ICEoX3N0ZXA1ID0gX2l0ZXJhdG9yNS5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IF9zdGVwNS52YWx1ZTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmVsZW1lbnQpIGVsZW1lbnQuZWxlbWVudC5wYXJlbnRUcmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBfaXRlcmF0b3I1LmUoZXJyKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBfaXRlcmF0b3I1LmYoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRyYW5zZm9ybSAhPSBcIm5vbmVcIikge1xuICAgICAgICB0aGlzLm5lZWRzU3RhcnRpbmdUcmFuc2Zvcm1TaXplID0gZmFsc2U7XG4gICAgICAgIHZhciBtYXRyaXhUeXBlID0gdHJhbnNmb3JtLnNwbGl0KCcoJylbMF07XG4gICAgICAgIC8vIGdldCBtYXRyaXggdmFsdWVzIGluIGZsb2F0XG4gICAgICAgIHZhciB2YWx1ZXMgPSB0cmFuc2Zvcm0uc3BsaXQoJygnKVsxXTtcbiAgICAgICAgdmFsdWVzID0gdmFsdWVzLnNwbGl0KCcpJylbMF07XG4gICAgICAgIHZhbHVlcyA9IHZhbHVlcy5zcGxpdCgnLCcpO1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMubWFwKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodik7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbWF0cml4ID0gbnVsbDtcbiAgICAgICAgaWYgKG1hdHJpeFR5cGUgPT0gXCJtYXRyaXhcIikge1xuICAgICAgICAgIC8vIHRyYW5zZm9ybSB0byBtYXRyaXg0eDQgYW5kIGludmVydCBza2V3WCB0byBtYXRjaCB0aHJlZS5qc1xuICAgICAgICAgIG1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KFt2YWx1ZXNbMF0sIHZhbHVlc1sxXSwgMCwgMCwgLXZhbHVlc1syXSwgdmFsdWVzWzNdLCAwLCAwLCAwLCAwLCAxLCAwLCB2YWx1ZXNbNF0sIHZhbHVlc1s1XSwgMCwgMV0pO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdHJpeFR5cGUgPT0gXCJtYXRyaXgzZFwiKSB7XG4gICAgICAgICAgLy8gaW52ZXJ0IHNrZXdYIGFuZCBza2V3Wj8gdG8gbWF0Y2ggdGhyZWUuanNcbiAgICAgICAgICB2YWx1ZXNbNF0gKj0gLTE7XG4gICAgICAgICAgdmFsdWVzWzldICo9IC0xO1xuICAgICAgICAgIG1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgdmFyIHF1YXRlcm5pb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xuICAgICAgICB2YXIgc2NhbGUgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICBtYXRyaXguZGVjb21wb3NlKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBzY2FsZSk7XG5cbiAgICAgICAgLy8gcG9zaXRpb25cbiAgICAgICAgdGhpcy5wb3NpdGlvbi5kb21Qb3NpdGlvbi54ICs9IHBvc2l0aW9uLng7XG4gICAgICAgIHRoaXMucG9zaXRpb24uZG9tUG9zaXRpb24ueSArPSBwb3NpdGlvbi55O1xuICAgICAgICBpZiAocG9zaXRpb24ueiAhPSAwKSB0aGlzLnBvc2l0aW9uLmRlcHRoID0gcG9zaXRpb24ueiAqIHRoaXMucG9zaXRpb24uc2NhbGluZ0ZhY3RvciArIHRoaXMucG9zaXRpb24uc3RhcnREZXB0aDtcblxuICAgICAgICAvLyByb3RhdGlvblxuICAgICAgICB0aGlzLmVudGl0eS5vYmplY3QzRC5yb3RhdGlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXgobWF0cml4KTtcblxuICAgICAgICAvLyBjYWxjdWFsdGUgc2NhbGUgYW5kIHNldCBpdCB0byBlbnRpdHlcbiAgICAgICAgaWYgKHRoaXMucGFyZW50VHJhbnNmb3JtID09IFwibm9uZVwiKSB7XG4gICAgICAgICAgdmFyIGVsZW1lbnRzID0gbWF0cml4LmVsZW1lbnRzO1xuICAgICAgICAgIHZhciBzY2FsZVggPSBNYXRoLnNxcnQoZWxlbWVudHNbMF0gKiBlbGVtZW50c1swXSArIGVsZW1lbnRzWzFdICogZWxlbWVudHNbMV0pO1xuICAgICAgICAgIHZhciBzY2FsZVkgPSBNYXRoLnNxcnQoZWxlbWVudHNbNV0gKiBlbGVtZW50c1s1XSArIGVsZW1lbnRzWzRdICogZWxlbWVudHNbNF0pO1xuICAgICAgICAgIC8vIGZvciByYWRpbyBzY2FsZSBpcyAyIHRpbWVzIHNtYWxsZXIgYmVjYXVzZSBpdHMgY2lyY2xlLCBmb3Igc29tZSByYXNvbiBjaGVja2JveCBzY2FsZSBuZWVkcyB0byBiZSBpbiBoYWxmIGVsc2UgaXRzIHRvbyBiaWdcbiAgICAgICAgICBpZiAodGhpcy5kb21FbGVtZW50LnRhZ05hbWUgPT0gXCJJTlBVVFwiICYmICh0aGlzLmRvbUVsZW1lbnQudHlwZSA9PSBcInJhZGlvXCIgfHwgdGhpcy5kb21FbGVtZW50LnR5cGUgPT0gXCJjaGVja2JveFwiKSkgdGhpcy5lbnRpdHkub2JqZWN0M0Quc2NhbGUuc2V0KHNjYWxlWCAvIDIsIHNjYWxlWSAvIDIsIDEpO2Vsc2UgdGhpcy5lbnRpdHkub2JqZWN0M0Quc2NhbGUuc2V0KHNjYWxlWCwgc2NhbGVZLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5lbnRpdHkub2JqZWN0M0QucG9zaXRpb24uc2V0KHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCB0aGlzLnBvc2l0aW9uLnopO1xuICAgIH1cblxuICAgIC8vIGFic3RyYWN0IG1ldGhvZFxuICB9LCB7XG4gICAga2V5OiBcInNwZWNpZmljVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNwZWNpZmljVXBkYXRlKCkge31cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVCb3JkZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQm9yZGVyKCkge1xuICAgICAgaWYgKHRoaXMud2ViMnZyLnNldHRpbmdzLmJvcmRlcikge1xuICAgICAgICAvLyB1c2luZyBib3JkZXJUb3BXaWR0aCBhbmQgYm9yZGVyVG9wQ29sb3IgYmVjYXVzZSBib3JkZXJXaWR0aCBhbmQgYm9yZGVyQ29sb3IgZG9lc250IHdvcmsgaW4gZmlyZWZveFxuICAgICAgICB2YXIgYm9yZGVyV2lkdGggPSBwYXJzZUZsb2F0KHRoaXMuc3R5bGUuYm9yZGVyVG9wV2lkdGgpO1xuICAgICAgICBpZiAoKGJvcmRlcldpZHRoIHx8IHRoaXMuYm9yZGVyV2lkdGgpICYmIHRoaXMuZW50aXR5Lm9iamVjdDNELnZpc2libGUpIHtcbiAgICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ2ci1ib3JkZXJcIiwgXCJ3aWR0aDpcIi5jb25jYXQoYm9yZGVyV2lkdGgsIFwiOyBjb2xvcjpcIikuY29uY2F0KHRoaXMuc3R5bGUuYm9yZGVyVG9wQ29sb3IsIFwiO1wiKSk7XG4gICAgICAgICAgdGhpcy5lbnRpdHkuY29tcG9uZW50c1tcInZyLWJvcmRlclwiXS51cGRhdGVCb3JkZXIoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVudGl0eS5jb21wb25lbnRzW1widnItYm9yZGVyXCJdKSB0aGlzLmVudGl0eS5yZW1vdmVBdHRyaWJ1dGUoXCJ2ci1ib3JkZXJcIik7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJvdGF0ZU5vcm1hbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByb3RhdGVOb3JtYWwobm9ybWFsKSB7XG4gICAgICB2YXIgbm9ybWFsTWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDMoKS5nZXROb3JtYWxNYXRyaXgodGhpcy53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5vYmplY3QzRC5tYXRyaXhXb3JsZCk7XG4gICAgICB2YXIgb3V0cHV0ID0gbm9ybWFsLmNsb25lKCkuYXBwbHlNYXRyaXgzKG5vcm1hbE1hdHJpeCkubm9ybWFsaXplKCk7XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDbGlwcGluZ0NvbnRleHRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xpcHBpbmdDb250ZXh0KCkge1xuICAgICAgdmFyIG91dHB1dCA9IG51bGw7XG4gICAgICBpZiAodGhpcy5kb21FbGVtZW50LnBhcmVudE5vZGUgJiYgdGhpcy5kb21FbGVtZW50LnBhcmVudE5vZGUuZWxlbWVudCAmJiB0aGlzLmRvbUVsZW1lbnQucGFyZW50Tm9kZS5lbGVtZW50LmNsaXBwaW5nQ29udGV4dCkgb3V0cHV0ID0gdGhpcy5kb21FbGVtZW50LnBhcmVudE5vZGUuZWxlbWVudC5jbGlwcGluZ0NvbnRleHQ7ZWxzZSB7XG4gICAgICAgIHZhciBfdGhpcyR3ZWIydnIkc2Nyb2xsMztcbiAgICAgICAgaWYgKHRoaXMuc3R5bGUub3ZlcmZsb3cgJiYgdGhpcy5zdHlsZS5vdmVyZmxvdyA9PSBcImhpZGRlblwiIHx8IChfdGhpcyR3ZWIydnIkc2Nyb2xsMyA9IHRoaXMud2ViMnZyLnNjcm9sbCkgIT09IG51bGwgJiYgX3RoaXMkd2ViMnZyJHNjcm9sbDMgIT09IHZvaWQgMCAmJiBfdGhpcyR3ZWIydnIkc2Nyb2xsMy5oYXNTY3JvbGwgJiYgdGhpcy5kb21FbGVtZW50ID09IHRoaXMud2ViMnZyLmNvbnRhaW5lciB8fCB0aGlzLndlYjJ2ci5zZXR0aW5ncy5mb3JjZUNsaXBwaW5nICYmIHRoaXMuZG9tRWxlbWVudCA9PSB0aGlzLndlYjJ2ci5jb250YWluZXIpIHtcbiAgICAgICAgICAvLyBpZ25vcmUgaWYgaXRzIHN2Z1xuICAgICAgICAgIGlmICh0aGlzLmRvbUVsZW1lbnQudGFnTmFtZSAhPSBcInN2Z1wiKSB7XG4gICAgICAgICAgICB2YXIgY2xpcHBpbmdDb250ZXh0ID0ge307XG4gICAgICAgICAgICBjbGlwcGluZ0NvbnRleHQuYXV0aG9yaXR5ID0gdGhpcztcbiAgICAgICAgICAgIGNsaXBwaW5nQ29udGV4dC5ib3R0b20gPSBuZXcgVEhSRUUuUGxhbmUodGhpcy5yb3RhdGVOb3JtYWwobmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCkpKTsgLy8gbm9ybWFsIHVwXG4gICAgICAgICAgICBjbGlwcGluZ0NvbnRleHQudG9wID0gbmV3IFRIUkVFLlBsYW5lKHRoaXMucm90YXRlTm9ybWFsKG5ldyBUSFJFRS5WZWN0b3IzKDAsIC0xLCAwKSkpOyAvLyBub3JtYWwgZG93blxuICAgICAgICAgICAgY2xpcHBpbmdDb250ZXh0LmxlZnQgPSBuZXcgVEhSRUUuUGxhbmUodGhpcy5yb3RhdGVOb3JtYWwobmV3IFRIUkVFLlZlY3RvcjMoMSwgMCwgMCkpKTsgLy8gbm9ybWFsIHJpZ2h0XG4gICAgICAgICAgICBjbGlwcGluZ0NvbnRleHQucmlnaHQgPSBuZXcgVEhSRUUuUGxhbmUodGhpcy5yb3RhdGVOb3JtYWwobmV3IFRIUkVFLlZlY3RvcjMoLTEsIDAsIDApKSk7IC8vIG5vcm1hbCBsZWZ0XG5cbiAgICAgICAgICAgIGNsaXBwaW5nQ29udGV4dC5wbGFuZXMgPSBbY2xpcHBpbmdDb250ZXh0LmJvdHRvbSwgY2xpcHBpbmdDb250ZXh0LnRvcCwgY2xpcHBpbmdDb250ZXh0LmxlZnQsIGNsaXBwaW5nQ29udGV4dC5yaWdodF07XG4gICAgICAgICAgICBvdXRwdXQgPSBjbGlwcGluZ0NvbnRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXR1cENsaXBwaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwQ2xpcHBpbmcoKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcbiAgICAgIHZhciBjbGlwcGluZ0NvbnRleHQgPSB0aGlzLmdldENsaXBwaW5nQ29udGV4dCgpO1xuICAgICAgaWYgKGNsaXBwaW5nQ29udGV4dCkge1xuICAgICAgICB0aGlzLmNsaXBwaW5nQ29udGV4dCA9IGNsaXBwaW5nQ29udGV4dDtcblxuICAgICAgICAvLyB3ZSBhcmUgc3VyZSB0aGUgcmVuZGVyZXIgaXMgbG9hZGVkXG4gICAgICAgIHZhciBvYmplY3QzRCA9IHRoaXMuZW50aXR5Lm9iamVjdDNEO1xuICAgICAgICBpZiAoIW9iamVjdDNEIHx8ICFvYmplY3QzRC5jaGlsZHJlbiB8fCAhb2JqZWN0M0QuY2hpbGRyZW4ubGVuZ3RoID4gMCB8fCAhb2JqZWN0M0QuY2hpbGRyZW5bMF0ubWF0ZXJpYWwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hdGVyaWFsID0gb2JqZWN0M0QuY2hpbGRyZW5bMF0ubWF0ZXJpYWw7XG4gICAgICAgIG1hdGVyaWFsLmNsaXBwaW5nUGxhbmVzID0gY2xpcHBpbmdDb250ZXh0LnBsYW5lcztcblxuICAgICAgICAvL3RoaXMudXBkYXRlQ2xpcHBpbmcoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXM0LnVwZGF0ZUNsaXBwaW5nKCk7XG4gICAgICAgIH0sIDIwMCk7IC8vIGlmIGl0IGRvZXNudCB3b3JrIHVzZSB0aGlzXG4gICAgICAgIC8vIHJldHVybiBuZXcgUHJvbWlzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVDbGlwcGluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVDbGlwcGluZygpIHtcbiAgICAgIC8vIG9ubHkgZWxlbWVudCB3aXRoIGF1dGhvcml0eSBjYW4gY2hhbmdlIHRoZSBjbGlwcGluZyBwbGFuZXMgcG9zaXRpb25cbiAgICAgIGlmICghdGhpcy5jbGlwcGluZ0NvbnRleHQgfHwgdGhpcy5jbGlwcGluZ0NvbnRleHQuYXV0aG9yaXR5ICE9IHRoaXMpIHJldHVybjtcbiAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuZW50aXR5Lm9iamVjdDNELnBvc2l0aW9uO1xuICAgICAgdmFyIGJvdHRvbUxvY2FsID0gcG9zaXRpb24uY2xvbmUoKS5hZGQobmV3IFRIUkVFLlZlY3RvcjMoMCwgLTEsIDApLm11bHRpcGx5U2NhbGFyKHRoaXMucG9zaXRpb24uaGVpZ2h0IC8gMikpO1xuICAgICAgdmFyIHRvcExvY2FsID0gcG9zaXRpb24uY2xvbmUoKS5hZGQobmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCkubXVsdGlwbHlTY2FsYXIodGhpcy5wb3NpdGlvbi5oZWlnaHQgLyAyKSk7XG4gICAgICB2YXIgbGVmdExvY2FsID0gcG9zaXRpb24uY2xvbmUoKS5hZGQobmV3IFRIUkVFLlZlY3RvcjMoLTEsIDAsIDApLm11bHRpcGx5U2NhbGFyKHRoaXMucG9zaXRpb24ud2lkdGggLyAyKSk7XG4gICAgICB2YXIgcmlnaHRMb2NhbCA9IHBvc2l0aW9uLmNsb25lKCkuYWRkKG5ldyBUSFJFRS5WZWN0b3IzKDEsIDAsIDApLm11bHRpcGx5U2NhbGFyKHRoaXMucG9zaXRpb24ud2lkdGggLyAyKSk7XG4gICAgICB2YXIgYm90dG9tR2xvYmFsID0gdGhpcy53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5vYmplY3QzRC5sb2NhbFRvV29ybGQoYm90dG9tTG9jYWwuY2xvbmUoKSk7XG4gICAgICB2YXIgdG9wR2xvYmFsID0gdGhpcy53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5vYmplY3QzRC5sb2NhbFRvV29ybGQodG9wTG9jYWwuY2xvbmUoKSk7XG4gICAgICB2YXIgbGVmdEdsb2JhbCA9IHRoaXMud2ViMnZyLmFmcmFtZS5jb250YWluZXIub2JqZWN0M0QubG9jYWxUb1dvcmxkKGxlZnRMb2NhbC5jbG9uZSgpKTtcbiAgICAgIHZhciByaWdodEdsb2JhbCA9IHRoaXMud2ViMnZyLmFmcmFtZS5jb250YWluZXIub2JqZWN0M0QubG9jYWxUb1dvcmxkKHJpZ2h0TG9jYWwuY2xvbmUoKSk7XG4gICAgICB0aGlzLmNsaXBwaW5nQ29udGV4dC5ib3R0b20uc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQodGhpcy5yb3RhdGVOb3JtYWwobmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCkpLCBib3R0b21HbG9iYWwpLm5vcm1hbGl6ZSgpO1xuICAgICAgdGhpcy5jbGlwcGluZ0NvbnRleHQudG9wLnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KHRoaXMucm90YXRlTm9ybWFsKG5ldyBUSFJFRS5WZWN0b3IzKDAsIC0xLCAwKSksIHRvcEdsb2JhbCkubm9ybWFsaXplKCk7XG4gICAgICB0aGlzLmNsaXBwaW5nQ29udGV4dC5sZWZ0LnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KHRoaXMucm90YXRlTm9ybWFsKG5ldyBUSFJFRS5WZWN0b3IzKDEsIDAsIDApKSwgbGVmdEdsb2JhbCkubm9ybWFsaXplKCk7XG4gICAgICB0aGlzLmNsaXBwaW5nQ29udGV4dC5yaWdodC5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludCh0aGlzLnJvdGF0ZU5vcm1hbChuZXcgVEhSRUUuVmVjdG9yMygtMSwgMCwgMCkpLCByaWdodEdsb2JhbCkubm9ybWFsaXplKCk7XG4gICAgICBpZiAodGhpcy53ZWIydnIuc2V0dGluZ3Muc2hvd0NsaXBwaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5jbGlwcGluZ1BsYW5lSGVscGVycykge1xuICAgICAgICAgIHRoaXMuY2xpcHBpbmdQbGFuZUhlbHBlcnMgPSBbXTtcbiAgICAgICAgICB2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuY2xpcHBpbmdDb250ZXh0LnBsYW5lcyksXG4gICAgICAgICAgICBfc3RlcDY7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNi5zKCk7ICEoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICAgIHZhciBwbGFuZSA9IF9zdGVwNi52YWx1ZTtcbiAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgICAgICAgICAgICBjb2xvcjogMHgwMGUzM2QsXG4gICAgICAgICAgICAgICAgc2lkZTogVEhSRUUuRG91YmxlU2lkZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoMjAwICogdGhpcy5wb3NpdGlvbi5zY2FsaW5nRmFjdG9yLCAyMDAgKiB0aGlzLnBvc2l0aW9uLnNjYWxpbmdGYWN0b3IpOyAvLyBubyBuZWVkIHNhbWUgd2lkdGggYW5kIGhlaWdodCBhcyBjb250YWluZXIgYmVjYXVzZSB0aGlzIGlzIG9ubHkgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgICAgICB2YXIgbWVzaCA9IG5ldyBUSFJFRS5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG4gICAgICAgICAgICAgIG1lc2guZGVidWdQbGFuZSA9IHBsYW5lO1xuICAgICAgICAgICAgICB0aGlzLmNsaXBwaW5nUGxhbmVIZWxwZXJzLnB1c2gobWVzaCk7XG4gICAgICAgICAgICAgIHZhciBheGlzSGVscGVyID0gbmV3IFRIUkVFLkF4ZXNIZWxwZXIoNSk7XG4gICAgICAgICAgICAgIG1lc2guYWRkKGF4aXNIZWxwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yNi5lKGVycik7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjYuZigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgX2l0ZXJhdG9yNyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuY2xpcHBpbmdQbGFuZUhlbHBlcnMpLFxuICAgICAgICAgICAgX3N0ZXA3O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykge1xuICAgICAgICAgICAgICB2YXIgaGVscGVyID0gX3N0ZXA3LnZhbHVlO1xuICAgICAgICAgICAgICB0aGlzLndlYjJ2ci5hZnJhbWUuc2NlbmUub2JqZWN0M0QuYWRkKGhlbHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBfaXRlcmF0b3I3LmUoZXJyKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgX2l0ZXJhdG9yNy5mKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jbGlwcGluZ1BsYW5lSGVscGVycyksXG4gICAgICAgICAgX3N0ZXA4O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZvciAoX2l0ZXJhdG9yOC5zKCk7ICEoX3N0ZXA4ID0gX2l0ZXJhdG9yOC5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICB2YXIgX21lc2ggPSBfc3RlcDgudmFsdWU7XG4gICAgICAgICAgICBfbWVzaC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciB3b3JsZFBvcyA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgICAgICB0aGlzLmVudGl0eS5vYmplY3QzRC5nZXRXb3JsZFBvc2l0aW9uKHdvcmxkUG9zKTtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgICAgICBfbWVzaC5kZWJ1Z1BsYW5lLnByb2plY3RQb2ludCh3b3JsZFBvcywgcG9pbnQpO1xuICAgICAgICAgICAgX21lc2gucG9zaXRpb24uc2V0KHBvaW50LngsIHBvaW50LnksIHBvaW50LnopO1xuXG4gICAgICAgICAgICAvLyBjbGlwcGluZyBwbGFuZSBub3JtYWxzIGFyZSBpbnZlcnRlZCwgd2UgbXVsdGlwbHkgYnkgLTFcbiAgICAgICAgICAgIHZhciBmb2NhbFBvaW50ID0gcG9pbnQuY2xvbmUoKS5hZGQoX21lc2guZGVidWdQbGFuZS5ub3JtYWwuY2xvbmUoKS5tdWx0aXBseVNjYWxhcigtMSkpO1xuICAgICAgICAgICAgX21lc2gubG9va0F0KGZvY2FsUG9pbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgX2l0ZXJhdG9yOC5lKGVycik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgX2l0ZXJhdG9yOC5mKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmNsaXBwaW5nUGxhbmVIZWxwZXJzKSB7XG4gICAgICAgICAgdmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmNsaXBwaW5nUGxhbmVIZWxwZXJzKSxcbiAgICAgICAgICAgIF9zdGVwOTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I5LnMoKTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5Lm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgdmFyIF9tZXNoMiA9IF9zdGVwOS52YWx1ZTtcbiAgICAgICAgICAgICAgX21lc2gyLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjkuZShlcnIpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBfaXRlcmF0b3I5LmYoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2hlY2tWaXNpYmxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrVmlzaWJsZSgpIHtcbiAgICAgIGlmICh0aGlzLmNsaXBwaW5nQ29udGV4dCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jbGlwcGluZ0NvbnRleHQuYXV0aG9yaXR5O1xuICAgICAgICBpZiAodGhpcy5wb3NpdGlvbi5ib3R0b20ueSA+IGNvbnRhaW5lci5wb3NpdGlvbi50b3AueSB8fCB0aGlzLnBvc2l0aW9uLnRvcC55IDwgY29udGFpbmVyLnBvc2l0aW9uLmJvdHRvbS55KSB7XG4gICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5lbnRpdHkub2JqZWN0M0QudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgIC8vIHJlbW92ZSBpbnRlcmFjdGl2ZSB0YWdcbiAgICAgICAgICBpZiAoIXRoaXMuZG9tRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJ2ci1zcGFuXCIpKSB0aGlzLmVudGl0eS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMud2ViMnZyLnNldHRpbmdzLmludGVyYWN0aXZlVGFnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZW50aXR5Lm9iamVjdDNELnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIC8vIGludGVyYWN0aXZlIHRhZyBzbyB3ZSBjYW4gZG8gcmF5Y2FzdGluZyBpZiBpdCBoYXMgbW91c2UgZXZlbnRzIG9yIGl0cyBjb250YWluZXIgYmFja2dyb3VuZFxuICAgICAgICAgIGlmICghdGhpcy5kb21FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInZyLXNwYW5cIikgJiYgdGhpcy5tb3VzZUV2ZW50SGFuZGxlLmxpc3RlbmluZ0Zvck1vdXNlRXZlbnRzIHx8IHRoaXMuZG9tRWxlbWVudCA9PSB0aGlzLndlYjJ2ci5jb250YWluZXIpIHRoaXMuZW50aXR5LmNsYXNzTGlzdC5hZGQodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG59KCk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZWxlbWVudHMvaW1hZ2VFbGVtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9lbGVtZW50cy9pbWFnZUVsZW1lbnQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBJbWFnZUVsZW1lbnQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvZWxlbWVudC5qc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfY2FsbFN1cGVyKHQsIG8sIGUpIHsgcmV0dXJuIG8gPSBfZ2V0UHJvdG90eXBlT2YobyksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSA/IFJlZmxlY3QuY29uc3RydWN0KG8sIGUgfHwgW10sIF9nZXRQcm90b3R5cGVPZih0KS5jb25zdHJ1Y3RvcikgOiBvLmFwcGx5KHQsIGUpKTsgfVxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG52YXIgSW1hZ2VFbGVtZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRWxlbWVudCkge1xuICBmdW5jdGlvbiBJbWFnZUVsZW1lbnQod2ViMnZyLCBkb21FbGVtZW50LCBsYXllcikge1xuICAgIHZhciBfdGhpcztcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSW1hZ2VFbGVtZW50KTtcbiAgICBfdGhpcyA9IF9jYWxsU3VwZXIodGhpcywgSW1hZ2VFbGVtZW50LCBbd2ViMnZyLCBkb21FbGVtZW50LCBsYXllcl0pO1xuICAgIF90aGlzLmN1cnJlbnRTcmMgPSBudWxsO1xuICAgIF90aGlzLmNoYW5nZWQgPSBmYWxzZTtcbiAgICBfdGhpcy5lbnRpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1pbWFnZVwiKTtcbiAgICBfdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzaWRlXCIsIFwiZnJvbnRcIik7XG4gICAgLy8ga25vdyB3aGVuIGltYWdlIGlzIGxvYWRlZFxuICAgIF90aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgIF90aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICAgIC8vIGlmIGltYWdlIGNoYW5nZWQgdXBkYXRlIGFsbCBhZnRlciBpbWFnZSBsb2FkZWRcbiAgICAgIGlmIChfdGhpcy5jaGFuZ2VkKSB7XG4gICAgICAgIF90aGlzLmNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMud2ViMnZyLnVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICBfaW5oZXJpdHMoSW1hZ2VFbGVtZW50LCBfRWxlbWVudCk7XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoSW1hZ2VFbGVtZW50LCBbe1xuICAgIGtleTogXCJ1cGRhdGVJbWFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVJbWFnZShzcmMpIHtcbiAgICAgIHZhciBhc3NldElEID0gdGhpcy53ZWIydnIuYWZyYW1lLmFzc2V0TWFuYWdlci5nZXRBc3NldChzcmMsIFwiaW1nXCIpO1xuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJJTUFHRV9cIiArIGFzc2V0SUQpO1xuICAgICAgdmFyIGlzR2lmID0gL1xcLihnaWYpJC9pO1xuICAgICAgaWYgKGlzR2lmLnRlc3Qoc3JjKSkge1xuICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcInNoYWRlclwiLCBcImdpZlwiKTtcbiAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzcmNcIiwgXCIjXCIgKyBhc3NldElEKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwic2hhZGVyXCIsIFwiZmxhdFwiKTtcbiAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiI1wiICsgYXNzZXRJRCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNwZWNpZmljVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNwZWNpZmljVXBkYXRlKCkge1xuICAgICAgdmFyIHNyYyA9IHRoaXMuZG9tRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7XG4gICAgICBpZiAoc3JjICE9IHRoaXMuY3VycmVudFNyYykge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50U3JjKSB7XG4gICAgICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudFNyYyA9IHNyYztcbiAgICAgICAgdGhpcy51cGRhdGVJbWFnZSh0aGlzLmN1cnJlbnRTcmMpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xufShfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSk7IC8vIFRPRE86IE5vIG5lZWQgdG8gc2F2ZSBpbWFnZSBjb3B5IGluIGFzc2V0cyB5b3UgY2FuIGRpcmVjdGx5IHJlYWQgaXQgZnJvbSB0aGUgb3JpZ25hbFxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2VsZW1lbnRzL2lucHV0RWxlbWVudC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZWxlbWVudHMvaW5wdXRFbGVtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSW5wdXRFbGVtZW50KVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RleHRFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3RleHRFbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvdGV4dEVsZW1lbnQuanNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH1cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyB0cnkgeyB2YXIgdCA9ICFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IH0gY2F0Y2ggKHQpIHt9IHJldHVybiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHJldHVybiAhIXQ7IH0pKCk7IH1cbmZ1bmN0aW9uIF9nZXQoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LmdldCkgeyBfZ2V0ID0gUmVmbGVjdC5nZXQuYmluZCgpOyB9IGVsc2UgeyBfZ2V0ID0gZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgYmFzZSA9IF9zdXBlclByb3BCYXNlKHRhcmdldCwgcHJvcGVydHkpOyBpZiAoIWJhc2UpIHJldHVybjsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2UsIHByb3BlcnR5KTsgaWYgKGRlc2MuZ2V0KSB7IHJldHVybiBkZXNjLmdldC5jYWxsKGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdGFyZ2V0IDogcmVjZWl2ZXIpOyB9IHJldHVybiBkZXNjLnZhbHVlOyB9OyB9IHJldHVybiBfZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cbmZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHsgd2hpbGUgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHsgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChvYmplY3QgPT09IG51bGwpIGJyZWFrOyB9IHJldHVybiBvYmplY3Q7IH1cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxudmFyIElucHV0RWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1RleHRFbGVtZW50KSB7XG4gIGZ1bmN0aW9uIElucHV0RWxlbWVudCh3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbnB1dEVsZW1lbnQpO1xuICAgIF90aGlzID0gX2NhbGxTdXBlcih0aGlzLCBJbnB1dEVsZW1lbnQsIFt3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyXSk7XG4gICAgX3RoaXMuYm9yZGVyQ29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoMHgwMDAwMDApO1xuICAgIF90aGlzLmJvcmRlcldpZHRoID0gMTtcbiAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTtcblxuICAgIC8vIHVwZGF0ZSB3aGVuIHRoZXJlIGlzIGNoYW5nZSBvZiB2YWx1ZVxuICAgIF90aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy51cGRhdGUoKTtcbiAgICB9KTtcbiAgICAvLyB3aGVuIGNsaWNrZWQgbWFrZSBpdCBhY3RpdmUgaW5wdXQgZm9yIHRoZSBrZXlib2FyZCBhbmQgcG9zaXRpb24gdGhlIGtleWJvYXJkIHJlbGF0aXZlIHRvIGNhbWVyYVxuICAgIF90aGlzLmVudGl0eS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNhbWVyYSA9IF90aGlzLndlYjJ2ci5hZnJhbWUuc2NlbmUuY2FtZXJhLnBhcmVudDtcbiAgICAgIHZhciBrZXlib2FyZCA9IF90aGlzLndlYjJ2ci5hZnJhbWUua2V5Ym9hcmQub2JqZWN0M0Q7XG4gICAgICB2YXIgY2FtZXJhV29ybGRQb3MgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgY2FtZXJhV29ybGRQb3Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGNhbWVyYS5tYXRyaXhXb3JsZCk7XG4gICAgICBrZXlib2FyZC5wb3NpdGlvbi5jb3B5KGNhbWVyYVdvcmxkUG9zKTtcbiAgICAgIGtleWJvYXJkLnJvdGF0aW9uLmNvcHkoY2FtZXJhLnJvdGF0aW9uKTtcbiAgICAgIGtleWJvYXJkLnJvdGF0aW9uLnogPSAwO1xuICAgICAga2V5Ym9hcmQucm90YXRpb24ueCA9IFRIUkVFLk1hdGhVdGlscy5kZWdUb1JhZCgtMzApO1xuICAgICAga2V5Ym9hcmQudHJhbnNsYXRlWCgtMC4yNCk7XG4gICAgICBrZXlib2FyZC50cmFuc2xhdGVZKC0wLjEpO1xuICAgICAga2V5Ym9hcmQudHJhbnNsYXRlWigtMC42KTtcbiAgICAgIGtleWJvYXJkLnZpc2libGUgPSB0cnVlO1xuICAgICAgaWYgKF90aGlzLndlYjJ2ci5hZnJhbWUua2V5Ym9hcmQuYWN0aXZlSW5wdXQpIHtcbiAgICAgICAgX3RoaXMud2ViMnZyLmFmcmFtZS5rZXlib2FyZC5hY3RpdmVJbnB1dC5lbGVtZW50LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAvLyB1cGRhdGUgd2ViMnZyIHdoZXJlIGFjdGl2ZUlucHV0IGlzIGxvY2F0ZWRcbiAgICAgICAgX3RoaXMud2ViMnZyLmFmcmFtZS5rZXlib2FyZC5hY3RpdmVJbnB1dC5lbGVtZW50LndlYjJ2ci51cGRhdGUoKTtcbiAgICAgIH1cbiAgICAgIF90aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICBfdGhpcy53ZWIydnIuYWZyYW1lLmtleWJvYXJkLmFjdGl2ZUlucHV0ID0gX3RoaXMuZG9tRWxlbWVudDtcbiAgICAgIF90aGlzLndlYjJ2ci51cGRhdGUoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgX2luaGVyaXRzKElucHV0RWxlbWVudCwgX1RleHRFbGVtZW50KTtcbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhJbnB1dEVsZW1lbnQsIFt7XG4gICAga2V5OiBcInVwZGF0ZVRleHRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVGV4dCgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZG9tRWxlbWVudC52YWx1ZTtcbiAgICAgIGlmICh2YWx1ZSkgdGhpcy50ZXh0VmFsdWUgPSB2YWx1ZTtlbHNlIHRoaXMudGV4dFZhbHVlID0gdGhpcy5kb21FbGVtZW50LnBsYWNlaG9sZGVyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVUZXh0Q29sb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVGV4dENvbG9yKCkge1xuICAgICAgdmFyIHZhbHVlID0gdGhpcy5kb21FbGVtZW50LnZhbHVlO1xuICAgICAgaWYgKHZhbHVlKSBfZ2V0KF9nZXRQcm90b3R5cGVPZihJbnB1dEVsZW1lbnQucHJvdG90eXBlKSwgXCJ1cGRhdGVUZXh0Q29sb3JcIiwgdGhpcykuY2FsbCh0aGlzKTtlbHNlIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInRleHRcIiwgXCJjb2xvclwiLCBcIiM5OTlcIik7XG4gICAgICBpZiAodGhpcy5hY3RpdmUpIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcImNvbG9yXCIsIFwiI2ZmZmZjY1wiKTtcbiAgICB9XG4gIH1dKTtcbn0oX3RleHRFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9lbGVtZW50cy9yYWRpb0VsZW1lbnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2VsZW1lbnRzL3JhZGlvRWxlbWVudC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFJhZGlvRWxlbWVudClcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy9lbGVtZW50LmpzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9XG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbnZhciBSYWRpb0VsZW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FbGVtZW50KSB7XG4gIGZ1bmN0aW9uIFJhZGlvRWxlbWVudCh3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSYWRpb0VsZW1lbnQpO1xuICAgIF90aGlzID0gX2NhbGxTdXBlcih0aGlzLCBSYWRpb0VsZW1lbnQsIFt3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyXSk7XG4gICAgX3RoaXMuYm9yZGVyQ29sb3IgPSBuZXcgVEhSRUUuQ29sb3IoMHgwMDAwMDApO1xuICAgIF90aGlzLmJvcmRlcldpZHRoID0gMTtcbiAgICBfdGhpcy5lbnRpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1jaXJjbGVcIik7XG4gICAgX3RoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMud2ViMnZyLnVwZGF0ZSgpO1xuICAgIH0uYmluZChfdGhpcykpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICBfaW5oZXJpdHMoUmFkaW9FbGVtZW50LCBfRWxlbWVudCk7XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoUmFkaW9FbGVtZW50LCBbe1xuICAgIGtleTogXCJzcGVjaWZpY1VwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzcGVjaWZpY1VwZGF0ZSgpIHtcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInJhZGl1c1wiLCB0aGlzLnBvc2l0aW9uLndpZHRoIC8gMik7XG4gICAgICBpZiAodGhpcy5kb21FbGVtZW50LmNoZWNrZWQpIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcImNvbG9yXCIsIFwiIzAwNzVGRlwiKTtlbHNlIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcImNvbG9yXCIsIFwiI0ZGRkZGRlwiKTtcbiAgICB9XG4gIH1dKTtcbn0oX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2VsZW1lbnRzL3N2Z0VsZW1lbnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9lbGVtZW50cy9zdmdFbGVtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFN2Z0VsZW1lbnQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvZWxlbWVudC5qc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfY2FsbFN1cGVyKHQsIG8sIGUpIHsgcmV0dXJuIG8gPSBfZ2V0UHJvdG90eXBlT2YobyksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSA/IFJlZmxlY3QuY29uc3RydWN0KG8sIGUgfHwgW10sIF9nZXRQcm90b3R5cGVPZih0KS5jb25zdHJ1Y3RvcikgOiBvLmFwcGx5KHQsIGUpKTsgfVxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG52YXIgU3ZnRWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0VsZW1lbnQpIHtcbiAgZnVuY3Rpb24gU3ZnRWxlbWVudCh3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdmdFbGVtZW50KTtcbiAgICBfdGhpcyA9IF9jYWxsU3VwZXIodGhpcywgU3ZnRWxlbWVudCwgW3dlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXJdKTtcbiAgICBfdGhpcy5pbWFnZUlkID0gbnVsbDtcbiAgICBfdGhpcy5lbnRpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1pbWFnZVwiKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgX2luaGVyaXRzKFN2Z0VsZW1lbnQsIF9FbGVtZW50KTtcbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhTdmdFbGVtZW50LCBbe1xuICAgIGtleTogXCJzdmdUb0ltYWdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN2Z1RvSW1hZ2UoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICAgIHZhciBzdmdTdHJpbmcgPSBuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKHRoaXMuZG9tRWxlbWVudCk7XG4gICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgY2FudmFzLndpZHRoID0gdGhpcy5wb3NpdGlvbi5kb21Qb3NpdGlvbi53aWR0aCAqIDI7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gdGhpcy5wb3NpdGlvbi5kb21Qb3NpdGlvbi5oZWlnaHQgKiAyO1xuICAgICAgdmFyIERPTVVSTCA9IHNlbGYuVVJMIHx8IHNlbGYud2Via2l0VVJMIHx8IHNlbGY7XG4gICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICB2YXIgc3ZnID0gbmV3IEJsb2IoW3N2Z1N0cmluZ10sIHtcbiAgICAgICAgdHlwZTogXCJpbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLThcIlxuICAgICAgfSk7XG4gICAgICB2YXIgdXJsID0gRE9NVVJMLmNyZWF0ZU9iamVjdFVSTChzdmcpO1xuICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzMi5kb21FbGVtZW50LnN0eWxlLndpZHRoKSBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgY2FudmFzLndpZHRoICogMiwgY2FudmFzLmhlaWdodCAqIDIpO2Vsc2UgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIERPTVVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgX3RoaXMyLnVwZGF0ZUltYWdlKGNhbnZhcy50b0RhdGFVUkwoKSk7XG4gICAgICAgIGNhbnZhcy5yZW1vdmUoKTtcbiAgICAgIH07XG4gICAgICBpbWcuc3JjID0gdXJsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVJbWFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVJbWFnZShzcmMpIHtcbiAgICAgIHZhciBhc3NldElkID0gdGhpcy53ZWIydnIuYWZyYW1lLmFzc2V0TWFuYWdlci5nZXRBc3NldChzcmMsIFwiaW1nXCIpO1xuXG4gICAgICAvLyByZW1vdmUgb2xkIGltYWdlIGlmIHRoZXJlIGlzIG5ldyBpbWFnZVxuICAgICAgaWYgKHRoaXMuaW1hZ2VJZCAmJiB0aGlzLmltYWdlSWQgIT0gYXNzZXRJZCkgdGhpcy53ZWIydnIuYWZyYW1lLmFzc2V0TWFuYWdlci5yZW1vdmVBc3NldCh0aGlzLmltYWdlSWQpO1xuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJJTUFHRV9cIiArIGFzc2V0SWQpO1xuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiI1wiICsgYXNzZXRJZCk7XG4gICAgICB0aGlzLmltYWdlSWQgPSBhc3NldElkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzcGVjaWZpY1VwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzcGVjaWZpY1VwZGF0ZSgpIHtcbiAgICAgIHRoaXMuc3ZnVG9JbWFnZSgpO1xuICAgIH1cbiAgfV0pO1xufShfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZWxlbWVudHMvdGV4dEVsZW1lbnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZWxlbWVudHMvdGV4dEVsZW1lbnQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFRleHRFbGVtZW50KVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbnRhaW5lckVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29udGFpbmVyRWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2NvbnRhaW5lckVsZW1lbnQuanNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH1cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyB0cnkgeyB2YXIgdCA9ICFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IH0gY2F0Y2ggKHQpIHt9IHJldHVybiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHJldHVybiAhIXQ7IH0pKCk7IH1cbmZ1bmN0aW9uIF9nZXQoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LmdldCkgeyBfZ2V0ID0gUmVmbGVjdC5nZXQuYmluZCgpOyB9IGVsc2UgeyBfZ2V0ID0gZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgYmFzZSA9IF9zdXBlclByb3BCYXNlKHRhcmdldCwgcHJvcGVydHkpOyBpZiAoIWJhc2UpIHJldHVybjsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2UsIHByb3BlcnR5KTsgaWYgKGRlc2MuZ2V0KSB7IHJldHVybiBkZXNjLmdldC5jYWxsKGFyZ3VtZW50cy5sZW5ndGggPCAzID8gdGFyZ2V0IDogcmVjZWl2ZXIpOyB9IHJldHVybiBkZXNjLnZhbHVlOyB9OyB9IHJldHVybiBfZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH1cbmZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHsgd2hpbGUgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpIHsgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChvYmplY3QgPT09IG51bGwpIGJyZWFrOyB9IHJldHVybiBvYmplY3Q7IH1cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxudmFyIFRleHRFbGVtZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29udGFpbmVyRWxlbWVudCkge1xuICBmdW5jdGlvbiBUZXh0RWxlbWVudCh3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUZXh0RWxlbWVudCk7XG4gICAgX3RoaXMgPSBfY2FsbFN1cGVyKHRoaXMsIFRleHRFbGVtZW50LCBbd2ViMnZyLCBkb21FbGVtZW50LCBsYXllciwgZmFsc2VdKTtcbiAgICBfdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwidGV4dFwiLCBcInZhbHVlXCIsIFwiXCIpO1xuICAgIF90aGlzLnRleHRWYWx1ZSA9IG51bGw7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIF9pbmhlcml0cyhUZXh0RWxlbWVudCwgX0NvbnRhaW5lckVsZW1lbnQpO1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFRleHRFbGVtZW50LCBbe1xuICAgIGtleTogXCJzZXR1cENsaXBwaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwQ2xpcHBpbmcoKSB7XG4gICAgICB2YXIgY2xpcHBpbmdDb250ZXh0ID0gdGhpcy5nZXRDbGlwcGluZ0NvbnRleHQoKTtcbiAgICAgIGlmIChjbGlwcGluZ0NvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jbGlwcGluZ0NvbnRleHQgPSBjbGlwcGluZ0NvbnRleHQ7XG4gICAgICAgIHZhciBtYXRlcmlhbCA9IHRoaXMuZW50aXR5LmNvbXBvbmVudHMudGV4dC5tYXRlcmlhbDtcblxuICAgICAgICAvLyB0ZXh0IGNvbXBvbmVudCB1c2VzIGN1c3RvbSBzaGFkZXIgc28gZGVmYXVsdCB0aHJlZS5qcyBjbGlwcGluZyBkb2VzbnQgd29yaywgbmVlZGVkIHRvIGluamVjdCBjbGlwcGluZyBzaGFkZXIgY29kZSBpbnNpZGUgdGhlIGN1c3RvbSBzaGFkZXIgY29kZShSYXdTaGFkZXJNYXRlcmlhbClcbiAgICAgICAgLy8gaGVscCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQyNTMyNTQ1L2FkZC1jbGlwcGluZy10by10aHJlZS1zaGFkZXJtYXRlcmlhbFxuICAgICAgICAvLyAxLjEuMCB2ZXJzaW9uIGNoYW5nZXM6IEJlY2F1c2UgQWZyYW1lIDEuMS4wIGNoYW5nZXMgdGV4dCBtYXRlcmlhbCBzaGFkZXIgdG8gdXNlIHdlYmdsIDIoZ2xzbCAzKSBzb21lIG9mIHRoZSB0aHJlZS5qcyBTaGFkZXJDaHVuayBoYWQgdG8gYmUgY29udmVydGVkIHRvIGdsc2wgMy5cbiAgICAgICAgdmFyIGZyYWdtZW50U2hhZGVyID0gXCIjdmVyc2lvbiAzMDAgZXNcXG4gICAgICAgICAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxuICAgICAgICAgICAgdW5pZm9ybSBib29sIG5lZ2F0ZTtcXG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGFscGhhVGVzdDtcXG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IG9wYWNpdHk7XFxuICAgICAgICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgbWFwO1xcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMyBjb2xvcjtcXG4gICAgICAgICAgICBpbiB2ZWMyIHZVVjtcXG4gICAgICAgICAgICBvdXQgdmVjNCBmcmFnQ29sb3I7XFxuICAgICAgICAgICAgZmxvYXQgbWVkaWFuKGZsb2F0IHIsIGZsb2F0IGcsIGZsb2F0IGIpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heChtaW4ociwgZyksIG1pbihtYXgociwgZyksIGIpKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgI2RlZmluZSBCSUdfRU5PVUdIIDAuMDAxXFxuICAgICAgICAgICAgI2RlZmluZSBNT0RJRklFRF9BTFBIQVRFU1QgKDAuMDIgKiBpc0JpZ0Vub3VnaCAvIEJJR19FTk9VR0gpXFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gY2xpcHBpbmdfcGxhbmVzX3BhcnNfZnJhZ21lbnQgY29udmVydGVkIHRvIGdsc2wgM1xcbiAgICAgICAgICAgICNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcbiAgICAgICAgICAgICAgICBpbiB2ZWMzIHZDbGlwUG9zaXRpb247XFxuICAgICAgICAgICAgICAgIHVuaWZvcm0gdmVjNCBjbGlwcGluZ1BsYW5lc1tOVU1fQ0xJUFBJTkdfUExBTkVTXTtcXG4gICAgICAgICAgICAjZW5kaWZcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICB2b2lkIG1haW4oKSB7XFxuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCBnbHNsIDNcXG4gICAgICAgICAgICAgICAgI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc19mcmFnbWVudD5cXG5cXG4gICAgICAgICAgICAgICAgdmVjMyBzYW1wbGVDb2xvciA9IHRleHR1cmUobWFwLCB2VVYpLnJnYjtcXG4gICAgICAgICAgICAgICAgaWYgKG5lZ2F0ZSkgeyBzYW1wbGVDb2xvciA9IDEuMCAtIHNhbXBsZUNvbG9yOyB9XFxuICAgICAgICAgICAgICAgIGZsb2F0IHNpZ0Rpc3QgPSBtZWRpYW4oc2FtcGxlQ29sb3Iuciwgc2FtcGxlQ29sb3IuZywgc2FtcGxlQ29sb3IuYikgLSAwLjU7XFxuICAgICAgICAgICAgICAgIGZsb2F0IGFscGhhID0gY2xhbXAoc2lnRGlzdCAvIGZ3aWR0aChzaWdEaXN0KSArIDAuNSwgMC4wLCAxLjApO1xcbiAgICAgICAgICAgICAgICBmbG9hdCBkc2NhbGUgPSAwLjM1MzUwNTtcXG4gICAgICAgICAgICAgICAgdmVjMiBkdXYgPSBkc2NhbGUgKiAoZEZkeCh2VVYpICsgZEZkeSh2VVYpKTtcXG4gICAgICAgICAgICAgICAgZmxvYXQgaXNCaWdFbm91Z2ggPSBtYXgoYWJzKGR1di54KSwgYWJzKGR1di55KSk7XFxuICAgICAgICAgICAgICAgIC8vIERvIG1vZGlmaWVkIGFscGhhIHRlc3QuXFxuICAgICAgICAgICAgICAgIGlmIChpc0JpZ0Vub3VnaCA+IEJJR19FTk9VR0gpIHtcXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHJhdGlvID0gQklHX0VOT1VHSCAvIGlzQmlnRW5vdWdoO1xcbiAgICAgICAgICAgICAgICAgICAgYWxwaGEgPSByYXRpbyAqIGFscGhhICsgKDEuMCAtIHJhdGlvKSAqIChzaWdEaXN0ICsgMC41KTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAvLyBEbyBtb2RpZmllZCBhbHBoYSB0ZXN0LlxcbiAgICAgICAgICAgICAgICBpZiAoYWxwaGEgPCBhbHBoYVRlc3QgKiBNT0RJRklFRF9BTFBIQVRFU1QpIHsgZGlzY2FyZDsgcmV0dXJuOyB9XFxuICAgICAgICAgICAgICAgIGZyYWdDb2xvciA9IHZlYzQoY29sb3IueHl6LCBhbHBoYSAqIG9wYWNpdHkpO1xcbiAgICAgICAgICAgIH1cIjtcbiAgICAgICAgdmFyIHZlcnRleFNoYWRlciA9IFwiI3ZlcnNpb24gMzAwIGVzXFxuICAgICAgICAgICAgaW4gdmVjMiB1djtcXG4gICAgICAgICAgICBpbiB2ZWMzIHBvc2l0aW9uO1xcbiAgICAgICAgICAgIHVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uTWF0cml4O1xcbiAgICAgICAgICAgIHVuaWZvcm0gbWF0NCBtb2RlbFZpZXdNYXRyaXg7XFxuICAgICAgICAgICAgb3V0IHZlYzIgdlVWO1xcblxcbiAgICAgICAgICAgIC8vIGNsaXBwaW5nX3BsYW5lc19wYXJzX3ZlcnRleCBjb252ZXJ0ZWQgdG8gZ2xzbCAzXFxuICAgICAgICAgICAgI2lmIE5VTV9DTElQUElOR19QTEFORVMgPiAwXFxuXFx0ICAgICAgICAgICAgb3V0IHZlYzMgdkNsaXBQb3NpdGlvbjtcXG4gICAgICAgICAgICAjZW5kaWZcXG5cXG4gICAgICAgICAgICB2b2lkIG1haW4odm9pZCkge1xcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggZ2xzbCAzXFxuICAgICAgICAgICAgICAgICNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+XFxuXFxuICAgICAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIG1vZGVsVmlld01hdHJpeCAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxuICAgICAgICAgICAgICAgIHZVViA9IHV2O1xcblxcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggZ2xzbCAzXFxuICAgICAgICAgICAgICAgICNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD5cXG4gICAgICAgICAgICAgICAgI2luY2x1ZGUgPGNsaXBwaW5nX3BsYW5lc192ZXJ0ZXg+XFxuXFxuICAgICAgICAgICAgfVwiO1xuICAgICAgICBtYXRlcmlhbC5mcmFnbWVudFNoYWRlciA9IGZyYWdtZW50U2hhZGVyO1xuICAgICAgICBtYXRlcmlhbC52ZXJ0ZXhTaGFkZXIgPSB2ZXJ0ZXhTaGFkZXI7XG4gICAgICAgIG1hdGVyaWFsLmNsaXBwaW5nID0gdHJ1ZTtcbiAgICAgICAgbWF0ZXJpYWwuY2xpcHBpbmdQbGFuZXMgPSBjbGlwcGluZ0NvbnRleHQucGxhbmVzO1xuICAgICAgICB0aGlzLnVwZGF0ZUNsaXBwaW5nKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZVRleHRBbGlnbm1lbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVGV4dEFsaWdubWVudCgpIHtcbiAgICAgIC8vIGFsaWduIGNzcyB0ZXh0LWFsaWduIHRvIHRleHQgY29tcG9uZW50XG4gICAgICB2YXIgYWxpZ24gPSB0aGlzLnN0eWxlLnRleHRBbGlnbjtcbiAgICAgIGlmICghW1wibGVmdFwiLCBcInJpZ2h0XCIsIFwiY2VudGVyXCJdLmluY2x1ZGVzKGFsaWduKSkgYWxpZ24gPSBcImxlZnRcIjtcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInRleHRcIiwgXCJhbGlnblwiLCBhbGlnbik7XG5cbiAgICAgIC8vIHNldCB0ZXh0IGxpbmVIZWlnaHQgaWYgaXQgaGFzIGN1c3RvbSBjc3MgbGluZUhlaWdodFxuICAgICAgdmFyIHRleHQgPSB0aGlzLmVudGl0eS5jb21wb25lbnRzLnRleHQ7XG4gICAgICBpZiAodGhpcy5zdHlsZS5saW5lSGVpZ2h0ICE9IFwibm9ybWFsXCIgJiYgdHlwZW9mIHRleHQuY3VycmVudEZvbnQgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIFwibGluZUhlaWdodFwiLCB0ZXh0LmN1cnJlbnRGb250LmNvbW1vbi5saW5lSGVpZ2h0ICsgcGFyc2VGbG9hdCh0aGlzLnN0eWxlLmxpbmVIZWlnaHQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlVGV4dFNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVGV4dFNpemUoKSB7XG4gICAgICB2YXIgYWN0dWFsRm9udFNpemUgPSBwYXJzZUZsb2F0KHRoaXMuc3R5bGUuZm9udFNpemUpO1xuICAgICAgdmFyIHdpZHRoID0gdGhpcy5wb3NpdGlvbi53aWR0aDtcbiAgICAgIHZhciB3aWR0aEluUGl4ZWxzID0gd2lkdGggLyB0aGlzLnBvc2l0aW9uLnNjYWxpbmdGYWN0b3I7XG4gICAgICB2YXIgd3JhcFBpeGVscyA9IHdpZHRoSW5QaXhlbHMgKiA0MiAvIGFjdHVhbEZvbnRTaXplO1xuICAgICAgd3JhcFBpeGVscyAqPSAxLjEwNzsgLy8xLjEwNzA2Nzc0MTgzMDcwMjMzXG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIFwid3JhcFBpeGVsc1wiLCB3cmFwUGl4ZWxzKTtcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInRleHRcIiwgXCJ3aWR0aFwiLCB3aWR0aCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZVRleHRDb2xvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVUZXh0Q29sb3IoKSB7XG4gICAgICAvLyBvcGFjaXR5IGZyb20gcGFyZW50IGJlY2F1c2UgaXQgZG9lc250IHBhc3MgaXQgdG8gY2hpbGRyZW5cbiAgICAgIHZhciBvcGFjaXR5ID0gdGhpcy5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQuZWxlbWVudC5zdHlsZS5vcGFjaXR5O1xuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwidGV4dFwiLCBcIm9wYWNpdHlcIiwgb3BhY2l0eSk7XG4gICAgICB2YXIgdGV4dENvbG9yID0gdGhpcy5zdHlsZS5jb2xvcjtcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInRleHRcIiwgXCJjb2xvclwiLCB0ZXh0Q29sb3IpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVUZXh0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRleHQoKSB7XG4gICAgICAvLyByZW1vdmUgbmV3IGxpbmVzIGFuZCB3aGl0ZXNwYWNlc1xuICAgICAgdGhpcy50ZXh0VmFsdWUgPSB0aGlzLmRvbUVsZW1lbnQudGV4dENvbnRlbnQucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzcGVjaWZpY1VwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzcGVjaWZpY1VwZGF0ZSgpIHtcbiAgICAgIF9nZXQoX2dldFByb3RvdHlwZU9mKFRleHRFbGVtZW50LnByb3RvdHlwZSksIFwic3BlY2lmaWNVcGRhdGVcIiwgdGhpcykuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMudXBkYXRlVGV4dFNpemUoKTtcbiAgICAgIHRoaXMudXBkYXRlVGV4dEFsaWdubWVudCgpO1xuICAgICAgdGhpcy51cGRhdGVUZXh0KCk7XG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIFwidmFsdWVcIiwgdGhpcy50ZXh0VmFsdWUpO1xuICAgICAgdGhpcy51cGRhdGVUZXh0Q29sb3IoKTtcbiAgICB9XG4gIH1dKTtcbn0oX2NvbnRhaW5lckVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2VsZW1lbnRzL3ZpZGVvRWxlbWVudC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZWxlbWVudHMvdmlkZW9FbGVtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVmlkZW9FbGVtZW50KVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2VsZW1lbnQuanNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH1cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyB0cnkgeyB2YXIgdCA9ICFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IH0gY2F0Y2ggKHQpIHt9IHJldHVybiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHJldHVybiAhIXQ7IH0pKCk7IH1cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxudmFyIFZpZGVvRWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0VsZW1lbnQpIHtcbiAgZnVuY3Rpb24gVmlkZW9FbGVtZW50KHdlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXIpIHtcbiAgICB2YXIgX3RoaXM7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZpZGVvRWxlbWVudCk7XG4gICAgX3RoaXMgPSBfY2FsbFN1cGVyKHRoaXMsIFZpZGVvRWxlbWVudCwgW3dlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXJdKTtcbiAgICAvLyBub3JtYWwgdmlkZW9cbiAgICBfdGhpcy5lbnRpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS12aWRlb1wiKTtcbiAgICAvLyAzNjAgdmlkZW9cbiAgICBfdGhpcy52aWRlbzM2MCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLXZpZGVvc3BoZXJlXCIpO1xuICAgIF90aGlzLndlYjJ2ci5hZnJhbWUuc2NlbmUuYXBwZW5kQ2hpbGQoX3RoaXMudmlkZW8zNjApO1xuICAgIF90aGlzLmNyZWF0ZUNsaWNrRXZlbnQoKTtcbiAgICBfdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpcy5kb21FbGVtZW50Lmhhc0F0dHJpYnV0ZShcInZyXCIpKSBfdGhpcy52aWRlbzM2MC5jb21wb25lbnRzLm1hdGVyaWFsLm1hdGVyaWFsLm1hcC5pbWFnZS5wbGF5KCk7XG4gICAgfSk7XG4gICAgX3RoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicGF1c2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzLmRvbUVsZW1lbnQuaGFzQXR0cmlidXRlKFwidnJcIikpIF90aGlzLnZpZGVvMzYwLmNvbXBvbmVudHMubWF0ZXJpYWwubWF0ZXJpYWwubWFwLmltYWdlLnBhdXNlKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIF9pbmhlcml0cyhWaWRlb0VsZW1lbnQsIF9FbGVtZW50KTtcbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhWaWRlb0VsZW1lbnQsIFt7XG4gICAga2V5OiBcImNyZWF0ZUNsaWNrRXZlbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQ2xpY2tFdmVudCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgICAgLy8gZm9yIG5vcm1hbCB2aWRlb1xuICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi5kb21FbGVtZW50LnBhdXNlZCA/IF90aGlzMi5kb21FbGVtZW50LnBsYXkoKSA6IF90aGlzMi5kb21FbGVtZW50LnBhdXNlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3BlY2lmaWNVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3BlY2lmaWNVcGRhdGUoKSB7XG4gICAgICB2YXIgc3JjID0gdGhpcy5kb21FbGVtZW50LmN1cnJlbnRTcmM7XG4gICAgICB2YXIgaWQgPSB0aGlzLmRvbUVsZW1lbnQuaWQ7XG5cbiAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIHZpZGVvIGlkIGdlbmVyYXRlIG5ldyBpZFxuICAgICAgaWYgKCFpZCkge1xuICAgICAgICBpZCA9IHRoaXMud2ViMnZyLmFmcmFtZS5hc3NldE1hbmFnZXIudXBkYXRlQ3VycmVudEFzc2V0SWRSZXR1cm4oKTtcbiAgICAgICAgdGhpcy5kb21FbGVtZW50LmlkID0gaWQ7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kb21FbGVtZW50Lmhhc0F0dHJpYnV0ZShcInZyXCIpKSB7XG4gICAgICAgIHRoaXMudmlkZW8zNjAub2JqZWN0M0QudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMudmlkZW8zNjAuY2xhc3NMaXN0LmFkZCh0aGlzLndlYjJ2ci5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG4gICAgICAgIHRoaXMuZW50aXR5Lm9iamVjdDNELnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbnRpdHkuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLndlYjJ2ci5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG4gICAgICAgIHRoaXMudmlkZW8zNjAuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiI1wiICsgaWQpO1xuICAgICAgICAvLyBzZXQgdmlkZW8zNjAgcm90YXRpb25cbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5kb21FbGVtZW50LmdldEF0dHJpYnV0ZShcInZyXCIpO1xuICAgICAgICBpZiAocm90YXRpb24pIHRoaXMudmlkZW8zNjAub2JqZWN0M0Qucm90YXRpb24ueSA9IFRIUkVFLk1hdGhVdGlscy5kZWdUb1JhZChyb3RhdGlvbik7ZWxzZSB0aGlzLnZpZGVvMzYwLm9iamVjdDNELnJvdGF0aW9uLnkgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy52aWRlbzM2MC5vYmplY3QzRC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmlkZW8zNjAuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLndlYjJ2ci5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG4gICAgICAgIHRoaXMuZW50aXR5Lm9iamVjdDNELnZpc2libGUgPSB0cnVlO1xuICAgICAgICB0aGlzLmVudGl0eS5jbGFzc0xpc3QuYWRkKHRoaXMud2ViMnZyLnNldHRpbmdzLmludGVyYWN0aXZlVGFnKTtcbiAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiI1wiICsgaWQpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xufShfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcGx1Z2lucy9hZnJhbWUta2V5Ym9hcmQubWluLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9wbHVnaW5zL2FmcmFtZS1rZXlib2FyZC5taW4uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKCgpID0+IHtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbiFmdW5jdGlvbiAoZSkge1xuICB2YXIgdCA9IHt9O1xuICBmdW5jdGlvbiBhKGQpIHtcbiAgICBpZiAodFtkXSkgcmV0dXJuIHRbZF0uZXhwb3J0cztcbiAgICB2YXIgbiA9IHRbZF0gPSB7XG4gICAgICBpOiBkLFxuICAgICAgbDogITEsXG4gICAgICBleHBvcnRzOiB7fVxuICAgIH07XG4gICAgcmV0dXJuIGVbZF0uY2FsbChuLmV4cG9ydHMsIG4sIG4uZXhwb3J0cywgYSksIG4ubCA9ICEwLCBuLmV4cG9ydHM7XG4gIH1cbiAgYS5tID0gZSwgYS5jID0gdCwgYS5kID0gZnVuY3Rpb24gKGUsIHQsIGQpIHtcbiAgICBhLm8oZSwgdCkgfHwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIHtcbiAgICAgIGVudW1lcmFibGU6ICEwLFxuICAgICAgZ2V0OiBkXG4gICAgfSk7XG4gIH0sIGEuciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC50b1N0cmluZ1RhZyAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7XG4gICAgICB2YWx1ZTogXCJNb2R1bGVcIlxuICAgIH0pLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgIHZhbHVlOiAhMFxuICAgIH0pO1xuICB9LCBhLnQgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgIGlmICgxICYgdCAmJiAoZSA9IGEoZSkpLCA4ICYgdCkgcmV0dXJuIGU7XG4gICAgaWYgKDQgJiB0ICYmIFwib2JqZWN0XCIgPT0gX3R5cGVvZihlKSAmJiBlICYmIGUuX19lc01vZHVsZSkgcmV0dXJuIGU7XG4gICAgdmFyIGQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGlmIChhLnIoZCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkLCBcImRlZmF1bHRcIiwge1xuICAgICAgZW51bWVyYWJsZTogITAsXG4gICAgICB2YWx1ZTogZVxuICAgIH0pLCAyICYgdCAmJiBcInN0cmluZ1wiICE9IHR5cGVvZiBlKSBmb3IgKHZhciBuIGluIGUpIGEuZChkLCBuLCBmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuIGVbdF07XG4gICAgfS5iaW5kKG51bGwsIG4pKTtcbiAgICByZXR1cm4gZDtcbiAgfSwgYS5uID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IGUgJiYgZS5fX2VzTW9kdWxlID8gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGVbXCJkZWZhdWx0XCJdO1xuICAgIH0gOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZTtcbiAgICB9O1xuICAgIHJldHVybiBhLmQodCwgXCJhXCIsIHQpLCB0O1xuICB9LCBhLm8gPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgdCk7XG4gIH0sIGEucCA9IFwiXCIsIGEoYS5zID0gMCk7XG59KFtmdW5jdGlvbiAoZSwgdCwgYSkge1xuICBhKDEpLCBhKDMpO1xuICB2YXIgZCA9IGEoNCksXG4gICAgbiA9IHtcbiAgICAgIG1vZGU6IFwibm9ybWFsXCJcbiAgICB9O1xuICBuLnRlbXBsYXRlID0gbmV3IGQoKSwgZS5leHBvcnRzID0gd2luZG93LkFGSyA9IG47XG59LCBmdW5jdGlvbiAoZSwgdCwgYSkge1xuICB2YXIgZCA9IGEoMik7XG4gIGlmIChcInVuZGVmaW5lZFwiID09IHR5cGVvZiBBRlJBTUUpIHRocm93IG5ldyBFcnJvcihcIkNvbXBvbmVudCBhdHRlbXB0ZWQgdG8gcmVnaXN0ZXIgYmVmb3JlIEFGUkFNRSB3YXMgYXZhaWxhYmxlLlwiKTtcbiAgQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwiYS1rZXlib2FyZFwiLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgICBhdWRpbzoge1xuICAgICAgICBcImRlZmF1bHRcIjogITFcbiAgICAgIH0sXG4gICAgICBjb2xvcjoge1xuICAgICAgICBcImRlZmF1bHRcIjogXCIjZmZmXCJcbiAgICAgIH0sXG4gICAgICBoaWdobGlnaHRDb2xvcjoge1xuICAgICAgICBcImRlZmF1bHRcIjogXCIjMWE3OWRjXCJcbiAgICAgIH0sXG4gICAgICBkaXNtaXNzYWJsZToge1xuICAgICAgICBcImRlZmF1bHRcIjogITBcbiAgICAgIH0sXG4gICAgICBmb250OiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBcIm1vbm9pZFwiXG4gICAgICB9LFxuICAgICAgZm9udFNpemU6IHtcbiAgICAgICAgXCJkZWZhdWx0XCI6IFwiMC4zOVwiXG4gICAgICB9LFxuICAgICAgbG9jYWxlOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBcImVuXCJcbiAgICAgIH0sXG4gICAgICBtb2RlbDoge1xuICAgICAgICBcImRlZmF1bHRcIjogXCJcIlxuICAgICAgfSxcbiAgICAgIGJhc2VUZXh0dXJlOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBcIlwiXG4gICAgICB9LFxuICAgICAga2V5VGV4dHVyZToge1xuICAgICAgICBcImRlZmF1bHRcIjogXCJcIlxuICAgICAgfSxcbiAgICAgIHZlcnRpY2FsQWxpZ246IHtcbiAgICAgICAgXCJkZWZhdWx0XCI6IFwiY2VudGVyXCJcbiAgICAgIH1cbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICBBRksudGVtcGxhdGUuZHJhdyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuZGF0YSksIHt9LCB7XG4gICAgICAgIGVsOiB0aGlzLmVsXG4gICAgICB9KSksIHRoaXMuYXR0YWNoRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9LFxuICAgIGF0dGFjaEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiBhdHRhY2hFdmVudExpc3RlbmVycygpIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZUtleWJvYXJkUHJlc3MpLCB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUtleWJvYXJkVlIpO1xuICAgIH0sXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5Ym9hcmRQcmVzcyksIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlS2V5Ym9hcmRWUik7XG4gICAgfSxcbiAgICBoYW5kbGVLZXlib2FyZFByZXNzOiBmdW5jdGlvbiBoYW5kbGVLZXlib2FyZFByZXNzKGUpIHtcbiAgICAgIGQoZSk7XG4gICAgfSxcbiAgICBoYW5kbGVLZXlib2FyZFZSOiBmdW5jdGlvbiBoYW5kbGVLZXlib2FyZFZSKGUpIHtcbiAgICAgIGQoZSwgXCJ2clwiKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgfSk7XG59LCBmdW5jdGlvbiAoZSwgdCkge1xuICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgIHZhciBhO1xuICAgIHZhciBkID0gbmV3IFNldChbMTYsIDE3LCAxOCwgMjAsIDMzLCAzNCwgMzUsIDM2LCA0NSwgNDYsIDExMiwgMTEzLCAxMTQsIDExNSwgMTE2LCAxMTcsIDExOCwgMTE5LCAxMjAsIDEyMSwgMTIyLCAxMjNdKSxcbiAgICAgIG4gPSBlLmtleSAmJiBlLmtleS5jaGFyQ29kZUF0KDApO1xuICAgIHZhciByID0gZS5rZXksXG4gICAgICBzID0gZS5rZXlDb2RlO1xuICAgIGlmIChcInZyXCIgPT09IHQpIHMgPSBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiLmNvbmNhdChlLnRhcmdldC5pZCkpLmdldEF0dHJpYnV0ZShcImtleS1jb2RlXCIpKSwgciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIuY29uY2F0KGUudGFyZ2V0LmlkKSkuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7ZWxzZSBpZiAoZC5oYXMoZS5rZXlDb2RlKSkgcmV0dXJuO1xuICAgIHN3aXRjaCAocykge1xuICAgICAgY2FzZSA5OlxuICAgICAgICBhID0gbmV3IEN1c3RvbUV2ZW50KFwiYS1rZXlib2FyZC11cGRhdGVcIiwge1xuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgY29kZTogcyxcbiAgICAgICAgICAgIHZhbHVlOiBcIlxcdFwiXG4gICAgICAgICAgfVxuICAgICAgICB9KSwgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDg6XG4gICAgICAgIGEgPSBuZXcgQ3VzdG9tRXZlbnQoXCJhLWtleWJvYXJkLXVwZGF0ZVwiLCB7XG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBjb2RlOiBzLFxuICAgICAgICAgICAgdmFsdWU6IFwiXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pLCBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTM6XG4gICAgICAgIGEgPSBuZXcgQ3VzdG9tRXZlbnQoXCJhLWtleWJvYXJkLXVwZGF0ZVwiLCB7XG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBjb2RlOiBzLFxuICAgICAgICAgICAgdmFsdWU6IFwiXFxuXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pLCBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTY6XG4gICAgICAgIEFGSy50ZW1wbGF0ZS50b2dnbGVBY3RpdmVNb2RlKFwic2hpZnRcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxODpcbiAgICAgICAgQUZLLnRlbXBsYXRlLnRvZ2dsZUFjdGl2ZU1vZGUoXCJhbHRcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyNzpcbiAgICAgICAgdGhpcy5kaXNtaXNzYWJsZSAmJiAoYSA9IG5ldyBDdXN0b21FdmVudChcImEta2V5Ym9hcmQtdXBkYXRlXCIsIHtcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGNvZGU6IHMsXG4gICAgICAgICAgICB2YWx1ZTogXCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSksIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoYSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzI6XG4gICAgICAgIGEgPSBuZXcgQ3VzdG9tRXZlbnQoXCJhLWtleWJvYXJkLXVwZGF0ZVwiLCB7XG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBjb2RlOiBzLFxuICAgICAgICAgICAgdmFsdWU6IFwiIFwiXG4gICAgICAgICAgfVxuICAgICAgICB9KSwgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBhID0gbmV3IEN1c3RvbUV2ZW50KFwiYS1rZXlib2FyZC11cGRhdGVcIiwge1xuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgY29kZTogcyxcbiAgICAgICAgICAgIHZhbHVlOiByXG4gICAgICAgICAgfVxuICAgICAgICB9KSwgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChhKTtcbiAgICB9XG4gICAgaWYgKFwidnJcIiAhPT0gdCkge1xuICAgICAgdmFyIF90ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhLWtleWJvYXJkLVwiLmNvbmNhdChuKSkgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhLWtleWJvYXJkLVwiLmNvbmNhdChlLmtleUNvZGUpKTtcbiAgICAgIF90ICYmIChfdC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIm1vdXNlZG93blwiKSksIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIm1vdXNlbGVhdmVcIikpO1xuICAgICAgfSwgODApKTtcbiAgICB9XG4gIH07XG59LCBmdW5jdGlvbiAoZSwgdCkge1xuICBpZiAoXCJ1bmRlZmluZWRcIiA9PSB0eXBlb2YgQUZSQU1FKSB0aHJvdyBuZXcgRXJyb3IoXCJDb21wb25lbnQgYXR0ZW1wdGVkIHRvIHJlZ2lzdGVyIGJlZm9yZSBBRlJBTUUgd2FzIGF2YWlsYWJsZS5cIik7XG4gIEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcImtleWJvYXJkLWJ1dHRvblwiLCB7XG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgZSA9IHRoaXMuZWw7XG4gICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBlLnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwib3BhY2l0eVwiLCBcIjAuN1wiKTtcbiAgICAgIH0pLCBlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcIm9wYWNpdHlcIiwgX3RoaXMuaXNNb3VzZUVudGVyID8gXCIwLjlcIiA6IFwiMFwiKTtcbiAgICAgIH0pLCBlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcIm9wYWNpdHlcIiwgXCIwLjlcIiksIHNlbGYuaXNNb3VzZUVudGVyID0gITA7XG4gICAgICB9KSwgZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGUuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJvcGFjaXR5XCIsIFwiMFwiKSwgc2VsZi5pc01vdXNlRW50ZXIgPSAhMTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59LCBmdW5jdGlvbiAoZSwgdCwgYSkge1xuICB2YXIgZCA9IGEoNSk7XG4gIGUuZXhwb3J0cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gX2NsYXNzKCkge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9jbGFzcyk7XG4gICAgICB0aGlzLmtleWJvYXJkS2V5cyA9IHt9LCB0aGlzLmFjdGl2ZU1vZGUgPSBcIm5vcm1hbFwiO1xuICAgIH1cbiAgICByZXR1cm4gX2NyZWF0ZUNsYXNzKF9jbGFzcywgW3tcbiAgICAgIGtleTogXCJkcmF3XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdyhlKSB7XG4gICAgICAgIGZvciAodmFyIF90MiBpbiBlKSB0aGlzW190Ml0gPSBlW190Ml07XG4gICAgICAgIHRoaXMua2V5Ym9hcmRLZXlzID0gZChlLmxvY2FsZSksIHRoaXMuZHJhd0tleWJvYXJkKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRyYXdCdXR0b25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3QnV0dG9uKGUpIHtcbiAgICAgICAgdmFyIHQgPSBlLmtleSxcbiAgICAgICAgICBhID0gdC5zaXplLnNwbGl0KFwiIFwiKVswXSxcbiAgICAgICAgICBkID0gdC5zaXplLnNwbGl0KFwiIFwiKVsxXSxcbiAgICAgICAgICBuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtZW50aXR5XCIpO1xuICAgICAgICBuLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsIGUucG9zaXRpb24pO1xuICAgICAgICB2YXIgciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLWVudGl0eVwiKTtcbiAgICAgICAgci5zZXRBdHRyaWJ1dGUoXCJnZW9tZXRyeVwiLCBcInByaW1pdGl2ZTogcGxhbmU7IHdpZHRoOiBcIi5jb25jYXQoYSwgXCI7IGhlaWdodDogXCIpLmNvbmNhdChkLCBcIjtcIikpLCB0aGlzLmtleVRleHR1cmUgJiYgdGhpcy5rZXlUZXh0dXJlLmxlbmd0aCA+IDAgPyByLnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwic3JjOiBcIi5jb25jYXQodGhpcy5rZXlUZXh0dXJlKSkgOiByLnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwiY29sb3I6ICM0YTRhNGE7IG9wYWNpdHk6IDAuOVwiKTtcbiAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS10ZXh0XCIpO1xuICAgICAgICBzLmlkID0gXCJhLWtleWJvYXJkLVwiLmNvbmNhdCh0LmNvZGUpLCBzLnNldEF0dHJpYnV0ZShcImtleS1jb2RlXCIsIHQuY29kZSksIHMuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdC52YWx1ZSksIHMuc2V0QXR0cmlidXRlKFwiYWxpZ25cIiwgXCJjZW50ZXJcIiksIHMuc2V0QXR0cmlidXRlKFwiYmFzZWxpbmVcIiwgdGhpcy52ZXJ0aWNhbEFsaWduKSwgcy5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLCBcIjAgMCAwLjAwMVwiKSwgcy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB0aGlzLmZvbnRTaXplKSwgcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgdGhpcy5mb250U2l6ZSksIHMuc2V0QXR0cmlidXRlKFwiZ2VvbWV0cnlcIiwgXCJwcmltaXRpdmU6IHBsYW5lOyB3aWR0aDogXCIuY29uY2F0KGEsIFwiOyBoZWlnaHQ6IFwiKS5jb25jYXQoZCkpLCBzLnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwib3BhY2l0eTogMC4wOyB0cmFuc3BhcmVudDogdHJ1ZTsgY29sb3I6IFwiLmNvbmNhdCh0aGlzLmhpZ2hsaWdodENvbG9yKSksIHMuc2V0QXR0cmlidXRlKFwiY29sb3JcIiwgdGhpcy5jb2xvciksIHMuc2V0QXR0cmlidXRlKFwiZm9udFwiLCB0aGlzLmZvbnQpLCBzLnNldEF0dHJpYnV0ZShcInNoYWRlclwiLCBcIm1zZGZcIiksIHMuc2V0QXR0cmlidXRlKFwibmVnYXRlXCIsIFwiZmFsc2VcIiksIHMuc2V0QXR0cmlidXRlKFwia2V5Ym9hcmQtYnV0dG9uXCIsICEwKSwgcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbGxpZGFibGVcIiksIG4uYXBwZW5kQ2hpbGQociksIG4uYXBwZW5kQ2hpbGQocyksIHRoaXMuZWwuYXBwZW5kQ2hpbGQobik7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRyYXdLZXlib2FyZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdLZXlib2FyZCgpIHtcbiAgICAgICAgZm9yICg7IHRoaXMuZWwuZmlyc3RDaGlsZDspIHRoaXMuZWwucmVtb3ZlQ2hpbGQodGhpcy5lbC5maXJzdENoaWxkKTtcbiAgICAgICAgaWYgKHRoaXMua2V5Ym9hcmRLZXlzKSB7XG4gICAgICAgICAgdmFyIF9lID0gdGhpcy5rZXlib2FyZEtleXNbdGhpcy5hY3RpdmVNb2RlXSB8fCB0aGlzLmtleWJvYXJkS2V5cy5ub3JtYWwsXG4gICAgICAgICAgICBfdDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1lbnRpdHlcIiksXG4gICAgICAgICAgICBfYSA9IC41MixcbiAgICAgICAgICAgIF9kID0gLjA0ICogX2UubGVuZ3RoICsgLjAwNCAqIChfZS5sZW5ndGggLSAxKSArIC4wNDtcbiAgICAgICAgICBfdDMuc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiwgXCJcIi5jb25jYXQoX2EgLyAyIC0gLjAyLCBcIiBcIikuY29uY2F0KC1fZCAvIDIgKyAuMDIsIFwiIC0wLjAxXCIpKSwgX3QzLnNldEF0dHJpYnV0ZShcImdlb21ldHJ5XCIsIFwicHJpbWl0aXZlOiBwbGFuZTsgd2lkdGg6IFwiLmNvbmNhdChfYSwgXCI7IGhlaWdodDogXCIpLmNvbmNhdChfZCkpLCB0aGlzLmJhc2VUZXh0dXJlICYmIHRoaXMuYmFzZVRleHR1cmUubGVuZ3RoID4gMCA/IF90My5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcInNyYzogXCIuY29uY2F0KHRoaXMuYmFzZVRleHR1cmUpKSA6IF90My5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcImNvbG9yOiAjNGE0YTRhOyBzaWRlOiBkb3VibGU7IG9wYWNpdHk6IDAuN1wiKSwgdGhpcy5lbC5hcHBlbmRDaGlsZChfdDMpO1xuICAgICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgICBmb3IgKHZhciBfdDQgPSAwOyBfdDQgPCBfZS5sZW5ndGg7IF90NCsrKSB7XG4gICAgICAgICAgICB2YXIgX2EyID0gX2VbX3Q0XTtcbiAgICAgICAgICAgIHZhciBfZDIgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2UyID0gMDsgX2UyIDwgX2EyLmxlbmd0aDsgX2UyKyspIHtcbiAgICAgICAgICAgICAgdmFyIF90NSA9IF9hMltfZTJdLFxuICAgICAgICAgICAgICAgIHIgPSB0aGlzLnBhcnNlS2V5T2JqZWN0cyhfdDUpO1xuICAgICAgICAgICAgICBpZiAoIXRoaXMuZGlzbWlzc2FibGUgJiYgXCJjYW5jZWxcIiA9PT0gX3Q1LnR5cGUpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB2YXIgcyA9IHIuc2l6ZS5zcGxpdChcIiBcIilbMF0sXG4gICAgICAgICAgICAgICAgbCA9IHIuc2l6ZS5zcGxpdChcIiBcIilbMV07XG4gICAgICAgICAgICAgIHRoaXMuZHJhd0J1dHRvbih7XG4gICAgICAgICAgICAgICAga2V5OiByLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIlwiLmNvbmNhdChfZDIgKyBzIC8gMiwgXCIgXCIpLmNvbmNhdChuIC0gbCAvIDIsIFwiIDBcIilcbiAgICAgICAgICAgICAgfSksIF9kMiArPSBwYXJzZUZsb2F0KHMpICsgLjAwNCwgX2EyLmxlbmd0aCA9PT0gX2UyICsgMSAmJiAobiAtPSAuMDQ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidG9nZ2xlQWN0aXZlTW9kZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZU1vZGUoZSkge1xuICAgICAgICBlID09PSB0aGlzLmFjdGl2ZU1vZGUgPyAodGhpcy5hY3RpdmVNb2RlID0gXCJub3JtYWxcIiwgdGhpcy5kcmF3S2V5Ym9hcmQoKSkgOiAodGhpcy5hY3RpdmVNb2RlID0gZSwgdGhpcy5kcmF3S2V5Ym9hcmQoKSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInBhcnNlS2V5T2JqZWN0c1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlS2V5T2JqZWN0cyhlKSB7XG4gICAgICAgIHZhciB0ID0gZS50eXBlLFxuICAgICAgICAgIGEgPSBlLnZhbHVlO1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwiZGVsZXRlXCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzaXplOiBcIjAuMDQgMC4wNCAwXCIsXG4gICAgICAgICAgICAgIHZhbHVlOiBhLFxuICAgICAgICAgICAgICBjb2RlOiBcIjhcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICBjYXNlIFwiZW50ZXJcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNpemU6IFwiMC4wNCAwLjA4NCAwXCIsXG4gICAgICAgICAgICAgIHZhbHVlOiBhLFxuICAgICAgICAgICAgICBjb2RlOiBcIjEzXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgY2FzZSBcInNoaWZ0XCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzaXplOiBcIjAuMDg0IDAuMDQgMFwiLFxuICAgICAgICAgICAgICB2YWx1ZTogYSxcbiAgICAgICAgICAgICAgY29kZTogXCIxNlwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIGNhc2UgXCJhbHRcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNpemU6IFwiMC4wODQgMC4wNCAwXCIsXG4gICAgICAgICAgICAgIHZhbHVlOiBhLFxuICAgICAgICAgICAgICBjb2RlOiBcIjE4XCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgY2FzZSBcInNwYWNlXCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzaXplOiBcIlwiLmNvbmNhdCguMiArIC4wMTYsIFwiIDAuMDQgMFwiKSxcbiAgICAgICAgICAgICAgdmFsdWU6IGEsXG4gICAgICAgICAgICAgIGNvZGU6IFwiMzJcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICBjYXNlIFwiY2FuY2VsXCI6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBzaXplOiBcIjAuMDg0IDAuMDQgMFwiLFxuICAgICAgICAgICAgICB2YWx1ZTogYSxcbiAgICAgICAgICAgICAgY29kZTogXCIyNFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIGNhc2UgXCJzdWJtaXRcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNpemU6IFwiMC4wODQgMC4wNCAwXCIsXG4gICAgICAgICAgICAgIHZhbHVlOiBhLFxuICAgICAgICAgICAgICBjb2RlOiBcIjA2XCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNpemU6IFwiMC4wNCAwLjA0IDBcIixcbiAgICAgICAgICAgICAgdmFsdWU6IGEsXG4gICAgICAgICAgICAgIGNvZGU6IGEuY2hhckNvZGVBdCgwKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dKTtcbiAgfSgpO1xufSwgZnVuY3Rpb24gKGUsIHQsIGEpIHtcbiAgdmFyIGQgPSBhKDYpO1xuICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSBcImVuXCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZDtcbiAgICB9XG4gIH07XG59LCBmdW5jdGlvbiAoZSwgdCkge1xuICBlLmV4cG9ydHMgPSB7XG4gICAgbmFtZTogXCJtcy1VUy1JbnRlcm5hdGlvbmFsXCIsXG4gICAgbm9ybWFsOiBbW3tcbiAgICAgIHZhbHVlOiBcIjFcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjJcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjNcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjRcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjVcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjZcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjdcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjhcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjlcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjBcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjwtXCIsXG4gICAgICB0eXBlOiBcImRlbGV0ZVwiXG4gICAgfV0sIFt7XG4gICAgICB2YWx1ZTogXCJxXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJ3XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJlXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJyXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJ0XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJ5XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJ1XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJpXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJvXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJwXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJFbnRcIixcbiAgICAgIHR5cGU6IFwiZW50ZXJcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiYVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwic1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiZFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiZlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiZ1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiaFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwialwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwia1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwibFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6ICdcIicsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9XSwgW3tcbiAgICAgIHZhbHVlOiBcIlNoaWZ0XCIsXG4gICAgICB0eXBlOiBcInNoaWZ0XCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJ6XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJ4XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJjXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJ2XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJiXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJuXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJtXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJBbHRcIixcbiAgICAgIHR5cGU6IFwiYWx0XCJcbiAgICB9XSwgW3tcbiAgICAgIHZhbHVlOiBcIkNhbmNlbFwiLFxuICAgICAgdHlwZTogXCJjYW5jZWxcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgdHlwZTogXCJzcGFjZVwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiLFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiLlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiU3VibWl0XCIsXG4gICAgICB0eXBlOiBcInN1Ym1pdFwiXG4gICAgfV1dLFxuICAgIHNoaWZ0OiBbW3tcbiAgICAgIHZhbHVlOiBcIjFcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjJcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjNcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjRcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjVcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjZcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjdcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjhcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjlcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjBcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjwtXCIsXG4gICAgICB0eXBlOiBcImRlbGV0ZVwiXG4gICAgfV0sIFt7XG4gICAgICB2YWx1ZTogXCJRXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJXXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJFXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJSXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJUXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJZXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJVXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJJXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJPXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJQXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJFbnRcIixcbiAgICAgIHR5cGU6IFwiZW50ZXJcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiQVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiU1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiRFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiRlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiR1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiSFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiSlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiS1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiTFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6ICdcIicsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9XSwgW3tcbiAgICAgIHZhbHVlOiBcIlNoaWZ0XCIsXG4gICAgICB0eXBlOiBcInNoaWZ0XCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJaXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJYXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJDXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJWXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJCXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJOXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJNXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJBbHRcIixcbiAgICAgIHR5cGU6IFwiYWx0XCJcbiAgICB9XSwgW3tcbiAgICAgIHZhbHVlOiBcIkNhbmNlbFwiLFxuICAgICAgdHlwZTogXCJjYW5jZWxcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgdHlwZTogXCJzcGFjZVwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiLFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiLlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiU3VibWl0XCIsXG4gICAgICB0eXBlOiBcInN1Ym1pdFwiXG4gICAgfV1dLFxuICAgIGFsdDogW1t7XG4gICAgICB2YWx1ZTogXCIxXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIyXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIzXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCI0XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCI1XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCI2XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCI3XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCI4XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCI5XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIwXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCI8LVwiLFxuICAgICAgdHlwZTogXCJkZWxldGVcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiflwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiYFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwifFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiKFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiKVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiXlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiX1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiLVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiPVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiIVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiRW50XCIsXG4gICAgICB0eXBlOiBcImVudGVyXCJcbiAgICB9XSwgW3tcbiAgICAgIHZhbHVlOiBcIkBcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIiNcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIiRcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIiVcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIipcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIltcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIl1cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIiNcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjxcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIj9cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiU2hpZnRcIixcbiAgICAgIHR5cGU6IFwic2hpZnRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjpcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjtcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIntcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIn1cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIi9cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlxcXFxcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIj5cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIkFsdFwiLFxuICAgICAgdHlwZTogXCJhbHRcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiQ2FuY2VsXCIsXG4gICAgICB0eXBlOiBcImNhbmNlbFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICB0eXBlOiBcInNwYWNlXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIsXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIuXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJTdWJtaXRcIixcbiAgICAgIHR5cGU6IFwic3VibWl0XCJcbiAgICB9XV1cbiAgfTtcbn1dKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvcGx1Z2lucy9ldmVudExpc3RlbmVyTGlzdFBsdWdpbi5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3BsdWdpbnMvZXZlbnRMaXN0ZW5lckxpc3RQbHVnaW4uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoKSA9PiB7XG5cbi8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3N0cmluZ3BhcnNlci9hM2IwNTU1ZmQ5MTUxMzhhMGVkMyBlZGl0ZWQgdmVyc2lvbiBmcm9tIERPTTJBRnJhbWVcbjtcbltFbGVtZW50XS5mb3JFYWNoKGZ1bmN0aW9uIChzZWxmKSB7XG4gIC8vc2VsZi5wcm90b3R5cGUuZXZlbnRMaXN0ZW5lckxpc3QgPSB7fTsgLy8gc2hhcmVkIFNUQVRJQyBvYmplY3QgYWNyb3NzIGFsbCBpbnN0YW5jZXMuLi4gTk9UIHdoYXQgd2Ugd2FudFxuICBzZWxmLnByb3RvdHlwZS5fYWRkRXZlbnRMaXN0ZW5lciA9IHNlbGYucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI7XG4gIHNlbGYucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgaGFuZGxlLCB1c2VDYXB0dXJlKSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJMaXN0KSB0aGlzLmV2ZW50TGlzdGVuZXJMaXN0ID0ge307XG4gICAgdXNlQ2FwdHVyZSA9IHVzZUNhcHR1cmUgPT09IHZvaWQgMCA/IGZhbHNlIDogdXNlQ2FwdHVyZTtcbiAgICB2YXIgbm9kZSA9IHRoaXM7XG4gICAgbm9kZS5fYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGUsIHVzZUNhcHR1cmUpO1xuICAgIGlmICghbm9kZS5ldmVudExpc3RlbmVyTGlzdFt0eXBlXSkge1xuICAgICAgbm9kZS5ldmVudExpc3RlbmVyTGlzdFt0eXBlXSA9IFtdO1xuICAgIH1cbiAgICBub2RlLmV2ZW50TGlzdGVuZXJMaXN0W3R5cGVdLnB1c2goe1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGhhbmRsZTogaGFuZGxlLFxuICAgICAgdXNlQ2FwdHVyZTogdXNlQ2FwdHVyZSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLmhhbmRsZSwgdGhpcy51c2VDYXB0dXJlKTtcbiAgICAgICAgcmV0dXJuIG5vZGUuZXZlbnRMaXN0ZW5lckxpc3RbdHlwZV07XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHR5cGUgIT0gXCJldmVudExpc3RlbmVyQWRkZWRcIiAmJiB0eXBlICE9IFwiZXZlbnRMaXN0ZW5lclJlbW92ZWRcIikge1xuICAgICAgdmFyIGV2ZW50RGV0YWlsID0ge1xuICAgICAgICAndHlwZSc6IHR5cGUsXG4gICAgICAgICdoYW5kbGUnOiBoYW5kbGUsXG4gICAgICAgICd1c2VDYXB0dXJlJzogdXNlQ2FwdHVyZVxuICAgICAgfTtcbiAgICAgIHZhciBhZGRlZEV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiZXZlbnRMaXN0ZW5lckFkZGVkXCIsIHtcbiAgICAgICAgZGV0YWlsOiBldmVudERldGFpbFxuICAgICAgfSk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYWRkZWRFdmVudCk7XG4gICAgfVxuICB9O1xuICBzZWxmLnByb3RvdHlwZS5fcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHNlbGYucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gIHNlbGYucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgaGFuZGxlLCB1c2VDYXB0dXJlKSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJMaXN0KSB0aGlzLmV2ZW50TGlzdGVuZXJMaXN0ID0ge307XG4gICAgdmFyIG5vZGUgPSB0aGlzO1xuICAgIGlmICghbm9kZS5ldmVudExpc3RlbmVyTGlzdFt0eXBlXSkgcmV0dXJuO1xuICAgIG5vZGUuX3JlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlLCB1c2VDYXB0dXJlKTtcbiAgICBub2RlLmV2ZW50TGlzdGVuZXJMaXN0W3R5cGVdID0gbm9kZS5ldmVudExpc3RlbmVyTGlzdFt0eXBlXS5maWx0ZXIoZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gbGlzdGVuZXIgJiYgbGlzdGVuZXIuaGFuZGxlICYmIGhhbmRsZSAmJiBsaXN0ZW5lci5oYW5kbGUudG9TdHJpbmcoKSAhPT0gaGFuZGxlLnRvU3RyaW5nKCk7IC8vIG5hdGl2ZSBldmVudCBsaXN0ZW5lciBBUEkgc3VwcG9ydHMgZW1wdHkgaGFuZGxlcy9saXN0ZW5lcnMsIGJ1dCAudG9TdHJpbmcgb2J2aW91c2x5IGRvZXNuJ3RcbiAgICB9KTtcbiAgICBpZiAobm9kZS5ldmVudExpc3RlbmVyTGlzdFt0eXBlXS5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlbGV0ZSBub2RlLmV2ZW50TGlzdGVuZXJMaXN0W3R5cGVdO1xuICAgIH1cbiAgICBpZiAodHlwZSAhPSBcImV2ZW50TGlzdGVuZXJBZGRlZFwiICYmIHR5cGUgIT0gXCJldmVudExpc3RlbmVyUmVtb3ZlZFwiKSB7XG4gICAgICB2YXIgZXZlbnREZXRhaWwgPSB7XG4gICAgICAgICd0eXBlJzogdHlwZSxcbiAgICAgICAgJ2hhbmRsZSc6IGhhbmRsZSxcbiAgICAgICAgJ3VzZUNhcHR1cmUnOiB1c2VDYXB0dXJlXG4gICAgICB9O1xuICAgICAgdmFyIHJlbW92ZWRFdmVudCA9IG5ldyBDdXN0b21FdmVudChcImV2ZW50TGlzdGVuZXJSZW1vdmVkXCIsIHtcbiAgICAgICAgZGV0YWlsOiBldmVudERldGFpbFxuICAgICAgfSk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQocmVtb3ZlZEV2ZW50KTtcbiAgICB9XG4gIH07XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvc2Nyb2xsLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9zY3JvbGwuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBTY3JvbGwpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19zY3JvbGxiYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9zY3JvbGxiYXIgKi8gXCIuL3NyYy9jb21wb25lbnRzL3Njcm9sbGJhci5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19zY3JvbGxiYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihfY29tcG9uZW50c19zY3JvbGxiYXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuXG52YXIgU2Nyb2xsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU2Nyb2xsKHdlYjJ2cikge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTY3JvbGwpO1xuICAgIHRoaXMud2ViMnZyID0gd2ViMnZyO1xuICAgIHRoaXMuaGFzU2Nyb2xsID0gZmFsc2U7XG4gICAgdGhpcy5zY3JvbGxCb2R5ID0gZmFsc2U7XG4gICAgdGhpcy5zY3JvbGxDb250YWluZXIgPSBudWxsO1xuICAgIGlmICh0aGlzLndlYjJ2ci5zZXR0aW5ncy5zY3JvbGwpIHtcbiAgICAgIHRoaXMuY2hlY2tTY3JvbGxiYXIoKTtcbiAgICAgIGlmICh0aGlzLmhhc1Njcm9sbCkgdGhpcy5jcmVhdGVTY3JvbGxiYXIoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhTY3JvbGwsIFt7XG4gICAga2V5OiBcImNoZWNrU2Nyb2xsYmFyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrU2Nyb2xsYmFyKCkge1xuICAgICAgLy8gZW50aXJlIGJvZHkgc2Nyb2xsXG4gICAgICB2YXIgYm9keSA9IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQ7XG4gICAgICAvLyBkaXYgY29udGFpbmVyIHNjcm9sbFxuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMud2ViMnZyLmNvbnRhaW5lcjtcbiAgICAgIGlmIChib2R5LnNjcm9sbEhlaWdodCA+IGJvZHkuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuaGFzU2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zY3JvbGxDb250YWluZXIgPSBib2R5O1xuICAgICAgICB0aGlzLnNjcm9sbEJvZHkgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChjb250YWluZXIuZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9PSBcInNjcm9sbFwiKSB7XG4gICAgICAgIC8vY29udGFpbmVyLnNjcm9sbEhlaWdodCA+IGNvbnRhaW5lci5jbGllbnRIZWlnaHRcbiAgICAgICAgdGhpcy5oYXNTY3JvbGwgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlU2Nyb2xsYmFyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVNjcm9sbGJhcigpIHtcbiAgICAgIHRoaXMuc2Nyb2xsYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtZW50aXR5XCIpO1xuICAgICAgdGhpcy5wb2ludGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtcGxhbmVcIik7XG4gICAgICB0aGlzLnBvaW50ZXIuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzaGFkZXJcIiwgXCJmbGF0XCIpO1xuICAgICAgdGhpcy5wb2ludGVyLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsIFwiI0MxQzFDMVwiKTtcbiAgICAgIHRoaXMucGxhbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1wbGFuZVwiKTtcbiAgICAgIHRoaXMucGxhbmUuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzaGFkZXJcIiwgXCJmbGF0XCIpO1xuICAgICAgdGhpcy5wbGFuZS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcInNpZGVcIiwgXCJkb3VibGVcIik7XG4gICAgICB0aGlzLnBsYW5lLmNsYXNzTGlzdC5hZGQodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgdGhpcy5wbGFuZS5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLCBcIiNGMUYxRjFcIik7XG4gICAgICB0aGlzLnBsYW5lLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIDEpO1xuICAgICAgdGhpcy5wbGFuZS5zZXRBdHRyaWJ1dGUoXCJ2ci1zY3JvbGxiYXJcIiwgXCJcIik7XG5cbiAgICAgIC8vIHBvaW50ZXJzIGZvciBzY3JvbGwgY29tcG9tZW50XG4gICAgICB0aGlzLnBsYW5lLndlYjJ2ciA9IHRoaXMud2ViMnZyO1xuICAgICAgdGhpcy5wbGFuZS5wb2ludGVyID0gdGhpcy5wb2ludGVyO1xuICAgICAgdGhpcy5wbGFuZS5zY3JvbGxiYXIgPSB0aGlzLnNjcm9sbGJhcjtcbiAgICAgIHRoaXMucGxhbmUuYXBwZW5kQ2hpbGQodGhpcy5wb2ludGVyKTtcbiAgICAgIHRoaXMuc2Nyb2xsYmFyLmFwcGVuZENoaWxkKHRoaXMucGxhbmUpO1xuICAgICAgdGhpcy53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnNjcm9sbGJhcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAvLyB0aGVyZSBpcyBubyBuZWVkIHRvIHNob3cgc2Nyb2xsYmFyIGlmIHRoZSBtYWluIGNvbnRhaW5lciBpcyBoaWRkZW5cbiAgICAgIGlmICh0aGlzLmhhc1Njcm9sbCkge1xuICAgICAgICBpZiAodGhpcy53ZWIydnIuY29udGFpbmVyLmVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9PSBcInZpc2libGVcIikge1xuICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyLm9iamVjdDNELnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIHRoaXMucGxhbmUuY2xhc3NMaXN0LmFkZCh0aGlzLndlYjJ2ci5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy53ZWIydnIuY29udGFpbmVyLmVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9PSBcImhpZGRlblwiKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxiYXIub2JqZWN0M0QudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMucGxhbmUuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLndlYjJ2ci5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcbn0oKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9zZXR0aW5ncy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9zZXR0aW5ncy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gU2V0dGluZ3MpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG52YXIgU2V0dGluZ3MgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZUNsYXNzKGZ1bmN0aW9uIFNldHRpbmdzKCkge1xuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2V0dGluZ3MpO1xuICB0aGlzLnNjYWxlID0gNjAwO1xuICB0aGlzLnBvc2l0aW9uID0ge1xuICAgIHg6IDAsXG4gICAgeTogMixcbiAgICB6OiAtMVxuICB9O1xuICB0aGlzLnJvdGF0aW9uID0ge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICB6OiAwXG4gIH07XG4gIHRoaXMubGF5ZXJTdGVwID0gMC4wMDA1OyAvLyB6IHNwYWNlIGJldHdlZW4gdGhlIGxheWVyc1xuXG4gIHRoaXMucGFyZW50U2VsZWN0b3IgPSBudWxsO1xuICB0aGlzLmludGVyYWN0aXZlVGFnID0gXCJ2ci1pbnRlcmFjdGFibGVcIjtcbiAgdGhpcy5pZ25vcmVUYWdzID0gW1wiQlJcIiwgXCJTT1VSQ0VcIiwgXCJTQ1JJUFRcIiwgXCJBVURJT1wiLCBcIk5PU0NSSVBUXCJdO1xuICB0aGlzLmRlYnVnID0gZmFsc2U7XG4gIHRoaXMuc2hvd0NsaXBwaW5nID0gZmFsc2U7XG4gIHRoaXMuZm9yY2VDbGlwcGluZyA9IGZhbHNlO1xuICB0aGlzLmV4cGVyaW1lbnRhbCA9IGZhbHNlO1xuICB0aGlzLnNjcm9sbCA9IHRydWU7XG4gIHRoaXMuc2Nyb2xsV2luZG93SGVpZ2h0ID0gODAwO1xuICB0aGlzLmNyZWF0ZUNvbnRyb2xsZXJzID0gdHJ1ZTtcbiAgdGhpcy5yYXljYXN0ZXJGYXIgPSA1O1xuICB0aGlzLnNreWJveCA9IHRydWU7XG4gIHRoaXMuYm9yZGVyID0gdHJ1ZTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3V0aWxzL2hlbHBlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdXRpbHMvaGVscGVyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSGVscGVyKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIEhlbHBlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEhlbHBlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGVscGVyKTtcbiAgfVxuICByZXR1cm4gX2NyZWF0ZUNsYXNzKEhlbHBlciwgbnVsbCwgW3tcbiAgICBrZXk6IFwiaXNVcmxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNVcmwoc3RyaW5nKSB7XG4gICAgICB2YXIgcmVnZXhwID0gLyhmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8vO1xuICAgICAgcmV0dXJuIHJlZ2V4cC50ZXN0KHN0cmluZyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsYW1wXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICAgICAgcmV0dXJuIE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2YWx1ZSkpO1xuICAgIH1cbiAgfV0pO1xufSgpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3V0aWxzL21vdXNlRXZlbnRIYW5kbGVyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3V0aWxzL21vdXNlRXZlbnRIYW5kbGVyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBNb3VzZUV2ZW50SGFuZGxlcilcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbnZhciBNb3VzZUV2ZW50SGFuZGxlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE1vdXNlRXZlbnRIYW5kbGVyKGVsZW1lbnQpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW91c2VFdmVudEhhbmRsZXIpO1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5saXN0ZW5pbmdGb3JNb3VzZUV2ZW50cyA9IGZhbHNlO1xuICAgIHRoaXMucmVzeW5jKCk7XG4gICAgdGhpcy5jaGVja0VudGl0eUV2ZW50cygpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoTW91c2VFdmVudEhhbmRsZXIsIFt7XG4gICAga2V5OiBcInJlc3luY1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXN5bmMoKSB7XG4gICAgICB2YXIgbW91c2VFdmVudHMgPSBbXCJjbGlja1wiLCBcIm1vdXNlZW50ZXJcIiwgXCJtb3VzZWxlYXZlXCIsIFwibW91c2Vkb3duXCIsIFwibW91c2V1cFwiXTtcbiAgICAgIHZhciBtb3VzZVByb3BlcnRpZXMgPSBbXCJvbmNsaWNrXCIsIFwib25tb3VzZWVudGVyXCIsIFwib25tb3VzZWxlYXZlXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNldXBcIl07XG4gICAgICB2YXIgaGFzTW91c2VFdmVudFJlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgICAgIGZvciAodmFyIF9pID0gMCwgX21vdXNlRXZlbnRzID0gbW91c2VFdmVudHM7IF9pIDwgX21vdXNlRXZlbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgbW91c2VFdmVudCA9IF9tb3VzZUV2ZW50c1tfaV07XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQuZG9tRWxlbWVudC5ldmVudExpc3RlbmVyTGlzdCAmJiB0aGlzLmVsZW1lbnQuZG9tRWxlbWVudC5ldmVudExpc3RlbmVyTGlzdFttb3VzZUV2ZW50XSkge1xuICAgICAgICAgIGhhc01vdXNlRXZlbnRSZWdpc3RlcmVkID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGhhc01vdXNlUHJvcGVydHkgPSBmYWxzZTtcbiAgICAgIGZvciAodmFyIF9pMiA9IDAsIF9tb3VzZVByb3BlcnRpZXMgPSBtb3VzZVByb3BlcnRpZXM7IF9pMiA8IF9tb3VzZVByb3BlcnRpZXMubGVuZ3RoOyBfaTIrKykge1xuICAgICAgICB2YXIgbW91c2VQcm9wZXJ0eSA9IF9tb3VzZVByb3BlcnRpZXNbX2kyXTtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5kb21FbGVtZW50W21vdXNlUHJvcGVydHldKSB7XG4gICAgICAgICAgaGFzTW91c2VQcm9wZXJ0eSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChoYXNNb3VzZUV2ZW50UmVnaXN0ZXJlZCB8fCBoYXNNb3VzZVByb3BlcnR5KSB7XG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5pbmdGb3JNb3VzZUV2ZW50cykge1xuICAgICAgICAgIHRoaXMuYWRkTW91c2VMaXN0ZW5lcnMobW91c2VFdmVudHMpO1xuICAgICAgICAgIHRoaXMubGlzdGVuaW5nRm9yTW91c2VFdmVudHMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBubyBldmVudCBoYW5kbGVycyBvciBldmVudCBwcm9wZXJ0aWVzIHJlZ2lzdGVyZWQsIHNvIHdlIGNhbiBzYWZlbHkgcmVtb3ZlIG91ciBsaXN0ZW5lcnNcbiAgICAgIGVsc2UgaWYgKHRoaXMubGlzdGVuaW5nRm9yTW91c2VFdmVudHMpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVNb3VzZUxpc3RlbmVycyhtb3VzZUV2ZW50cyk7XG4gICAgICAgIHRoaXMubGlzdGVuaW5nRm9yTW91c2VFdmVudHMgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibW91c2VFdmVudEhhbmRsZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbW91c2VFdmVudEhhbmRsZXIoZXZ0KSB7XG4gICAgICB2YXIgbW91c2VFdmVudCA9IG5ldyBNb3VzZUV2ZW50KGV2dC50eXBlLCB7XG4gICAgICAgIFwidmlld1wiOiB3aW5kb3csXG4gICAgICAgIFwiYnViYmxlc1wiOiB0cnVlLFxuICAgICAgICBcImNhbmNlbGFibGVcIjogdHJ1ZSxcbiAgICAgICAgXCJ0YXJnZXRcIjogdGhpcy5lbGVtZW50LmRvbUVsZW1lbnQgLy8gbWF5YmU/XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZWxlbWVudC5kb21FbGVtZW50LmRpc3BhdGNoRXZlbnQobW91c2VFdmVudCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFkZE1vdXNlTGlzdGVuZXJzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZE1vdXNlTGlzdGVuZXJzKG1vdXNlRXZlbnRzKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgbW91c2VFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgIF90aGlzLmVsZW1lbnQuZW50aXR5LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBfdGhpcy5tb3VzZUV2ZW50SGFuZGxlci5iaW5kKF90aGlzKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlTW91c2VMaXN0ZW5lcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlTW91c2VMaXN0ZW5lcnMobW91c2VFdmVudHMpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgICAgbW91c2VFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgICAgIF90aGlzMi5lbGVtZW50LmVudGl0eS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgX3RoaXMyLm1vdXNlRXZlbnRIYW5kbGVyLmJpbmQoX3RoaXMyKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBmb3IgaG92ZXIgYW5kIGlucHV0IGVsZW1lbnRcbiAgfSwge1xuICAgIGtleTogXCJjaGVja0VudGl0eUV2ZW50c1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0VudGl0eUV2ZW50cygpIHtcbiAgICAgIHZhciBtb3VzZUV2ZW50cyA9IFtcImNsaWNrXCIsIFwibW91c2VlbnRlclwiLCBcIm1vdXNlbGVhdmVcIiwgXCJtb3VzZWRvd25cIiwgXCJtb3VzZXVwXCJdO1xuICAgICAgZm9yICh2YXIgX2kzID0gMCwgX21vdXNlRXZlbnRzMiA9IG1vdXNlRXZlbnRzOyBfaTMgPCBfbW91c2VFdmVudHMyLmxlbmd0aDsgX2kzKyspIHtcbiAgICAgICAgdmFyIG1vdXNlRXZlbnQgPSBfbW91c2VFdmVudHMyW19pM107XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQuZW50aXR5LmV2ZW50TGlzdGVuZXJMaXN0ICYmIHRoaXMuZWxlbWVudC5lbnRpdHkuZXZlbnRMaXN0ZW5lckxpc3RbbW91c2VFdmVudF0pIHtcbiAgICAgICAgICB0aGlzLmxpc3RlbmluZ0Zvck1vdXNlRXZlbnRzID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV0pO1xufSgpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3V0aWxzL3Bvc2l0aW9uLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3V0aWxzL3Bvc2l0aW9uLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBQb3NpdGlvbilcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbnZhciBQb3NpdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBvc2l0aW9uKGRvbVBvc2l0aW9uLCBkZXB0aCwgc2NhbGUpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9zaXRpb24pO1xuICAgIC8vIGRlcHRoID0gelxuICAgIHRoaXMuZGVwdGggPSBkZXB0aDtcbiAgICB0aGlzLnN0YXJ0RGVwdGggPSBkZXB0aDtcbiAgICB0aGlzLnNjYWxlID0gc2NhbGU7XG4gICAgdGhpcy5zY3JvbGxZID0gMDtcbiAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKGRvbVBvc2l0aW9uKTtcbiAgfVxuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFBvc2l0aW9uLCBbe1xuICAgIGtleTogXCJ1cGRhdGVQb3NpdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVQb3NpdGlvbihkb21Qb3NpdGlvbikge1xuICAgICAgdGhpcy5kb21Qb3NpdGlvbiA9IGRvbVBvc2l0aW9uO1xuICAgICAgdGhpcy5hZnJhbWVQb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlQUZyYW1lUG9zaXRpb24odGhpcy5kb21Qb3NpdGlvbik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNhbGN1bGF0ZUFGcmFtZVBvc2l0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGN1bGF0ZUFGcmFtZVBvc2l0aW9uKGRvbVBvc2l0aW9uKSB7XG4gICAgICAvLyBtYWtpbmcgcG9zaXRpb25zIGJlIGluIGNlbnRlciBiZWNhdXNlIGRvbSBwb3NpdGlvbnMgYXJlIGluIHRvcCBsZWZ0XG4gICAgICB2YXIgYWZyYW1lUG9zaXRpb24gPSB7XG4gICAgICAgIHg6IGRvbVBvc2l0aW9uLnggKyBkb21Qb3NpdGlvbi53aWR0aCAvIDIsXG4gICAgICAgIHk6IGRvbVBvc2l0aW9uLnkgKyBkb21Qb3NpdGlvbi5oZWlnaHQgLyAyLFxuICAgICAgICB6OiB0aGlzLmRlcHRoXG4gICAgICB9O1xuXG4gICAgICAvLyBzY2FsaW5nXG4gICAgICBhZnJhbWVQb3NpdGlvbi54ICo9IHRoaXMuc2NhbGluZ0ZhY3RvcjtcbiAgICAgIGFmcmFtZVBvc2l0aW9uLnkgKj0gdGhpcy5zY2FsaW5nRmFjdG9yICogLTE7IC8vICogLTEgdG8gbWF0Y2ggYWZyYW1lIHktYXhpc1xuXG4gICAgICBhZnJhbWVQb3NpdGlvbi53aWR0aCA9IGRvbVBvc2l0aW9uLndpZHRoICogdGhpcy5zY2FsaW5nRmFjdG9yO1xuICAgICAgYWZyYW1lUG9zaXRpb24uaGVpZ2h0ID0gZG9tUG9zaXRpb24uaGVpZ2h0ICogdGhpcy5zY2FsaW5nRmFjdG9yO1xuICAgICAgcmV0dXJuIGFmcmFtZVBvc2l0aW9uO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlcXVhbHNET01Qb3NpdGlvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlcXVhbHNET01Qb3NpdGlvbihkb21Qb3NpdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuZG9tUG9zaXRpb24udG9wID09IGRvbVBvc2l0aW9uLnRvcCAmJiB0aGlzLmRvbVBvc2l0aW9uLmJvdHRvbSA9PSBkb21Qb3NpdGlvbi5ib3R0b20gJiYgdGhpcy5kb21Qb3NpdGlvbi5sZWZ0ID09IGRvbVBvc2l0aW9uLmxlZnQgJiYgdGhpcy5kb21Qb3NpdGlvbi5yaWdodCA9PSBkb21Qb3NpdGlvbi5yaWdodDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2NhbGluZ0ZhY3RvclwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIDEgLyB0aGlzLnNjYWxlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ4XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZnJhbWVQb3NpdGlvbi54O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ5XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZnJhbWVQb3NpdGlvbi55ICsgdGhpcy5zY3JvbGxZO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ6XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZnJhbWVQb3NpdGlvbi56O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ3aWR0aFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYWZyYW1lUG9zaXRpb24ud2lkdGg7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhlaWdodFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuYWZyYW1lUG9zaXRpb24uaGVpZ2h0O1xuICAgIH1cblxuICAgIC8vIHZlY3RvcjNcbiAgfSwge1xuICAgIGtleTogXCJ4eXpcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgeTogdGhpcy55LFxuICAgICAgICB6OiB0aGlzLnpcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImxlZnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IHRoaXMueCAtIHRoaXMud2lkdGggLyAyLFxuICAgICAgICB5OiB0aGlzLnksXG4gICAgICAgIHo6IHRoaXMuelxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmlnaHRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IHRoaXMueCArIHRoaXMud2lkdGggLyAyLFxuICAgICAgICB5OiB0aGlzLnksXG4gICAgICAgIHo6IHRoaXMuelxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidG9wXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB4OiB0aGlzLngsXG4gICAgICAgIHk6IHRoaXMueSArIHRoaXMuaGVpZ2h0IC8gMixcbiAgICAgICAgejogdGhpcy56XG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJib3R0b21cIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgeTogdGhpcy55IC0gdGhpcy5oZWlnaHQgLyAyLFxuICAgICAgICB6OiB0aGlzLnpcbiAgICAgIH07XG4gICAgfVxuICB9XSk7XG59KCk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi4vbm9kZV9tb2R1bGVzL2RlZXBtZXJnZS9kaXN0L2Nqcy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4uL25vZGVfbW9kdWxlcy9kZWVwbWVyZ2UvZGlzdC9janMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgobW9kdWxlKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBpc01lcmdlYWJsZU9iamVjdCA9IGZ1bmN0aW9uIGlzTWVyZ2VhYmxlT2JqZWN0KHZhbHVlKSB7XG5cdHJldHVybiBpc05vbk51bGxPYmplY3QodmFsdWUpXG5cdFx0JiYgIWlzU3BlY2lhbCh2YWx1ZSlcbn07XG5cbmZ1bmN0aW9uIGlzTm9uTnVsbE9iamVjdCh2YWx1ZSkge1xuXHRyZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnXG59XG5cbmZ1bmN0aW9uIGlzU3BlY2lhbCh2YWx1ZSkge1xuXHR2YXIgc3RyaW5nVmFsdWUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXG5cdHJldHVybiBzdHJpbmdWYWx1ZSA9PT0gJ1tvYmplY3QgUmVnRXhwXSdcblx0XHR8fCBzdHJpbmdWYWx1ZSA9PT0gJ1tvYmplY3QgRGF0ZV0nXG5cdFx0fHwgaXNSZWFjdEVsZW1lbnQodmFsdWUpXG59XG5cbi8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvYmxvYi9iNWFjOTYzZmI3OTFkMTI5OGU3ZjM5NjIzNjM4M2JjOTU1ZjkxNmMxL3NyYy9pc29tb3JwaGljL2NsYXNzaWMvZWxlbWVudC9SZWFjdEVsZW1lbnQuanMjTDIxLUwyNVxudmFyIGNhblVzZVN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmZvcjtcbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSBjYW5Vc2VTeW1ib2wgPyBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50JykgOiAweGVhYzc7XG5cbmZ1bmN0aW9uIGlzUmVhY3RFbGVtZW50KHZhbHVlKSB7XG5cdHJldHVybiB2YWx1ZS4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFXG59XG5cbmZ1bmN0aW9uIGVtcHR5VGFyZ2V0KHZhbCkge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheSh2YWwpID8gW10gOiB7fVxufVxuXG5mdW5jdGlvbiBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZCh2YWx1ZSwgb3B0aW9ucykge1xuXHRyZXR1cm4gKG9wdGlvbnMuY2xvbmUgIT09IGZhbHNlICYmIG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QodmFsdWUpKVxuXHRcdD8gZGVlcG1lcmdlKGVtcHR5VGFyZ2V0KHZhbHVlKSwgdmFsdWUsIG9wdGlvbnMpXG5cdFx0OiB2YWx1ZVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0QXJyYXlNZXJnZSh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuXHRyZXR1cm4gdGFyZ2V0LmNvbmNhdChzb3VyY2UpLm1hcChmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0cmV0dXJuIGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKGVsZW1lbnQsIG9wdGlvbnMpXG5cdH0pXG59XG5cbmZ1bmN0aW9uIGdldE1lcmdlRnVuY3Rpb24oa2V5LCBvcHRpb25zKSB7XG5cdGlmICghb3B0aW9ucy5jdXN0b21NZXJnZSkge1xuXHRcdHJldHVybiBkZWVwbWVyZ2Vcblx0fVxuXHR2YXIgY3VzdG9tTWVyZ2UgPSBvcHRpb25zLmN1c3RvbU1lcmdlKGtleSk7XG5cdHJldHVybiB0eXBlb2YgY3VzdG9tTWVyZ2UgPT09ICdmdW5jdGlvbicgPyBjdXN0b21NZXJnZSA6IGRlZXBtZXJnZVxufVxuXG5mdW5jdGlvbiBnZXRFbnVtZXJhYmxlT3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkge1xuXHRyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc1xuXHRcdD8gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpLmZpbHRlcihmdW5jdGlvbihzeW1ib2wpIHtcblx0XHRcdHJldHVybiBPYmplY3QucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0YXJnZXQsIHN5bWJvbClcblx0XHR9KVxuXHRcdDogW11cbn1cblxuZnVuY3Rpb24gZ2V0S2V5cyh0YXJnZXQpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKHRhcmdldCkuY29uY2F0KGdldEVudW1lcmFibGVPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSlcbn1cblxuZnVuY3Rpb24gcHJvcGVydHlJc09uT2JqZWN0KG9iamVjdCwgcHJvcGVydHkpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gcHJvcGVydHkgaW4gb2JqZWN0XG5cdH0gY2F0Y2goXykge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG59XG5cbi8vIFByb3RlY3RzIGZyb20gcHJvdG90eXBlIHBvaXNvbmluZyBhbmQgdW5leHBlY3RlZCBtZXJnaW5nIHVwIHRoZSBwcm90b3R5cGUgY2hhaW4uXG5mdW5jdGlvbiBwcm9wZXJ0eUlzVW5zYWZlKHRhcmdldCwga2V5KSB7XG5cdHJldHVybiBwcm9wZXJ0eUlzT25PYmplY3QodGFyZ2V0LCBrZXkpIC8vIFByb3BlcnRpZXMgYXJlIHNhZmUgdG8gbWVyZ2UgaWYgdGhleSBkb24ndCBleGlzdCBpbiB0aGUgdGFyZ2V0IHlldCxcblx0XHQmJiAhKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRhcmdldCwga2V5KSAvLyB1bnNhZmUgaWYgdGhleSBleGlzdCB1cCB0aGUgcHJvdG90eXBlIGNoYWluLFxuXHRcdFx0JiYgT2JqZWN0LnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodGFyZ2V0LCBrZXkpKSAvLyBhbmQgYWxzbyB1bnNhZmUgaWYgdGhleSdyZSBub25lbnVtZXJhYmxlLlxufVxuXG5mdW5jdGlvbiBtZXJnZU9iamVjdCh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuXHR2YXIgZGVzdGluYXRpb24gPSB7fTtcblx0aWYgKG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QodGFyZ2V0KSkge1xuXHRcdGdldEtleXModGFyZ2V0KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0ZGVzdGluYXRpb25ba2V5XSA9IGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKHRhcmdldFtrZXldLCBvcHRpb25zKTtcblx0XHR9KTtcblx0fVxuXHRnZXRLZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0XHRpZiAocHJvcGVydHlJc1Vuc2FmZSh0YXJnZXQsIGtleSkpIHtcblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdGlmIChwcm9wZXJ0eUlzT25PYmplY3QodGFyZ2V0LCBrZXkpICYmIG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3Qoc291cmNlW2tleV0pKSB7XG5cdFx0XHRkZXN0aW5hdGlvbltrZXldID0gZ2V0TWVyZ2VGdW5jdGlvbihrZXksIG9wdGlvbnMpKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSwgb3B0aW9ucyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRlc3RpbmF0aW9uW2tleV0gPSBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZChzb3VyY2Vba2V5XSwgb3B0aW9ucyk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIGRlc3RpbmF0aW9uXG59XG5cbmZ1bmN0aW9uIGRlZXBtZXJnZSh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0b3B0aW9ucy5hcnJheU1lcmdlID0gb3B0aW9ucy5hcnJheU1lcmdlIHx8IGRlZmF1bHRBcnJheU1lcmdlO1xuXHRvcHRpb25zLmlzTWVyZ2VhYmxlT2JqZWN0ID0gb3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdCB8fCBpc01lcmdlYWJsZU9iamVjdDtcblx0Ly8gY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQgaXMgYWRkZWQgdG8gYG9wdGlvbnNgIHNvIHRoYXQgY3VzdG9tIGFycmF5TWVyZ2UoKVxuXHQvLyBpbXBsZW1lbnRhdGlvbnMgY2FuIHVzZSBpdC4gVGhlIGNhbGxlciBtYXkgbm90IHJlcGxhY2UgaXQuXG5cdG9wdGlvbnMuY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQgPSBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZDtcblxuXHR2YXIgc291cmNlSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoc291cmNlKTtcblx0dmFyIHRhcmdldElzQXJyYXkgPSBBcnJheS5pc0FycmF5KHRhcmdldCk7XG5cdHZhciBzb3VyY2VBbmRUYXJnZXRUeXBlc01hdGNoID0gc291cmNlSXNBcnJheSA9PT0gdGFyZ2V0SXNBcnJheTtcblxuXHRpZiAoIXNvdXJjZUFuZFRhcmdldFR5cGVzTWF0Y2gpIHtcblx0XHRyZXR1cm4gY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQoc291cmNlLCBvcHRpb25zKVxuXHR9IGVsc2UgaWYgKHNvdXJjZUlzQXJyYXkpIHtcblx0XHRyZXR1cm4gb3B0aW9ucy5hcnJheU1lcmdlKHRhcmdldCwgc291cmNlLCBvcHRpb25zKVxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBtZXJnZU9iamVjdCh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucylcblx0fVxufVxuXG5kZWVwbWVyZ2UuYWxsID0gZnVuY3Rpb24gZGVlcG1lcmdlQWxsKGFycmF5LCBvcHRpb25zKSB7XG5cdGlmICghQXJyYXkuaXNBcnJheShhcnJheSkpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IHNob3VsZCBiZSBhbiBhcnJheScpXG5cdH1cblxuXHRyZXR1cm4gYXJyYXkucmVkdWNlKGZ1bmN0aW9uKHByZXYsIG5leHQpIHtcblx0XHRyZXR1cm4gZGVlcG1lcmdlKHByZXYsIG5leHQsIG9wdGlvbnMpXG5cdH0sIHt9KVxufTtcblxudmFyIGRlZXBtZXJnZV8xID0gZGVlcG1lcmdlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZXBtZXJnZV8xO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcImFmcmFtZVwiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiBleHRlcm5hbCBcImFmcmFtZVwiICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChtb2R1bGUpID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfYWZyYW1lX187XG5cbi8qKiovIH0pXG5cbi8qKioqKiovIFx0fSk7XG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcbi8qKioqKiovIFx0XHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcbi8qKioqKiovIFx0XHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqLyBcdFxuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi8gXHRcbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi8gXHRcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyBcdC8qIHdlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0ICovXG4vKioqKioqLyBcdCgoKSA9PiB7XG4vKioqKioqLyBcdFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG4vKioqKioqLyBcdFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG4vKioqKioqLyBcdFx0XHRcdCgpID0+IChtb2R1bGUpO1xuLyoqKioqKi8gXHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHRcdH07XG4vKioqKioqLyBcdH0pKCk7XG4vKioqKioqLyBcdFxuLyoqKioqKi8gXHQvKiB3ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMgKi9cbi8qKioqKiovIFx0KCgpID0+IHtcbi8qKioqKiovIFx0XHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcbi8qKioqKiovIFx0XHRcdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcbi8qKioqKiovIFx0XHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqLyBcdH0pKCk7XG4vKioqKioqLyBcdFxuLyoqKioqKi8gXHQvKiB3ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kICovXG4vKioqKioqLyBcdCgoKSA9PiB7XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKVxuLyoqKioqKi8gXHR9KSgpO1xuLyoqKioqKi8gXHRcbi8qKioqKiovIFx0Lyogd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCAqL1xuLyoqKioqKi8gXHQoKCkgPT4ge1xuLyoqKioqKi8gXHRcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuLyoqKioqKi8gXHRcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4vKioqKioqLyBcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuLyoqKioqKi8gXHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi8gXHR9KSgpO1xuLyoqKioqKi8gXHRcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IHt9O1xuLy8gVGhpcyBlbnRyeSBuZWVkIHRvIGJlIHdyYXBwZWQgaW4gYW4gSUlGRSBiZWNhdXNlIGl0IG5lZWQgdG8gYmUgaW4gc3RyaWN0IG1vZGUuXG4oKCkgPT4ge1xuXCJ1c2Ugc3RyaWN0XCI7XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy93ZWIydnIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqL1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFdlYjJWUilcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9wbHVnaW5zX2V2ZW50TGlzdGVuZXJMaXN0UGx1Z2luX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3BsdWdpbnMvZXZlbnRMaXN0ZW5lckxpc3RQbHVnaW4gKi8gXCIuL3NyYy9wbHVnaW5zL2V2ZW50TGlzdGVuZXJMaXN0UGx1Z2luLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9wbHVnaW5zX2V2ZW50TGlzdGVuZXJMaXN0UGx1Z2luX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oX3BsdWdpbnNfZXZlbnRMaXN0ZW5lckxpc3RQbHVnaW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgZGVlcG1lcmdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBkZWVwbWVyZ2UgKi8gXCIuLi9ub2RlX21vZHVsZXMvZGVlcG1lcmdlL2Rpc3QvY2pzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIGRlZXBtZXJnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKGRlZXBtZXJnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBhZnJhbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGFmcmFtZSAqLyBcImFmcmFtZVwiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBhZnJhbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihhZnJhbWVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3BsdWdpbnNfYWZyYW1lX2tleWJvYXJkX21pbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wbHVnaW5zL2FmcmFtZS1rZXlib2FyZC5taW4gKi8gXCIuL3NyYy9wbHVnaW5zL2FmcmFtZS1rZXlib2FyZC5taW4uanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3BsdWdpbnNfYWZyYW1lX2tleWJvYXJkX21pbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9wbHVnaW5zX2FmcmFtZV9rZXlib2FyZF9taW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VwZXJfaGFuZHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHN1cGVyLWhhbmRzICovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L2luZGV4LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIHN1cGVyX2hhbmRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oc3VwZXJfaGFuZHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NldHRpbmdzICovIFwiLi9zcmMvc2V0dGluZ3MuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfYm9yZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbXBvbmVudHMvYm9yZGVyICovIFwiLi9zcmMvY29tcG9uZW50cy9ib3JkZXIuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfYm9yZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oX2NvbXBvbmVudHNfYm9yZGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX2FuaW1hdGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9hbmltYXRlICovIFwiLi9zcmMvY29tcG9uZW50cy9hbmltYXRlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX2FuaW1hdGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihfY29tcG9uZW50c19hbmltYXRlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX2dyYWJSb3RhdGVTdGF0aWNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9ncmFiUm90YXRlU3RhdGljICovIFwiLi9zcmMvY29tcG9uZW50cy9ncmFiUm90YXRlU3RhdGljLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX2dyYWJSb3RhdGVTdGF0aWNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihfY29tcG9uZW50c19ncmFiUm90YXRlU3RhdGljX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zY3JvbGxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc2Nyb2xsICovIFwiLi9zcmMvc2Nyb2xsLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9hZnJhbWVDb250ZXh0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hZnJhbWVDb250ZXh0ICovIFwiLi9zcmMvYWZyYW1lQ29udGV4dC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudHNfY29udGFpbmVyRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudHMvY29udGFpbmVyRWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2NvbnRhaW5lckVsZW1lbnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRzX3RleHRFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50cy90ZXh0RWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL3RleHRFbGVtZW50LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50c19pbWFnZUVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnRzL2ltYWdlRWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2ltYWdlRWxlbWVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudHNfdmlkZW9FbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50cy92aWRlb0VsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy92aWRlb0VsZW1lbnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRzX2NoZWNrYm94RWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudHMvY2hlY2tib3hFbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvY2hlY2tib3hFbGVtZW50LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50c19yYWRpb0VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE2X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnRzL3JhZGlvRWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL3JhZGlvRWxlbWVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudHNfaW5wdXRFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50cy9pbnB1dEVsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy9pbnB1dEVsZW1lbnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRzX2J1dHRvbkVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnRzL2J1dHRvbkVsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy9idXR0b25FbGVtZW50LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50c19zdmdFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50cy9zdmdFbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvc3ZnRWxlbWVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudHNfY2FudmFzRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudHMvY2FudmFzRWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2NhbnZhc0VsZW1lbnQuanNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfcmVnZW5lcmF0b3JSdW50aW1lKCkgeyBcInVzZSBzdHJpY3RcIjsgLyohIHJlZ2VuZXJhdG9yLXJ1bnRpbWUgLS0gQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuIC0tIGxpY2Vuc2UgKE1JVCk6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9ibG9iL21haW4vTElDRU5TRSAqLyBfcmVnZW5lcmF0b3JSdW50aW1lID0gZnVuY3Rpb24gX3JlZ2VuZXJhdG9yUnVudGltZSgpIHsgcmV0dXJuIGU7IH07IHZhciB0LCBlID0ge30sIHIgPSBPYmplY3QucHJvdG90eXBlLCBuID0gci5oYXNPd25Qcm9wZXJ0eSwgbyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB8fCBmdW5jdGlvbiAodCwgZSwgcikgeyB0W2VdID0gci52YWx1ZTsgfSwgaSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sID8gU3ltYm9sIDoge30sIGEgPSBpLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiLCBjID0gaS5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCIsIHUgPSBpLnRvU3RyaW5nVGFnIHx8IFwiQEB0b1N0cmluZ1RhZ1wiOyBmdW5jdGlvbiBkZWZpbmUodCwgZSwgcikgeyByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIGUsIHsgdmFsdWU6IHIsIGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAgfSksIHRbZV07IH0gdHJ5IHsgZGVmaW5lKHt9LCBcIlwiKTsgfSBjYXRjaCAodCkgeyBkZWZpbmUgPSBmdW5jdGlvbiBkZWZpbmUodCwgZSwgcikgeyByZXR1cm4gdFtlXSA9IHI7IH07IH0gZnVuY3Rpb24gd3JhcCh0LCBlLCByLCBuKSB7IHZhciBpID0gZSAmJiBlLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IGUgOiBHZW5lcmF0b3IsIGEgPSBPYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSwgYyA9IG5ldyBDb250ZXh0KG4gfHwgW10pOyByZXR1cm4gbyhhLCBcIl9pbnZva2VcIiwgeyB2YWx1ZTogbWFrZUludm9rZU1ldGhvZCh0LCByLCBjKSB9KSwgYTsgfSBmdW5jdGlvbiB0cnlDYXRjaCh0LCBlLCByKSB7IHRyeSB7IHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogdC5jYWxsKGUsIHIpIH07IH0gY2F0Y2ggKHQpIHsgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IHQgfTsgfSB9IGUud3JhcCA9IHdyYXA7IHZhciBoID0gXCJzdXNwZW5kZWRTdGFydFwiLCBsID0gXCJzdXNwZW5kZWRZaWVsZFwiLCBmID0gXCJleGVjdXRpbmdcIiwgcyA9IFwiY29tcGxldGVkXCIsIHkgPSB7fTsgZnVuY3Rpb24gR2VuZXJhdG9yKCkge30gZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fSBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9IHZhciBwID0ge307IGRlZmluZShwLCBhLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KTsgdmFyIGQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YsIHYgPSBkICYmIGQoZCh2YWx1ZXMoW10pKSk7IHYgJiYgdiAhPT0gciAmJiBuLmNhbGwodiwgYSkgJiYgKHAgPSB2KTsgdmFyIGcgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwKTsgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHQpIHsgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgZGVmaW5lKHQsIGUsIGZ1bmN0aW9uICh0KSB7IHJldHVybiB0aGlzLl9pbnZva2UoZSwgdCk7IH0pOyB9KTsgfSBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKHQsIGUpIHsgZnVuY3Rpb24gaW52b2tlKHIsIG8sIGksIGEpIHsgdmFyIGMgPSB0cnlDYXRjaCh0W3JdLCB0LCBvKTsgaWYgKFwidGhyb3dcIiAhPT0gYy50eXBlKSB7IHZhciB1ID0gYy5hcmcsIGggPSB1LnZhbHVlOyByZXR1cm4gaCAmJiBcIm9iamVjdFwiID09IF90eXBlb2YoaCkgJiYgbi5jYWxsKGgsIFwiX19hd2FpdFwiKSA/IGUucmVzb2x2ZShoLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24gKHQpIHsgaW52b2tlKFwibmV4dFwiLCB0LCBpLCBhKTsgfSwgZnVuY3Rpb24gKHQpIHsgaW52b2tlKFwidGhyb3dcIiwgdCwgaSwgYSk7IH0pIDogZS5yZXNvbHZlKGgpLnRoZW4oZnVuY3Rpb24gKHQpIHsgdS52YWx1ZSA9IHQsIGkodSk7IH0sIGZ1bmN0aW9uICh0KSB7IHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTsgfSk7IH0gYShjLmFyZyk7IH0gdmFyIHI7IG8odGhpcywgXCJfaW52b2tlXCIsIHsgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHQsIG4pIHsgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7IHJldHVybiBuZXcgZShmdW5jdGlvbiAoZSwgcikgeyBpbnZva2UodCwgbiwgZSwgcik7IH0pOyB9IHJldHVybiByID0gciA/IHIudGhlbihjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZywgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcpIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTsgfSB9KTsgfSBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGUsIHIsIG4pIHsgdmFyIG8gPSBoOyByZXR1cm4gZnVuY3Rpb24gKGksIGEpIHsgaWYgKG8gPT09IGYpIHRocm93IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTsgaWYgKG8gPT09IHMpIHsgaWYgKFwidGhyb3dcIiA9PT0gaSkgdGhyb3cgYTsgcmV0dXJuIHsgdmFsdWU6IHQsIGRvbmU6ICEwIH07IH0gZm9yIChuLm1ldGhvZCA9IGksIG4uYXJnID0gYTs7KSB7IHZhciBjID0gbi5kZWxlZ2F0ZTsgaWYgKGMpIHsgdmFyIHUgPSBtYXliZUludm9rZURlbGVnYXRlKGMsIG4pOyBpZiAodSkgeyBpZiAodSA9PT0geSkgY29udGludWU7IHJldHVybiB1OyB9IH0gaWYgKFwibmV4dFwiID09PSBuLm1ldGhvZCkgbi5zZW50ID0gbi5fc2VudCA9IG4uYXJnO2Vsc2UgaWYgKFwidGhyb3dcIiA9PT0gbi5tZXRob2QpIHsgaWYgKG8gPT09IGgpIHRocm93IG8gPSBzLCBuLmFyZzsgbi5kaXNwYXRjaEV4Y2VwdGlvbihuLmFyZyk7IH0gZWxzZSBcInJldHVyblwiID09PSBuLm1ldGhvZCAmJiBuLmFicnVwdChcInJldHVyblwiLCBuLmFyZyk7IG8gPSBmOyB2YXIgcCA9IHRyeUNhdGNoKGUsIHIsIG4pOyBpZiAoXCJub3JtYWxcIiA9PT0gcC50eXBlKSB7IGlmIChvID0gbi5kb25lID8gcyA6IGwsIHAuYXJnID09PSB5KSBjb250aW51ZTsgcmV0dXJuIHsgdmFsdWU6IHAuYXJnLCBkb25lOiBuLmRvbmUgfTsgfSBcInRocm93XCIgPT09IHAudHlwZSAmJiAobyA9IHMsIG4ubWV0aG9kID0gXCJ0aHJvd1wiLCBuLmFyZyA9IHAuYXJnKTsgfSB9OyB9IGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZSwgcikgeyB2YXIgbiA9IHIubWV0aG9kLCBvID0gZS5pdGVyYXRvcltuXTsgaWYgKG8gPT09IHQpIHJldHVybiByLmRlbGVnYXRlID0gbnVsbCwgXCJ0aHJvd1wiID09PSBuICYmIGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0gJiYgKHIubWV0aG9kID0gXCJyZXR1cm5cIiwgci5hcmcgPSB0LCBtYXliZUludm9rZURlbGVnYXRlKGUsIHIpLCBcInRocm93XCIgPT09IHIubWV0aG9kKSB8fCBcInJldHVyblwiICE9PSBuICYmIChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAnXCIgKyBuICsgXCInIG1ldGhvZFwiKSksIHk7IHZhciBpID0gdHJ5Q2F0Y2gobywgZS5pdGVyYXRvciwgci5hcmcpOyBpZiAoXCJ0aHJvd1wiID09PSBpLnR5cGUpIHJldHVybiByLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBpLmFyZywgci5kZWxlZ2F0ZSA9IG51bGwsIHk7IHZhciBhID0gaS5hcmc7IHJldHVybiBhID8gYS5kb25lID8gKHJbZS5yZXN1bHROYW1lXSA9IGEudmFsdWUsIHIubmV4dCA9IGUubmV4dExvYywgXCJyZXR1cm5cIiAhPT0gci5tZXRob2QgJiYgKHIubWV0aG9kID0gXCJuZXh0XCIsIHIuYXJnID0gdCksIHIuZGVsZWdhdGUgPSBudWxsLCB5KSA6IGEgOiAoci5tZXRob2QgPSBcInRocm93XCIsIHIuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpLCByLmRlbGVnYXRlID0gbnVsbCwgeSk7IH0gZnVuY3Rpb24gcHVzaFRyeUVudHJ5KHQpIHsgdmFyIGUgPSB7IHRyeUxvYzogdFswXSB9OyAxIGluIHQgJiYgKGUuY2F0Y2hMb2MgPSB0WzFdKSwgMiBpbiB0ICYmIChlLmZpbmFsbHlMb2MgPSB0WzJdLCBlLmFmdGVyTG9jID0gdFszXSksIHRoaXMudHJ5RW50cmllcy5wdXNoKGUpOyB9IGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkodCkgeyB2YXIgZSA9IHQuY29tcGxldGlvbiB8fCB7fTsgZS50eXBlID0gXCJub3JtYWxcIiwgZGVsZXRlIGUuYXJnLCB0LmNvbXBsZXRpb24gPSBlOyB9IGZ1bmN0aW9uIENvbnRleHQodCkgeyB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dLCB0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKSwgdGhpcy5yZXNldCghMCk7IH0gZnVuY3Rpb24gdmFsdWVzKGUpIHsgaWYgKGUgfHwgXCJcIiA9PT0gZSkgeyB2YXIgciA9IGVbYV07IGlmIChyKSByZXR1cm4gci5jYWxsKGUpOyBpZiAoXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLm5leHQpIHJldHVybiBlOyBpZiAoIWlzTmFOKGUubGVuZ3RoKSkgeyB2YXIgbyA9IC0xLCBpID0gZnVuY3Rpb24gbmV4dCgpIHsgZm9yICg7ICsrbyA8IGUubGVuZ3RoOykgaWYgKG4uY2FsbChlLCBvKSkgcmV0dXJuIG5leHQudmFsdWUgPSBlW29dLCBuZXh0LmRvbmUgPSAhMSwgbmV4dDsgcmV0dXJuIG5leHQudmFsdWUgPSB0LCBuZXh0LmRvbmUgPSAhMCwgbmV4dDsgfTsgcmV0dXJuIGkubmV4dCA9IGk7IH0gfSB0aHJvdyBuZXcgVHlwZUVycm9yKF90eXBlb2YoZSkgKyBcIiBpcyBub3QgaXRlcmFibGVcIik7IH0gcmV0dXJuIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBvKGcsIFwiY29uc3RydWN0b3JcIiwgeyB2YWx1ZTogR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGNvbmZpZ3VyYWJsZTogITAgfSksIG8oR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwgeyB2YWx1ZTogR2VuZXJhdG9yRnVuY3Rpb24sIGNvbmZpZ3VyYWJsZTogITAgfSksIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gZGVmaW5lKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCB1LCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpLCBlLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdCAmJiB0LmNvbnN0cnVjdG9yOyByZXR1cm4gISFlICYmIChlID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIgPT09IChlLmRpc3BsYXlOYW1lIHx8IGUubmFtZSkpOyB9LCBlLm1hcmsgPSBmdW5jdGlvbiAodCkgeyByZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHQsIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKSA6ICh0Ll9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBkZWZpbmUodCwgdSwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKSksIHQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShnKSwgdDsgfSwgZS5hd3JhcCA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiB7IF9fYXdhaXQ6IHQgfTsgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKSwgZGVmaW5lKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlLCBjLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KSwgZS5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvciwgZS5hc3luYyA9IGZ1bmN0aW9uICh0LCByLCBuLCBvLCBpKSB7IHZvaWQgMCA9PT0gaSAmJiAoaSA9IFByb21pc2UpOyB2YXIgYSA9IG5ldyBBc3luY0l0ZXJhdG9yKHdyYXAodCwgciwgbiwgbyksIGkpOyByZXR1cm4gZS5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpID8gYSA6IGEubmV4dCgpLnRoZW4oZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQuZG9uZSA/IHQudmFsdWUgOiBhLm5leHQoKTsgfSk7IH0sIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhnKSwgZGVmaW5lKGcsIHUsIFwiR2VuZXJhdG9yXCIpLCBkZWZpbmUoZywgYSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSksIGRlZmluZShnLCBcInRvU3RyaW5nXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7IH0pLCBlLmtleXMgPSBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IE9iamVjdCh0KSwgciA9IFtdOyBmb3IgKHZhciBuIGluIGUpIHIucHVzaChuKTsgcmV0dXJuIHIucmV2ZXJzZSgpLCBmdW5jdGlvbiBuZXh0KCkgeyBmb3IgKDsgci5sZW5ndGg7KSB7IHZhciB0ID0gci5wb3AoKTsgaWYgKHQgaW4gZSkgcmV0dXJuIG5leHQudmFsdWUgPSB0LCBuZXh0LmRvbmUgPSAhMSwgbmV4dDsgfSByZXR1cm4gbmV4dC5kb25lID0gITAsIG5leHQ7IH07IH0sIGUudmFsdWVzID0gdmFsdWVzLCBDb250ZXh0LnByb3RvdHlwZSA9IHsgY29uc3RydWN0b3I6IENvbnRleHQsIHJlc2V0OiBmdW5jdGlvbiByZXNldChlKSB7IGlmICh0aGlzLnByZXYgPSAwLCB0aGlzLm5leHQgPSAwLCB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdCwgdGhpcy5kb25lID0gITEsIHRoaXMuZGVsZWdhdGUgPSBudWxsLCB0aGlzLm1ldGhvZCA9IFwibmV4dFwiLCB0aGlzLmFyZyA9IHQsIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpLCAhZSkgZm9yICh2YXIgciBpbiB0aGlzKSBcInRcIiA9PT0gci5jaGFyQXQoMCkgJiYgbi5jYWxsKHRoaXMsIHIpICYmICFpc05hTigrci5zbGljZSgxKSkgJiYgKHRoaXNbcl0gPSB0KTsgfSwgc3RvcDogZnVuY3Rpb24gc3RvcCgpIHsgdGhpcy5kb25lID0gITA7IHZhciB0ID0gdGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247IGlmIChcInRocm93XCIgPT09IHQudHlwZSkgdGhyb3cgdC5hcmc7IHJldHVybiB0aGlzLnJ2YWw7IH0sIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbiBkaXNwYXRjaEV4Y2VwdGlvbihlKSB7IGlmICh0aGlzLmRvbmUpIHRocm93IGU7IHZhciByID0gdGhpczsgZnVuY3Rpb24gaGFuZGxlKG4sIG8pIHsgcmV0dXJuIGEudHlwZSA9IFwidGhyb3dcIiwgYS5hcmcgPSBlLCByLm5leHQgPSBuLCBvICYmIChyLm1ldGhvZCA9IFwibmV4dFwiLCByLmFyZyA9IHQpLCAhIW87IH0gZm9yICh2YXIgbyA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBvID49IDA7IC0tbykgeyB2YXIgaSA9IHRoaXMudHJ5RW50cmllc1tvXSwgYSA9IGkuY29tcGxldGlvbjsgaWYgKFwicm9vdFwiID09PSBpLnRyeUxvYykgcmV0dXJuIGhhbmRsZShcImVuZFwiKTsgaWYgKGkudHJ5TG9jIDw9IHRoaXMucHJldikgeyB2YXIgYyA9IG4uY2FsbChpLCBcImNhdGNoTG9jXCIpLCB1ID0gbi5jYWxsKGksIFwiZmluYWxseUxvY1wiKTsgaWYgKGMgJiYgdSkgeyBpZiAodGhpcy5wcmV2IDwgaS5jYXRjaExvYykgcmV0dXJuIGhhbmRsZShpLmNhdGNoTG9jLCAhMCk7IGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTsgfSBlbHNlIGlmIChjKSB7IGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTsgfSBlbHNlIHsgaWYgKCF1KSB0aHJvdyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpOyBpZiAodGhpcy5wcmV2IDwgaS5maW5hbGx5TG9jKSByZXR1cm4gaGFuZGxlKGkuZmluYWxseUxvYyk7IH0gfSB9IH0sIGFicnVwdDogZnVuY3Rpb24gYWJydXB0KHQsIGUpIHsgZm9yICh2YXIgciA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyByID49IDA7IC0tcikgeyB2YXIgbyA9IHRoaXMudHJ5RW50cmllc1tyXTsgaWYgKG8udHJ5TG9jIDw9IHRoaXMucHJldiAmJiBuLmNhbGwobywgXCJmaW5hbGx5TG9jXCIpICYmIHRoaXMucHJldiA8IG8uZmluYWxseUxvYykgeyB2YXIgaSA9IG87IGJyZWFrOyB9IH0gaSAmJiAoXCJicmVha1wiID09PSB0IHx8IFwiY29udGludWVcIiA9PT0gdCkgJiYgaS50cnlMb2MgPD0gZSAmJiBlIDw9IGkuZmluYWxseUxvYyAmJiAoaSA9IG51bGwpOyB2YXIgYSA9IGkgPyBpLmNvbXBsZXRpb24gOiB7fTsgcmV0dXJuIGEudHlwZSA9IHQsIGEuYXJnID0gZSwgaSA/ICh0aGlzLm1ldGhvZCA9IFwibmV4dFwiLCB0aGlzLm5leHQgPSBpLmZpbmFsbHlMb2MsIHkpIDogdGhpcy5jb21wbGV0ZShhKTsgfSwgY29tcGxldGU6IGZ1bmN0aW9uIGNvbXBsZXRlKHQsIGUpIHsgaWYgKFwidGhyb3dcIiA9PT0gdC50eXBlKSB0aHJvdyB0LmFyZzsgcmV0dXJuIFwiYnJlYWtcIiA9PT0gdC50eXBlIHx8IFwiY29udGludWVcIiA9PT0gdC50eXBlID8gdGhpcy5uZXh0ID0gdC5hcmcgOiBcInJldHVyblwiID09PSB0LnR5cGUgPyAodGhpcy5ydmFsID0gdGhpcy5hcmcgPSB0LmFyZywgdGhpcy5tZXRob2QgPSBcInJldHVyblwiLCB0aGlzLm5leHQgPSBcImVuZFwiKSA6IFwibm9ybWFsXCIgPT09IHQudHlwZSAmJiBlICYmICh0aGlzLm5leHQgPSBlKSwgeTsgfSwgZmluaXNoOiBmdW5jdGlvbiBmaW5pc2godCkgeyBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7IHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdOyBpZiAoci5maW5hbGx5TG9jID09PSB0KSByZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sIHIuYWZ0ZXJMb2MpLCByZXNldFRyeUVudHJ5KHIpLCB5OyB9IH0sIFwiY2F0Y2hcIjogZnVuY3Rpb24gX2NhdGNoKHQpIHsgZm9yICh2YXIgZSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBlID49IDA7IC0tZSkgeyB2YXIgciA9IHRoaXMudHJ5RW50cmllc1tlXTsgaWYgKHIudHJ5TG9jID09PSB0KSB7IHZhciBuID0gci5jb21wbGV0aW9uOyBpZiAoXCJ0aHJvd1wiID09PSBuLnR5cGUpIHsgdmFyIG8gPSBuLmFyZzsgcmVzZXRUcnlFbnRyeShyKTsgfSByZXR1cm4gbzsgfSB9IHRocm93IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpOyB9LCBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbiBkZWxlZ2F0ZVlpZWxkKGUsIHIsIG4pIHsgcmV0dXJuIHRoaXMuZGVsZWdhdGUgPSB7IGl0ZXJhdG9yOiB2YWx1ZXMoZSksIHJlc3VsdE5hbWU6IHIsIG5leHRMb2M6IG4gfSwgXCJuZXh0XCIgPT09IHRoaXMubWV0aG9kICYmICh0aGlzLmFyZyA9IHQpLCB5OyB9IH0sIGU7IH1cbmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH1cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwibmV4dFwiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdFtcInJldHVyblwiXSAhPSBudWxsKSBpdFtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9XG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSAhPSBudWxsIHx8IGl0ZXJbXCJAQGl0ZXJhdG9yXCJdICE9IG51bGwpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9XG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbiAvLyBHZXQgYWxsIGV2ZW50IGxpc3RlbmVycyBmb3IgRE9NIGVsZW1lbnRzXG5cblxuXG4vLyBpbXBvcnQgXCJhZnJhbWUtZ2lmLXNoYWRlclwiO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxudmFyIFdlYjJWUiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFdlYjJWUihjb250YWluZXIpIHtcbiAgICB2YXIgc2V0dGluZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXZWIyVlIpO1xuICAgIC8vIG1haW4gZGl2IGNvbnRhaW5lclxuICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUpIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO2Vsc2UgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7XG5cbiAgICAvLyBkZWVwIG1lcmdlIHNldHRpbmdzXG4gICAgdGhpcy5zZXR0aW5ncyA9IGRlZXBtZXJnZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQoKShuZXcgX3NldHRpbmdzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJkZWZhdWx0XCJdKCksIHNldHRpbmdzLCB7XG4gICAgICBhcnJheU1lcmdlOiBmdW5jdGlvbiBhcnJheU1lcmdlKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZGVzdGluYXRpb24pLCBfdG9Db25zdW1hYmxlQXJyYXkoc291cmNlKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBhZnJhbWUgY29udGV4dFxuICAgIHRoaXMuYWZyYW1lID0gbmV3IF9hZnJhbWVDb250ZXh0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fW1wiZGVmYXVsdFwiXSh0aGlzLnNldHRpbmdzKTtcbiAgICAvLyB2ciBlbGVtZW50c1xuICAgIHRoaXMuZWxlbWVudHMgPSBuZXcgU2V0KCk7XG4gICAgLy8gc2V0IG9mIGFsbCB0aGUgaG92ZXIgY3NzIHNlbGVjdG9yc1xuICAgIHRoaXMuaG92ZXJTZWxlY3RvcnMgPSBuZXcgU2V0KCk7XG4gICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgLy8gb2JzZXJ2ZXIgcGFyYW1ldGFyc1xuICAgIHRoaXMub2JzZXJ2ZXJDb25maWcgPSB7XG4gICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICBzdWJ0cmVlOiB0cnVlLFxuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcbiAgICAgIGF0dHJpYnV0ZXM6IHRydWVcbiAgICB9OyAvL2F0dHJpYnV0ZUZpbHRlcjogW1wic3R5bGVcIiwgXCJjbGFzc1wiLCBcImlkXCJdXG4gICAgdGhpcy51cGRhdGluZyA9IGZhbHNlO1xuXG4gICAgLy8gZXhwZXJpbWVudGFsIG9ubHlcbiAgICB0aGlzLmh0bWwyY2FudmFzSURjb3VudGVyID0gMDtcbiAgfVxuXG4gIC8vIGZpbmQgYWxsIGhvdmVyIGNzcyBydWxlcyBhbmQgYWRkIHtzZWxlY3Rvcn1ob3ZlciBjbGFzcyB0byB0aGVtXG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoV2ViMlZSLCBbe1xuICAgIGtleTogXCJmaW5kSG92ZXJDc3NcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZEhvdmVyQ3NzKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYXJyID0gX3RvQ29uc3VtYWJsZUFycmF5KGRvY3VtZW50LnN0eWxlU2hlZXRzKTsgX2kgPCBfYXJyLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgIHZhciBzdHlsZVNoZWV0ID0gX2FycltfaV07XG4gICAgICAgICAgZm9yICh2YXIgX2kyID0gMCwgX2FycjIgPSBfdG9Db25zdW1hYmxlQXJyYXkoc3R5bGVTaGVldC5jc3NSdWxlcyk7IF9pMiA8IF9hcnIyLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgICAgICAgIHZhciBydWxlID0gX2FycjJbX2kyXTtcbiAgICAgICAgICAgIGlmIChydWxlIGluc3RhbmNlb2YgQ1NTU3R5bGVSdWxlKSB7XG4gICAgICAgICAgICAgIHZhciBzZWxlY3RvcnMgPSBydWxlLnNlbGVjdG9yVGV4dC5zcGxpdChcIixcIik7XG4gICAgICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihzZWxlY3RvcnMpLFxuICAgICAgICAgICAgICAgIF9zdGVwO1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgIHZhciBzZWwgPSBzZWxlY3Rvci5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICAgICAgICAvLyBpcyBob3ZlclxuICAgICAgICAgICAgICAgICAgaWYgKHNlbFsxXSA9PSBcImhvdmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBzZWxbMF0ucmVwbGFjZSgvXFxzL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNbMF0gPT0gXCIuXCIpIHJ1bGUuc2VsZWN0b3JUZXh0ICs9IFwiLCBcIi5jb25jYXQocywgXCJob3ZlclwiKTtlbHNlIGlmIChzWzBdID09IFwiI1wiKSBydWxlLnNlbGVjdG9yVGV4dCArPSBcIiwgLlwiLmNvbmNhdChzLnN1YnN0cigxKSwgXCJob3ZlclwiKTtlbHNlIHJ1bGUuc2VsZWN0b3JUZXh0ICs9IFwiLCAuXCIuY29uY2F0KHMsIFwiaG92ZXJcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG92ZXJTZWxlY3RvcnMuYWRkKHMpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBhZGQgYWxsIHN2ZyBuZWVkZWQgc3R5bGVzIHRvIGRlZnMgaW5zaWRlIHN2ZyBzbyB3ZSBjYW4gY29udmVydCBzdmcgdG8gcG5nIHdpdGggYWxsIHN0eWxlcyBhcHBsaWVkIFxuICB9LCB7XG4gICAga2V5OiBcImdlbmVyYXRlU3R5bGVEZWZzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlU3R5bGVEZWZzKHN2Z0RvbUVsZW1lbnQpIHtcbiAgICAgIHZhciBzdHlsZURlZnMgPSBcIlwiO1xuICAgICAgdmFyIHNoZWV0cyA9IGRvY3VtZW50LnN0eWxlU2hlZXRzO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaGVldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJ1bGVzID0gc2hlZXRzW2ldLmNzc1J1bGVzO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJ1bGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgdmFyIHJ1bGUgPSBydWxlc1tqXTtcbiAgICAgICAgICBpZiAocnVsZS5zdHlsZSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9yVGV4dCA9IHJ1bGUuc2VsZWN0b3JUZXh0O1xuICAgICAgICAgICAgdmFyIGVsZW1zID0gc3ZnRG9tRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yVGV4dCk7XG4gICAgICAgICAgICBpZiAoZWxlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHN0eWxlRGVmcyArPSBzZWxlY3RvclRleHQgKyBcIiB7IFwiICsgcnVsZS5zdHlsZS5jc3NUZXh0ICsgXCIgfVxcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgcy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTtcbiAgICAgIHMuaW5uZXJIVE1MID0gc3R5bGVEZWZzO1xuICAgICAgdmFyIGRlZnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZWZzJyk7XG4gICAgICBkZWZzLmFwcGVuZENoaWxkKHMpO1xuICAgICAgc3ZnRG9tRWxlbWVudC5pbnNlcnRCZWZvcmUoZGVmcywgc3ZnRG9tRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3RhcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgLy8gUmV0dXJuIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSBWUiBlbGVtZW50cyBhcmUgYWRkZWQgLyBzY2VuZSBpcyBsb2FkZWQuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBfdGhpcy5maW5kSG92ZXJDc3MoKTtcbiAgICAgICAgaWYgKCFfdGhpcy5hZnJhbWUuc2NlbmUuaGFzTG9hZGVkKSB7XG4gICAgICAgICAgX3RoaXMuYWZyYW1lLnNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRcIiwgZnVuY3Rpb24gKHJlc29sdmUsIGluaXQsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIGluaXQuY2FsbChjb250ZXh0KTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9KHJlc29sdmUsIF90aGlzLmluaXQsIF90aGlzKSwge1xuICAgICAgICAgICAgb25jZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgX3RoaXMuaW5pdCgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgICB0aGlzLmFmcmFtZS5jcmVhdGVDb250YWluZXIodGhpcyk7XG4gICAgICB0aGlzLmFmcmFtZS5jcmVhdGVTa3koKTtcbiAgICAgIHRoaXMuYWZyYW1lLmNyZWF0ZUNvbnRyb2xsZXJzKCk7XG4gICAgICAvLyBzY3JvbGwgZmVhdHVyZVxuXG4gICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VG9WUigpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIuc2Nyb2xsID0gbmV3IF9zY3JvbGxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1tcImRlZmF1bHRcIl0oX3RoaXMyKTtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5hbGxMb2FkZWRVcGRhdGUoKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLnVwZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gdXBkYXRlIG9uY2UgYWZ0ZXIgYWxsIGltYWdlcyBhcmUgbG9hZGVkIGluIHRoZSBkb21cbiAgfSwge1xuICAgIGtleTogXCJhbGxMb2FkZWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWxsTG9hZGVkVXBkYXRlKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGFsbExvYWRlZCA9IHRydWU7XG4gICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihfdGhpczMuZWxlbWVudHMpLFxuICAgICAgICAgICAgX3N0ZXAyO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykge1xuICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IF9zdGVwMi52YWx1ZTtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBfZWxlbWVudHNfaW1hZ2VFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xM19fW1wiZGVmYXVsdFwiXSAmJiAhZWxlbWVudC5sb2FkZWQpIGFsbExvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYWxsTG9hZGVkKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkRWxlbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFbGVtZW50KGRvbUVsZW1lbnQsIHBhcmVudEVsZW1lbnQsIGxheWVyKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcbiAgICAgIC8vIGlnbm9yZSB0YWcgaWYgaW4gaWdub3JlVGFncyBsaXN0IG9yIHRleHQgZWxlbWVudCh2ci1zcGFuKSBpcyBhbHJlYWR5IGFkZGVkXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5pZ25vcmVUYWdzLmluY2x1ZGVzKGRvbUVsZW1lbnQudGFnTmFtZSkgfHwgZG9tRWxlbWVudC5jbGFzc0xpc3QgJiYgZG9tRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJ2ci1zcGFuXCIpKSByZXR1cm4gbnVsbDtcbiAgICAgIHZhciBlbGVtZW50ID0gbnVsbDtcbiAgICAgIC8vIGl0cyB0ZXh0IG5vZGUgYW5kIG5vdCBlbXB0eVxuICAgICAgaWYgKGRvbUVsZW1lbnQubm9kZVR5cGUgPT0gTm9kZS5URVhUX05PREUgJiYgZG9tRWxlbWVudC5ub2RlVmFsdWUudHJpbSgpKSB7XG4gICAgICAgIHZhciBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHNwYW4uY2xhc3NMaXN0LmFkZChcInZyLXNwYW5cIik7XG4gICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBkb21FbGVtZW50LnRleHRDb250ZW50O1xuXG4gICAgICAgIC8vIGRvbnQgd2FudCBvYnNlcnZlciB0byBsaXN0ZW4gY2hhbmdlcyB3aGVuIGFkZGluZyhyZXBsYWNpbmcpIHNwYW4gdGV4dCBpbnRvIGRvbVxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcikgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIGRvbUVsZW1lbnQucmVwbGFjZVdpdGgoc3Bhbik7XG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMuY29udGFpbmVyLCB0aGlzLm9ic2VydmVyQ29uZmlnKTtcbiAgICAgICAgICAvLyBXZSBuZWVkIHRvIGFkZCB0aGUgb2JzZXJ2ZXIgdG8gZXZlcnkgc2xvdCBpbnNpZGUgdGhlIGNvbnRhaW5lciBhcyB3ZWxsLlxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzbG90XCIpLmZvckVhY2goZnVuY3Rpb24gKHNsb3QpIHtcbiAgICAgICAgICAgIF90aGlzNC5vYnNlcnZlci5vYnNlcnZlKHNsb3QsIF90aGlzNC5vYnNlcnZlckNvbmZpZyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudCA9IG5ldyBfZWxlbWVudHNfdGV4dEVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEyX19bXCJkZWZhdWx0XCJdKHRoaXMsIHNwYW4sIGxheWVyKTtcbiAgICAgIH1cbiAgICAgIC8vIGZvciBmdXR1cmUgY29udmVydCB0aGlzIHRvIHN3aXRjaCBzdGF0ZW1lbnRcbiAgICAgIGVsc2UgaWYgKGRvbUVsZW1lbnQudGFnTmFtZSA9PSBcIlZJREVPXCIpIGVsZW1lbnQgPSBuZXcgX2VsZW1lbnRzX3ZpZGVvRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTRfX1tcImRlZmF1bHRcIl0odGhpcywgZG9tRWxlbWVudCwgbGF5ZXIpO2Vsc2UgaWYgKGRvbUVsZW1lbnQudGFnTmFtZSA9PSBcIklNR1wiKSBlbGVtZW50ID0gbmV3IF9lbGVtZW50c19pbWFnZUVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEzX19bXCJkZWZhdWx0XCJdKHRoaXMsIGRvbUVsZW1lbnQsIGxheWVyKTtlbHNlIGlmIChkb21FbGVtZW50LnRhZ05hbWUgPT0gXCJzdmdcIikgZWxlbWVudCA9IG5ldyBfZWxlbWVudHNfc3ZnRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTlfX1tcImRlZmF1bHRcIl0odGhpcywgZG9tRWxlbWVudCwgbGF5ZXIpO2Vsc2UgaWYgKGRvbUVsZW1lbnQudGFnTmFtZSA9PSBcIkNBTlZBU1wiKSBlbGVtZW50ID0gbmV3IF9lbGVtZW50c19jYW52YXNFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMF9fW1wiZGVmYXVsdFwiXSh0aGlzLCBkb21FbGVtZW50LCBsYXllcik7ZWxzZSBpZiAoZG9tRWxlbWVudC50YWdOYW1lID09IFwiQlVUVE9OXCIpIGVsZW1lbnQgPSBuZXcgX2VsZW1lbnRzX2J1dHRvbkVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE4X19bXCJkZWZhdWx0XCJdKHRoaXMsIGRvbUVsZW1lbnQsIGxheWVyKTtlbHNlIGlmIChkb21FbGVtZW50LnRhZ05hbWUgPT0gXCJURVhUQVJFQVwiKSBlbGVtZW50ID0gbmV3IF9lbGVtZW50c19pbnB1dEVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE3X19bXCJkZWZhdWx0XCJdKHRoaXMsIGRvbUVsZW1lbnQsIGxheWVyKTtlbHNlIGlmIChkb21FbGVtZW50LnRhZ05hbWUgPT0gXCJJTlBVVFwiKSB7XG4gICAgICAgIHZhciB0eXBlID0gZG9tRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpO1xuICAgICAgICBpZiAodHlwZSA9PSBcImNoZWNrYm94XCIpIGVsZW1lbnQgPSBuZXcgX2VsZW1lbnRzX2NoZWNrYm94RWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTVfX1tcImRlZmF1bHRcIl0odGhpcywgZG9tRWxlbWVudCwgbGF5ZXIpO2Vsc2UgaWYgKHR5cGUgPT0gXCJyYWRpb1wiKSBlbGVtZW50ID0gbmV3IF9lbGVtZW50c19yYWRpb0VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE2X19bXCJkZWZhdWx0XCJdKHRoaXMsIGRvbUVsZW1lbnQsIGxheWVyKTtlbHNlIGlmIChbXCJ0ZXh0XCIsIFwiZW1haWxcIiwgXCJudW1iZXJcIiwgXCJwYXNzd29yZFwiLCBcInNlYXJjaFwiLCBcInRlbFwiLCBcInVybFwiXS5pbmNsdWRlcyh0eXBlKSkgZWxlbWVudCA9IG5ldyBfZWxlbWVudHNfaW5wdXRFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xN19fW1wiZGVmYXVsdFwiXSh0aGlzLCBkb21FbGVtZW50LCBsYXllcik7ZWxzZSBpZiAoW1wiYnV0dG9uXCIsIFwic3VibWl0XCIsIFwicmVzZXRcIl0uaW5jbHVkZXModHlwZSkpIHtcbiAgICAgICAgICBlbGVtZW50ID0gbmV3IF9lbGVtZW50c19idXR0b25FbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOF9fW1wiZGVmYXVsdFwiXSh0aGlzLCBkb21FbGVtZW50LCBsYXllcik7XG4gICAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBJZiB0aGlzIGVsZW1lbnQgaXMgaG9zdGluZyBhIHNoYWRvdyByb290LCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSBlbGVtZW50cyBhcmUgb2JzZXJ2ZWQuXG4gICAgICBlbHNlIGlmICghIWRvbUVsZW1lbnQuc2hhZG93Um9vdCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlNoYWRvdyByb290IGZvdW5kXCIsIGRvbUVsZW1lbnQuc2hhZG93Um9vdCk7XG4gICAgICAgIHRoaXMuYWRkRWxlbWVudENoaWxkcmVuKGRvbUVsZW1lbnQuc2hhZG93Um9vdCwgcGFyZW50RWxlbWVudCwgbGF5ZXIpO1xuICAgICAgfVxuICAgICAgLy8gYW55IG90aGVyIHR5cGUgb2YgZWxlbWVudCB3aWxsIGJlIGNvbnRhaW5lclxuICAgICAgZWxzZSBpZiAoZG9tRWxlbWVudC5ub2RlVHlwZSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICBlbGVtZW50ID0gbmV3IF9lbGVtZW50c19jb250YWluZXJFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fW1wiZGVmYXVsdFwiXSh0aGlzLCBkb21FbGVtZW50LCBsYXllcik7XG4gICAgICB9IGVsc2UgcmV0dXJuO1xuICAgICAgdGhpcy5lbGVtZW50cy5hZGQoZWxlbWVudCk7XG4gICAgICB0aGlzLmFmcmFtZS5jb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudC5lbnRpdHkpO1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWcpIGNvbnNvbGUubG9nKFwiQWRkZWQgZWxlbWVudFwiLCBlbGVtZW50KTtcblxuICAgICAgLy8gaW5pdCBlbGVtZW50IGFuZCBhZGQgZWxlbWVudCB0byBwYXJlbnQgY2hpbGRyZW4gd2hlbiBhZnJhbWUgZW50aXR5IGlzIGxvYWRlZChwbGF5KVxuICAgICAgdmFyIG9uTG9hZGVkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50RWxlbWVudCkgcGFyZW50RWxlbWVudC5jaGlsZEVsZW1lbnRzLmFkZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmluaXQoKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnVwZGF0ZSgpO1xuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIF9jYWxsZWUpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBvbkxvYWRlZChfeCkge1xuICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgICB9KCk7XG4gICAgICBlbGVtZW50LmVudGl0eS5hZGRFdmVudExpc3RlbmVyKFwicGxheVwiLCBvbkxvYWRlZCwge1xuICAgICAgICBvbmNlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW1vdmVFbGVtZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgLy8gcmVtb3ZlIHRoZSBlbGVtZW50XG4gICAgICB0aGlzLmFmcmFtZS5jb250YWluZXIucmVtb3ZlQ2hpbGQoZWxlbWVudC5lbnRpdHkpO1xuICAgICAgdGhpcy5lbGVtZW50c1tcImRlbGV0ZVwiXShlbGVtZW50KTtcbiAgICAgIC8vIHJlbW92ZSBhbGwgdGhlIGNoaWxkcmVuIG9mIHRoZSBlbGVtZW50IHJlY3Vyc2l2ZWx5XG4gICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGVsZW1lbnQuY2hpbGRFbGVtZW50cyksXG4gICAgICAgIF9zdGVwMztcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgdmFyIGNoaWxkID0gX3N0ZXAzLnZhbHVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlRWxlbWVudChjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9pdGVyYXRvcjMuZigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHN0YXJ0IGF0IHJvb3QgYW5kIGludGVyYXRlIG92ZXIgY2hpbGQgbm9kZXMgcmVjdXJzaXZlbHlcbiAgfSwge1xuICAgIGtleTogXCJhZGRFbGVtZW50Q2hpbGRyZW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRWxlbWVudENoaWxkcmVuKGN1cnJlbnROb2RlKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnRFbGVtZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsO1xuICAgICAgdmFyIGxheWVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwO1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLnRhZ05hbWUgPT0gXCJzdmdcIikgX3RoaXM1LmdlbmVyYXRlU3R5bGVEZWZzKGN1cnJlbnROb2RlKTtcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIGEgc2xvdCBlbGVtZW50LCB3ZSdyZSB1c2luZyBhIHdlYiBjb21wb25lbnQgYW5kIG5lZWQgdG8gZmV0Y2ggdGhlIGNoaWxkIGVsZW1lbnRzIHVzaW5nIC5hc3NpZ25lZE5vZGVzKClcbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLnRhZ05hbWUgPT0gXCJTTE9UXCIpIHtcbiAgICAgICAgICAvLyBOb3RlOiB3ZSBkb24ndCBpbmNyZWFzZSB0aGUgbGF5ZXIgaGVyZSBiZWNhdXNlIHNsb3RzIGRvbid0IHJlbmRlciBkaXJlY3RseS5cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIioqKioqKioqKlNsb3QgZWxlbWVudCBmb3VuZFwiKTtcbiAgICAgICAgICB2YXIgYXNzaWduZWROb2RlcyA9IGN1cnJlbnROb2RlLmFzc2lnbmVkTm9kZXMoKTtcbiAgICAgICAgICB2YXIgcHJvbWlzZXNUb1Jlc29sdmUgPSBbXTtcbiAgICAgICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGFzc2lnbmVkTm9kZXMpLFxuICAgICAgICAgICAgX3N0ZXA0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykge1xuICAgICAgICAgICAgICB2YXIgYXNzaWduZWROb2RlID0gX3N0ZXA0LnZhbHVlO1xuICAgICAgICAgICAgICBwcm9taXNlc1RvUmVzb2x2ZS5wdXNoKF90aGlzNS5hZGRFbGVtZW50Q2hpbGRyZW4oYXNzaWduZWROb2RlLCBwYXJlbnRFbGVtZW50LCBsYXllcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjQuZigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlc1RvUmVzb2x2ZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpczUuYWRkRWxlbWVudChjdXJyZW50Tm9kZSwgcGFyZW50RWxlbWVudCwgbGF5ZXIpO1xuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIHRhZ3Mgb3Igc3ZnIGVsZW1lbnQgdGhhdCB3ZSBkb250IG5lZWQgdG8gY2hlY2sgaXRzIGNoaWxkcmVuXG4gICAgICAgIGlmICghZWxlbWVudCB8fCBlbGVtZW50IGluc3RhbmNlb2YgX2VsZW1lbnRzX3N2Z0VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE5X19bXCJkZWZhdWx0XCJdKSByZXR1cm47XG4gICAgICAgIGlmIChjdXJyZW50Tm9kZS5jaGlsZE5vZGVzICYmIGN1cnJlbnROb2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxheWVyKys7XG4gICAgICAgICAgdmFyIHByb21pc2VzVG9SZXNvbHZlID0gW107XG4gICAgICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihjdXJyZW50Tm9kZS5jaGlsZE5vZGVzKSxcbiAgICAgICAgICAgIF9zdGVwNTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgdmFyIGNoaWxkID0gX3N0ZXA1LnZhbHVlO1xuICAgICAgICAgICAgICBwcm9taXNlc1RvUmVzb2x2ZS5wdXNoKF90aGlzNS5hZGRFbGVtZW50Q2hpbGRyZW4oY2hpbGQsIGVsZW1lbnQsIGxheWVyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBfaXRlcmF0b3I1LmUoZXJyKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgX2l0ZXJhdG9yNS5mKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzVG9SZXNvbHZlKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbnZlcnRUb1ZSXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnZlcnRUb1ZSKCkge1xuICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBfdGhpczYuYWRkRWxlbWVudENoaWxkcmVuKF90aGlzNi5jb250YWluZXIpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIG9ic2VydmVyIGRvbSBlbGVtZW50IGNoYW5nZXMgYW5kIGZvciBuZXdseSBhZGRlZCBhbmQgZGVsZXRlZCBkb20gZWxlbWVudHNcbiAgICAgICAgICBfdGhpczYub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yNiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG11dGF0aW9ucyksXG4gICAgICAgICAgICAgIF9zdGVwNjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNi5zKCk7ICEoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gX3N0ZXA2LnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTXV0YXRpb24gZW5jb3VudGVyZWRcIiwgbXV0YXRpb24pO1xuICAgICAgICAgICAgICAgIHZhciBlbXB0eVJlbW92ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobXV0YXRpb24ucmVtb3ZlZE5vZGVzKSxcbiAgICAgICAgICAgICAgICAgIF9zdGVwNztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I3LnMoKTsgIShfc3RlcDcgPSBfaXRlcmF0b3I3Lm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBfc3RlcDcudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBlbXB0eSB0ZXh0Tm9kZVxuICAgICAgICAgICAgICAgICAgICBpZiAoIShub2RlLm5vZGVUeXBlID09IE5vZGUuVEVYVF9OT0RFICYmICFub2RlLm5vZGVWYWx1ZS50cmltKCkpKSBfdGhpczYucmVtb3ZlRWxlbWVudChub2RlLmVsZW1lbnQpO2Vsc2UgZW1wdHlSZW1vdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNy5lKGVycik7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjcuZigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yOCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG11dGF0aW9uLmFkZGVkTm9kZXMpLFxuICAgICAgICAgICAgICAgICAgX3N0ZXA4O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjgucygpOyAhKF9zdGVwOCA9IF9pdGVyYXRvcjgubigpKS5kb25lOykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX25vZGUgPSBfc3RlcDgudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNi5hZGRFbGVtZW50Q2hpbGRyZW4oX25vZGUsIG11dGF0aW9uLnRhcmdldC5lbGVtZW50LCBtdXRhdGlvbi50YXJnZXQuZWxlbWVudC5sYXllciArIDEpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yOC5lKGVycik7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjguZigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWVtcHR5UmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgICAvLyB3aGVuIGFkZGluZyBuZXcgbm9kZXMgd2UgYWxzbyBuZWVkIHRvIGNoZWNrIGZvciBuZXcgbG9hZGVkIGltYWdlc1xuICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkgX3RoaXM2LmFsbExvYWRlZFVwZGF0ZSgpO2Vsc2UgX3RoaXM2LnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIExpc3RlbiBmb3IgdGV4dCBjaGFuZ2VzIGFuZCB1cGRhdGUgd2hlbiB0aGV5IG9jY3VyLlxuICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09IFwiY2hhcmFjdGVyRGF0YVwiKSB7XG4gICAgICAgICAgICAgICAgICBfdGhpczYudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yNi5lKGVycik7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICBfaXRlcmF0b3I2LmYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfdGhpczYub2JzZXJ2ZXIub2JzZXJ2ZShfdGhpczYuY29udGFpbmVyLCBfdGhpczYub2JzZXJ2ZXJDb25maWcpO1xuXG4gICAgICAgICAgLy8gV2UgbmVlZCB0byBhZGQgdGhlIG9ic2VydmVyIHRvIGV2ZXJ5IHNsb3QgaW5zaWRlIHRoZSBjb250YWluZXIgYXMgd2VsbC5cbiAgICAgICAgICBfdGhpczYuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzbG90XCIpLmZvckVhY2goZnVuY3Rpb24gKHNsb3QpIHtcbiAgICAgICAgICAgIHNsb3QuYWRkRXZlbnRMaXN0ZW5lcihcInNsb3RjaGFuZ2VcIiwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiU2xvdCBjaGFuZ2UgZXZlbnRcIiwgZXYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfdGhpczYub2JzZXJ2ZXIub2JzZXJ2ZShzbG90LCBfdGhpczYub2JzZXJ2ZXJDb25maWcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gd2UgY2hlY2sgZm9yIHVwZGF0aW5nIHNvIHdlIGRvbnQgZG8gbXVsdGlwbGUgdXBkYXRpbmcgYXQgc2FtZSB0aW1lIGZyb20gdGhlIGFzeW5jIGZ1bmN0aW9uc1xuICAgICAgICBfdGhpczcudXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICBpZiAoX3RoaXM3LnVwZGF0aW5nKSB7XG4gICAgICAgICAgdmFyIF90aGlzNyRzY3JvbGw7XG4gICAgICAgICAgLy8gdXNpbmcgdHJ5IGFuZCBjYXRjaCBiZWNhdXNlIHNvbWV0aW1lcyB3aGVuIGVsZW1lbnQgaXMgcmVtb3ZlZCBpdCBjYWxscyB1cGRhdGUgYWZ0ZXIgYW5kIGl0IHdvbnQgZmluZCBlbGVtZW50LCB0aGUgZXJyb3JzIGRvZXNudCBtYXR0ZXIgYmVjYXVzZSB0aGUgZmluYWwgcmVzdWx0IGlzIHRoZSBzYW1lXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3I5ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoX3RoaXM3LmVsZW1lbnRzKSxcbiAgICAgICAgICAgICAgX3N0ZXA5O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I5LnMoKTsgIShfc3RlcDkgPSBfaXRlcmF0b3I5Lm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IF9zdGVwOS52YWx1ZTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnVwZGF0ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yOS5lKGVycik7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICBfaXRlcmF0b3I5LmYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgKF90aGlzNyRzY3JvbGwgPSBfdGhpczcuc2Nyb2xsKSA9PT0gbnVsbCB8fCBfdGhpczckc2Nyb2xsID09PSB2b2lkIDAgfHwgX3RoaXM3JHNjcm9sbC51cGRhdGUoKTtcbiAgICAgICAgICBfdGhpczcudXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG59KCk7XG5cbn0pKCk7XG5cbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXTtcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19leHBvcnRzX187XG4vKioqKioqLyB9KSgpXG47XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdlYjJ2ci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2051\n");

/***/ }),

/***/ 6264:
/*!***************************************************!*\
  !*** ./src/components/aframe/base-game-loop.json ***!
  \***************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"baseGameLoop","initial":"starting","states":{"starting":{"id":"starting","on":{"loaded":"running"}},"running":{"initial":"briefing","onDone":"ended","on":{"pause":"paused","end":"ended"},"states":{"gameOver":{"type":"final"},"hist":{"type":"history","history":"deep"},"briefing":{"id":"briefing","initial":"briefingPlay","states":{"briefingPlay":{"on":{"pause":"briefingPaused","end":"briefingEnd"}},"briefingPaused":{"on":{"resume":"briefingPlay"}},"briefingEnd":{"type":"final"}}},"debriefing":{"id":"debriefing","onDone":"gameOver","initial":"debriefingPlay","states":{"debriefingPlay":{"on":{"pause":"debriefingPaused","end":"debriefingEnd"}},"debriefingPaused":{"on":{"resume":"debriefingPlay"}},"debriefingEnd":{"type":"final"}}}}},"paused":{"on":{"resume":"running.hist","end":"ended"}},"ended":{"type":"final"}}}');

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__(9571)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);