/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfrontend"] = self["webpackChunkfrontend"] || []).push([["main"],{

/***/ 5575:
/*!********************************************************!*\
  !*** ./src/components/aframe/animation-mixer-state.js ***!
  \********************************************************/
/***/ ((module) => {

eval("var LoopMode = {\n  once: THREE.LoopOnce,\n  repeat: THREE.LoopRepeat,\n  pingpong: THREE.LoopPingPong\n};\n\n/**\n * animation-mixer-state\n *\n * Player for animation clips. Intended to be compatible with any model format that supports\n * skeletal or morph animations through THREE.AnimationMixer.\n * See: https://threejs.org/docs/?q=animation#Reference/Animation/AnimationMixer\n * \n * Allows animations to be triggered on state changes, and can will be able to update animations based on previous\n * state transitions.\n */\nmodule.exports = AFRAME.registerComponent('animation-mixer-state', {\n  schema: {\n    clip: {\n      \"default\": '*'\n    },\n    useRegExp: {\n      \"default\": false\n    },\n    duration: {\n      \"default\": 0\n    },\n    clampWhenFinished: {\n      \"default\": false,\n      type: 'boolean'\n    },\n    crossFadeDuration: {\n      \"default\": 0\n    },\n    loop: {\n      \"default\": 'repeat',\n      oneOf: Object.keys(LoopMode)\n    },\n    repetitions: {\n      \"default\": Infinity,\n      min: 0\n    },\n    timeScale: {\n      \"default\": 1\n    },\n    startAt: {\n      \"default\": 0\n    },\n    animationEventPairs: {\n      \"default\": {}\n    }\n  },\n  init: function init() {\n    var _this = this;\n    /** @type {THREE.Mesh} */\n    this.model = null;\n    /** @type {THREE.AnimationMixer} */\n    this.mixer = null;\n    /** @type {Array<THREE.AnimationAction>} */\n    this.activeActions = [];\n    var model = this.el.getObject3D('mesh');\n    if (model) {\n      this.load(model);\n    } else {\n      this.el.addEventListener('model-loaded', function (e) {\n        _this.load(e.detail.model);\n      });\n    }\n  },\n  load: function load(model) {\n    var el = this.el;\n    this.model = model;\n    this.mixer = new THREE.AnimationMixer(model);\n    this.mixer.addEventListener('loop', function (e) {\n      el.emit('animation-loop', {\n        action: e.action,\n        loopDelta: e.loopDelta\n      });\n    });\n    this.mixer.addEventListener('finished', function (e) {\n      el.emit('animation-finished', {\n        action: e.action,\n        direction: e.direction\n      });\n    });\n    if (this.data.clip) this.update({});\n  },\n  remove: function remove() {\n    if (this.mixer) this.mixer.stopAllAction();\n  },\n  update: function update(prevData) {\n    if (!prevData) return;\n    var data = this.data;\n    var changes = AFRAME.utils.diff(data, prevData);\n\n    // If selected clips have changed, restart animation.\n    if ('clip' in changes) {\n      this.stopAction();\n      if (data.clip) this.playAction();\n      return;\n    }\n\n    // Otherwise, modify running actions.\n    this.activeActions.forEach(function (action) {\n      if ('duration' in changes && data.duration) {\n        action.setDuration(data.duration);\n      }\n      if ('clampWhenFinished' in changes) {\n        action.clampWhenFinished = data.clampWhenFinished;\n      }\n      if ('loop' in changes || 'repetitions' in changes) {\n        action.setLoop(LoopMode[data.loop], data.repetitions);\n      }\n      if ('timeScale' in changes) {\n        action.setEffectiveTimeScale(data.timeScale);\n      }\n    });\n  },\n  stopAction: function stopAction() {\n    var data = this.data;\n    for (var i = 0; i < this.activeActions.length; i++) {\n      data.crossFadeDuration ? this.activeActions[i].fadeOut(data.crossFadeDuration) : this.activeActions[i].stop();\n    }\n    this.activeActions.length = 0;\n  },\n  playAction: function playAction() {\n    if (!this.mixer) return;\n    var model = this.model,\n      data = this.data,\n      clips = model.animations || (model.geometry || {}).animations || [];\n    if (!clips.length) return;\n    var re = data.useRegExp ? data.clip : wildcardToRegExp(data.clip);\n    for (var clip, i = 0; clip = clips[i]; i++) {\n      if (clip.name.match(re)) {\n        var action = this.mixer.clipAction(clip, model);\n        action.enabled = true;\n        action.clampWhenFinished = data.clampWhenFinished;\n        if (data.duration) action.setDuration(data.duration);\n        if (data.timeScale !== 1) action.setEffectiveTimeScale(data.timeScale);\n        // animation-mixer.startAt and AnimationAction.startAt have very different meanings.\n        // animation-mixer.startAt indicates which frame in the animation to start at, in msecs.\n        // AnimationAction.startAt indicates when to start the animation (from the 1st frame),\n        // measured in global mixer time, in seconds.\n        action.startAt(this.mixer.time - data.startAt / 1000);\n        action.setLoop(LoopMode[data.loop], data.repetitions).fadeIn(data.crossFadeDuration).play();\n        this.activeActions.push(action);\n      }\n    }\n  },\n  tick: function tick(t, dt) {\n    if (this.mixer && !isNaN(dt)) this.mixer.update(dt / 1000);\n  }\n});\n\n/**\n * Creates a RegExp from the given string, converting asterisks to .* expressions,\n * and escaping all other characters.\n */\nfunction wildcardToRegExp(s) {\n  return new RegExp('^' + s.split(/\\*+/).map(regExpEscape).join('.*') + '$');\n}\n\n/**\n * RegExp-escapes all characters in the given string.\n */\nfunction regExpEscape(s) {\n  return s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTU3NS5qcyIsIm5hbWVzIjpbIkxvb3BNb2RlIiwib25jZSIsIlRIUkVFIiwiTG9vcE9uY2UiLCJyZXBlYXQiLCJMb29wUmVwZWF0IiwicGluZ3BvbmciLCJMb29wUGluZ1BvbmciLCJtb2R1bGUiLCJleHBvcnRzIiwiQUZSQU1FIiwicmVnaXN0ZXJDb21wb25lbnQiLCJzY2hlbWEiLCJjbGlwIiwidXNlUmVnRXhwIiwiZHVyYXRpb24iLCJjbGFtcFdoZW5GaW5pc2hlZCIsInR5cGUiLCJjcm9zc0ZhZGVEdXJhdGlvbiIsImxvb3AiLCJvbmVPZiIsIk9iamVjdCIsImtleXMiLCJyZXBldGl0aW9ucyIsIkluZmluaXR5IiwibWluIiwidGltZVNjYWxlIiwic3RhcnRBdCIsImFuaW1hdGlvbkV2ZW50UGFpcnMiLCJpbml0IiwiX3RoaXMiLCJtb2RlbCIsIm1peGVyIiwiYWN0aXZlQWN0aW9ucyIsImVsIiwiZ2V0T2JqZWN0M0QiLCJsb2FkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJkZXRhaWwiLCJBbmltYXRpb25NaXhlciIsImVtaXQiLCJhY3Rpb24iLCJsb29wRGVsdGEiLCJkaXJlY3Rpb24iLCJkYXRhIiwidXBkYXRlIiwicmVtb3ZlIiwic3RvcEFsbEFjdGlvbiIsInByZXZEYXRhIiwiY2hhbmdlcyIsInV0aWxzIiwiZGlmZiIsInN0b3BBY3Rpb24iLCJwbGF5QWN0aW9uIiwiZm9yRWFjaCIsInNldER1cmF0aW9uIiwic2V0TG9vcCIsInNldEVmZmVjdGl2ZVRpbWVTY2FsZSIsImkiLCJsZW5ndGgiLCJmYWRlT3V0Iiwic3RvcCIsImNsaXBzIiwiYW5pbWF0aW9ucyIsImdlb21ldHJ5IiwicmUiLCJ3aWxkY2FyZFRvUmVnRXhwIiwibmFtZSIsIm1hdGNoIiwiY2xpcEFjdGlvbiIsImVuYWJsZWQiLCJ0aW1lIiwiZmFkZUluIiwicGxheSIsInB1c2giLCJ0aWNrIiwidCIsImR0IiwiaXNOYU4iLCJzIiwiUmVnRXhwIiwic3BsaXQiLCJtYXAiLCJyZWdFeHBFc2NhcGUiLCJqb2luIiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvYW5pbWF0aW9uLW1peGVyLXN0YXRlLmpzPzQwNDQiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTG9vcE1vZGUgPSB7XG4gICAgb25jZTogVEhSRUUuTG9vcE9uY2UsXG4gICAgcmVwZWF0OiBUSFJFRS5Mb29wUmVwZWF0LFxuICAgIHBpbmdwb25nOiBUSFJFRS5Mb29wUGluZ1BvbmdcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBhbmltYXRpb24tbWl4ZXItc3RhdGVcbiAgICpcbiAgICogUGxheWVyIGZvciBhbmltYXRpb24gY2xpcHMuIEludGVuZGVkIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBhbnkgbW9kZWwgZm9ybWF0IHRoYXQgc3VwcG9ydHNcbiAgICogc2tlbGV0YWwgb3IgbW9ycGggYW5pbWF0aW9ucyB0aHJvdWdoIFRIUkVFLkFuaW1hdGlvbk1peGVyLlxuICAgKiBTZWU6IGh0dHBzOi8vdGhyZWVqcy5vcmcvZG9jcy8/cT1hbmltYXRpb24jUmVmZXJlbmNlL0FuaW1hdGlvbi9BbmltYXRpb25NaXhlclxuICAgKiBcbiAgICogQWxsb3dzIGFuaW1hdGlvbnMgdG8gYmUgdHJpZ2dlcmVkIG9uIHN0YXRlIGNoYW5nZXMsIGFuZCBjYW4gd2lsbCBiZSBhYmxlIHRvIHVwZGF0ZSBhbmltYXRpb25zIGJhc2VkIG9uIHByZXZpb3VzXG4gICAqIHN0YXRlIHRyYW5zaXRpb25zLlxuICAgKi9cbiAgbW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2FuaW1hdGlvbi1taXhlci1zdGF0ZScsIHtcbiAgICBzY2hlbWE6IHtcbiAgICAgIGNsaXA6IHsgZGVmYXVsdDogJyonIH0sXG4gICAgICB1c2VSZWdFeHA6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgICBkdXJhdGlvbjogeyBkZWZhdWx0OiAwIH0sXG4gICAgICBjbGFtcFdoZW5GaW5pc2hlZDogeyBkZWZhdWx0OiBmYWxzZSwgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgICBjcm9zc0ZhZGVEdXJhdGlvbjogeyBkZWZhdWx0OiAwIH0sXG4gICAgICBsb29wOiB7IGRlZmF1bHQ6ICdyZXBlYXQnLCBvbmVPZjogT2JqZWN0LmtleXMoTG9vcE1vZGUpIH0sXG4gICAgICByZXBldGl0aW9uczogeyBkZWZhdWx0OiBJbmZpbml0eSwgbWluOiAwIH0sXG4gICAgICB0aW1lU2NhbGU6IHsgZGVmYXVsdDogMSB9LFxuICAgICAgc3RhcnRBdDogeyBkZWZhdWx0OiAwIH0sXG4gICAgICBhbmltYXRpb25FdmVudFBhaXJzOiB7XG4gICAgICAgIGRlZmF1bHQ6IHt9XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgLyoqIEB0eXBlIHtUSFJFRS5NZXNofSAqL1xuICAgICAgdGhpcy5tb2RlbCA9IG51bGw7XG4gICAgICAvKiogQHR5cGUge1RIUkVFLkFuaW1hdGlvbk1peGVyfSAqL1xuICAgICAgdGhpcy5taXhlciA9IG51bGw7XG4gICAgICAvKiogQHR5cGUge0FycmF5PFRIUkVFLkFuaW1hdGlvbkFjdGlvbj59ICovXG4gICAgICB0aGlzLmFjdGl2ZUFjdGlvbnMgPSBbXTtcbiAgXG4gICAgICBjb25zdCBtb2RlbCA9IHRoaXMuZWwuZ2V0T2JqZWN0M0QoJ21lc2gnKTtcbiAgXG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgdGhpcy5sb2FkKG1vZGVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW9kZWwtbG9hZGVkJywgKGUpID0+IHtcbiAgICAgICAgICB0aGlzLmxvYWQoZS5kZXRhaWwubW9kZWwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICBsb2FkOiBmdW5jdGlvbiAobW9kZWwpIHtcbiAgICAgIGNvbnN0IGVsID0gdGhpcy5lbDtcbiAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgIHRoaXMubWl4ZXIgPSBuZXcgVEhSRUUuQW5pbWF0aW9uTWl4ZXIobW9kZWwpO1xuICAgICAgdGhpcy5taXhlci5hZGRFdmVudExpc3RlbmVyKCdsb29wJywgKGUpID0+IHtcbiAgICAgICAgZWwuZW1pdCgnYW5pbWF0aW9uLWxvb3AnLCB7IGFjdGlvbjogZS5hY3Rpb24sIGxvb3BEZWx0YTogZS5sb29wRGVsdGEgfSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMubWl4ZXIuYWRkRXZlbnRMaXN0ZW5lcignZmluaXNoZWQnLCAoZSkgPT4ge1xuICAgICAgICBlbC5lbWl0KCdhbmltYXRpb24tZmluaXNoZWQnLCB7IGFjdGlvbjogZS5hY3Rpb24sIGRpcmVjdGlvbjogZS5kaXJlY3Rpb24gfSk7XG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLmRhdGEuY2xpcCkgdGhpcy51cGRhdGUoe30pO1xuICAgIH0sXG4gIFxuICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMubWl4ZXIpIHRoaXMubWl4ZXIuc3RvcEFsbEFjdGlvbigpO1xuICAgIH0sXG4gIFxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKHByZXZEYXRhKSB7XG4gICAgICBpZiAoIXByZXZEYXRhKSByZXR1cm47XG4gIFxuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgIGNvbnN0IGNoYW5nZXMgPSBBRlJBTUUudXRpbHMuZGlmZihkYXRhLCBwcmV2RGF0YSk7XG4gIFxuICAgICAgLy8gSWYgc2VsZWN0ZWQgY2xpcHMgaGF2ZSBjaGFuZ2VkLCByZXN0YXJ0IGFuaW1hdGlvbi5cbiAgICAgIGlmICgnY2xpcCcgaW4gY2hhbmdlcykge1xuICAgICAgICB0aGlzLnN0b3BBY3Rpb24oKTtcbiAgICAgICAgaWYgKGRhdGEuY2xpcCkgdGhpcy5wbGF5QWN0aW9uKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBPdGhlcndpc2UsIG1vZGlmeSBydW5uaW5nIGFjdGlvbnMuXG4gICAgICB0aGlzLmFjdGl2ZUFjdGlvbnMuZm9yRWFjaCgoYWN0aW9uKSA9PiB7XG4gICAgICAgIGlmICgnZHVyYXRpb24nIGluIGNoYW5nZXMgJiYgZGF0YS5kdXJhdGlvbikge1xuICAgICAgICAgIGFjdGlvbi5zZXREdXJhdGlvbihkYXRhLmR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2NsYW1wV2hlbkZpbmlzaGVkJyBpbiBjaGFuZ2VzKSB7XG4gICAgICAgICAgYWN0aW9uLmNsYW1wV2hlbkZpbmlzaGVkID0gZGF0YS5jbGFtcFdoZW5GaW5pc2hlZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJ2xvb3AnIGluIGNoYW5nZXMgfHwgJ3JlcGV0aXRpb25zJyBpbiBjaGFuZ2VzKSB7XG4gICAgICAgICAgYWN0aW9uLnNldExvb3AoTG9vcE1vZGVbZGF0YS5sb29wXSwgZGF0YS5yZXBldGl0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCd0aW1lU2NhbGUnIGluIGNoYW5nZXMpIHtcbiAgICAgICAgICBhY3Rpb24uc2V0RWZmZWN0aXZlVGltZVNjYWxlKGRhdGEudGltZVNjYWxlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgXG4gICAgc3RvcEFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hY3RpdmVBY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGEuY3Jvc3NGYWRlRHVyYXRpb25cbiAgICAgICAgICA/IHRoaXMuYWN0aXZlQWN0aW9uc1tpXS5mYWRlT3V0KGRhdGEuY3Jvc3NGYWRlRHVyYXRpb24pXG4gICAgICAgICAgOiB0aGlzLmFjdGl2ZUFjdGlvbnNbaV0uc3RvcCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5hY3RpdmVBY3Rpb25zLmxlbmd0aCA9IDA7XG4gICAgfSxcbiAgXG4gICAgcGxheUFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLm1peGVyKSByZXR1cm47XG4gIFxuICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLm1vZGVsLFxuICAgICAgICBkYXRhID0gdGhpcy5kYXRhLFxuICAgICAgICBjbGlwcyA9IG1vZGVsLmFuaW1hdGlvbnMgfHwgKG1vZGVsLmdlb21ldHJ5IHx8IHt9KS5hbmltYXRpb25zIHx8IFtdO1xuICBcbiAgICAgIGlmICghY2xpcHMubGVuZ3RoKSByZXR1cm47XG4gIFxuICAgICAgY29uc3QgcmUgPSBkYXRhLnVzZVJlZ0V4cCA/IGRhdGEuY2xpcCA6IHdpbGRjYXJkVG9SZWdFeHAoZGF0YS5jbGlwKTtcbiAgXG4gICAgICBmb3IgKGxldCBjbGlwLCBpID0gMDsgKGNsaXAgPSBjbGlwc1tpXSk7IGkrKykge1xuICAgICAgICBpZiAoY2xpcC5uYW1lLm1hdGNoKHJlKSkge1xuICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMubWl4ZXIuY2xpcEFjdGlvbihjbGlwLCBtb2RlbCk7XG4gIFxuICAgICAgICAgIGFjdGlvbi5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICBhY3Rpb24uY2xhbXBXaGVuRmluaXNoZWQgPSBkYXRhLmNsYW1wV2hlbkZpbmlzaGVkO1xuICAgICAgICAgIGlmIChkYXRhLmR1cmF0aW9uKSBhY3Rpb24uc2V0RHVyYXRpb24oZGF0YS5kdXJhdGlvbik7XG4gICAgICAgICAgaWYgKGRhdGEudGltZVNjYWxlICE9PSAxKSBhY3Rpb24uc2V0RWZmZWN0aXZlVGltZVNjYWxlKGRhdGEudGltZVNjYWxlKTtcbiAgICAgICAgICAvLyBhbmltYXRpb24tbWl4ZXIuc3RhcnRBdCBhbmQgQW5pbWF0aW9uQWN0aW9uLnN0YXJ0QXQgaGF2ZSB2ZXJ5IGRpZmZlcmVudCBtZWFuaW5ncy5cbiAgICAgICAgICAvLyBhbmltYXRpb24tbWl4ZXIuc3RhcnRBdCBpbmRpY2F0ZXMgd2hpY2ggZnJhbWUgaW4gdGhlIGFuaW1hdGlvbiB0byBzdGFydCBhdCwgaW4gbXNlY3MuXG4gICAgICAgICAgLy8gQW5pbWF0aW9uQWN0aW9uLnN0YXJ0QXQgaW5kaWNhdGVzIHdoZW4gdG8gc3RhcnQgdGhlIGFuaW1hdGlvbiAoZnJvbSB0aGUgMXN0IGZyYW1lKSxcbiAgICAgICAgICAvLyBtZWFzdXJlZCBpbiBnbG9iYWwgbWl4ZXIgdGltZSwgaW4gc2Vjb25kcy5cbiAgICAgICAgICBhY3Rpb24uc3RhcnRBdCh0aGlzLm1peGVyLnRpbWUgLSBkYXRhLnN0YXJ0QXQgLyAxMDAwKTtcbiAgICAgICAgICBhY3Rpb25cbiAgICAgICAgICAgIC5zZXRMb29wKExvb3BNb2RlW2RhdGEubG9vcF0sIGRhdGEucmVwZXRpdGlvbnMpXG4gICAgICAgICAgICAuZmFkZUluKGRhdGEuY3Jvc3NGYWRlRHVyYXRpb24pXG4gICAgICAgICAgICAucGxheSgpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlQWN0aW9ucy5wdXNoKGFjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICB0aWNrOiBmdW5jdGlvbiAodCwgZHQpIHtcbiAgICAgIGlmICh0aGlzLm1peGVyICYmICFpc05hTihkdCkpIHRoaXMubWl4ZXIudXBkYXRlKGR0IC8gMTAwMCk7XG4gICAgfVxuICB9KTtcbiAgXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgUmVnRXhwIGZyb20gdGhlIGdpdmVuIHN0cmluZywgY29udmVydGluZyBhc3Rlcmlza3MgdG8gLiogZXhwcmVzc2lvbnMsXG4gICAqIGFuZCBlc2NhcGluZyBhbGwgb3RoZXIgY2hhcmFjdGVycy5cbiAgICovXG4gIGZ1bmN0aW9uIHdpbGRjYXJkVG9SZWdFeHAocykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKCdeJyArIHMuc3BsaXQoL1xcKisvKS5tYXAocmVnRXhwRXNjYXBlKS5qb2luKCcuKicpICsgJyQnKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFJlZ0V4cC1lc2NhcGVzIGFsbCBjaGFyYWN0ZXJzIGluIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAqL1xuICBmdW5jdGlvbiByZWdFeHBFc2NhcGUocykge1xuICAgIHJldHVybiBzLnJlcGxhY2UoL1t8XFxcXHt9KClbXFxdXiQrKj8uXS9nLCAnXFxcXCQmJyk7XG4gIH1cbiAgIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxRQUFRLEdBQUc7RUFDYkMsSUFBSSxFQUFFQyxLQUFLLENBQUNDLFFBQVE7RUFDcEJDLE1BQU0sRUFBRUYsS0FBSyxDQUFDRyxVQUFVO0VBQ3hCQyxRQUFRLEVBQUVKLEtBQUssQ0FBQ0s7QUFDbEIsQ0FBQzs7QUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNFQyxNQUFNLENBQUNDLE9BQU8sR0FBR0MsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyx1QkFBdUIsRUFBRTtFQUNqRUMsTUFBTSxFQUFFO0lBQ05DLElBQUksRUFBRTtNQUFFLFdBQVM7SUFBSSxDQUFDO0lBQ3RCQyxTQUFTLEVBQUU7TUFBQyxXQUFTO0lBQUssQ0FBQztJQUMzQkMsUUFBUSxFQUFFO01BQUUsV0FBUztJQUFFLENBQUM7SUFDeEJDLGlCQUFpQixFQUFFO01BQUUsV0FBUyxLQUFLO01BQUVDLElBQUksRUFBRTtJQUFVLENBQUM7SUFDdERDLGlCQUFpQixFQUFFO01BQUUsV0FBUztJQUFFLENBQUM7SUFDakNDLElBQUksRUFBRTtNQUFFLFdBQVMsUUFBUTtNQUFFQyxLQUFLLEVBQUVDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDdEIsUUFBUTtJQUFFLENBQUM7SUFDekR1QixXQUFXLEVBQUU7TUFBRSxXQUFTQyxRQUFRO01BQUVDLEdBQUcsRUFBRTtJQUFFLENBQUM7SUFDMUNDLFNBQVMsRUFBRTtNQUFFLFdBQVM7SUFBRSxDQUFDO0lBQ3pCQyxPQUFPLEVBQUU7TUFBRSxXQUFTO0lBQUUsQ0FBQztJQUN2QkMsbUJBQW1CLEVBQUU7TUFDbkIsV0FBUyxDQUFDO0lBQ1o7RUFDRixDQUFDO0VBRURDLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVk7SUFBQSxJQUFBQyxLQUFBO0lBQ2hCO0lBQ0EsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSTtJQUNqQjtJQUNBLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUk7SUFDakI7SUFDQSxJQUFJLENBQUNDLGFBQWEsR0FBRyxFQUFFO0lBRXZCLElBQU1GLEtBQUssR0FBRyxJQUFJLENBQUNHLEVBQUUsQ0FBQ0MsV0FBVyxDQUFDLE1BQU0sQ0FBQztJQUV6QyxJQUFJSixLQUFLLEVBQUU7TUFDVCxJQUFJLENBQUNLLElBQUksQ0FBQ0wsS0FBSyxDQUFDO0lBQ2xCLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQ0csRUFBRSxDQUFDRyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsVUFBQ0MsQ0FBQyxFQUFLO1FBQzlDUixLQUFJLENBQUNNLElBQUksQ0FBQ0UsQ0FBQyxDQUFDQyxNQUFNLENBQUNSLEtBQUssQ0FBQztNQUMzQixDQUFDLENBQUM7SUFDSjtFQUNGLENBQUM7RUFFREssSUFBSSxFQUFFLFNBQUFBLEtBQVVMLEtBQUssRUFBRTtJQUNyQixJQUFNRyxFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO0lBQ2xCLElBQUksQ0FBQ0gsS0FBSyxHQUFHQSxLQUFLO0lBQ2xCLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUk5QixLQUFLLENBQUNzQyxjQUFjLENBQUNULEtBQUssQ0FBQztJQUM1QyxJQUFJLENBQUNDLEtBQUssQ0FBQ0ssZ0JBQWdCLENBQUMsTUFBTSxFQUFFLFVBQUNDLENBQUMsRUFBSztNQUN6Q0osRUFBRSxDQUFDTyxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7UUFBRUMsTUFBTSxFQUFFSixDQUFDLENBQUNJLE1BQU07UUFBRUMsU0FBUyxFQUFFTCxDQUFDLENBQUNLO01BQVUsQ0FBQyxDQUFDO0lBQ3pFLENBQUMsQ0FBQztJQUNGLElBQUksQ0FBQ1gsS0FBSyxDQUFDSyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsVUFBQ0MsQ0FBQyxFQUFLO01BQzdDSixFQUFFLENBQUNPLElBQUksQ0FBQyxvQkFBb0IsRUFBRTtRQUFFQyxNQUFNLEVBQUVKLENBQUMsQ0FBQ0ksTUFBTTtRQUFFRSxTQUFTLEVBQUVOLENBQUMsQ0FBQ007TUFBVSxDQUFDLENBQUM7SUFDN0UsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxJQUFJLENBQUNDLElBQUksQ0FBQ2hDLElBQUksRUFBRSxJQUFJLENBQUNpQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDckMsQ0FBQztFQUVEQyxNQUFNLEVBQUUsU0FBQUEsT0FBQSxFQUFZO0lBQ2xCLElBQUksSUFBSSxDQUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDQSxLQUFLLENBQUNnQixhQUFhLENBQUMsQ0FBQztFQUM1QyxDQUFDO0VBRURGLE1BQU0sRUFBRSxTQUFBQSxPQUFVRyxRQUFRLEVBQUU7SUFDMUIsSUFBSSxDQUFDQSxRQUFRLEVBQUU7SUFFZixJQUFNSixJQUFJLEdBQUcsSUFBSSxDQUFDQSxJQUFJO0lBQ3RCLElBQU1LLE9BQU8sR0FBR3hDLE1BQU0sQ0FBQ3lDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDUCxJQUFJLEVBQUVJLFFBQVEsQ0FBQzs7SUFFakQ7SUFDQSxJQUFJLE1BQU0sSUFBSUMsT0FBTyxFQUFFO01BQ3JCLElBQUksQ0FBQ0csVUFBVSxDQUFDLENBQUM7TUFDakIsSUFBSVIsSUFBSSxDQUFDaEMsSUFBSSxFQUFFLElBQUksQ0FBQ3lDLFVBQVUsQ0FBQyxDQUFDO01BQ2hDO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJLENBQUNyQixhQUFhLENBQUNzQixPQUFPLENBQUMsVUFBQ2IsTUFBTSxFQUFLO01BQ3JDLElBQUksVUFBVSxJQUFJUSxPQUFPLElBQUlMLElBQUksQ0FBQzlCLFFBQVEsRUFBRTtRQUMxQzJCLE1BQU0sQ0FBQ2MsV0FBVyxDQUFDWCxJQUFJLENBQUM5QixRQUFRLENBQUM7TUFDbkM7TUFDQSxJQUFJLG1CQUFtQixJQUFJbUMsT0FBTyxFQUFFO1FBQ2xDUixNQUFNLENBQUMxQixpQkFBaUIsR0FBRzZCLElBQUksQ0FBQzdCLGlCQUFpQjtNQUNuRDtNQUNBLElBQUksTUFBTSxJQUFJa0MsT0FBTyxJQUFJLGFBQWEsSUFBSUEsT0FBTyxFQUFFO1FBQ2pEUixNQUFNLENBQUNlLE9BQU8sQ0FBQ3pELFFBQVEsQ0FBQzZDLElBQUksQ0FBQzFCLElBQUksQ0FBQyxFQUFFMEIsSUFBSSxDQUFDdEIsV0FBVyxDQUFDO01BQ3ZEO01BQ0EsSUFBSSxXQUFXLElBQUkyQixPQUFPLEVBQUU7UUFDMUJSLE1BQU0sQ0FBQ2dCLHFCQUFxQixDQUFDYixJQUFJLENBQUNuQixTQUFTLENBQUM7TUFDOUM7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDO0VBRUQyQixVQUFVLEVBQUUsU0FBQUEsV0FBQSxFQUFZO0lBQ3RCLElBQU1SLElBQUksR0FBRyxJQUFJLENBQUNBLElBQUk7SUFDdEIsS0FBSyxJQUFJYyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDMUIsYUFBYSxDQUFDMkIsTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRTtNQUNsRGQsSUFBSSxDQUFDM0IsaUJBQWlCLEdBQ2xCLElBQUksQ0FBQ2UsYUFBYSxDQUFDMEIsQ0FBQyxDQUFDLENBQUNFLE9BQU8sQ0FBQ2hCLElBQUksQ0FBQzNCLGlCQUFpQixDQUFDLEdBQ3JELElBQUksQ0FBQ2UsYUFBYSxDQUFDMEIsQ0FBQyxDQUFDLENBQUNHLElBQUksQ0FBQyxDQUFDO0lBQ2xDO0lBQ0EsSUFBSSxDQUFDN0IsYUFBYSxDQUFDMkIsTUFBTSxHQUFHLENBQUM7RUFDL0IsQ0FBQztFQUVETixVQUFVLEVBQUUsU0FBQUEsV0FBQSxFQUFZO0lBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUN0QixLQUFLLEVBQUU7SUFFakIsSUFBTUQsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSztNQUN0QmMsSUFBSSxHQUFHLElBQUksQ0FBQ0EsSUFBSTtNQUNoQmtCLEtBQUssR0FBR2hDLEtBQUssQ0FBQ2lDLFVBQVUsSUFBSSxDQUFDakMsS0FBSyxDQUFDa0MsUUFBUSxJQUFJLENBQUMsQ0FBQyxFQUFFRCxVQUFVLElBQUksRUFBRTtJQUVyRSxJQUFJLENBQUNELEtBQUssQ0FBQ0gsTUFBTSxFQUFFO0lBRW5CLElBQU1NLEVBQUUsR0FBR3JCLElBQUksQ0FBQy9CLFNBQVMsR0FBRytCLElBQUksQ0FBQ2hDLElBQUksR0FBR3NELGdCQUFnQixDQUFDdEIsSUFBSSxDQUFDaEMsSUFBSSxDQUFDO0lBRW5FLEtBQUssSUFBSUEsSUFBSSxFQUFFOEMsQ0FBQyxHQUFHLENBQUMsRUFBRzlDLElBQUksR0FBR2tELEtBQUssQ0FBQ0osQ0FBQyxDQUFDLEVBQUdBLENBQUMsRUFBRSxFQUFFO01BQzVDLElBQUk5QyxJQUFJLENBQUN1RCxJQUFJLENBQUNDLEtBQUssQ0FBQ0gsRUFBRSxDQUFDLEVBQUU7UUFDdkIsSUFBTXhCLE1BQU0sR0FBRyxJQUFJLENBQUNWLEtBQUssQ0FBQ3NDLFVBQVUsQ0FBQ3pELElBQUksRUFBRWtCLEtBQUssQ0FBQztRQUVqRFcsTUFBTSxDQUFDNkIsT0FBTyxHQUFHLElBQUk7UUFDckI3QixNQUFNLENBQUMxQixpQkFBaUIsR0FBRzZCLElBQUksQ0FBQzdCLGlCQUFpQjtRQUNqRCxJQUFJNkIsSUFBSSxDQUFDOUIsUUFBUSxFQUFFMkIsTUFBTSxDQUFDYyxXQUFXLENBQUNYLElBQUksQ0FBQzlCLFFBQVEsQ0FBQztRQUNwRCxJQUFJOEIsSUFBSSxDQUFDbkIsU0FBUyxLQUFLLENBQUMsRUFBRWdCLE1BQU0sQ0FBQ2dCLHFCQUFxQixDQUFDYixJQUFJLENBQUNuQixTQUFTLENBQUM7UUFDdEU7UUFDQTtRQUNBO1FBQ0E7UUFDQWdCLE1BQU0sQ0FBQ2YsT0FBTyxDQUFDLElBQUksQ0FBQ0ssS0FBSyxDQUFDd0MsSUFBSSxHQUFHM0IsSUFBSSxDQUFDbEIsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNyRGUsTUFBTSxDQUNIZSxPQUFPLENBQUN6RCxRQUFRLENBQUM2QyxJQUFJLENBQUMxQixJQUFJLENBQUMsRUFBRTBCLElBQUksQ0FBQ3RCLFdBQVcsQ0FBQyxDQUM5Q2tELE1BQU0sQ0FBQzVCLElBQUksQ0FBQzNCLGlCQUFpQixDQUFDLENBQzlCd0QsSUFBSSxDQUFDLENBQUM7UUFDVCxJQUFJLENBQUN6QyxhQUFhLENBQUMwQyxJQUFJLENBQUNqQyxNQUFNLENBQUM7TUFDakM7SUFDRjtFQUNGLENBQUM7RUFFRGtDLElBQUksRUFBRSxTQUFBQSxLQUFVQyxDQUFDLEVBQUVDLEVBQUUsRUFBRTtJQUNyQixJQUFJLElBQUksQ0FBQzlDLEtBQUssSUFBSSxDQUFDK0MsS0FBSyxDQUFDRCxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUM5QyxLQUFLLENBQUNjLE1BQU0sQ0FBQ2dDLEVBQUUsR0FBRyxJQUFJLENBQUM7RUFDNUQ7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDRjtBQUNBO0FBQ0E7QUFDRSxTQUFTWCxnQkFBZ0JBLENBQUNhLENBQUMsRUFBRTtFQUMzQixPQUFPLElBQUlDLE1BQU0sQ0FBQyxHQUFHLEdBQUdELENBQUMsQ0FBQ0UsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDQyxHQUFHLENBQUNDLFlBQVksQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQzVFOztBQUVBO0FBQ0Y7QUFDQTtBQUNFLFNBQVNELFlBQVlBLENBQUNKLENBQUMsRUFBRTtFQUN2QixPQUFPQSxDQUFDLENBQUNNLE9BQU8sQ0FBQyxxQkFBcUIsRUFBRSxNQUFNLENBQUM7QUFDakQiLCJpZ25vcmVMaXN0IjpbXX0=\n//# sourceURL=webpack-internal:///5575\n");

/***/ }),

/***/ 9999:
/*!*****************************************************!*\
  !*** ./src/components/aframe/game-state-machine.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! xstate */ 7122);\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! xstate */ 7894);\n/* harmony import */ var _base_game_loop_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base-game-loop.json */ 6264);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME */\n\n\n\n\n// Example complete game state machine.\nvar sampleMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_1__.createMachine)({\n  /** @xstate-layout N4IgpgJg5mDOIC5RQIYFswGUAuLtgFkUBjACwEsA7MAOllwCdsqoBiAGwHsUJIBtAAwBdRKAAOnWOWadKokAA9EARgCsAZhoCA7ABYATOoEBOAat3rtx9QBoQATxUCAbAA4aG1QIOvXy117OAL5BdqgYOHiEJBTUNAwArpSULKxiKAmwYIIiSCASUjJyeUoIys66NG6+yuUC6vqq2r52jgj6Aso02uqqzv26zh3Gqr4hYehYuPhEZFS0icmpYJQQOfIF0uSy8qWq+q2I+soWWrW6At5exmrjIOFTUbOxC0kplFA0AEYM5GAAZqkILJaPQojQHpEZjF5vE3ixvr8ASx1nlNkVdog-NoPANnD0XMZXC5DggKvpuho-AJXLptG51Mo7pDptE5nFFu9Pj8-oCPojeSwAArsFD2NIZLKo8SSLY7EqIXTGHH1fRDIb6PxGbSk7TKATdKz7WnqAxq3TMyZQtkvOFLfk85EOpF8qAisWsFZrYQbWUYhUIJUqhrq-Sa5Ta0nOWo0ZSa8z0kYjVzBUL3K2s56wzkIx2ugVOt2SyCsBhwBIYaX5P3bYqgUpBrQhtVhrU6KPOA0jC7qYnOa6NS0RTMwjnw-kMTicNDKVjAuJg-AQjNPUeve2fSfT5RV9G1zFlKyaVzGQb7ZqjXQWKMGSmWemXTqNVMTYer9nrrnxKczuicdgAG5AiCdCssub7Qh+dpfluv6wP+QEfLuNbyvWKiqDGxj4roGEnle-YdhSuhqPozQ4aoSb6EOjyQbaOYTj+XTwYBCJiAkABe7HsGAXRJMxAElmxnHcUxCH8D6aIoXWigqCcXTaNoxyjL4rh6Lqlw0IY2gYRczgNIY1HWlmY4bt+25-ix-JCVxYAUnxYkQGkHE2RS-HibkMqFPuAbnPJilqCpqm6KSKYGuYvT+P2LjaPUhkjlB9GboxFmIZ81ncZo9mAYJzkZSl7m+l5qEyWUcmGkpgVqQ4iAaMYNDWHUlxWAYGhxe+dHjkl076HOIGLrQLLtdmnVmWg+jIUV0mlLUvgeNpel6noyhGqSJzqJojJ6Iyp4XNobW0cNpmwa5CHAQuYGDQdJkwT+J2WVAE1ylNiCmM4VS6AEaq+BUSquKtOEUsqKk9KoTSdOo+02odN3dSlrG5TxNBZQJjnpYjbneh51aTQeGhvThjJePoZ4pn91VlEqBrEhGOj9l4yhYZDxmfgix1w1ZCN2ZQGNOcJtn5ZjhVPbj6j4xoagCMT-ak6t-ZdPqi16aLxjGJqTNrtBrO3ezaUI5l3MObzNmaBjj3+mhCB4zQBMS1LoxuKt60Gkq+wq6M4b9OrCUjbB6i9ed4KXVD11a9O6hm95FvHBU9X1BY1j6Cr+q2OTa0bctdInr4pFq2mQfM5rDFhzr-ughdK5XSzRdoCbp1IRJnnCz52f1fSnbNGGFTtqnAOt8DvRgxGXsdUdP61-dNBo7xBvZajCOibPEfFdNGEUs0Esq3pWnOP9pg0NT2p050jN5xXwdV11Nc65PnNIzPKNG9xd0o0vz1lKv3R+NcWENJYO+p3LWMOhlpK2cCrXOr4aLn0LpfceqUb5831jzNGcCCqSRxj5D+69v5bz-o7Iw1sRiJ2TB7F86YILQMSjQXgeYEQ0JdMKUU4p0iZGyA3bGTco4fU0PULwoxegq3UNYVaRMPAniwrUaMV5RbD2hnQsAtD+T0MFB8d04ovSvwPMTVwPDehmB0RRawwie6S3qr2I0PRajHFkSHJRCiGF2MUUWVhjkyywArGwrGe5l5HG4U2PhBjBHGLaCcfY3RyQpn1JLUGNjaAsKyK48slZ2HeLfuUSo1Q-B1AaE0Fo5MRhhQsLhKK+JJaxMnsWRyGiUlSQPGoDJKlJGqlyWTNofgaD6RuDSQwaoM4hDTJQTgvB4B5HzmuIW5sSoAFp-5tBmVoR8izFknCoqfChBcwRMBYBMyOJUDCrRcO4GKRg1C9B7CYcpiUdk+PaMTTS-htImFUk0U8rSVAnlxLUBSPRlQ-VWZAoyGsqEUHoNct+jI3rHGeU87SK18lKmthUH5nYLhNEuSNJxYKtHWHudCoksKRikn2GvL6uS1Q0nWui0yTiCyujUVigMpouhQsefil5qh1IGh0BhUJRMIwWjWVAguVCaVOKFJUhlFtoyaD6M+PocYAYpzaDFVQHTpYuxVrSD6VKvyiocVAAAoqsSVJVpW4jldGYm+wlWIGjFyoMbgKjWABjq0OM4TWlFUjiDQCkKJDGVDk0kpE3q+AuL4PoRg1QQ0FYC72o9zIYw9SoIYqrrAnl-qeSW2kowUX3r0FMp4RjLTVK66uC9UpJoQKrVVPrtJYUTj0RopJRaVA6GAwRKZNSuH+eQoVQKfbJX4vDPmyhK0Bo8PeP1DbA3k2jF0AxBaXbFrIWMuNMM4J111iOu+ib0GcJKvqY4E7fX1oDU28mMVnZmHFjoxSEDe2xpHuu8tw6bLlsgJWiMMZi2CL1InPhUYVaxlGM0eo-gLBXlLZfF9HM+b6DHT0Y9db-WNo5RexSsZiLdtUsSI0TIY3xSfW6mDW6XI7ocp+yWXRa1TrPWhtpnZujnBuHGeMLgoOjRIwgsju7G6TOmoyY8fhpE4UGDog45MAh1UGHSIRKKzB7QI0NWx0Hr4oIQzKydp7UOkhwtR4hh6TCg06Bx2CXGUHkdnpRo9NHtMzraOYLlbsc5Blw6Zwdm7uN5V4xw-jKhGSVE6MtQmksKi0iJb2fexpjiqj8D21dRHq7wb3X59oGGWXXGeXCkJ0VrZ0maH2CoID3Owx86kupksDTRiTvibtotSL-S8B0t2MU9AmGIopgFhG5FJZ1pWhoBoMswvZatephpCQqSwlYFdZ9hUDtK55qe-W3C4tZVlwlJiKRCJGG4TVEbXAlbGmp+elmUaVuIpCh5mWCX0ZUJTeqYDNRPkUod5+r6RIC0rSqqLBg9IBDjE0CTISPp1TvU0IRh7GSveO3B5b7ghtsuy+hIY3Rr2bV2wYfDXXlMX1Gm92DZHkYfpS7shs5RVvXZGwAjCmlHl9EGAFvo0Oh0E6fp9knNyYruFldGTsDNsPGFlk1yWWrGiqw6AK7HlcYF45h8bOHFPhtI7KMTCkJhRYmD-aeIeSnpdULZiz0jeUicQHO+ThH63btlCdlULeaptKbXi7N-t8ajuG682AVBpuOdvy51UVWfYlQM5tdbxO1tyj7DMPV+o0apeUPmzXT92iPCDFVoWsBAWDn4jywpXwLgiv0kO17z9m96r5f8Gm9XOoe5Ne22DNr2vOsPu6yp0acDtk+7qYnN65hHvp4asFVOY2FITd8FNk+ce5uu-b6znin7TSVF72npUGeTj-VMXX3bRJ9tF7lx9k38-VYp77yvgfu8uyPepjnXf7up7s746T5N3bYzdtqtYe8-0Plg5+ZDrHzeccy6+x762Tz5XjH7L5YRn6pyyqo6gzo54TWK67x7T7AFcxla1I+RCIUhL6Jyn6Z7U7Mp04VB6ShIzbrIu7roz5G78zoEYIWzlC0j7ymDNSuz+BmBC5cqahXhi5hjeA36LZ6ygGL6p64GQH4EhKq5aDWCdjKhxja6x7-564J5UEe5IIUad6YFH44H97iH+YEL9D6T4jiwvZIFT6UHAHF4aH0FuCqqVa+BbTdKD4hINDSYR4dB4wdCUqmEUHyKYpWElSdxUx6A3BEi4GKSOxxhaBFLEqniXpO7kFrq+H6rUL2IqJuhMKVqGA0j7zBH85hFA53Y3D7wBD0z6hXgMEcbKKFgpFioSr+GlBi51T04qwKTcHRi7w4ggJFLcrEqqCVGpHVFVGuhGre4P43KNG4hKjKh6C-bKDr7zqGJgJdxGB9HeFQTxLE5jFvz7L5JCJ5pdJ0j9D9h6jlJeibG+aP4UxbYMyPhUjEKgxBr8qaTVA9g-wXb9JBBAA */\n  id: 'gameStateMachine',\n  initial: 'starting',\n  states: {\n    starting: {\n      id: 'starting',\n      on: {\n        \"loaded\": \"running\"\n      }\n    },\n    running: {\n      initial: \"briefing\",\n      on: {\n        \"pause\": \"paused\",\n        \"end\": \"ended\"\n      },\n      states: {\n        hist: {\n          type: 'history',\n          history: 'deep'\n        },\n        briefing: {\n          id: 'briefing',\n          initial: 'briefingPlay',\n          states: {\n            briefingPlay: {\n              on: {\n                \"pause\": \"briefingPaused\",\n                \"end\": \"briefingEnd\"\n              }\n            },\n            briefingPaused: {\n              on: {\n                \"resume\": \"briefingPlay\"\n              }\n            },\n            briefingEnd: {\n              type: \"final\"\n            }\n          },\n          onDone: {\n            target: \"room1\"\n          }\n        },\n        room1: {\n          id: 'room1',\n          initial: \"solving\",\n          onDone: 'room2',\n          states: {\n            \"solved\": {\n              type: \"final\"\n            },\n            \"solving\": {\n              type: 'parallel',\n              onDone: \"solved\",\n              states: {\n                puzzle1: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle1.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle2: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle2.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle3: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle3.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        room2: {\n          id: 'room2',\n          initial: \"solving\",\n          onDone: 'room3',\n          states: {\n            \"solved\": {\n              type: \"final\"\n            },\n            \"solving\": {\n              type: 'parallel',\n              onDone: \"solved\",\n              states: {\n                puzzle1: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle1.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle2: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle2.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle3: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle3.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        room3: {\n          id: 'room3',\n          initial: \"solving\",\n          onDone: 'debriefing',\n          states: {\n            \"solved\": {\n              type: \"final\"\n            },\n            \"solving\": {\n              type: 'parallel',\n              onDone: \"solved\",\n              states: {\n                puzzle1: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle1.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle2: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle2.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                },\n                puzzle3: {\n                  initial: 'unsolved',\n                  states: {\n                    \"unsolved\": {\n                      on: {\n                        \"puzzle3.solved\": \"solved\"\n                      }\n                    },\n                    \"solved\": {\n                      type: \"final\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        },\n        debriefing: {\n          id: 'debriefing',\n          type: 'final',\n          initial: 'debriefingPlay',\n          states: {\n            debriefingPlay: {\n              on: {\n                \"pause\": \"debriefingPaused\",\n                \"end\": \"debriefingEnd\"\n              }\n            },\n            debriefingPaused: {\n              on: {\n                \"resume\": \"debriefingPlay\"\n              }\n            },\n            debriefingEnd: {\n              type: \"final\"\n            }\n          }\n        }\n      }\n    },\n    paused: {\n      on: {\n        \"resume\": \"running.hist\",\n        \"end\": \"ended\"\n      }\n    },\n    ended: {\n      type: \"final\"\n    }\n  }\n});\n\n/**\n * A system for managing the global game state machine.\n * If you add any actions that the game states rely on, you must add them using \"addAction\" to the system\n * before running \"start()\".\n */\nAFRAME.registerSystem(\"game-state\", {\n  schema: {},\n  init: function init() {\n    this.service = null;\n    this.roomElements = [];\n    this.puzzleElements = [];\n    this.actions = {};\n    // this.context = {};\n    this.gameStateMachineDefinition = {};\n    this.manager = null;\n  },\n  pause: function pause() {\n    // NO OP for now.\n  },\n  play: function play() {\n    // NO OP for now.\n  },\n  addAction: function addAction(actionName, actionFn) {\n    // Add an action to the game state machine.\n    // this.actions.push({\"name\": actionName, \"fn\": actionFn});\n    this.actions[actionName] = actionFn;\n  },\n  addActions: function addActions(actions) {\n    // Add multiple actions to the game state machine.\n    var keys = Object.keys(actions);\n    for (var i = 0; i < keys.length; i++) {\n      this.addAction(keys[i], actions[keys[i]]);\n    }\n    // // Add an action to the game state machine.\n    // // this.actions.push({\"name\": actionName, \"fn\": actionFn});\n    // this.gameStateMachine.actions[actionName] = actionFn;\n  },\n  addRoom: function addRoom(roomName, roomElement, actions) {\n    // Add a room to the state machine.\n    // This effectively adds a state to the game state machine which is defined in order by the index.\n    this.roomElements.push({\n      \"name\": roomName,\n      \"el\": roomElement,\n      \"onDone\": actions\n    });\n  },\n  addPuzzle: function addPuzzle(roomName, puzzleName, puzzleElement, actions) {\n    // Add a puzzle to a room in the state machine.\n    // This effectively adds a state to the game state machine which is defined in order by the index.\n    // this.gameStateMachineDefinition[roomName].states.solving.states[puzzleName] = {\n    //     \"id\": puzzleName,\n    //     \"initial\": \"unsolved\",\n    //     \"states\": {\n    //         \"unsolved\": {\n    //             \"on\": {\n    //                 [`${puzzleName}.solved`]: \"solved\"\n    //             }\n    //         },\n    //         \"solved\": {\n    //             \"type\": \"final\"\n    //         }\n    //     }\n    // }\n    this.puzzleElements.push({\n      \"room\": roomName,\n      \"name\": puzzleName,\n      \"el\": puzzleElement,\n      \"actions\": actions\n    });\n  },\n  start: function start() {\n    var _this = this;\n    // Create the game state machine based on the baseGameLoop.\n    // if (!this.manager) {\n    //     throw new Error(\"A game state manager must be defined in the scene.\");\n    // }\n    this.gameStateMachine = _objectSpread({}, _base_game_loop_json__WEBPACK_IMPORTED_MODULE_0__);\n    // Build the game state machine definition from the room elements.\n    this._buildRoomElements();\n    this._buildPuzzleElements();\n    this.gameStateMachine.states.running.states = _objectSpread(_objectSpread({}, this.gameStateMachine.states.running.states), this.gameStateMachineDefinition);\n    // Create an actor from the state machine definition.\n    this.service = (0,xstate__WEBPACK_IMPORTED_MODULE_2__.A)((0,xstate__WEBPACK_IMPORTED_MODULE_1__.createMachine)(this.gameStateMachine, {\n      actions: this.actions\n    }));\n    // Create subscriptions that allow updates when game state machine updates.\n    this.service.subscribe(function (state) {\n      // console.log(\"Game State Machine Updated\", state.value);\n      _this.el.emit(\"game-state-updated\", state);\n    });\n    this.el.addEventListener(\"game-state-event\", function (event) {\n      _this.service.send({\n        \"type\": event.detail\n      });\n    });\n    this.service.start();\n  },\n  _buildRoomElements: function _buildRoomElements() {\n    // For each room element, add a state to the game state machine.\n    console.log(\"Room Elements\", this.roomElements);\n    this.gameStateMachine.states.running.states.briefing.onDone = {\n      target: this.roomElements[0].name\n      // actions: ({context, event}) => {\n      //     console.log(`ctx = ${JSON.stringify(context)} and evt = ${JSON.stringify(event)}`);\n      //     this.el.emit(\"game-notify-event\", event)\n      // }\n    };\n    for (var i = 0; i < this.roomElements.length; i++) {\n      this.gameStateMachineDefinition[this.roomElements[i].name] = {\n        \"id\": this.roomElements[i].name,\n        \"initial\": \"solving\",\n        \"onDone\": {\n          \"target\": this.roomElements[i + 1] ? this.roomElements[i + 1].name : \"debriefing\",\n          \"actions\": this.roomElements[i].onDone || \"\"\n        },\n        \"states\": {\n          \"solved\": {\n            \"type\": \"final\"\n          },\n          \"solving\": {\n            \"type\": \"parallel\",\n            \"onDone\": {\n              \"target\": \"solved\"\n              // \"actions\": ({context, event}) => {\n              //     console.log(`ctx = ${JSON.stringify(context)} and evt = ${JSON.stringify(event)}`);                                \n              //     this.el.emit(\"game-notify-event\", event)\n              // }\n            },\n            \"states\": {}\n          }\n        }\n      };\n    }\n  },\n  _buildPuzzleElements: function _buildPuzzleElements() {\n    for (var i = 0; i < this.puzzleElements.length; i++) {\n      this.gameStateMachineDefinition[this.puzzleElements[i].room].states.solving.states[this.puzzleElements[i].name] = {\n        \"initial\": \"unsolved\",\n        \"states\": {\n          \"unsolved\": {\n            \"on\": _defineProperty({}, \"\".concat(this.puzzleElements[i].name, \".solved\"), \"solved\")\n          },\n          \"solved\": {\n            \"type\": \"final\"\n          }\n        }\n      };\n    }\n  }\n});\nAFRAME.registerComponent(\"remove-on-game-event\", {\n  schema: {\n    state: {\n      type: \"string\",\n      required: true\n    }\n  },\n  init: function init() {\n    var _this2 = this;\n    this.el.sceneEl.addEventListener(\"game-notify-event\", function (event) {\n      if (event.detail.type == _this2.data.state) {\n        _this2.el.remove();\n      }\n    });\n  }\n});\nAFRAME.registerComponent(\"disable-movement-in-states\", {\n  schema: {\n    \"states\": {\n      type: \"array\",\n      required: true\n    }\n  },\n  init: function init() {\n    var _this3 = this;\n    console.log(\"States to disable movement in\", this.data.states);\n    this.el.sceneEl.addEventListener(\"game-state-updated\", function (event) {\n      if (_this3.data.states.includes(event.detail.value)) {\n        _this3.previousState = _this3.el.getAttribute(\"motionControls\");\n        _this3.el.setAttribute(\"motionControls\", \"enabled\", false);\n      } else {\n        if (_this3.previousState) {\n          _this3.el.setAttribute(\"motionControls\", _this3.previousState);\n          _this3.previousState = null;\n        }\n      }\n    });\n  }\n});\nAFRAME.registerComponent(\"show-in-state\", {\n  schema: {\n    state: {\n      type: \"string\",\n      required: true\n    },\n    hideOtherwise: {\n      type: \"boolean\",\n      \"default\": false\n    }\n  },\n  init: function init() {\n    var _this4 = this;\n    this.el.sceneEl.addEventListener(\"game-state-updated\", function (event) {\n      console.log(_this4.el, \"game-state-updated in show-in-state\", event.detail.value);\n      if (event.detail.matches(_this4.data.state)) {\n        _this4.el.setAttribute(\"visible\", true);\n      } else if (_this4.data.hideOtherwise && _this4.el.getAttribute(\"visible\")) {\n        _this4.el.setAttribute(\"visible\", false);\n      }\n    });\n  }\n});\n/**\n * Hides the given gltf part when a game event occurs.\n */\nAFRAME.registerComponent(\"hide-part-on-game-event\", {\n  multiple: true,\n  schema: {\n    state: {\n      type: \"string\",\n      required: true\n    },\n    parts: {\n      \"default\": []\n    }\n  },\n  init: function init() {\n    var _this5 = this;\n    // var self = this;\n    // this.el.addEventListener('model-loaded', () => {\n    // console.log(this.el.components[\"gltf-model\"].model.getObjectByName(\"apartmentDoor001\"));\n    // var model = this.el.components[\"gltf-model\"].model;\n    // var parts = this.data.parts;\n    // console.log(parts);\n    // for (var i = 0; i < parts.length; i++) {\n    //   var part = model.getObjectByName(parts[i]);\n    //   if (part) {\n    //     // part.visible = false;\n    //   }\n    // }\n    // });\n\n    document.querySelector(\"a-scene\").addEventListener(\"game-notify-event\", function (event) {\n      console.log(_this5.data.parts);\n      console.log(_this5.data.state);\n      if (event.detail.type == _this5.data.state) {\n        console.log(\"Game-notify-event in hide-on-game-event\", event.detail);\n        var model = _this5.el.components[\"gltf-model\"].model;\n        var parts = _this5.data.parts;\n        for (var i = 0; i < parts.length; i++) {\n          var part = model.getObjectByName(parts[i]);\n          if (part) {\n            part.visible = false;\n          }\n        }\n      }\n    });\n  }\n});\n/**\n * Listens for a games state (specified by the state attribute) and then triggers\n * the animation specified by the action attribute.\n * \n */\nAFRAME.registerComponent(\"animate-on-game-event\", {\n  multiple: true,\n  schema: {\n    state: {\n      type: \"string\",\n      required: true\n    },\n    action: {\n      type: \"string\",\n      required: true\n    }\n    // target: {type: \"selector\", required: true},\n  },\n  init: function init() {\n    var _this6 = this;\n    console.log(\"event = \", this.data.state, \" and action = \", this.data.action);\n    // Listen on the scene for game state updates.\n    document.querySelector(\"a-scene\").addEventListener(\"game-notify-event\", function (event) {\n      // console.log(\"Listening for game state event\", event.detail);\n      if (event.detail.type == _this6.data.state) {\n        console.log(\"Animation on game event triggered by event\", event.detail);\n        _this6.el.setAttribute(\"animation-mixer\", {\n          \"clip\": _this6.data.action,\n          \"loop\": \"once\",\n          \"clampWhenFinished\": \"true\"\n        });\n        // this.data.target.emit(this.data.action);\n      }\n      // });\n      console.log(\"Animation on game event triggered by event \".concat(JSON.stringify(event.detail)));\n      // this.el.addEventListener(\"game-state-updated\", (event) => {\n    });\n  }\n});\nAFRAME.registerComponent(\"game-state\", {\n  schema: {\n    name: {\n      type: \"string\",\n      required: true\n    },\n    type: {\n      type: \"string\",\n      oneOf: [\"room\", \"puzzle\"],\n      required: true\n    },\n    room: {\n      type: \"string\",\n      \"default\": \"\"\n    },\n    onDone: {\n      type: \"array\",\n      \"default\": []\n    }\n  },\n  init: function init() {\n    if (this.data.type == \"room\") {\n      // this.system = this.el.sceneEl.systems[\"game-state-machine\"];\n      this.system.addRoom(this.data.name, this.el, this.data.onDone);\n    }\n    ;\n    if (this.data.type == \"puzzle\") {\n      // this.system = this.el.sceneEl.systems[\"game-state-machine\"];\n      this.system.addPuzzle(this.data.room, this.data.name, this.el);\n    }\n    ;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTk5OS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7O0FBRUE7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2FmcmFtZS9nYW1lLXN0YXRlLW1hY2hpbmUuanM/NWNkMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQUZSQU1FICovXG5cbmltcG9ydCB7Y3JlYXRlTWFjaGluZSwgY3JlYXRlQWN0b3J9IGZyb20gJ3hzdGF0ZSc7XG5cbmltcG9ydCBiYXNlR2FtZUxvb3AgZnJvbSBcIi4vYmFzZS1nYW1lLWxvb3AuanNvblwiO1xuXG4vLyBFeGFtcGxlIGNvbXBsZXRlIGdhbWUgc3RhdGUgbWFjaGluZS5cbmNvbnN0IHNhbXBsZU1hY2hpbmUgPSBjcmVhdGVNYWNoaW5lKHtcbiAgICAvKiogQHhzdGF0ZS1sYXlvdXQgTjRJZ3BnSmc1bURPSUM1UlFJWUZzd0dVQXVMdGdGa1VCakFDd0VzQTdNQU9sbHdDZHNxb0JpQUd3SHNVSklCdEFBd0JkUktBQU9uV09XYWRLb2tBQTlFQVJnQ3NBWmhvQ0E3QUJZQVRPb0VCT0FhdDNydHg5UUJvUUFUeFVDQWJBQTRhRzFRSU92WHkxMTdPQUw1QmRxZ1lPSGlFSkJUVU5Bd0FycFNVTEt4aUtBbXdZSUlpU0NBU1VqSnllVW9JeXM2Nk5HNit5dVVDNnZxcTJyNTJqZ2o2QXNvMDJ1cXF6djI2emgzR3FyNGhZZWhZdVBoRVpGUzBpY21wWUpRUU9mSUYwdVN5OHFXcStxMkkrc29XV3JXNkF0NWV4bXJqSU9GVFViT3hDMGtwbEZBMEFFWU01R0FBWnFrSUxKYVBRb2pRSHBFWmpGNXZFM2l4dnI4QVN4MW5sTmtWZG9nLU5vUEFObkQwWE1aWEM1RGdnS3ZwdWhvLUFKWExwdEc1MU1vN3BEcHRFNW5GRnU5UGo4LW9DUG9qZVN3QUFyc0ZEMk5JWkxLbzhTU0xZN0VxSVhUR0hIMWZSREliNlB4R2JTazdUS0FUZEt6N1ducUF4cTNUTXlaUXRrdk9GTGZrODVFT3BGOHFBaXNXc0ZacllRYldVWWhVSUpVcWhycS1TYTVUYTBuT1dvMFpTYTh6MGtZalZ6QlVMM0syczU2d3prSXgydWdWT3QyU3lDc0Jod0JJWWFYNVAzYllxZ1VwQnJRaHRWaHJVNktQT0EwakM3cVluT2E2TlMwUlRNd2pudy1rTVRpY05ES1ZqQXVKZy1BUWpOUFVldmUyZlNmVDVSVjlHMXpGbEt5YVZ6R1FiN1pxalhRV0tNR1NtV2VtWFRxTlZNVFllcjlucnJueEtjenVpY2RnQUc1QWlDZENzc3ViN1FoK2RwZmx1djZ3UCtRRWZMdU5ieXZXS2lxREd4ajRyb0dFbmxlLVlkaFN1aHFQb3pRNGFvU2I2RU9qeVFiYU9ZVGorWFR3WUJDSmlBa0FCZTdIc0dBWFJKTXhBRWxteG5IY1V4Q0g4RDZhSW9YV2lncUNjWFRhTm94eWpMNHJoNkxxbHcwSVkyZ1lSY3pnTklZMUhXbG1ZNGJ0KzI1LWl4LUpDVnhZQVVueFlrUUdrSEUyUlMtSGlia01xRlB1QWJuUEppbHFDcHFtNktTS1lHdVl2VCtQMkxqYVBVaGtqbEI5R2JveEZtSVo4MW5jWm85bUFZSnprWlNsN20rbDVxRXlXVWNtR2twZ1ZxUTRpQWFNWU5EV0hVbHhXQVlHaHhlK2RIamtsMDc2SE9JR0xyUUxMdGRtblZtV2craklVVjBtbExVdmdlTnBlbDZub3loR3FTSnpxSm9qSjZJeXA0WE5vYlcwY05wbXdhNUNIQVF1WUdEUWRKa3dUK0oyV1ZBRTF5bE5pQ21NNFZTNkFFYXErQlVTcXVLdE9FVXNxS2s5S29UU2RPbyswMm9kTjNkU2xyRzVUeE5CWlFKam5wWWpibmVoNTFhVFFlR2h2VGhqSmVQb1o0cG45MVZsRXFCckVoR09qOWw0eWhZWkR4bWZnaXgxdzFaQ04yWlFHTk9jSnRuNVpqaFZQYmo2ajR4b2FnQ01ULWFrNnQtWmRQcWkxNmFMeGpHSnFUTnJ0QnJPM2V6YVVJNWwzTU9iek5tYUJqajMrbWhDQjR6UUJNUzFMb3h1S3Q2MEdrcSt3cTZNNGI5T3JDVWpiQjZpOWVkNEtYVkQxMWE5TzZobTk1RnZIQlU5WDFCWTFqNkNyK3EyT1RhMGJjdGRJbnI0cEZxMm1RZk01ckRGaHpyLXVnaGRLNVhTelJkb0NicDFJUkpubkN6NTJmMWZTbmJOR0dGVHRxbkFPdDhEdlJneEdYc2RVZFA2MS1kTkJvN3hCdlphakNPaWJQRWZGZE5HRVVzMEVzcTNwV25PUDlwZzBOVDJwMDUwak41eFh3ZFYxMU5jNjVQbk5JelBLTkc5eGQwbzB2ejFsS3YzUitOY1dFTkpZTytwM0xXTU9obHBLMmNDclhPcjRhTG4wTHBmY2VxVWI1ODMxanpOR2NDQ3FTUnhqNUQrNjl2NWJ6LW83SXcxc1JpSjJUQjdGODZZSUxRTVNqUVhnZVlFUTBKZE1LVVU0cDBpWkd5QTNiR1RjbzRmVTBQVUx3b3hlZ3EzVU5ZVmFSTVBBbml3clVhTVY1UmJEMmhuUXNBdEQrVDBNRkI4ZDA0b3ZTdndQTVRWd1BEZWhtQjBSUmF3d2llNlMzcXIySTBQUmFqSEZrU0hKUkNpR0YyTVVVV1Zoamt5eXdBckd3ckdlNWw1SEc0VTJQaEJqQkhHTGFDY2ZZM1J5UXBuMUpMVUdOamFBc0t5SzQ4c2xaMkhlTGZ1VVNvMVEtQjFBYUUwRm81TVJoaFFzTGhLSytKSmF4TW5zV1J5R2lVbFNRUEdvREpLbEpHcWx5V1ROb2ZnYUQ2UnVEU1F3YW9NNGhEVEpRVGd2QjRCNUh6bXVJVzVzU29BRnAtNXRCbVZvUjhpekZrbkNvcWZDaEJjd1JNQllCTXlPSlVEQ3JSY080R0tSZzFDOUI3Q1ljcGlVZGsrUGFNVFRTLWh0SW1GVWswVThyU1ZBbmx4TFVCU1BSbFEtVldaQW95R3NxRVVIb05jdCtqSTNySEdlVTg3U0sxOGxLbXRoVUg1bllMaE5FdVNOSnhZS3RIV0h1ZENva3NLUmlrbjJHdkw2dVMxUTBuV3VpMHlUaUN5dWpVVmlnTXBvdWhRc2VmaWw1cWgxSUdoMEJoVUpSTUl3V2pXVkFndVZDYVZPS0ZKVWhsRnRveWFENk0rUG9jWUFZcHphREZWUUhUcFl1eFZyU0Q2Vkt2eWlvY1ZBQUFvcXNTVkpWcFc0amxkR1ltK3dsV0lHakZ5b01iZ0tqV0FCanEwT000VFdsRlVqaURRQ2tLSkRHVkRrMGtwRTNxK0F1TDRQb1JnMVFRMEZZQzcybzl6SVl3OVNvSVlxcnJBbmwtcWVTVzJrb3dVWDNyMEZNcDRSakxUVks2NnVDOVVwSm9RS3JWVlBydEpZVVRqMFJvcEpSYVZBNkdBd1JLWk5TdUgrZVFvVlFLZmJKWDR2RFBteWhLMEJvOFBlUDFEYkEzazJqRjBBeEJhWGJGcklXTXVOTU00SjExMWlPdStpYjBHY0pLdnFZNEU3Zlgxb0RVMjhtTVZuWm1IRmpveFNFRGUyeHBIdXU4dHc2Ykxsc2dKV2lNTVppMkNMMUluUGhVWVZheGxHTTBlby1nTEJYbExaZkY5SE0rYjZESFQwWTlkYi1XTm81UmV4U3NaaUxkdFVzU0kwVElZM3hTZlc2bURXNlhJN29jcCt5V1hSYTFUclBXaHRwblp1am5CdUhHZU1MZ29PalJJd2dzanU3RzZUT21veVk4ZmhwRTRVR0RvZzQ1TUFoMVVHSFNJUktLekI3UUkwTld4MEhyNG9JUXpLeWRwN1VPa2h3dFI0aGg2VENnMDZCeDJDWEdVSGtkbnBSbzlOSHRNenJhT1lMbGJzYzVCbHc2WndkbTd1TjVWNHh3LWpLaEdTVkU2TXRRbWtzS2kwaUpiMmZleHBqaXFqOEQyMWRSSHE3d2IzWDU5b0dHV1hYR2VYQ2tKMFZyWjBtYUgyQ29JRDNPd3g4Nmt1cGtzRFRSaVR2aWJ0b3RTTC1TOEIwdDJNVTlBbUdJb3BnRmhHNUZKWjFwV2hvQm9Nc3d2WmF0ZXBocENRcVN3bFlGZFo5aFVEdEs1NXFlLVczQzR0WlZsd2xKaUtSQ0pHRzRUVkViWEFsYkdtcCtlbG1VYVZ1SXBDaDVtV0NYMFpVSlRlcVlETlJQa1VvZDUrcjZSSUMwclNxcUxCZzlJQkRqRTBDVElTUHAxVHZVMElSaDdHU3ZlTzNCNWI3Z2h0c3V5K2hJWTNScjJiVjJ3WWZEWFhsTVgxR205MkRaSGtZZnBTN3NoczVSVnZYWkd3QWpDbWxIbDlFR0FGdm8wT2gwRTZmcDlrbk55WXJ1RmxkR1RzRE5zUEdGbGsxeVdXckdpcXc2QUs3SGxjWUY0NWg4Yk9IRlBodEk3S01UQ2tKaFJZbUQtYWVJZVNucGRVTFppejBqZVVpY1FITytUaEg2M2J0bENkbFVMZWFwdEtiWGk3Ti10OGFqdUc2ODJBVkJwdU9kdnk1MVVWV2ZZbFFNNXRkYnhPMXR5ajdETVBWK28wYXBlVVBtelhUOTJpUENERlZvV3NCQVdEbjRqeXdwWHdMZ2l2MGtPMTd6OW05NnI1ZjhHbTlYT29lNU5lMjJETnIydk9zUHU2eXAwYWNEdGsrN3FZbk42NWhIdnA0YXNGVk9ZMkZJVGQ4Rk5rK2NlNXV1LWI2em5pbjdUU1ZGNzJucFVHZVRqLVZNWFgzYlJKOXRGN2x4OWszOC1WWXA3N3l2Z2Z1OHV5UGVwam5YZjd1cDdzNzQ2VDVOM2JZemR0cXRZZTgtMFBsZzUrWkRySHplY2N5Nit4NzYyVHo1WGpIN0w1WVJuNnB5eXFvNmd6bzU0VFdLNjd4N1Q3QUZjeGxhMUkrUkNJVWhMNkp5bjZaN1U3TXAwNFZCNlNoSXpickl1N3JvejVHNzh6b0VZSVd6bEMwajd5bUROU3V6K0JtQkM1Y3FhaFhoaTVoamVBMzZMWjZ5Z0dMNnA2NEdRSDRFaEtxNWFEV0NkaktoeGphNng3LTU2NEo1VUVlNUlJVWFkNllGSDQ0SDk3aUgrWUVMOUQ2VDRqaXd2WklGVDZVSEFIRjRhSDBGdUNxcVZhK0JiVGRLRDRoSU5EU1lSNGRCNHdkQ1VxbUVVSHlLWXBXRWxTZHhVeDZBM0JFaTRHS1NPeHhoYUJGTEVxbmlYcE83a0ZycStINnJVTDJJcUp1aE1LVnFHQTBqN3pCSDg1aEZBNTNZM0Q3d0JEMHo2aFhnTUVjYktLRmdwRmlvU3IrR2xCaTUxVDA0cXdLVGNIUmk3dzRnZ0pGTGNyRXFxQ1ZHcEhWRlZHdWhHcmU0UDQzS05HNGhLaktoNkMtYktEcjd6cUdKZ0pkeEdCOUhlRlFUeExFNWpGdno3TDVKQ0o1cGRKMGo5RDloNmpsSmVpYkcrYVA0VXhiWU15UGhVakVLZ3hCcjhxYVRWQTlnLXdYYjlKQkJBQSAqL1xuICAgIGlkOiAnZ2FtZVN0YXRlTWFjaGluZScsXG4gICAgaW5pdGlhbDogJ3N0YXJ0aW5nJyxcbiAgICBzdGF0ZXM6IHtcbiAgICAgICAgc3RhcnRpbmc6IHtcbiAgICAgICAgICAgIGlkOiAnc3RhcnRpbmcnLFxuICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICBcImxvYWRlZFwiOiBcInJ1bm5pbmdcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBydW5uaW5nOiB7XG4gICAgICAgICAgICBpbml0aWFsOiBcImJyaWVmaW5nXCIsXG4gICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgIFwicGF1c2VcIjogXCJwYXVzZWRcIixcbiAgICAgICAgICAgICAgICBcImVuZFwiOiBcImVuZGVkXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICBoaXN0OiB7IFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaGlzdG9yeScsXG4gICAgICAgICAgICAgICAgICAgIGhpc3Rvcnk6ICdkZWVwJywgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYnJpZWZpbmc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdicmllZmluZycsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICdicmllZmluZ1BsYXknLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyaWVmaW5nUGxheToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGF1c2VcIjogXCJicmllZmluZ1BhdXNlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuZFwiOiBcImJyaWVmaW5nRW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJpZWZpbmdQYXVzZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJlc3VtZVwiOiBcImJyaWVmaW5nUGxheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBicmllZmluZ0VuZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJyb29tMVwiLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgXG4gICAgICAgICAgICAgICAgcm9vbTE6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdyb29tMScsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw6IFwic29sdmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBvbkRvbmU6ICdyb29tMicsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmluZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3BhcmFsbGVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRvbmU6IFwic29sdmVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1enpsZTE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICd1bnNvbHZlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVuc29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHV6emxlMS5zb2x2ZWRcIjogXCJzb2x2ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHV6emxlMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogJ3Vuc29sdmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidW5zb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwdXp6bGUyLnNvbHZlZFwiOiBcInNvbHZlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXp6bGUzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiAndW5zb2x2ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1bnNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB1enpsZTMuc29sdmVkXCI6IFwic29sdmVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZpbmFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByb29tMjoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3Jvb20yJyxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogXCJzb2x2aW5nXCIsXG4gICAgICAgICAgICAgICAgICAgIG9uRG9uZTogJ3Jvb20zJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2aW5nXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGFyYWxsZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRG9uZTogXCJzb2x2ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHV6emxlMToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogJ3Vuc29sdmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidW5zb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwdXp6bGUxLnNvbHZlZFwiOiBcInNvbHZlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXp6bGUyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiAndW5zb2x2ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1bnNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB1enpsZTIuc29sdmVkXCI6IFwic29sdmVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZpbmFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1enpsZTM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICd1bnNvbHZlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVuc29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHV6emxlMy5zb2x2ZWRcIjogXCJzb2x2ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJvb20zOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAncm9vbTMnLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiBcInNvbHZpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgb25Eb25lOiAnZGVicmllZmluZycsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmluZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3BhcmFsbGVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRvbmU6IFwic29sdmVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1enpsZTE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICd1bnNvbHZlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInVuc29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHV6emxlMS5zb2x2ZWRcIjogXCJzb2x2ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHV6emxlMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogJ3Vuc29sdmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidW5zb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwdXp6bGUyLnNvbHZlZFwiOiBcInNvbHZlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic29sdmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXp6bGUzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiAndW5zb2x2ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ1bnNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInB1enpsZTMuc29sdmVkXCI6IFwic29sdmVkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZpbmFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWJyaWVmaW5nOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnZGVicmllZmluZycsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaW5hbCcsXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw6ICdkZWJyaWVmaW5nUGxheScsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVicmllZmluZ1BsYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBhdXNlXCI6IFwiZGVicmllZmluZ1BhdXNlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuZFwiOiBcImRlYnJpZWZpbmdFbmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJyaWVmaW5nUGF1c2VkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyZXN1bWVcIjogXCJkZWJyaWVmaW5nUGxheVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJyaWVmaW5nRW5kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSwgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwYXVzZWQ6IHtcbiAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgXCJyZXN1bWVcIjogXCJydW5uaW5nLmhpc3RcIixcbiAgICAgICAgICAgICAgICBcImVuZFwiOiBcImVuZGVkXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW5kZWQ6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZmluYWxcIlxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8qKlxuICogQSBzeXN0ZW0gZm9yIG1hbmFnaW5nIHRoZSBnbG9iYWwgZ2FtZSBzdGF0ZSBtYWNoaW5lLlxuICogSWYgeW91IGFkZCBhbnkgYWN0aW9ucyB0aGF0IHRoZSBnYW1lIHN0YXRlcyByZWx5IG9uLCB5b3UgbXVzdCBhZGQgdGhlbSB1c2luZyBcImFkZEFjdGlvblwiIHRvIHRoZSBzeXN0ZW1cbiAqIGJlZm9yZSBydW5uaW5nIFwic3RhcnQoKVwiLlxuICovXG5BRlJBTUUucmVnaXN0ZXJTeXN0ZW0oXCJnYW1lLXN0YXRlXCIsIHtcbiAgICBzY2hlbWE6IHtcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5yb29tRWxlbWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5wdXp6bGVFbGVtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmFjdGlvbnMgPSB7fTtcbiAgICAgICAgLy8gdGhpcy5jb250ZXh0ID0ge307XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlTWFjaGluZURlZmluaXRpb24gPSB7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubWFuYWdlciA9IG51bGw7XG4gICAgfSxcbiAgICBwYXVzZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBOTyBPUCBmb3Igbm93LlxuICAgIH0sXG4gICAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBOTyBPUCBmb3Igbm93LlxuICAgIH0sXG4gICAgYWRkQWN0aW9uOiBmdW5jdGlvbihhY3Rpb25OYW1lLCBhY3Rpb25Gbikge1xuICAgICAgICAvLyBBZGQgYW4gYWN0aW9uIHRvIHRoZSBnYW1lIHN0YXRlIG1hY2hpbmUuXG4gICAgICAgIC8vIHRoaXMuYWN0aW9ucy5wdXNoKHtcIm5hbWVcIjogYWN0aW9uTmFtZSwgXCJmblwiOiBhY3Rpb25Gbn0pO1xuICAgICAgICB0aGlzLmFjdGlvbnNbYWN0aW9uTmFtZV0gPSBhY3Rpb25GbjtcbiAgICB9LFxuICAgIGFkZEFjdGlvbnM6IGZ1bmN0aW9uKGFjdGlvbnMpIHtcbiAgICAgICAgLy8gQWRkIG11bHRpcGxlIGFjdGlvbnMgdG8gdGhlIGdhbWUgc3RhdGUgbWFjaGluZS5cbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhY3Rpb25zKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAgOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hZGRBY3Rpb24oa2V5c1tpXSwgYWN0aW9uc1trZXlzW2ldXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gLy8gQWRkIGFuIGFjdGlvbiB0byB0aGUgZ2FtZSBzdGF0ZSBtYWNoaW5lLlxuICAgICAgICAvLyAvLyB0aGlzLmFjdGlvbnMucHVzaCh7XCJuYW1lXCI6IGFjdGlvbk5hbWUsIFwiZm5cIjogYWN0aW9uRm59KTtcbiAgICAgICAgLy8gdGhpcy5nYW1lU3RhdGVNYWNoaW5lLmFjdGlvbnNbYWN0aW9uTmFtZV0gPSBhY3Rpb25GbjtcbiAgICB9LFxuICAgIGFkZFJvb206IGZ1bmN0aW9uKHJvb21OYW1lLCByb29tRWxlbWVudCwgYWN0aW9ucykge1xuICAgICAgICAvLyBBZGQgYSByb29tIHRvIHRoZSBzdGF0ZSBtYWNoaW5lLlxuICAgICAgICAvLyBUaGlzIGVmZmVjdGl2ZWx5IGFkZHMgYSBzdGF0ZSB0byB0aGUgZ2FtZSBzdGF0ZSBtYWNoaW5lIHdoaWNoIGlzIGRlZmluZWQgaW4gb3JkZXIgYnkgdGhlIGluZGV4LlxuICAgICAgICB0aGlzLnJvb21FbGVtZW50cy5wdXNoKHtcIm5hbWVcIjogcm9vbU5hbWUsIFwiZWxcIjogcm9vbUVsZW1lbnQsIFwib25Eb25lXCI6IGFjdGlvbnN9KTtcbiAgICB9LFxuICAgIGFkZFB1enpsZTogZnVuY3Rpb24ocm9vbU5hbWUsIHB1enpsZU5hbWUsIHB1enpsZUVsZW1lbnQsIGFjdGlvbnMpIHtcbiAgICAgICAgLy8gQWRkIGEgcHV6emxlIHRvIGEgcm9vbSBpbiB0aGUgc3RhdGUgbWFjaGluZS5cbiAgICAgICAgLy8gVGhpcyBlZmZlY3RpdmVseSBhZGRzIGEgc3RhdGUgdG8gdGhlIGdhbWUgc3RhdGUgbWFjaGluZSB3aGljaCBpcyBkZWZpbmVkIGluIG9yZGVyIGJ5IHRoZSBpbmRleC5cbiAgICAgICAgLy8gdGhpcy5nYW1lU3RhdGVNYWNoaW5lRGVmaW5pdGlvbltyb29tTmFtZV0uc3RhdGVzLnNvbHZpbmcuc3RhdGVzW3B1enpsZU5hbWVdID0ge1xuICAgICAgICAvLyAgICAgXCJpZFwiOiBwdXp6bGVOYW1lLFxuICAgICAgICAvLyAgICAgXCJpbml0aWFsXCI6IFwidW5zb2x2ZWRcIixcbiAgICAgICAgLy8gICAgIFwic3RhdGVzXCI6IHtcbiAgICAgICAgLy8gICAgICAgICBcInVuc29sdmVkXCI6IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgXCJvblwiOiB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBbYCR7cHV6emxlTmFtZX0uc29sdmVkYF06IFwic29sdmVkXCJcbiAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgIH0sXG4gICAgICAgIC8vICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAvLyAgICAgICAgICAgICBcInR5cGVcIjogXCJmaW5hbFwiXG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9XG4gICAgICAgIHRoaXMucHV6emxlRWxlbWVudHMucHVzaCh7XCJyb29tXCI6IHJvb21OYW1lLCBcIm5hbWVcIjogcHV6emxlTmFtZSwgXCJlbFwiOiBwdXp6bGVFbGVtZW50LCBcImFjdGlvbnNcIjogYWN0aW9uc30pO1xuICAgIH0sXG4gICAgc3RhcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBnYW1lIHN0YXRlIG1hY2hpbmUgYmFzZWQgb24gdGhlIGJhc2VHYW1lTG9vcC5cbiAgICAgICAgLy8gaWYgKCF0aGlzLm1hbmFnZXIpIHtcbiAgICAgICAgLy8gICAgIHRocm93IG5ldyBFcnJvcihcIkEgZ2FtZSBzdGF0ZSBtYW5hZ2VyIG11c3QgYmUgZGVmaW5lZCBpbiB0aGUgc2NlbmUuXCIpO1xuICAgICAgICAvLyB9XG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlTWFjaGluZSA9IHsuLi5iYXNlR2FtZUxvb3B9O1xuICAgICAgICAvLyBCdWlsZCB0aGUgZ2FtZSBzdGF0ZSBtYWNoaW5lIGRlZmluaXRpb24gZnJvbSB0aGUgcm9vbSBlbGVtZW50cy5cbiAgICAgICAgdGhpcy5fYnVpbGRSb29tRWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5fYnVpbGRQdXp6bGVFbGVtZW50cygpO1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZU1hY2hpbmUuc3RhdGVzLnJ1bm5pbmcuc3RhdGVzID0gey4uLnRoaXMuZ2FtZVN0YXRlTWFjaGluZS5zdGF0ZXMucnVubmluZy5zdGF0ZXMsIC4uLnRoaXMuZ2FtZVN0YXRlTWFjaGluZURlZmluaXRpb259O1xuICAgICAgICAvLyBDcmVhdGUgYW4gYWN0b3IgZnJvbSB0aGUgc3RhdGUgbWFjaGluZSBkZWZpbml0aW9uLlxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBjcmVhdGVBY3RvcihjcmVhdGVNYWNoaW5lKHRoaXMuZ2FtZVN0YXRlTWFjaGluZSwge1xuICAgICAgICAgICAgYWN0aW9uczogdGhpcy5hY3Rpb25zXG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gQ3JlYXRlIHN1YnNjcmlwdGlvbnMgdGhhdCBhbGxvdyB1cGRhdGVzIHdoZW4gZ2FtZSBzdGF0ZSBtYWNoaW5lIHVwZGF0ZXMuXG4gICAgICAgIHRoaXMuc2VydmljZS5zdWJzY3JpYmUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkdhbWUgU3RhdGUgTWFjaGluZSBVcGRhdGVkXCIsIHN0YXRlLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuZWwuZW1pdChcImdhbWUtc3RhdGUtdXBkYXRlZFwiLCBzdGF0ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lLXN0YXRlLWV2ZW50XCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlLnNlbmQoe1widHlwZVwiOiBldmVudC5kZXRhaWx9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VydmljZS5zdGFydCgpO1xuICAgIH0sXG4gICAgX2J1aWxkUm9vbUVsZW1lbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gRm9yIGVhY2ggcm9vbSBlbGVtZW50LCBhZGQgYSBzdGF0ZSB0byB0aGUgZ2FtZSBzdGF0ZSBtYWNoaW5lLlxuICAgICAgICBjb25zb2xlLmxvZyhcIlJvb20gRWxlbWVudHNcIiwgdGhpcy5yb29tRWxlbWVudHMpO1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZU1hY2hpbmUuc3RhdGVzLnJ1bm5pbmcuc3RhdGVzLmJyaWVmaW5nLm9uRG9uZSA9IHtcbiAgICAgICAgICAgIHRhcmdldDogdGhpcy5yb29tRWxlbWVudHNbMF0ubmFtZVxuICAgICAgICAgICAgLy8gYWN0aW9uczogKHtjb250ZXh0LCBldmVudH0pID0+IHtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhgY3R4ID0gJHtKU09OLnN0cmluZ2lmeShjb250ZXh0KX0gYW5kIGV2dCA9ICR7SlNPTi5zdHJpbmdpZnkoZXZlbnQpfWApO1xuICAgICAgICAgICAgLy8gICAgIHRoaXMuZWwuZW1pdChcImdhbWUtbm90aWZ5LWV2ZW50XCIsIGV2ZW50KVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvb21FbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5nYW1lU3RhdGVNYWNoaW5lRGVmaW5pdGlvblt0aGlzLnJvb21FbGVtZW50c1tpXS5uYW1lXSA9IHtcbiAgICAgICAgICAgICAgICBcImlkXCI6IHRoaXMucm9vbUVsZW1lbnRzW2ldLm5hbWUsXG4gICAgICAgICAgICAgICAgXCJpbml0aWFsXCI6IFwic29sdmluZ1wiLFxuICAgICAgICAgICAgICAgIFwib25Eb25lXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJ0YXJnZXRcIjogdGhpcy5yb29tRWxlbWVudHNbaSsxXSA/IHRoaXMucm9vbUVsZW1lbnRzW2krMV0ubmFtZSA6IFwiZGVicmllZmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICBcImFjdGlvbnNcIjogdGhpcy5yb29tRWxlbWVudHNbaV0ub25Eb25lIHx8IFwiXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic3RhdGVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJzb2x2ZWRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiZmluYWxcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcInNvbHZpbmdcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwicGFyYWxsZWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib25Eb25lXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRhcmdldFwiOiBcInNvbHZlZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJhY3Rpb25zXCI6ICh7Y29udGV4dCwgZXZlbnR9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGBjdHggPSAke0pTT04uc3RyaW5naWZ5KGNvbnRleHQpfSBhbmQgZXZ0ID0gJHtKU09OLnN0cmluZ2lmeShldmVudCl9YCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5lbC5lbWl0KFwiZ2FtZS1ub3RpZnktZXZlbnRcIiwgZXZlbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RhdGVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgX2J1aWxkUHV6emxlRWxlbWVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHV6emxlRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YXRlTWFjaGluZURlZmluaXRpb25bdGhpcy5wdXp6bGVFbGVtZW50c1tpXS5yb29tXS5zdGF0ZXMuc29sdmluZy5zdGF0ZXNbdGhpcy5wdXp6bGVFbGVtZW50c1tpXS5uYW1lXSA9IHtcbiAgICAgICAgICAgICAgICBcImluaXRpYWxcIjogXCJ1bnNvbHZlZFwiLFxuICAgICAgICAgICAgICAgIFwic3RhdGVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJ1bnNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9uXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYCR7dGhpcy5wdXp6bGVFbGVtZW50c1tpXS5uYW1lfS5zb2x2ZWRgXTogXCJzb2x2ZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBcInNvbHZlZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJmaW5hbFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwicmVtb3ZlLW9uLWdhbWUtZXZlbnRcIiwge1xuICAgIHNjaGVtYToge1xuICAgICAgICBzdGF0ZToge3R5cGU6IFwic3RyaW5nXCIsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lLW5vdGlmeS1ldmVudFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwudHlwZSA9PSB0aGlzLmRhdGEuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KVxuXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJkaXNhYmxlLW1vdmVtZW50LWluLXN0YXRlc1wiLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgICAgIFwic3RhdGVzXCI6IHt0eXBlOiBcImFycmF5XCIsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICB9LCBcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhdGVzIHRvIGRpc2FibGUgbW92ZW1lbnQgaW5cIiwgdGhpcy5kYXRhLnN0YXRlcyk7XG4gICAgICAgIHRoaXMuZWwuc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZS1zdGF0ZS11cGRhdGVkXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuaW5jbHVkZXMoZXZlbnQuZGV0YWlsLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNTdGF0ZSA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwibW90aW9uQ29udHJvbHNcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJtb3Rpb25Db250cm9sc1wiLCBcImVuYWJsZWRcIiwgZmFsc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2aW91c1N0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwibW90aW9uQ29udHJvbHNcIiwgdGhpcy5wcmV2aW91c1N0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1N0YXRlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwic2hvdy1pbi1zdGF0ZVwiLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgICAgIHN0YXRlOiB7dHlwZTogXCJzdHJpbmdcIiwgcmVxdWlyZWQ6IHRydWV9LFxuICAgICAgICBoaWRlT3RoZXJ3aXNlOiB7dHlwZTogXCJib29sZWFuXCIsIGRlZmF1bHQ6IGZhbHNlfSxcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lLXN0YXRlLXVwZGF0ZWRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsLCBcImdhbWUtc3RhdGUtdXBkYXRlZCBpbiBzaG93LWluLXN0YXRlXCIsIGV2ZW50LmRldGFpbC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGV0YWlsLm1hdGNoZXModGhpcy5kYXRhLnN0YXRlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKFwidmlzaWJsZVwiLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLmhpZGVPdGhlcndpc2UgJiYgdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJ2aXNpYmxlXCIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJ2aXNpYmxlXCIsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4vKipcbiAqIEhpZGVzIHRoZSBnaXZlbiBnbHRmIHBhcnQgd2hlbiBhIGdhbWUgZXZlbnQgb2NjdXJzLlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJoaWRlLXBhcnQtb24tZ2FtZS1ldmVudFwiLCB7XG4gICAgbXVsdGlwbGU6IHRydWUsXG4gICAgc2NoZW1hOiB7XG4gICAgICAgIHN0YXRlOiB7dHlwZTogXCJzdHJpbmdcIiwgcmVxdWlyZWQ6IHRydWV9LFxuICAgICAgICBwYXJ0czoge1xuICAgICAgICAgICAgZGVmYXVsdDogW11cbiAgICAgICAgfVxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgLy8gdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb2RlbC1sb2FkZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsLmNvbXBvbmVudHNbXCJnbHRmLW1vZGVsXCJdLm1vZGVsLmdldE9iamVjdEJ5TmFtZShcImFwYXJ0bWVudERvb3IwMDFcIikpO1xuICAgICAgICAgICAgLy8gdmFyIG1vZGVsID0gdGhpcy5lbC5jb21wb25lbnRzW1wiZ2x0Zi1tb2RlbFwiXS5tb2RlbDtcbiAgICAgICAgICAgIC8vIHZhciBwYXJ0cyA9IHRoaXMuZGF0YS5wYXJ0cztcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBhcnRzKTtcbiAgICAgICAgICAgIC8vIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vICAgdmFyIHBhcnQgPSBtb2RlbC5nZXRPYmplY3RCeU5hbWUocGFydHNbaV0pO1xuICAgICAgICAgICAgLy8gICBpZiAocGFydCkge1xuICAgICAgICAgICAgLy8gICAgIC8vIHBhcnQudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gICB9XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhLXNjZW5lXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lLW5vdGlmeS1ldmVudFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YS5wYXJ0cyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEuc3RhdGUpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmRldGFpbC50eXBlID09IHRoaXMuZGF0YS5zdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR2FtZS1ub3RpZnktZXZlbnQgaW4gaGlkZS1vbi1nYW1lLWV2ZW50XCIsIGV2ZW50LmRldGFpbCk7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gdGhpcy5lbC5jb21wb25lbnRzW1wiZ2x0Zi1tb2RlbFwiXS5tb2RlbDtcbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSB0aGlzLmRhdGEucGFydHM7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IG1vZGVsLmdldE9iamVjdEJ5TmFtZShwYXJ0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0LnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4vKipcbiAqIExpc3RlbnMgZm9yIGEgZ2FtZXMgc3RhdGUgKHNwZWNpZmllZCBieSB0aGUgc3RhdGUgYXR0cmlidXRlKSBhbmQgdGhlbiB0cmlnZ2Vyc1xuICogdGhlIGFuaW1hdGlvbiBzcGVjaWZpZWQgYnkgdGhlIGFjdGlvbiBhdHRyaWJ1dGUuXG4gKiBcbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwiYW5pbWF0ZS1vbi1nYW1lLWV2ZW50XCIsIHtcbiAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICBzY2hlbWE6IHtcbiAgICAgICAgc3RhdGU6IHt0eXBlOiBcInN0cmluZ1wiLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgICAgIGFjdGlvbjoge3R5cGU6IFwic3RyaW5nXCIsIHJlcXVpcmVkOiB0cnVlfSxcbiAgICAgICAgLy8gdGFyZ2V0OiB7dHlwZTogXCJzZWxlY3RvclwiLCByZXF1aXJlZDogdHJ1ZX0sXG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXZlbnQgPSBcIiwgdGhpcy5kYXRhLnN0YXRlLCBcIiBhbmQgYWN0aW9uID0gXCIsIHRoaXMuZGF0YS5hY3Rpb24pOyAgICAgICAgXG4gICAgICAgIC8vIExpc3RlbiBvbiB0aGUgc2NlbmUgZm9yIGdhbWUgc3RhdGUgdXBkYXRlcy5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImEtc2NlbmVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImdhbWUtbm90aWZ5LWV2ZW50XCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJMaXN0ZW5pbmcgZm9yIGdhbWUgc3RhdGUgZXZlbnRcIiwgZXZlbnQuZGV0YWlsKTtcbiAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwudHlwZSA9PSB0aGlzLmRhdGEuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFuaW1hdGlvbiBvbiBnYW1lIGV2ZW50IHRyaWdnZXJlZCBieSBldmVudFwiLCBldmVudC5kZXRhaWwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKGBhbmltYXRpb24tbWl4ZXJgLCB7XG4gICAgICAgICAgICAgICAgICAgIFwiY2xpcFwiOiB0aGlzLmRhdGEuYWN0aW9uLCBcbiAgICAgICAgICAgICAgICAgICAgXCJsb29wXCI6IFwib25jZVwiLFxuICAgICAgICAgICAgICAgICAgICBcImNsYW1wV2hlbkZpbmlzaGVkXCI6IFwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5kYXRhLnRhcmdldC5lbWl0KHRoaXMuZGF0YS5hY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBbmltYXRpb24gb24gZ2FtZSBldmVudCB0cmlnZ2VyZWQgYnkgZXZlbnQgJHtKU09OLnN0cmluZ2lmeSgoZXZlbnQuZGV0YWlsKSl9YCk7XG4gICAgICAgIC8vIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImdhbWUtc3RhdGUtdXBkYXRlZFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcImdhbWUtc3RhdGVcIiwge1xuICAgIHNjaGVtYToge1xuICAgICAgICBuYW1lOiB7dHlwZTogXCJzdHJpbmdcIiwgcmVxdWlyZWQ6IHRydWV9LFxuICAgICAgICB0eXBlOiB7dHlwZTogXCJzdHJpbmdcIiwgb25lT2Y6IFtcInJvb21cIiwgXCJwdXp6bGVcIl0sIHJlcXVpcmVkOiB0cnVlfSxcbiAgICAgICAgcm9vbToge3R5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6IFwiXCJ9LFxuICAgICAgICBvbkRvbmU6IHt0eXBlOiBcImFycmF5XCIsIGRlZmF1bHQ6IFtdfSxcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS50eXBlID09IFwicm9vbVwiKSB7XG4gICAgICAgICAgICAvLyB0aGlzLnN5c3RlbSA9IHRoaXMuZWwuc2NlbmVFbC5zeXN0ZW1zW1wiZ2FtZS1zdGF0ZS1tYWNoaW5lXCJdO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uYWRkUm9vbSh0aGlzLmRhdGEubmFtZSwgdGhpcy5lbCwgdGhpcy5kYXRhLm9uRG9uZSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmRhdGEudHlwZSA9PSBcInB1enpsZVwiKSB7XG4gICAgICAgICAgICAvLyB0aGlzLnN5c3RlbSA9IHRoaXMuZWwuc2NlbmVFbC5zeXN0ZW1zW1wiZ2FtZS1zdGF0ZS1tYWNoaW5lXCJdO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uYWRkUHV6emxlKHRoaXMuZGF0YS5yb29tLCB0aGlzLmRhdGEubmFtZSwgdGhpcy5lbCk7XG4gICAgICAgIH07XG4gICAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9999\n");

/***/ }),

/***/ 7113:
/*!********************************************!*\
  !*** ./src/components/aframe/gltf-hide.js ***!
  \********************************************/
/***/ (() => {

eval("AFRAME.registerComponent('gltf-hide', {\n  schema: {\n    parts: {\n      \"default\": []\n    }\n  },\n  init: function init() {\n    var _this = this;\n    this.el.addEventListener('model-loaded', function () {\n      // console.log(this.el.components[\"gltf-model\"].model.getObjectByName(\"apartmentDoor001\"));\n      var model = _this.el.components[\"gltf-model\"].model;\n      var parts = _this.data.parts;\n      console.log(parts);\n      for (var i = 0; i < parts.length; i++) {\n        var part = model.getObjectByName(parts[i]);\n        if (part) {\n          part.visible = false;\n        }\n      }\n    });\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzExMy5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2NoZW1hIiwicGFydHMiLCJpbml0IiwiX3RoaXMiLCJlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJtb2RlbCIsImNvbXBvbmVudHMiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImkiLCJsZW5ndGgiLCJwYXJ0IiwiZ2V0T2JqZWN0QnlOYW1lIiwidmlzaWJsZSJdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvZ2x0Zi1oaWRlLmpzP2UwNjMiXSwic291cmNlc0NvbnRlbnQiOlsiQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdnbHRmLWhpZGUnLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgcGFydHM6IHtcbiAgICAgIGRlZmF1bHQ6IFtdXG4gICAgfVxuICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW9kZWwtbG9hZGVkJywgKCkgPT4ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsLmNvbXBvbmVudHNbXCJnbHRmLW1vZGVsXCJdLm1vZGVsLmdldE9iamVjdEJ5TmFtZShcImFwYXJ0bWVudERvb3IwMDFcIikpO1xuICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLmVsLmNvbXBvbmVudHNbXCJnbHRmLW1vZGVsXCJdLm1vZGVsO1xuICAgICAgICB2YXIgcGFydHMgPSB0aGlzLmRhdGEucGFydHM7XG4gICAgICAgIGNvbnNvbGUubG9nKHBhcnRzKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBwYXJ0ID0gbW9kZWwuZ2V0T2JqZWN0QnlOYW1lKHBhcnRzW2ldKTtcbiAgICAgICAgICBpZiAocGFydCkge1xuICAgICAgICAgICAgcGFydC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUU7RUFDbENDLE1BQU0sRUFBRTtJQUNSQyxLQUFLLEVBQUU7TUFDTCxXQUFTO0lBQ1g7RUFDRixDQUFDO0VBQ0NDLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVk7SUFBQSxJQUFBQyxLQUFBO0lBQ2hCLElBQUksQ0FBQ0MsRUFBRSxDQUFDQyxnQkFBZ0IsQ0FBQyxjQUFjLEVBQUUsWUFBTTtNQUM3QztNQUNBLElBQUlDLEtBQUssR0FBR0gsS0FBSSxDQUFDQyxFQUFFLENBQUNHLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQ0QsS0FBSztNQUNsRCxJQUFJTCxLQUFLLEdBQUdFLEtBQUksQ0FBQ0ssSUFBSSxDQUFDUCxLQUFLO01BQzNCUSxPQUFPLENBQUNDLEdBQUcsQ0FBQ1QsS0FBSyxDQUFDO01BQ2xCLEtBQUssSUFBSVUsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHVixLQUFLLENBQUNXLE1BQU0sRUFBRUQsQ0FBQyxFQUFFLEVBQUU7UUFDckMsSUFBSUUsSUFBSSxHQUFHUCxLQUFLLENBQUNRLGVBQWUsQ0FBQ2IsS0FBSyxDQUFDVSxDQUFDLENBQUMsQ0FBQztRQUMxQyxJQUFJRSxJQUFJLEVBQUU7VUFDUkEsSUFBSSxDQUFDRSxPQUFPLEdBQUcsS0FBSztRQUN0QjtNQUNGO0lBQ0osQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=\n//# sourceURL=webpack-internal:///7113\n");

/***/ }),

/***/ 5358:
/*!***************************************************!*\
  !*** ./src/components/aframe/gltf-part-custom.js ***!
  \***************************************************/
/***/ (() => {

eval("var LOADING_MODELS = {};\nvar MODELS = {};\nvar MODEL_METADATA = {};\nAFRAME.registerComponent('gltf-part-custom', {\n  schema: {\n    buffer: {\n      \"default\": true\n    },\n    part: {\n      type: 'string'\n    },\n    src: {\n      type: 'asset'\n    },\n    keepPosition: {\n      type: 'boolean',\n      \"default\": true\n    }\n  },\n  update: function update() {\n    var el = this.el;\n    if (!this.data.part && this.data.src) {\n      return;\n    }\n    this.getModel(function (modelPart) {\n      if (!modelPart) {\n        return;\n      }\n      el.setObject3D('mesh', modelPart);\n      var originalPosition = MODEL_METADATA[el.getAttribute('gltf-part-custom').part].position;\n      var originalRotation = MODEL_METADATA[el.getAttribute('gltf-part-custom').part].rotation;\n      console.log(\"originalPosition: \".concat(originalPosition.x, \" \").concat(originalPosition.y, \" \").concat(originalPosition.z));\n      console.log(\"originalRotation: \".concat(originalRotation.x, \" \").concat(originalRotation.y, \" \").concat(originalRotation.z, \", \").concat(originalRotation.w));\n      el.setAttribute('position', \"\".concat(originalPosition.x, \" \").concat(originalPosition.y, \" \").concat(originalPosition.z));\n      el.setAttribute('rotation', \"\".concat(THREE.MathUtils.radToDeg(originalRotation.x), \" \").concat(THREE.MathUtils.radToDeg(originalRotation.y), \" \").concat(THREE.MathUtils.radToDeg(originalRotation.z)));\n      // el.setAttribute('rotation', `${originalRotation.x} ${originalRotation.y} ${originalRotation.z}`);\n      // Use this instead of setAttribute('rotation') - see https://aframe.io/docs/1.5.0/components/rotation.html#updating-rotation\n      // el.getObject3D().setRotationFromQuaternion(originalPosition);\n    });\n  },\n  /**\n   * Fetch, cache, and select from GLTF.\n   *\n   * @returns {object} Selected subset of model.\n   */\n  getModel: function getModel(cb) {\n    var self = this;\n\n    // Already parsed, grab it.\n    if (MODELS[this.data.src]) {\n      cb(this.selectFromModel(MODELS[this.data.src]));\n      return;\n    }\n\n    // Currently loading, wait for it.\n    if (LOADING_MODELS[this.data.src]) {\n      return LOADING_MODELS[this.data.src].then(function (model) {\n        cb(self.selectFromModel(model));\n      });\n    }\n\n    // Not yet fetching, fetch it.\n    LOADING_MODELS[this.data.src] = new Promise(function (resolve) {\n      new THREE.GLTFLoader().load(self.data.src, function (gltfModel) {\n        var model = gltfModel.scene || gltfModel.scenes[0];\n        MODELS[self.data.src] = model;\n        delete LOADING_MODELS[self.data.src];\n        cb(self.selectFromModel(model));\n        resolve(model);\n      }, function () {}, console.error);\n    });\n  },\n  /**\n   * Search for the part name and look for a mesh.\n   */\n  selectFromModel: function selectFromModel(model) {\n    var mesh;\n    var part;\n    part = model.getObjectByName(this.data.part);\n    if (!part) {\n      console.error('[gltf-part] `' + this.data.part + '` not found in model.');\n      return;\n    }\n    mesh = part.getObjectByProperty('type', 'Mesh').clone(true);\n    MODEL_METADATA[this.data.part] = MODEL_METADATA[this.data.part] || {};\n    MODEL_METADATA[this.data.part].position = model.getObjectByName(this.data.part).getWorldPosition(new THREE.Vector3(0, 0, 0));\n    MODEL_METADATA[this.data.part].rotation = model.getObjectByName(this.data.part).rotation;\n    // MODEL_METADATA[this.data.part].rotation.x += Math.PI;\n    console.log(\"rotation: \", MODEL_METADATA[this.data.part].rotation);\n    if (this.data.buffer) {\n      mesh.geometry = mesh.geometry.toNonIndexed();\n      return mesh;\n    }\n    mesh.geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    return mesh;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTM1OC5qcyIsIm5hbWVzIjpbIkxPQURJTkdfTU9ERUxTIiwiTU9ERUxTIiwiTU9ERUxfTUVUQURBVEEiLCJBRlJBTUUiLCJyZWdpc3RlckNvbXBvbmVudCIsInNjaGVtYSIsImJ1ZmZlciIsInBhcnQiLCJ0eXBlIiwic3JjIiwia2VlcFBvc2l0aW9uIiwidXBkYXRlIiwiZWwiLCJkYXRhIiwiZ2V0TW9kZWwiLCJtb2RlbFBhcnQiLCJzZXRPYmplY3QzRCIsIm9yaWdpbmFsUG9zaXRpb24iLCJnZXRBdHRyaWJ1dGUiLCJwb3NpdGlvbiIsIm9yaWdpbmFsUm90YXRpb24iLCJyb3RhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJjb25jYXQiLCJ4IiwieSIsInoiLCJ3Iiwic2V0QXR0cmlidXRlIiwiVEhSRUUiLCJNYXRoVXRpbHMiLCJyYWRUb0RlZyIsImNiIiwic2VsZiIsInNlbGVjdEZyb21Nb2RlbCIsInRoZW4iLCJtb2RlbCIsIlByb21pc2UiLCJyZXNvbHZlIiwiR0xURkxvYWRlciIsImxvYWQiLCJnbHRmTW9kZWwiLCJzY2VuZSIsInNjZW5lcyIsImVycm9yIiwibWVzaCIsImdldE9iamVjdEJ5TmFtZSIsImdldE9iamVjdEJ5UHJvcGVydHkiLCJjbG9uZSIsImdldFdvcmxkUG9zaXRpb24iLCJWZWN0b3IzIiwiZ2VvbWV0cnkiLCJ0b05vbkluZGV4ZWQiLCJHZW9tZXRyeSIsImZyb21CdWZmZXJHZW9tZXRyeSJdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvZ2x0Zi1wYXJ0LWN1c3RvbS5qcz80OWJiIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBMT0FESU5HX01PREVMUyA9IHt9O1xudmFyIE1PREVMUyA9IHt9O1xudmFyIE1PREVMX01FVEFEQVRBID0ge307XG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZ2x0Zi1wYXJ0LWN1c3RvbScsIHtcbiAgc2NoZW1hOiB7XG4gICAgYnVmZmVyOiB7ZGVmYXVsdDogdHJ1ZX0sXG4gICAgcGFydDoge3R5cGU6ICdzdHJpbmcnfSxcbiAgICBzcmM6IHt0eXBlOiAnYXNzZXQnfSxcbiAgICBrZWVwUG9zaXRpb246IHsgdHlwZTogJ2Jvb2xlYW4nLCBkZWZhdWx0OiB0cnVlIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICghdGhpcy5kYXRhLnBhcnQgJiYgdGhpcy5kYXRhLnNyYykgeyByZXR1cm47IH1cbiAgICB0aGlzLmdldE1vZGVsKGZ1bmN0aW9uIChtb2RlbFBhcnQpIHtcbiAgICAgIGlmICghbW9kZWxQYXJ0KSB7IHJldHVybjsgfVxuICAgICAgZWwuc2V0T2JqZWN0M0QoJ21lc2gnLCBtb2RlbFBhcnQpO1xuICAgICAgY29uc3Qgb3JpZ2luYWxQb3NpdGlvbiA9IE1PREVMX01FVEFEQVRBW2VsLmdldEF0dHJpYnV0ZSgnZ2x0Zi1wYXJ0LWN1c3RvbScpLnBhcnRdLnBvc2l0aW9uO1xuICAgICAgY29uc3Qgb3JpZ2luYWxSb3RhdGlvbiA9IE1PREVMX01FVEFEQVRBW2VsLmdldEF0dHJpYnV0ZSgnZ2x0Zi1wYXJ0LWN1c3RvbScpLnBhcnRdLnJvdGF0aW9uO1xuICAgICAgY29uc29sZS5sb2coYG9yaWdpbmFsUG9zaXRpb246ICR7b3JpZ2luYWxQb3NpdGlvbi54fSAke29yaWdpbmFsUG9zaXRpb24ueX0gJHtvcmlnaW5hbFBvc2l0aW9uLnp9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgb3JpZ2luYWxSb3RhdGlvbjogJHtvcmlnaW5hbFJvdGF0aW9uLnh9ICR7b3JpZ2luYWxSb3RhdGlvbi55fSAke29yaWdpbmFsUm90YXRpb24uen0sICR7b3JpZ2luYWxSb3RhdGlvbi53fWApO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIGAke29yaWdpbmFsUG9zaXRpb24ueH0gJHtvcmlnaW5hbFBvc2l0aW9uLnl9ICR7b3JpZ2luYWxQb3NpdGlvbi56fWApO1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdyb3RhdGlvbicsIGAke1RIUkVFLk1hdGhVdGlscy5yYWRUb0RlZyhvcmlnaW5hbFJvdGF0aW9uLngpfSAke1RIUkVFLk1hdGhVdGlscy5yYWRUb0RlZyhvcmlnaW5hbFJvdGF0aW9uLnkpfSAke1RIUkVFLk1hdGhVdGlscy5yYWRUb0RlZyhvcmlnaW5hbFJvdGF0aW9uLnopfWApO1xuICAgICAgLy8gZWwuc2V0QXR0cmlidXRlKCdyb3RhdGlvbicsIGAke29yaWdpbmFsUm90YXRpb24ueH0gJHtvcmlnaW5hbFJvdGF0aW9uLnl9ICR7b3JpZ2luYWxSb3RhdGlvbi56fWApO1xuICAgICAgLy8gVXNlIHRoaXMgaW5zdGVhZCBvZiBzZXRBdHRyaWJ1dGUoJ3JvdGF0aW9uJykgLSBzZWUgaHR0cHM6Ly9hZnJhbWUuaW8vZG9jcy8xLjUuMC9jb21wb25lbnRzL3JvdGF0aW9uLmh0bWwjdXBkYXRpbmctcm90YXRpb25cbiAgICAgIC8vIGVsLmdldE9iamVjdDNEKCkuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbihvcmlnaW5hbFBvc2l0aW9uKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogRmV0Y2gsIGNhY2hlLCBhbmQgc2VsZWN0IGZyb20gR0xURi5cbiAgICpcbiAgICogQHJldHVybnMge29iamVjdH0gU2VsZWN0ZWQgc3Vic2V0IG9mIG1vZGVsLlxuICAgKi9cbiAgZ2V0TW9kZWw6IGZ1bmN0aW9uIChjYikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIEFscmVhZHkgcGFyc2VkLCBncmFiIGl0LlxuICAgIGlmIChNT0RFTFNbdGhpcy5kYXRhLnNyY10pIHtcbiAgICAgIGNiKHRoaXMuc2VsZWN0RnJvbU1vZGVsKE1PREVMU1t0aGlzLmRhdGEuc3JjXSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN1cnJlbnRseSBsb2FkaW5nLCB3YWl0IGZvciBpdC5cbiAgICBpZiAoTE9BRElOR19NT0RFTFNbdGhpcy5kYXRhLnNyY10pIHtcbiAgICAgIHJldHVybiBMT0FESU5HX01PREVMU1t0aGlzLmRhdGEuc3JjXS50aGVuKGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICBjYihzZWxmLnNlbGVjdEZyb21Nb2RlbChtb2RlbCkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTm90IHlldCBmZXRjaGluZywgZmV0Y2ggaXQuXG4gICAgTE9BRElOR19NT0RFTFNbdGhpcy5kYXRhLnNyY10gPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgbmV3IFRIUkVFLkdMVEZMb2FkZXIoKS5sb2FkKHNlbGYuZGF0YS5zcmMsIGZ1bmN0aW9uIChnbHRmTW9kZWwpIHtcbiAgICAgICAgdmFyIG1vZGVsID0gZ2x0Zk1vZGVsLnNjZW5lIHx8IGdsdGZNb2RlbC5zY2VuZXNbMF07XG5cbiAgICAgICAgTU9ERUxTW3NlbGYuZGF0YS5zcmNdID0gbW9kZWw7XG4gICAgICAgIGRlbGV0ZSBMT0FESU5HX01PREVMU1tzZWxmLmRhdGEuc3JjXTtcbiAgICAgICAgY2Ioc2VsZi5zZWxlY3RGcm9tTW9kZWwobW9kZWwpKTtcbiAgICAgICAgcmVzb2x2ZShtb2RlbCk7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7IH0sIGNvbnNvbGUuZXJyb3IpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZWFyY2ggZm9yIHRoZSBwYXJ0IG5hbWUgYW5kIGxvb2sgZm9yIGEgbWVzaC5cbiAgICovXG4gIHNlbGVjdEZyb21Nb2RlbDogZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgdmFyIG1lc2g7XG4gICAgdmFyIHBhcnQ7XG5cbiAgICBwYXJ0ID0gbW9kZWwuZ2V0T2JqZWN0QnlOYW1lKHRoaXMuZGF0YS5wYXJ0KTtcbiAgICBpZiAoIXBhcnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tnbHRmLXBhcnRdIGAnICsgdGhpcy5kYXRhLnBhcnQgKyAnYCBub3QgZm91bmQgaW4gbW9kZWwuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWVzaCA9IHBhcnQuZ2V0T2JqZWN0QnlQcm9wZXJ0eSgndHlwZScsICdNZXNoJykuY2xvbmUodHJ1ZSk7XG4gICAgTU9ERUxfTUVUQURBVEFbdGhpcy5kYXRhLnBhcnRdID0gTU9ERUxfTUVUQURBVEFbdGhpcy5kYXRhLnBhcnRdIHx8IHt9O1xuICAgIE1PREVMX01FVEFEQVRBW3RoaXMuZGF0YS5wYXJ0XS5wb3NpdGlvbiA9IG1vZGVsLmdldE9iamVjdEJ5TmFtZSh0aGlzLmRhdGEucGFydCkuZ2V0V29ybGRQb3NpdGlvbihuZXcgVEhSRUUuVmVjdG9yMygwLDAsMCkpO1xuICAgIE1PREVMX01FVEFEQVRBW3RoaXMuZGF0YS5wYXJ0XS5yb3RhdGlvbiA9IG1vZGVsLmdldE9iamVjdEJ5TmFtZSh0aGlzLmRhdGEucGFydCkucm90YXRpb247XG4gICAgLy8gTU9ERUxfTUVUQURBVEFbdGhpcy5kYXRhLnBhcnRdLnJvdGF0aW9uLnggKz0gTWF0aC5QSTtcbiAgICBjb25zb2xlLmxvZyhcInJvdGF0aW9uOiBcIiwgTU9ERUxfTUVUQURBVEFbdGhpcy5kYXRhLnBhcnRdLnJvdGF0aW9uKTtcbiAgICBpZiAodGhpcy5kYXRhLmJ1ZmZlcikge1xuICAgICAgbWVzaC5nZW9tZXRyeSA9IG1lc2guZ2VvbWV0cnkudG9Ob25JbmRleGVkKCk7XG4gICAgICByZXR1cm4gbWVzaDtcbiAgICB9XG4gICAgbWVzaC5nZW9tZXRyeSA9IG5ldyBUSFJFRS5HZW9tZXRyeSgpLmZyb21CdWZmZXJHZW9tZXRyeShtZXNoLmdlb21ldHJ5KTtcbiAgICByZXR1cm4gbWVzaDtcbiAgfVxufSk7Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxjQUFjLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZCLElBQUlDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDZixJQUFJQyxjQUFjLEdBQUcsQ0FBQyxDQUFDO0FBRXZCQyxNQUFNLENBQUNDLGlCQUFpQixDQUFDLGtCQUFrQixFQUFFO0VBQzNDQyxNQUFNLEVBQUU7SUFDTkMsTUFBTSxFQUFFO01BQUMsV0FBUztJQUFJLENBQUM7SUFDdkJDLElBQUksRUFBRTtNQUFDQyxJQUFJLEVBQUU7SUFBUSxDQUFDO0lBQ3RCQyxHQUFHLEVBQUU7TUFBQ0QsSUFBSSxFQUFFO0lBQU8sQ0FBQztJQUNwQkUsWUFBWSxFQUFFO01BQUVGLElBQUksRUFBRSxTQUFTO01BQUUsV0FBUztJQUFLO0VBQ2pELENBQUM7RUFFREcsTUFBTSxFQUFFLFNBQUFBLE9BQUEsRUFBWTtJQUNsQixJQUFJQyxFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO0lBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUNDLElBQUksQ0FBQ04sSUFBSSxJQUFJLElBQUksQ0FBQ00sSUFBSSxDQUFDSixHQUFHLEVBQUU7TUFBRTtJQUFRO0lBQ2hELElBQUksQ0FBQ0ssUUFBUSxDQUFDLFVBQVVDLFNBQVMsRUFBRTtNQUNqQyxJQUFJLENBQUNBLFNBQVMsRUFBRTtRQUFFO01BQVE7TUFDMUJILEVBQUUsQ0FBQ0ksV0FBVyxDQUFDLE1BQU0sRUFBRUQsU0FBUyxDQUFDO01BQ2pDLElBQU1FLGdCQUFnQixHQUFHZixjQUFjLENBQUNVLEVBQUUsQ0FBQ00sWUFBWSxDQUFDLGtCQUFrQixDQUFDLENBQUNYLElBQUksQ0FBQyxDQUFDWSxRQUFRO01BQzFGLElBQU1DLGdCQUFnQixHQUFHbEIsY0FBYyxDQUFDVSxFQUFFLENBQUNNLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDWCxJQUFJLENBQUMsQ0FBQ2MsUUFBUTtNQUMxRkMsT0FBTyxDQUFDQyxHQUFHLHNCQUFBQyxNQUFBLENBQXNCUCxnQkFBZ0IsQ0FBQ1EsQ0FBQyxPQUFBRCxNQUFBLENBQUlQLGdCQUFnQixDQUFDUyxDQUFDLE9BQUFGLE1BQUEsQ0FBSVAsZ0JBQWdCLENBQUNVLENBQUMsQ0FBRSxDQUFDO01BQ2xHTCxPQUFPLENBQUNDLEdBQUcsc0JBQUFDLE1BQUEsQ0FBc0JKLGdCQUFnQixDQUFDSyxDQUFDLE9BQUFELE1BQUEsQ0FBSUosZ0JBQWdCLENBQUNNLENBQUMsT0FBQUYsTUFBQSxDQUFJSixnQkFBZ0IsQ0FBQ08sQ0FBQyxRQUFBSCxNQUFBLENBQUtKLGdCQUFnQixDQUFDUSxDQUFDLENBQUUsQ0FBQztNQUN6SGhCLEVBQUUsQ0FBQ2lCLFlBQVksQ0FBQyxVQUFVLEtBQUFMLE1BQUEsQ0FBS1AsZ0JBQWdCLENBQUNRLENBQUMsT0FBQUQsTUFBQSxDQUFJUCxnQkFBZ0IsQ0FBQ1MsQ0FBQyxPQUFBRixNQUFBLENBQUlQLGdCQUFnQixDQUFDVSxDQUFDLENBQUUsQ0FBQztNQUNoR2YsRUFBRSxDQUFDaUIsWUFBWSxDQUFDLFVBQVUsS0FBQUwsTUFBQSxDQUFLTSxLQUFLLENBQUNDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDWixnQkFBZ0IsQ0FBQ0ssQ0FBQyxDQUFDLE9BQUFELE1BQUEsQ0FBSU0sS0FBSyxDQUFDQyxTQUFTLENBQUNDLFFBQVEsQ0FBQ1osZ0JBQWdCLENBQUNNLENBQUMsQ0FBQyxPQUFBRixNQUFBLENBQUlNLEtBQUssQ0FBQ0MsU0FBUyxDQUFDQyxRQUFRLENBQUNaLGdCQUFnQixDQUFDTyxDQUFDLENBQUMsQ0FBRSxDQUFDO01BQzlLO01BQ0E7TUFDQTtJQUNGLENBQUMsQ0FBQztFQUNKLENBQUM7RUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0ViLFFBQVEsRUFBRSxTQUFBQSxTQUFVbUIsRUFBRSxFQUFFO0lBQ3RCLElBQUlDLElBQUksR0FBRyxJQUFJOztJQUVmO0lBQ0EsSUFBSWpDLE1BQU0sQ0FBQyxJQUFJLENBQUNZLElBQUksQ0FBQ0osR0FBRyxDQUFDLEVBQUU7TUFDekJ3QixFQUFFLENBQUMsSUFBSSxDQUFDRSxlQUFlLENBQUNsQyxNQUFNLENBQUMsSUFBSSxDQUFDWSxJQUFJLENBQUNKLEdBQUcsQ0FBQyxDQUFDLENBQUM7TUFDL0M7SUFDRjs7SUFFQTtJQUNBLElBQUlULGNBQWMsQ0FBQyxJQUFJLENBQUNhLElBQUksQ0FBQ0osR0FBRyxDQUFDLEVBQUU7TUFDakMsT0FBT1QsY0FBYyxDQUFDLElBQUksQ0FBQ2EsSUFBSSxDQUFDSixHQUFHLENBQUMsQ0FBQzJCLElBQUksQ0FBQyxVQUFVQyxLQUFLLEVBQUU7UUFDekRKLEVBQUUsQ0FBQ0MsSUFBSSxDQUFDQyxlQUFlLENBQUNFLEtBQUssQ0FBQyxDQUFDO01BQ2pDLENBQUMsQ0FBQztJQUNKOztJQUVBO0lBQ0FyQyxjQUFjLENBQUMsSUFBSSxDQUFDYSxJQUFJLENBQUNKLEdBQUcsQ0FBQyxHQUFHLElBQUk2QixPQUFPLENBQUMsVUFBVUMsT0FBTyxFQUFFO01BQzdELElBQUlULEtBQUssQ0FBQ1UsVUFBVSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDUCxJQUFJLENBQUNyQixJQUFJLENBQUNKLEdBQUcsRUFBRSxVQUFVaUMsU0FBUyxFQUFFO1FBQzlELElBQUlMLEtBQUssR0FBR0ssU0FBUyxDQUFDQyxLQUFLLElBQUlELFNBQVMsQ0FBQ0UsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUVsRDNDLE1BQU0sQ0FBQ2lDLElBQUksQ0FBQ3JCLElBQUksQ0FBQ0osR0FBRyxDQUFDLEdBQUc0QixLQUFLO1FBQzdCLE9BQU9yQyxjQUFjLENBQUNrQyxJQUFJLENBQUNyQixJQUFJLENBQUNKLEdBQUcsQ0FBQztRQUNwQ3dCLEVBQUUsQ0FBQ0MsSUFBSSxDQUFDQyxlQUFlLENBQUNFLEtBQUssQ0FBQyxDQUFDO1FBQy9CRSxPQUFPLENBQUNGLEtBQUssQ0FBQztNQUNoQixDQUFDLEVBQUUsWUFBWSxDQUFFLENBQUMsRUFBRWYsT0FBTyxDQUFDdUIsS0FBSyxDQUFDO0lBQ3BDLENBQUMsQ0FBQztFQUNKLENBQUM7RUFFRDtBQUNGO0FBQ0E7RUFDRVYsZUFBZSxFQUFFLFNBQUFBLGdCQUFVRSxLQUFLLEVBQUU7SUFDaEMsSUFBSVMsSUFBSTtJQUNSLElBQUl2QyxJQUFJO0lBRVJBLElBQUksR0FBRzhCLEtBQUssQ0FBQ1UsZUFBZSxDQUFDLElBQUksQ0FBQ2xDLElBQUksQ0FBQ04sSUFBSSxDQUFDO0lBQzVDLElBQUksQ0FBQ0EsSUFBSSxFQUFFO01BQ1RlLE9BQU8sQ0FBQ3VCLEtBQUssQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDaEMsSUFBSSxDQUFDTixJQUFJLEdBQUcsdUJBQXVCLENBQUM7TUFDekU7SUFDRjtJQUVBdUMsSUFBSSxHQUFHdkMsSUFBSSxDQUFDeUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDQyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQzNEL0MsY0FBYyxDQUFDLElBQUksQ0FBQ1csSUFBSSxDQUFDTixJQUFJLENBQUMsR0FBR0wsY0FBYyxDQUFDLElBQUksQ0FBQ1csSUFBSSxDQUFDTixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDckVMLGNBQWMsQ0FBQyxJQUFJLENBQUNXLElBQUksQ0FBQ04sSUFBSSxDQUFDLENBQUNZLFFBQVEsR0FBR2tCLEtBQUssQ0FBQ1UsZUFBZSxDQUFDLElBQUksQ0FBQ2xDLElBQUksQ0FBQ04sSUFBSSxDQUFDLENBQUMyQyxnQkFBZ0IsQ0FBQyxJQUFJcEIsS0FBSyxDQUFDcUIsT0FBTyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUhqRCxjQUFjLENBQUMsSUFBSSxDQUFDVyxJQUFJLENBQUNOLElBQUksQ0FBQyxDQUFDYyxRQUFRLEdBQUdnQixLQUFLLENBQUNVLGVBQWUsQ0FBQyxJQUFJLENBQUNsQyxJQUFJLENBQUNOLElBQUksQ0FBQyxDQUFDYyxRQUFRO0lBQ3hGO0lBQ0FDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFlBQVksRUFBRXJCLGNBQWMsQ0FBQyxJQUFJLENBQUNXLElBQUksQ0FBQ04sSUFBSSxDQUFDLENBQUNjLFFBQVEsQ0FBQztJQUNsRSxJQUFJLElBQUksQ0FBQ1IsSUFBSSxDQUFDUCxNQUFNLEVBQUU7TUFDcEJ3QyxJQUFJLENBQUNNLFFBQVEsR0FBR04sSUFBSSxDQUFDTSxRQUFRLENBQUNDLFlBQVksQ0FBQyxDQUFDO01BQzVDLE9BQU9QLElBQUk7SUFDYjtJQUNBQSxJQUFJLENBQUNNLFFBQVEsR0FBRyxJQUFJdEIsS0FBSyxDQUFDd0IsUUFBUSxDQUFDLENBQUMsQ0FBQ0Msa0JBQWtCLENBQUNULElBQUksQ0FBQ00sUUFBUSxDQUFDO0lBQ3RFLE9BQU9OLElBQUk7RUFDYjtBQUNGLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==\n//# sourceURL=webpack-internal:///5358\n");

/***/ }),

/***/ 4877:
/*!****************************************!*\
  !*** ./src/components/aframe/index.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _animation_mixer_state_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./animation-mixer-state.js */ 5575);\n/* harmony import */ var _animation_mixer_state_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_animation_mixer_state_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _base_game_loop_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base-game-loop.json */ 6264);\n/* harmony import */ var _game_state_machine_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game-state-machine.js */ 9999);\n/* harmony import */ var _gltf_hide_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gltf-hide.js */ 7113);\n/* harmony import */ var _gltf_hide_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_gltf_hide_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _gltf_part_custom_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./gltf-part-custom.js */ 5358);\n/* harmony import */ var _gltf_part_custom_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_gltf_part_custom_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _simple_navmesh_constraint_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./simple-navmesh-constraint.js */ 4064);\n/* harmony import */ var _simple_navmesh_constraint_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_simple_navmesh_constraint_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _oculus_thumbstick_controls_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./oculus-thumbstick-controls.js */ 3154);\n/* harmony import */ var _oculus_thumbstick_controls_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_oculus_thumbstick_controls_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.js */ 9464);\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_utils_js__WEBPACK_IMPORTED_MODULE_7__);\n// import \"./components/game-state-machine.js\";\n// import \"./components/simple-navmesh-constraint.js\";\n// import \"./components/gltf-part-custom.js\";\n// import './components/gltf-hide.js';\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDg3Ny5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvaW5kZXguanM/ODJhYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgXCIuL2NvbXBvbmVudHMvZ2FtZS1zdGF0ZS1tYWNoaW5lLmpzXCI7XG4vLyBpbXBvcnQgXCIuL2NvbXBvbmVudHMvc2ltcGxlLW5hdm1lc2gtY29uc3RyYWludC5qc1wiO1xuLy8gaW1wb3J0IFwiLi9jb21wb25lbnRzL2dsdGYtcGFydC1jdXN0b20uanNcIjtcbi8vIGltcG9ydCAnLi9jb21wb25lbnRzL2dsdGYtaGlkZS5qcyc7XG5pbXBvcnQgXCIuL2FuaW1hdGlvbi1taXhlci1zdGF0ZS5qc1wiO1xuaW1wb3J0IFwiLi9iYXNlLWdhbWUtbG9vcC5qc29uXCI7XG5pbXBvcnQgXCIuL2dhbWUtc3RhdGUtbWFjaGluZS5qc1wiO1xuaW1wb3J0IFwiLi9nbHRmLWhpZGUuanNcIjtcbmltcG9ydCBcIi4vZ2x0Zi1wYXJ0LWN1c3RvbS5qc1wiO1xuaW1wb3J0IFwiLi9zaW1wbGUtbmF2bWVzaC1jb25zdHJhaW50LmpzXCI7XG5pbXBvcnQgXCIuL29jdWx1cy10aHVtYnN0aWNrLWNvbnRyb2xzLmpzXCI7XG5pbXBvcnQgXCIuL3V0aWxzLmpzXCI7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4877\n");

/***/ }),

/***/ 3154:
/*!*************************************************************!*\
  !*** ./src/components/aframe/oculus-thumbstick-controls.js ***!
  \*************************************************************/
/***/ (() => {

eval("AFRAME.registerComponent('oculus-thumbstick-controls', {\n  schema: {\n    acceleration: {\n      \"default\": 30\n    },\n    rigSelector: {\n      \"default\": \"#rig\"\n    },\n    fly: {\n      \"default\": false\n    },\n    controllerOriented: {\n      \"default\": false\n    },\n    adAxis: {\n      \"default\": 'x',\n      oneOf: ['x', 'y', 'z']\n    },\n    wsAxis: {\n      \"default\": 'z',\n      oneOf: ['x', 'y', 'z']\n    },\n    enabled: {\n      \"default\": true\n    },\n    adEnabled: {\n      \"default\": true\n    },\n    adInverted: {\n      \"default\": false\n    },\n    wsEnabled: {\n      \"default\": true\n    },\n    wsInverted: {\n      \"default\": false\n    },\n    mode: {\n      \"default\": 'move',\n      oneOf: ['move', 'look']\n    }\n  },\n  init: function init() {\n    this.easing = 1.1;\n    this.velocity = new THREE.Vector3(0, 0, 0);\n    this.tsData = new THREE.Vector2(0, 0);\n    this.thumbstickMoved = this.thumbstickMoved.bind(this);\n    this.el.addEventListener('thumbstickmoved', this.thumbstickMoved);\n  },\n  update: function update() {\n    this.rigElement = document.querySelector(this.data.rigSelector);\n  },\n  tick: function tick(time, delta) {\n    if (!this.el.sceneEl.is('vr-mode')) return;\n    var data = this.data;\n    var el = this.rigElement;\n    var velocity = this.velocity;\n    //console.log(\"here\", this.tsData, this.tsData.length())\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis] && !this.tsData.length()) {\n      return;\n    }\n\n    // Update velocity.\n    delta = delta / 1000;\n    this.updateVelocity(delta);\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis]) {\n      return;\n    }\n\n    // Get movement vector and translate position.\n    el.object3D.position.add(this.getMovementVector(delta));\n  },\n  updateVelocity: function updateVelocity(delta) {\n    var acceleration;\n    var adAxis;\n    var adSign;\n    var data = this.data;\n    var velocity = this.velocity;\n    var wsAxis;\n    var wsSign;\n    var CLAMP_VELOCITY = 0.00001;\n    adAxis = data.adAxis;\n    wsAxis = data.wsAxis;\n\n    // If FPS too low, reset velocity.\n    if (delta > 0.2) {\n      velocity[adAxis] = 0;\n      velocity[wsAxis] = 0;\n      return;\n    }\n\n    // https://gamedev.stackexchange.com/questions/151383/frame-rate-independant-movement-with-acceleration\n    var scaledEasing = Math.pow(1 / this.easing, delta * 60);\n    // Velocity Easing.\n    if (velocity[adAxis] !== 0) {\n      velocity[adAxis] = velocity[adAxis] * scaledEasing;\n    }\n    if (velocity[wsAxis] !== 0) {\n      velocity[wsAxis] = velocity[wsAxis] * scaledEasing;\n    }\n\n    // Clamp velocity easing.\n    if (Math.abs(velocity[adAxis]) < CLAMP_VELOCITY) {\n      velocity[adAxis] = 0;\n    }\n    if (Math.abs(velocity[wsAxis]) < CLAMP_VELOCITY) {\n      velocity[wsAxis] = 0;\n    }\n    if (!data.enabled) {\n      return;\n    }\n\n    // Update velocity using keys pressed.\n    acceleration = data.acceleration;\n    if (data.adEnabled && this.tsData.x) {\n      adSign = data.adInverted ? -1 : 1;\n      velocity[adAxis] += adSign * acceleration * this.tsData.x * delta;\n    }\n    if (data.wsEnabled) {\n      wsSign = data.wsInverted ? -1 : 1;\n      velocity[wsAxis] += wsSign * acceleration * this.tsData.y * delta;\n    }\n  },\n  getMovementVector: function () {\n    var directionVector = new THREE.Vector3(0, 0, 0);\n    var rotationEuler = new THREE.Euler(0, 0, 0, 'YXZ');\n    return function (delta) {\n      var rotation = this.el.sceneEl.camera.el.object3D.rotation;\n      var velocity = this.velocity;\n      var xRotation;\n      directionVector.copy(velocity);\n      directionVector.multiplyScalar(delta);\n      // Absolute.\n      if (!rotation) {\n        return directionVector;\n      }\n      xRotation = this.data.fly ? rotation.x : 0;\n\n      // Transform direction relative to heading.\n      rotationEuler.set(xRotation, rotation.y, 0);\n      directionVector.applyEuler(rotationEuler);\n      return directionVector;\n    };\n  }(),\n  thumbstickMoved: function thumbstickMoved(evt) {\n    this.tsData.set(evt.detail.x, evt.detail.y);\n  },\n  remove: function remove() {\n    this.el.removeEventListener('thumbstickmoved', this.thumbstickMoved);\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzE1NC5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2NoZW1hIiwiYWNjZWxlcmF0aW9uIiwicmlnU2VsZWN0b3IiLCJmbHkiLCJjb250cm9sbGVyT3JpZW50ZWQiLCJhZEF4aXMiLCJvbmVPZiIsIndzQXhpcyIsImVuYWJsZWQiLCJhZEVuYWJsZWQiLCJhZEludmVydGVkIiwid3NFbmFibGVkIiwid3NJbnZlcnRlZCIsIm1vZGUiLCJpbml0IiwiZWFzaW5nIiwidmVsb2NpdHkiLCJUSFJFRSIsIlZlY3RvcjMiLCJ0c0RhdGEiLCJWZWN0b3IyIiwidGh1bWJzdGlja01vdmVkIiwiYmluZCIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInVwZGF0ZSIsInJpZ0VsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhIiwidGljayIsInRpbWUiLCJkZWx0YSIsInNjZW5lRWwiLCJpcyIsImxlbmd0aCIsInVwZGF0ZVZlbG9jaXR5Iiwib2JqZWN0M0QiLCJwb3NpdGlvbiIsImFkZCIsImdldE1vdmVtZW50VmVjdG9yIiwiYWRTaWduIiwid3NTaWduIiwiQ0xBTVBfVkVMT0NJVFkiLCJzY2FsZWRFYXNpbmciLCJNYXRoIiwicG93IiwiYWJzIiwieCIsInkiLCJkaXJlY3Rpb25WZWN0b3IiLCJyb3RhdGlvbkV1bGVyIiwiRXVsZXIiLCJyb3RhdGlvbiIsImNhbWVyYSIsInhSb3RhdGlvbiIsImNvcHkiLCJtdWx0aXBseVNjYWxhciIsInNldCIsImFwcGx5RXVsZXIiLCJldnQiLCJkZXRhaWwiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIl0sInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2FmcmFtZS9vY3VsdXMtdGh1bWJzdGljay1jb250cm9scy5qcz9jZmRjIl0sInNvdXJjZXNDb250ZW50IjpbIkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnb2N1bHVzLXRodW1ic3RpY2stY29udHJvbHMnLCB7XG4gICAgc2NoZW1hOiB7XG4gICAgICAgIGFjY2VsZXJhdGlvbjogeyBkZWZhdWx0OiAzMCB9LFxuICAgICAgICByaWdTZWxlY3Rvcjoge2RlZmF1bHQ6IFwiI3JpZ1wifSxcbiAgICAgICAgZmx5OiB7IGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgICAgIGNvbnRyb2xsZXJPcmllbnRlZDogeyBkZWZhdWx0OiBmYWxzZSB9LFxuICAgICAgICBhZEF4aXM6IHtkZWZhdWx0OiAneCcsIG9uZU9mOiBbJ3gnLCAneScsICd6J119LFxuICAgICAgICB3c0F4aXM6IHtkZWZhdWx0OiAneicsIG9uZU9mOiBbJ3gnLCAneScsICd6J119LFxuICAgICAgICBlbmFibGVkOiB7ZGVmYXVsdDogdHJ1ZX0sXG4gICAgICAgIGFkRW5hYmxlZDoge2RlZmF1bHQ6IHRydWV9LFxuICAgICAgICBhZEludmVydGVkOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgICAgICB3c0VuYWJsZWQ6IHtkZWZhdWx0OiB0cnVlfSxcbiAgICAgICAgd3NJbnZlcnRlZDoge2RlZmF1bHQ6IGZhbHNlfSxcbiAgICAgICAgbW9kZTogeyBkZWZhdWx0OiAnbW92ZScsIG9uZU9mOiBbJ21vdmUnLCAnbG9vayddfVxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVhc2luZyA9IDEuMTtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApO1xuICAgICAgICB0aGlzLnRzRGF0YSA9IG5ldyBUSFJFRS5WZWN0b3IyKDAsIDApO1xuXG4gICAgICAgIHRoaXMudGh1bWJzdGlja01vdmVkID0gdGhpcy50aHVtYnN0aWNrTW92ZWQuYmluZCh0aGlzKVxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RodW1ic3RpY2ttb3ZlZCcsIHRoaXMudGh1bWJzdGlja01vdmVkKTtcbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucmlnRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5kYXRhLnJpZ1NlbGVjdG9yKVxuICAgIH0sXG4gICAgdGljazogZnVuY3Rpb24gKHRpbWUsIGRlbHRhKSB7XG4gICAgICAgIGlmICghdGhpcy5lbC5zY2VuZUVsLmlzKCd2ci1tb2RlJykpIHJldHVybjtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgICAgIHZhciBlbCA9IHRoaXMucmlnRWxlbWVudFxuICAgICAgICB2YXIgdmVsb2NpdHkgPSB0aGlzLnZlbG9jaXR5O1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiaGVyZVwiLCB0aGlzLnRzRGF0YSwgdGhpcy50c0RhdGEubGVuZ3RoKCkpXG4gICAgICAgIGlmICghdmVsb2NpdHlbZGF0YS5hZEF4aXNdICYmICF2ZWxvY2l0eVtkYXRhLndzQXhpc10gJiYgIXRoaXMudHNEYXRhLmxlbmd0aCgpKSB7IHJldHVybjsgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSB2ZWxvY2l0eS5cbiAgICAgICAgZGVsdGEgPSBkZWx0YSAvIDEwMDA7XG4gICAgICAgIHRoaXMudXBkYXRlVmVsb2NpdHkoZGVsdGEpO1xuXG4gICAgICAgIGlmICghdmVsb2NpdHlbZGF0YS5hZEF4aXNdICYmICF2ZWxvY2l0eVtkYXRhLndzQXhpc10pIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgLy8gR2V0IG1vdmVtZW50IHZlY3RvciBhbmQgdHJhbnNsYXRlIHBvc2l0aW9uLlxuICAgICAgICBlbC5vYmplY3QzRC5wb3NpdGlvbi5hZGQodGhpcy5nZXRNb3ZlbWVudFZlY3RvcihkZWx0YSkpO1xuICAgIH0sXG4gICAgdXBkYXRlVmVsb2NpdHk6IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICB2YXIgYWNjZWxlcmF0aW9uO1xuICAgICAgICB2YXIgYWRBeGlzO1xuICAgICAgICB2YXIgYWRTaWduO1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgICAgdmFyIHZlbG9jaXR5ID0gdGhpcy52ZWxvY2l0eTtcbiAgICAgICAgdmFyIHdzQXhpcztcbiAgICAgICAgdmFyIHdzU2lnbjtcbiAgICAgICAgY29uc3QgQ0xBTVBfVkVMT0NJVFkgPSAwLjAwMDAxO1xuXG4gICAgICAgIGFkQXhpcyA9IGRhdGEuYWRBeGlzO1xuICAgICAgICB3c0F4aXMgPSBkYXRhLndzQXhpcztcblxuICAgICAgICAvLyBJZiBGUFMgdG9vIGxvdywgcmVzZXQgdmVsb2NpdHkuXG4gICAgICAgIGlmIChkZWx0YSA+IDAuMikge1xuICAgICAgICAgICAgdmVsb2NpdHlbYWRBeGlzXSA9IDA7XG4gICAgICAgICAgICB2ZWxvY2l0eVt3c0F4aXNdID0gMDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2FtZWRldi5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvMTUxMzgzL2ZyYW1lLXJhdGUtaW5kZXBlbmRhbnQtbW92ZW1lbnQtd2l0aC1hY2NlbGVyYXRpb25cbiAgICAgICAgdmFyIHNjYWxlZEVhc2luZyA9IE1hdGgucG93KDEgLyB0aGlzLmVhc2luZywgZGVsdGEgKiA2MCk7XG4gICAgICAgIC8vIFZlbG9jaXR5IEVhc2luZy5cbiAgICAgICAgaWYgKHZlbG9jaXR5W2FkQXhpc10gIT09IDApIHtcbiAgICAgICAgICAgIHZlbG9jaXR5W2FkQXhpc10gPSB2ZWxvY2l0eVthZEF4aXNdICogc2NhbGVkRWFzaW5nO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2ZWxvY2l0eVt3c0F4aXNdICE9PSAwKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eVt3c0F4aXNdID0gdmVsb2NpdHlbd3NBeGlzXSAqIHNjYWxlZEVhc2luZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsYW1wIHZlbG9jaXR5IGVhc2luZy5cbiAgICAgICAgaWYgKE1hdGguYWJzKHZlbG9jaXR5W2FkQXhpc10pIDwgQ0xBTVBfVkVMT0NJVFkpIHsgdmVsb2NpdHlbYWRBeGlzXSA9IDA7IH1cbiAgICAgICAgaWYgKE1hdGguYWJzKHZlbG9jaXR5W3dzQXhpc10pIDwgQ0xBTVBfVkVMT0NJVFkpIHsgdmVsb2NpdHlbd3NBeGlzXSA9IDA7IH1cblxuICAgICAgICBpZiAoIWRhdGEuZW5hYmxlZCkgeyByZXR1cm47IH1cblxuICAgICAgICAvLyBVcGRhdGUgdmVsb2NpdHkgdXNpbmcga2V5cyBwcmVzc2VkLlxuICAgICAgICBhY2NlbGVyYXRpb24gPSBkYXRhLmFjY2VsZXJhdGlvbjtcbiAgICAgICAgaWYgKGRhdGEuYWRFbmFibGVkICYmIHRoaXMudHNEYXRhLngpIHtcbiAgICAgICAgICAgIGFkU2lnbiA9IGRhdGEuYWRJbnZlcnRlZCA/IC0xIDogMTtcbiAgICAgICAgICAgIHZlbG9jaXR5W2FkQXhpc10gKz0gYWRTaWduICogYWNjZWxlcmF0aW9uICogdGhpcy50c0RhdGEueCAqIGRlbHRhOyBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS53c0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHdzU2lnbiA9IGRhdGEud3NJbnZlcnRlZCA/IC0xIDogMTtcbiAgICAgICAgICAgIHZlbG9jaXR5W3dzQXhpc10gKz0gd3NTaWduICogYWNjZWxlcmF0aW9uICogdGhpcy50c0RhdGEueSAqIGRlbHRhO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRNb3ZlbWVudFZlY3RvcjogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvblZlY3RvciA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApO1xuICAgICAgICB2YXIgcm90YXRpb25FdWxlciA9IG5ldyBUSFJFRS5FdWxlcigwLCAwLCAwLCAnWVhaJyk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5lbC5zY2VuZUVsLmNhbWVyYS5lbC5vYmplY3QzRC5yb3RhdGlvblxuICAgICAgICAgICAgdmFyIHZlbG9jaXR5ID0gdGhpcy52ZWxvY2l0eTtcbiAgICAgICAgICAgIHZhciB4Um90YXRpb247XG5cbiAgICAgICAgICAgIGRpcmVjdGlvblZlY3Rvci5jb3B5KHZlbG9jaXR5KTtcbiAgICAgICAgICAgIGRpcmVjdGlvblZlY3Rvci5tdWx0aXBseVNjYWxhcihkZWx0YSk7XG4gICAgICAgICAgICAvLyBBYnNvbHV0ZS5cbiAgICAgICAgICAgIGlmICghcm90YXRpb24pIHsgcmV0dXJuIGRpcmVjdGlvblZlY3RvcjsgfVxuICAgICAgICAgICAgeFJvdGF0aW9uID0gdGhpcy5kYXRhLmZseSA/IHJvdGF0aW9uLnggOiAwO1xuXG4gICAgICAgICAgICAvLyBUcmFuc2Zvcm0gZGlyZWN0aW9uIHJlbGF0aXZlIHRvIGhlYWRpbmcuXG4gICAgICAgICAgICByb3RhdGlvbkV1bGVyLnNldCh4Um90YXRpb24sIHJvdGF0aW9uLnksIDApO1xuICAgICAgICAgICAgZGlyZWN0aW9uVmVjdG9yLmFwcGx5RXVsZXIocm90YXRpb25FdWxlcik7XG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aW9uVmVjdG9yO1xuICAgICAgICB9O1xuICAgIH0pKCksXG4gICAgdGh1bWJzdGlja01vdmVkOiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIHRoaXMudHNEYXRhLnNldChldnQuZGV0YWlsLngsIGV2dC5kZXRhaWwueSk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0aHVtYnN0aWNrbW92ZWQnLCB0aGlzLnRodW1ic3RpY2tNb3ZlZCk7XG4gICAgfVxufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBQSxNQUFNLENBQUNDLGlCQUFpQixDQUFDLDRCQUE0QixFQUFFO0VBQ25EQyxNQUFNLEVBQUU7SUFDSkMsWUFBWSxFQUFFO01BQUUsV0FBUztJQUFHLENBQUM7SUFDN0JDLFdBQVcsRUFBRTtNQUFDLFdBQVM7SUFBTSxDQUFDO0lBQzlCQyxHQUFHLEVBQUU7TUFBRSxXQUFTO0lBQU0sQ0FBQztJQUN2QkMsa0JBQWtCLEVBQUU7TUFBRSxXQUFTO0lBQU0sQ0FBQztJQUN0Q0MsTUFBTSxFQUFFO01BQUMsV0FBUyxHQUFHO01BQUVDLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRztJQUFDLENBQUM7SUFDOUNDLE1BQU0sRUFBRTtNQUFDLFdBQVMsR0FBRztNQUFFRCxLQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUc7SUFBQyxDQUFDO0lBQzlDRSxPQUFPLEVBQUU7TUFBQyxXQUFTO0lBQUksQ0FBQztJQUN4QkMsU0FBUyxFQUFFO01BQUMsV0FBUztJQUFJLENBQUM7SUFDMUJDLFVBQVUsRUFBRTtNQUFDLFdBQVM7SUFBSyxDQUFDO0lBQzVCQyxTQUFTLEVBQUU7TUFBQyxXQUFTO0lBQUksQ0FBQztJQUMxQkMsVUFBVSxFQUFFO01BQUMsV0FBUztJQUFLLENBQUM7SUFDNUJDLElBQUksRUFBRTtNQUFFLFdBQVMsTUFBTTtNQUFFUCxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTTtJQUFDO0VBQ3BELENBQUM7RUFDRFEsSUFBSSxFQUFFLFNBQUFBLEtBQUEsRUFBWTtJQUNkLElBQUksQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7SUFDakIsSUFBSSxDQUFDQyxRQUFRLEdBQUcsSUFBSUMsS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDMUMsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSUYsS0FBSyxDQUFDRyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUVyQyxJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJLENBQUNBLGVBQWUsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN0RCxJQUFJLENBQUNDLEVBQUUsQ0FBQ0MsZ0JBQWdCLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDSCxlQUFlLENBQUM7RUFDckUsQ0FBQztFQUNESSxNQUFNLEVBQUUsU0FBQUEsT0FBQSxFQUFXO0lBQ2YsSUFBSSxDQUFDQyxVQUFVLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLElBQUksQ0FBQ0MsSUFBSSxDQUFDM0IsV0FBVyxDQUFDO0VBQ25FLENBQUM7RUFDRDRCLElBQUksRUFBRSxTQUFBQSxLQUFVQyxJQUFJLEVBQUVDLEtBQUssRUFBRTtJQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDVCxFQUFFLENBQUNVLE9BQU8sQ0FBQ0MsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFO0lBQ3BDLElBQUlMLElBQUksR0FBRyxJQUFJLENBQUNBLElBQUk7SUFDcEIsSUFBSU4sRUFBRSxHQUFHLElBQUksQ0FBQ0csVUFBVTtJQUN4QixJQUFJVixRQUFRLEdBQUcsSUFBSSxDQUFDQSxRQUFRO0lBQzVCO0lBQ0EsSUFBSSxDQUFDQSxRQUFRLENBQUNhLElBQUksQ0FBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUNXLFFBQVEsQ0FBQ2EsSUFBSSxDQUFDdEIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUNZLE1BQU0sQ0FBQ2dCLE1BQU0sQ0FBQyxDQUFDLEVBQUU7TUFBRTtJQUFROztJQUV6RjtJQUNBSCxLQUFLLEdBQUdBLEtBQUssR0FBRyxJQUFJO0lBQ3BCLElBQUksQ0FBQ0ksY0FBYyxDQUFDSixLQUFLLENBQUM7SUFFMUIsSUFBSSxDQUFDaEIsUUFBUSxDQUFDYSxJQUFJLENBQUN4QixNQUFNLENBQUMsSUFBSSxDQUFDVyxRQUFRLENBQUNhLElBQUksQ0FBQ3RCLE1BQU0sQ0FBQyxFQUFFO01BQUU7SUFBUTs7SUFFaEU7SUFDQWdCLEVBQUUsQ0FBQ2MsUUFBUSxDQUFDQyxRQUFRLENBQUNDLEdBQUcsQ0FBQyxJQUFJLENBQUNDLGlCQUFpQixDQUFDUixLQUFLLENBQUMsQ0FBQztFQUMzRCxDQUFDO0VBQ0RJLGNBQWMsRUFBRSxTQUFBQSxlQUFVSixLQUFLLEVBQUU7SUFDN0IsSUFBSS9CLFlBQVk7SUFDaEIsSUFBSUksTUFBTTtJQUNWLElBQUlvQyxNQUFNO0lBQ1YsSUFBSVosSUFBSSxHQUFHLElBQUksQ0FBQ0EsSUFBSTtJQUNwQixJQUFJYixRQUFRLEdBQUcsSUFBSSxDQUFDQSxRQUFRO0lBQzVCLElBQUlULE1BQU07SUFDVixJQUFJbUMsTUFBTTtJQUNWLElBQU1DLGNBQWMsR0FBRyxPQUFPO0lBRTlCdEMsTUFBTSxHQUFHd0IsSUFBSSxDQUFDeEIsTUFBTTtJQUNwQkUsTUFBTSxHQUFHc0IsSUFBSSxDQUFDdEIsTUFBTTs7SUFFcEI7SUFDQSxJQUFJeUIsS0FBSyxHQUFHLEdBQUcsRUFBRTtNQUNiaEIsUUFBUSxDQUFDWCxNQUFNLENBQUMsR0FBRyxDQUFDO01BQ3BCVyxRQUFRLENBQUNULE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFDcEI7SUFDSjs7SUFFQTtJQUNBLElBQUlxQyxZQUFZLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMvQixNQUFNLEVBQUVpQixLQUFLLEdBQUcsRUFBRSxDQUFDO0lBQ3hEO0lBQ0EsSUFBSWhCLFFBQVEsQ0FBQ1gsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO01BQ3hCVyxRQUFRLENBQUNYLE1BQU0sQ0FBQyxHQUFHVyxRQUFRLENBQUNYLE1BQU0sQ0FBQyxHQUFHdUMsWUFBWTtJQUN0RDtJQUNBLElBQUk1QixRQUFRLENBQUNULE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTtNQUN4QlMsUUFBUSxDQUFDVCxNQUFNLENBQUMsR0FBR1MsUUFBUSxDQUFDVCxNQUFNLENBQUMsR0FBR3FDLFlBQVk7SUFDdEQ7O0lBRUE7SUFDQSxJQUFJQyxJQUFJLENBQUNFLEdBQUcsQ0FBQy9CLFFBQVEsQ0FBQ1gsTUFBTSxDQUFDLENBQUMsR0FBR3NDLGNBQWMsRUFBRTtNQUFFM0IsUUFBUSxDQUFDWCxNQUFNLENBQUMsR0FBRyxDQUFDO0lBQUU7SUFDekUsSUFBSXdDLElBQUksQ0FBQ0UsR0FBRyxDQUFDL0IsUUFBUSxDQUFDVCxNQUFNLENBQUMsQ0FBQyxHQUFHb0MsY0FBYyxFQUFFO01BQUUzQixRQUFRLENBQUNULE1BQU0sQ0FBQyxHQUFHLENBQUM7SUFBRTtJQUV6RSxJQUFJLENBQUNzQixJQUFJLENBQUNyQixPQUFPLEVBQUU7TUFBRTtJQUFROztJQUU3QjtJQUNBUCxZQUFZLEdBQUc0QixJQUFJLENBQUM1QixZQUFZO0lBQ2hDLElBQUk0QixJQUFJLENBQUNwQixTQUFTLElBQUksSUFBSSxDQUFDVSxNQUFNLENBQUM2QixDQUFDLEVBQUU7TUFDakNQLE1BQU0sR0FBR1osSUFBSSxDQUFDbkIsVUFBVSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUM7TUFDakNNLFFBQVEsQ0FBQ1gsTUFBTSxDQUFDLElBQUlvQyxNQUFNLEdBQUd4QyxZQUFZLEdBQUcsSUFBSSxDQUFDa0IsTUFBTSxDQUFDNkIsQ0FBQyxHQUFHaEIsS0FBSztJQUNyRTtJQUNBLElBQUlILElBQUksQ0FBQ2xCLFNBQVMsRUFBRTtNQUNoQitCLE1BQU0sR0FBR2IsSUFBSSxDQUFDakIsVUFBVSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUM7TUFDakNJLFFBQVEsQ0FBQ1QsTUFBTSxDQUFDLElBQUltQyxNQUFNLEdBQUd6QyxZQUFZLEdBQUcsSUFBSSxDQUFDa0IsTUFBTSxDQUFDOEIsQ0FBQyxHQUFHakIsS0FBSztJQUNyRTtFQUNKLENBQUM7RUFDRFEsaUJBQWlCLEVBQUcsWUFBWTtJQUM1QixJQUFJVSxlQUFlLEdBQUcsSUFBSWpDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2hELElBQUlpQyxhQUFhLEdBQUcsSUFBSWxDLEtBQUssQ0FBQ21DLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUM7SUFFbkQsT0FBTyxVQUFVcEIsS0FBSyxFQUFFO01BQ3BCLElBQUlxQixRQUFRLEdBQUcsSUFBSSxDQUFDOUIsRUFBRSxDQUFDVSxPQUFPLENBQUNxQixNQUFNLENBQUMvQixFQUFFLENBQUNjLFFBQVEsQ0FBQ2dCLFFBQVE7TUFDMUQsSUFBSXJDLFFBQVEsR0FBRyxJQUFJLENBQUNBLFFBQVE7TUFDNUIsSUFBSXVDLFNBQVM7TUFFYkwsZUFBZSxDQUFDTSxJQUFJLENBQUN4QyxRQUFRLENBQUM7TUFDOUJrQyxlQUFlLENBQUNPLGNBQWMsQ0FBQ3pCLEtBQUssQ0FBQztNQUNyQztNQUNBLElBQUksQ0FBQ3FCLFFBQVEsRUFBRTtRQUFFLE9BQU9ILGVBQWU7TUFBRTtNQUN6Q0ssU0FBUyxHQUFHLElBQUksQ0FBQzFCLElBQUksQ0FBQzFCLEdBQUcsR0FBR2tELFFBQVEsQ0FBQ0wsQ0FBQyxHQUFHLENBQUM7O01BRTFDO01BQ0FHLGFBQWEsQ0FBQ08sR0FBRyxDQUFDSCxTQUFTLEVBQUVGLFFBQVEsQ0FBQ0osQ0FBQyxFQUFFLENBQUMsQ0FBQztNQUMzQ0MsZUFBZSxDQUFDUyxVQUFVLENBQUNSLGFBQWEsQ0FBQztNQUN6QyxPQUFPRCxlQUFlO0lBQzFCLENBQUM7RUFDTCxDQUFDLENBQUUsQ0FBQztFQUNKN0IsZUFBZSxFQUFFLFNBQUFBLGdCQUFVdUMsR0FBRyxFQUFFO0lBQzVCLElBQUksQ0FBQ3pDLE1BQU0sQ0FBQ3VDLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDQyxNQUFNLENBQUNiLENBQUMsRUFBRVksR0FBRyxDQUFDQyxNQUFNLENBQUNaLENBQUMsQ0FBQztFQUMvQyxDQUFDO0VBQ0RhLE1BQU0sRUFBRSxTQUFBQSxPQUFBLEVBQVk7SUFDaEIsSUFBSSxDQUFDdkMsRUFBRSxDQUFDd0MsbUJBQW1CLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDMUMsZUFBZSxDQUFDO0VBQ3hFO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119\n//# sourceURL=webpack-internal:///3154\n");

/***/ }),

/***/ 4064:
/*!************************************************************!*\
  !*** ./src/components/aframe/simple-navmesh-constraint.js ***!
  \************************************************************/
/***/ (() => {

eval("function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n/* global AFRAME, THREE */\n\nAFRAME.registerComponent('simple-navmesh-constraint', {\n  schema: {\n    enabled: {\n      \"default\": true\n    },\n    navmesh: {\n      \"default\": ''\n    },\n    fall: {\n      \"default\": 0.5\n    },\n    height: {\n      \"default\": 1.6\n    },\n    exclude: {\n      \"default\": ''\n    },\n    xzOrigin: {\n      \"default\": ''\n    }\n  },\n  update: function update() {\n    this.lastPosition = null;\n    this.excludes = this.data.exclude ? Array.from(document.querySelectorAll(this.data.exclude)) : [];\n    var els = Array.from(document.querySelectorAll(this.data.navmesh));\n    if (els === null) {\n      console.warn('simple-navmesh-constraint: Did not match any elements');\n      this.objects = [];\n    } else {\n      this.objects = els.map(function (el) {\n        return el.object3D;\n      }).concat(this.excludes.map(function (el) {\n        return el.object3D;\n      }));\n    }\n    this.xzOrigin = this.data.xzOrigin ? this.el.querySelector(this.data.xzOrigin) : this.el;\n  },\n  tick: function () {\n    var nextPosition = new THREE.Vector3();\n    var tempVec = new THREE.Vector3();\n    var scanPattern = [[0, 1],\n    // Default the next location\n    [0, 0.5],\n    // Check that the path to that location was fine\n    [30, 0.4],\n    // A little to the side shorter range\n    [-30, 0.4],\n    // A little to the side shorter range\n    [60, 0.2],\n    // Moderately to the side short range\n    [-60, 0.2],\n    // Moderately to the side short range\n    [80, 0.06],\n    // Perpendicular very short range\n    [-80, 0.06] // Perpendicular very short range\n    ];\n    var down = new THREE.Vector3(0, -1, 0);\n    var raycaster = new THREE.Raycaster();\n    var gravity = -1;\n    var maxYVelocity = 0.5;\n    var results = [];\n    var yVel = 0;\n    var firstTry = true;\n    return function tick(time, delta) {\n      if (this.data.enabled === false) return;\n      if (this.lastPosition === null) {\n        firstTry = true;\n        this.lastPosition = new THREE.Vector3();\n        this.xzOrigin.object3D.getWorldPosition(this.lastPosition);\n        if (this.data.xzOrigin) this.lastPosition.y -= this.xzOrigin.object3D.position.y;\n      }\n      var el = this.el;\n      if (this.objects.length === 0) return;\n      this.xzOrigin.object3D.getWorldPosition(nextPosition);\n      if (this.data.xzOrigin) nextPosition.y -= this.xzOrigin.object3D.position.y;\n      if (nextPosition.distanceTo(this.lastPosition) <= 0.01) return;\n      var didHit = false;\n      // So that it does not get stuck it takes as few samples around the user and finds the most appropriate\n      scanPatternLoop: for (var _i = 0, _scanPattern = scanPattern; _i < _scanPattern.length; _i++) {\n        var _scanPattern$_i = _slicedToArray(_scanPattern[_i], 2),\n          angle = _scanPattern$_i[0],\n          distance = _scanPattern$_i[1];\n        tempVec.subVectors(nextPosition, this.lastPosition);\n        tempVec.applyAxisAngle(down, angle * Math.PI / 180);\n        tempVec.multiplyScalar(distance);\n        tempVec.add(this.lastPosition);\n        tempVec.y += maxYVelocity;\n        tempVec.y -= this.data.height;\n        raycaster.set(tempVec, down);\n        raycaster.far = this.data.fall > 0 ? this.data.fall + maxYVelocity : Infinity;\n        raycaster.intersectObjects(this.objects, true, results);\n        if (results.length) {\n          // If it hit something we want to avoid then ignore it and stop looking\n          for (var _i2 = 0, _results = results; _i2 < _results.length; _i2++) {\n            var result = _results[_i2];\n            if (this.excludes.includes(result.object.el)) {\n              results.splice(0);\n              continue scanPatternLoop;\n            }\n          }\n          var hitPos = results[0].point;\n          results.splice(0);\n          hitPos.y += this.data.height;\n          if (nextPosition.y - (hitPos.y - yVel * 2) > 0.01) {\n            yVel += Math.max(gravity * delta * 0.001, -maxYVelocity);\n            hitPos.y = nextPosition.y + yVel;\n          } else {\n            yVel = 0;\n          }\n          tempVec.copy(hitPos);\n          this.xzOrigin.object3D.parent.worldToLocal(tempVec);\n          tempVec.sub(this.xzOrigin.object3D.position);\n          if (this.data.xzOrigin) tempVec.y += this.xzOrigin.object3D.position.y;\n          this.el.object3D.position.add(tempVec);\n          this.lastPosition.copy(hitPos);\n          didHit = true;\n          break;\n        }\n      }\n      if (didHit) {\n        firstTry = false;\n      }\n      if (!firstTry && !didHit) {\n        this.el.object3D.position.copy(this.lastPosition);\n        this.el.object3D.parent.worldToLocal(this.el.object3D.position);\n      }\n    };\n  }()\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDA2NC5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2NoZW1hIiwiZW5hYmxlZCIsIm5hdm1lc2giLCJmYWxsIiwiaGVpZ2h0IiwiZXhjbHVkZSIsInh6T3JpZ2luIiwidXBkYXRlIiwibGFzdFBvc2l0aW9uIiwiZXhjbHVkZXMiLCJkYXRhIiwiQXJyYXkiLCJmcm9tIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxzIiwiY29uc29sZSIsIndhcm4iLCJvYmplY3RzIiwibWFwIiwiZWwiLCJvYmplY3QzRCIsImNvbmNhdCIsInF1ZXJ5U2VsZWN0b3IiLCJ0aWNrIiwibmV4dFBvc2l0aW9uIiwiVEhSRUUiLCJWZWN0b3IzIiwidGVtcFZlYyIsInNjYW5QYXR0ZXJuIiwiZG93biIsInJheWNhc3RlciIsIlJheWNhc3RlciIsImdyYXZpdHkiLCJtYXhZVmVsb2NpdHkiLCJyZXN1bHRzIiwieVZlbCIsImZpcnN0VHJ5IiwidGltZSIsImRlbHRhIiwiZ2V0V29ybGRQb3NpdGlvbiIsInkiLCJwb3NpdGlvbiIsImxlbmd0aCIsImRpc3RhbmNlVG8iLCJkaWRIaXQiLCJzY2FuUGF0dGVybkxvb3AiLCJfaSIsIl9zY2FuUGF0dGVybiIsIl9zY2FuUGF0dGVybiRfaSIsIl9zbGljZWRUb0FycmF5IiwiYW5nbGUiLCJkaXN0YW5jZSIsInN1YlZlY3RvcnMiLCJhcHBseUF4aXNBbmdsZSIsIk1hdGgiLCJQSSIsIm11bHRpcGx5U2NhbGFyIiwiYWRkIiwic2V0IiwiZmFyIiwiSW5maW5pdHkiLCJpbnRlcnNlY3RPYmplY3RzIiwiX2kyIiwiX3Jlc3VsdHMiLCJyZXN1bHQiLCJpbmNsdWRlcyIsIm9iamVjdCIsInNwbGljZSIsImhpdFBvcyIsInBvaW50IiwibWF4IiwiY29weSIsInBhcmVudCIsIndvcmxkVG9Mb2NhbCIsInN1YiJdLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9hZnJhbWUvc2ltcGxlLW5hdm1lc2gtY29uc3RyYWludC5qcz9iMGM3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnc2ltcGxlLW5hdm1lc2gtY29uc3RyYWludCcsIHtcbiAgICBzY2hlbWE6IHtcbiAgICAgIGVuYWJsZWQ6IHtcbiAgICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgfSxcbiAgICAgIG5hdm1lc2g6IHtcbiAgICAgICAgZGVmYXVsdDogJydcbiAgICAgIH0sXG4gICAgICBmYWxsOiB7XG4gICAgICAgIGRlZmF1bHQ6IDAuNVxuICAgICAgfSxcbiAgICAgIGhlaWdodDoge1xuICAgICAgICBkZWZhdWx0OiAxLjZcbiAgICAgIH0sXG4gICAgICBleGNsdWRlOiB7XG4gICAgICAgIGRlZmF1bHQ6ICcnXG4gICAgICB9LFxuICAgICAgeHpPcmlnaW46IHtcbiAgICAgICAgZGVmYXVsdDogJydcbiAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5sYXN0UG9zaXRpb24gPSBudWxsO1xuICAgICAgdGhpcy5leGNsdWRlcyA9IHRoaXMuZGF0YS5leGNsdWRlID8gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuZGF0YS5leGNsdWRlKSk6W107XG4gICAgICBjb25zdCBlbHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5kYXRhLm5hdm1lc2gpKTtcbiAgICAgIGlmIChlbHMgPT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdzaW1wbGUtbmF2bWVzaC1jb25zdHJhaW50OiBEaWQgbm90IG1hdGNoIGFueSBlbGVtZW50cycpO1xuICAgICAgICB0aGlzLm9iamVjdHMgPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub2JqZWN0cyA9IGVscy5tYXAoZWwgPT4gZWwub2JqZWN0M0QpLmNvbmNhdCh0aGlzLmV4Y2x1ZGVzLm1hcChlbCA9PiBlbC5vYmplY3QzRCkpO1xuICAgICAgfVxuICAgICAgdGhpcy54ek9yaWdpbiA9IHRoaXMuZGF0YS54ek9yaWdpbiA/IHRoaXMuZWwucXVlcnlTZWxlY3Rvcih0aGlzLmRhdGEueHpPcmlnaW4pIDogdGhpcy5lbDtcbiAgICB9LFxuICBcbiAgICB0aWNrOiAoZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgbmV4dFBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgIGNvbnN0IHRlbXBWZWMgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgY29uc3Qgc2NhblBhdHRlcm4gPSBbXG4gICAgICAgIFswLDFdLCAvLyBEZWZhdWx0IHRoZSBuZXh0IGxvY2F0aW9uXG4gICAgICAgIFswLDAuNV0sIC8vIENoZWNrIHRoYXQgdGhlIHBhdGggdG8gdGhhdCBsb2NhdGlvbiB3YXMgZmluZVxuICAgICAgICBbMzAsMC40XSwgLy8gQSBsaXR0bGUgdG8gdGhlIHNpZGUgc2hvcnRlciByYW5nZVxuICAgICAgICBbLTMwLDAuNF0sIC8vIEEgbGl0dGxlIHRvIHRoZSBzaWRlIHNob3J0ZXIgcmFuZ2VcbiAgICAgICAgWzYwLDAuMl0sIC8vIE1vZGVyYXRlbHkgdG8gdGhlIHNpZGUgc2hvcnQgcmFuZ2VcbiAgICAgICAgWy02MCwwLjJdLCAvLyBNb2RlcmF0ZWx5IHRvIHRoZSBzaWRlIHNob3J0IHJhbmdlXG4gICAgICAgIFs4MCwwLjA2XSwgLy8gUGVycGVuZGljdWxhciB2ZXJ5IHNob3J0IHJhbmdlXG4gICAgICAgIFstODAsMC4wNl0sIC8vIFBlcnBlbmRpY3VsYXIgdmVyeSBzaG9ydCByYW5nZVxuICAgICAgXTtcbiAgICAgIGNvbnN0IGRvd24gPSBuZXcgVEhSRUUuVmVjdG9yMygwLC0xLDApO1xuICAgICAgY29uc3QgcmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xuICAgICAgY29uc3QgZ3Jhdml0eSA9IC0xO1xuICAgICAgY29uc3QgbWF4WVZlbG9jaXR5ID0gMC41O1xuICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgICAgbGV0IHlWZWwgPSAwO1xuICAgICAgbGV0IGZpcnN0VHJ5ID0gdHJ1ZTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRpY2sodGltZSwgZGVsdGEpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5sYXN0UG9zaXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgICBmaXJzdFRyeSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5sYXN0UG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICAgIHRoaXMueHpPcmlnaW4ub2JqZWN0M0QuZ2V0V29ybGRQb3NpdGlvbih0aGlzLmxhc3RQb3NpdGlvbik7XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS54ek9yaWdpbikgdGhpcy5sYXN0UG9zaXRpb24ueSAtPSB0aGlzLnh6T3JpZ2luLm9iamVjdDNELnBvc2l0aW9uLnk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5lbDtcbiAgICAgICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgXG4gICAgICAgIHRoaXMueHpPcmlnaW4ub2JqZWN0M0QuZ2V0V29ybGRQb3NpdGlvbihuZXh0UG9zaXRpb24pO1xuICAgICAgICBpZiAodGhpcy5kYXRhLnh6T3JpZ2luKSBuZXh0UG9zaXRpb24ueSAtPSB0aGlzLnh6T3JpZ2luLm9iamVjdDNELnBvc2l0aW9uLnk7XG4gICAgICAgIGlmIChuZXh0UG9zaXRpb24uZGlzdGFuY2VUbyh0aGlzLmxhc3RQb3NpdGlvbikgPD0gMC4wMSkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgbGV0IGRpZEhpdCA9IGZhbHNlO1xuICAgICAgICAvLyBTbyB0aGF0IGl0IGRvZXMgbm90IGdldCBzdHVjayBpdCB0YWtlcyBhcyBmZXcgc2FtcGxlcyBhcm91bmQgdGhlIHVzZXIgYW5kIGZpbmRzIHRoZSBtb3N0IGFwcHJvcHJpYXRlXG4gICAgICAgIHNjYW5QYXR0ZXJuTG9vcDpcbiAgICAgICAgZm9yIChjb25zdCBbYW5nbGUsIGRpc3RhbmNlXSBvZiBzY2FuUGF0dGVybikge1xuICAgICAgICAgIHRlbXBWZWMuc3ViVmVjdG9ycyhuZXh0UG9zaXRpb24sIHRoaXMubGFzdFBvc2l0aW9uKTtcbiAgICAgICAgICB0ZW1wVmVjLmFwcGx5QXhpc0FuZ2xlKGRvd24sIGFuZ2xlKk1hdGguUEkvMTgwKTtcbiAgICAgICAgICB0ZW1wVmVjLm11bHRpcGx5U2NhbGFyKGRpc3RhbmNlKTtcbiAgICAgICAgICB0ZW1wVmVjLmFkZCh0aGlzLmxhc3RQb3NpdGlvbik7XG4gICAgICAgICAgdGVtcFZlYy55ICs9IG1heFlWZWxvY2l0eTtcbiAgICAgICAgICB0ZW1wVmVjLnkgLT0gdGhpcy5kYXRhLmhlaWdodDtcbiAgICAgICAgICByYXljYXN0ZXIuc2V0KHRlbXBWZWMsIGRvd24pO1xuICAgICAgICAgIHJheWNhc3Rlci5mYXIgPSB0aGlzLmRhdGEuZmFsbCA+IDAgPyB0aGlzLmRhdGEuZmFsbCArIG1heFlWZWxvY2l0eSA6IEluZmluaXR5O1xuICAgICAgICAgIHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHRoaXMub2JqZWN0cywgdHJ1ZSwgcmVzdWx0cyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBJZiBpdCBoaXQgc29tZXRoaW5nIHdlIHdhbnQgdG8gYXZvaWQgdGhlbiBpZ25vcmUgaXQgYW5kIHN0b3AgbG9va2luZ1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICBpZih0aGlzLmV4Y2x1ZGVzLmluY2x1ZGVzKHJlc3VsdC5vYmplY3QuZWwpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5zcGxpY2UoMCk7XG4gICAgICAgICAgICAgICAgY29udGludWUgc2NhblBhdHRlcm5Mb29wO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoaXRQb3MgPSByZXN1bHRzWzBdLnBvaW50O1xuICAgICAgICAgICAgcmVzdWx0cy5zcGxpY2UoMCk7XG4gICAgICAgICAgICBoaXRQb3MueSArPSB0aGlzLmRhdGEuaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKG5leHRQb3NpdGlvbi55IC0gKGhpdFBvcy55IC0geVZlbCoyKSA+IDAuMDEpIHtcbiAgICAgICAgICAgICAgeVZlbCArPSBNYXRoLm1heChncmF2aXR5ICogZGVsdGEgKiAwLjAwMSwgLW1heFlWZWxvY2l0eSk7XG4gICAgICAgICAgICAgIGhpdFBvcy55ID0gbmV4dFBvc2l0aW9uLnkgKyB5VmVsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgeVZlbCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wVmVjLmNvcHkoaGl0UG9zKTtcbiAgICAgICAgICAgIHRoaXMueHpPcmlnaW4ub2JqZWN0M0QucGFyZW50LndvcmxkVG9Mb2NhbCh0ZW1wVmVjKTtcbiAgICAgICAgICAgIHRlbXBWZWMuc3ViKHRoaXMueHpPcmlnaW4ub2JqZWN0M0QucG9zaXRpb24pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS54ek9yaWdpbikgdGVtcFZlYy55ICs9IHRoaXMueHpPcmlnaW4ub2JqZWN0M0QucG9zaXRpb24ueTtcbiAgICAgICAgICAgIHRoaXMuZWwub2JqZWN0M0QucG9zaXRpb24uYWRkKHRlbXBWZWMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmxhc3RQb3NpdGlvbi5jb3B5KGhpdFBvcyk7XG4gICAgICAgICAgICBkaWRIaXQgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZGlkSGl0KSB7XG4gICAgICAgICAgZmlyc3RUcnkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCFmaXJzdFRyeSAmJiAhZGlkSGl0KSB7XG4gICAgICAgICAgdGhpcy5lbC5vYmplY3QzRC5wb3NpdGlvbi5jb3B5KHRoaXMubGFzdFBvc2l0aW9uKTtcbiAgICAgICAgICB0aGlzLmVsLm9iamVjdDNELnBhcmVudC53b3JsZFRvTG9jYWwodGhpcy5lbC5vYmplY3QzRC5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KCkpXG4gIH0pO1xuICAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztBQUVBQSxNQUFNLENBQUNDLGlCQUFpQixDQUFDLDJCQUEyQixFQUFFO0VBQ2xEQyxNQUFNLEVBQUU7SUFDTkMsT0FBTyxFQUFFO01BQ1AsV0FBUztJQUNYLENBQUM7SUFDREMsT0FBTyxFQUFFO01BQ1AsV0FBUztJQUNYLENBQUM7SUFDREMsSUFBSSxFQUFFO01BQ0osV0FBUztJQUNYLENBQUM7SUFDREMsTUFBTSxFQUFFO01BQ04sV0FBUztJQUNYLENBQUM7SUFDREMsT0FBTyxFQUFFO01BQ1AsV0FBUztJQUNYLENBQUM7SUFDREMsUUFBUSxFQUFFO01BQ1IsV0FBUztJQUNYO0VBQ0YsQ0FBQztFQUVEQyxNQUFNLEVBQUUsU0FBQUEsT0FBQSxFQUFZO0lBQ2xCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUk7SUFDeEIsSUFBSSxDQUFDQyxRQUFRLEdBQUcsSUFBSSxDQUFDQyxJQUFJLENBQUNMLE9BQU8sR0FBR00sS0FBSyxDQUFDQyxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsSUFBSSxDQUFDSixJQUFJLENBQUNMLE9BQU8sQ0FBQyxDQUFDLEdBQUMsRUFBRTtJQUMvRixJQUFNVSxHQUFHLEdBQUdKLEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxRQUFRLENBQUNDLGdCQUFnQixDQUFDLElBQUksQ0FBQ0osSUFBSSxDQUFDUixPQUFPLENBQUMsQ0FBQztJQUNwRSxJQUFJYSxHQUFHLEtBQUssSUFBSSxFQUFFO01BQ2hCQyxPQUFPLENBQUNDLElBQUksQ0FBQyx1REFBdUQsQ0FBQztNQUNyRSxJQUFJLENBQUNDLE9BQU8sR0FBRyxFQUFFO0lBQ25CLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQ0EsT0FBTyxHQUFHSCxHQUFHLENBQUNJLEdBQUcsQ0FBQyxVQUFBQyxFQUFFO1FBQUEsT0FBSUEsRUFBRSxDQUFDQyxRQUFRO01BQUEsRUFBQyxDQUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDYixRQUFRLENBQUNVLEdBQUcsQ0FBQyxVQUFBQyxFQUFFO1FBQUEsT0FBSUEsRUFBRSxDQUFDQyxRQUFRO01BQUEsRUFBQyxDQUFDO0lBQ3hGO0lBQ0EsSUFBSSxDQUFDZixRQUFRLEdBQUcsSUFBSSxDQUFDSSxJQUFJLENBQUNKLFFBQVEsR0FBRyxJQUFJLENBQUNjLEVBQUUsQ0FBQ0csYUFBYSxDQUFDLElBQUksQ0FBQ2IsSUFBSSxDQUFDSixRQUFRLENBQUMsR0FBRyxJQUFJLENBQUNjLEVBQUU7RUFDMUYsQ0FBQztFQUVESSxJQUFJLEVBQUcsWUFBWTtJQUNqQixJQUFNQyxZQUFZLEdBQUcsSUFBSUMsS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQztJQUN4QyxJQUFNQyxPQUFPLEdBQUcsSUFBSUYsS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQztJQUNuQyxJQUFNRSxXQUFXLEdBQUcsQ0FDbEIsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQUU7SUFDUCxDQUFDLENBQUMsRUFBQyxHQUFHLENBQUM7SUFBRTtJQUNULENBQUMsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUFFO0lBQ1YsQ0FBQyxDQUFDLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFBRTtJQUNYLENBQUMsRUFBRSxFQUFDLEdBQUcsQ0FBQztJQUFFO0lBQ1YsQ0FBQyxDQUFDLEVBQUUsRUFBQyxHQUFHLENBQUM7SUFBRTtJQUNYLENBQUMsRUFBRSxFQUFDLElBQUksQ0FBQztJQUFFO0lBQ1gsQ0FBQyxDQUFDLEVBQUUsRUFBQyxJQUFJLENBQUMsQ0FBRTtJQUFBLENBQ2I7SUFDRCxJQUFNQyxJQUFJLEdBQUcsSUFBSUosS0FBSyxDQUFDQyxPQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUN0QyxJQUFNSSxTQUFTLEdBQUcsSUFBSUwsS0FBSyxDQUFDTSxTQUFTLENBQUMsQ0FBQztJQUN2QyxJQUFNQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBQ2xCLElBQU1DLFlBQVksR0FBRyxHQUFHO0lBQ3hCLElBQU1DLE9BQU8sR0FBRyxFQUFFO0lBQ2xCLElBQUlDLElBQUksR0FBRyxDQUFDO0lBQ1osSUFBSUMsUUFBUSxHQUFHLElBQUk7SUFFbkIsT0FBTyxTQUFTYixJQUFJQSxDQUFDYyxJQUFJLEVBQUVDLEtBQUssRUFBRTtNQUNoQyxJQUFJLElBQUksQ0FBQzdCLElBQUksQ0FBQ1QsT0FBTyxLQUFLLEtBQUssRUFBRTtNQUNqQyxJQUFJLElBQUksQ0FBQ08sWUFBWSxLQUFLLElBQUksRUFBRTtRQUM5QjZCLFFBQVEsR0FBRyxJQUFJO1FBQ2YsSUFBSSxDQUFDN0IsWUFBWSxHQUFHLElBQUlrQixLQUFLLENBQUNDLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZDLElBQUksQ0FBQ3JCLFFBQVEsQ0FBQ2UsUUFBUSxDQUFDbUIsZ0JBQWdCLENBQUMsSUFBSSxDQUFDaEMsWUFBWSxDQUFDO1FBQzFELElBQUksSUFBSSxDQUFDRSxJQUFJLENBQUNKLFFBQVEsRUFBRSxJQUFJLENBQUNFLFlBQVksQ0FBQ2lDLENBQUMsSUFBSSxJQUFJLENBQUNuQyxRQUFRLENBQUNlLFFBQVEsQ0FBQ3FCLFFBQVEsQ0FBQ0QsQ0FBQztNQUNsRjtNQUVBLElBQU1yQixFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO01BQ2xCLElBQUksSUFBSSxDQUFDRixPQUFPLENBQUN5QixNQUFNLEtBQUssQ0FBQyxFQUFFO01BRS9CLElBQUksQ0FBQ3JDLFFBQVEsQ0FBQ2UsUUFBUSxDQUFDbUIsZ0JBQWdCLENBQUNmLFlBQVksQ0FBQztNQUNyRCxJQUFJLElBQUksQ0FBQ2YsSUFBSSxDQUFDSixRQUFRLEVBQUVtQixZQUFZLENBQUNnQixDQUFDLElBQUksSUFBSSxDQUFDbkMsUUFBUSxDQUFDZSxRQUFRLENBQUNxQixRQUFRLENBQUNELENBQUM7TUFDM0UsSUFBSWhCLFlBQVksQ0FBQ21CLFVBQVUsQ0FBQyxJQUFJLENBQUNwQyxZQUFZLENBQUMsSUFBSSxJQUFJLEVBQUU7TUFFeEQsSUFBSXFDLE1BQU0sR0FBRyxLQUFLO01BQ2xCO01BQ0FDLGVBQWUsRUFDZixTQUFBQyxFQUFBLE1BQUFDLFlBQUEsR0FBZ0NuQixXQUFXLEVBQUFrQixFQUFBLEdBQUFDLFlBQUEsQ0FBQUwsTUFBQSxFQUFBSSxFQUFBLElBQUU7UUFBeEMsSUFBQUUsZUFBQSxHQUFBQyxjQUFBLENBQUFGLFlBQUEsQ0FBQUQsRUFBQTtVQUFPSSxLQUFLLEdBQUFGLGVBQUE7VUFBRUcsUUFBUSxHQUFBSCxlQUFBO1FBQ3pCckIsT0FBTyxDQUFDeUIsVUFBVSxDQUFDNUIsWUFBWSxFQUFFLElBQUksQ0FBQ2pCLFlBQVksQ0FBQztRQUNuRG9CLE9BQU8sQ0FBQzBCLGNBQWMsQ0FBQ3hCLElBQUksRUFBRXFCLEtBQUssR0FBQ0ksSUFBSSxDQUFDQyxFQUFFLEdBQUMsR0FBRyxDQUFDO1FBQy9DNUIsT0FBTyxDQUFDNkIsY0FBYyxDQUFDTCxRQUFRLENBQUM7UUFDaEN4QixPQUFPLENBQUM4QixHQUFHLENBQUMsSUFBSSxDQUFDbEQsWUFBWSxDQUFDO1FBQzlCb0IsT0FBTyxDQUFDYSxDQUFDLElBQUlQLFlBQVk7UUFDekJOLE9BQU8sQ0FBQ2EsQ0FBQyxJQUFJLElBQUksQ0FBQy9CLElBQUksQ0FBQ04sTUFBTTtRQUM3QjJCLFNBQVMsQ0FBQzRCLEdBQUcsQ0FBQy9CLE9BQU8sRUFBRUUsSUFBSSxDQUFDO1FBQzVCQyxTQUFTLENBQUM2QixHQUFHLEdBQUcsSUFBSSxDQUFDbEQsSUFBSSxDQUFDUCxJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQ08sSUFBSSxDQUFDUCxJQUFJLEdBQUcrQixZQUFZLEdBQUcyQixRQUFRO1FBQzdFOUIsU0FBUyxDQUFDK0IsZ0JBQWdCLENBQUMsSUFBSSxDQUFDNUMsT0FBTyxFQUFFLElBQUksRUFBRWlCLE9BQU8sQ0FBQztRQUV2RCxJQUFJQSxPQUFPLENBQUNRLE1BQU0sRUFBRTtVQUNsQjtVQUNBLFNBQUFvQixHQUFBLE1BQUFDLFFBQUEsR0FBcUI3QixPQUFPLEVBQUE0QixHQUFBLEdBQUFDLFFBQUEsQ0FBQXJCLE1BQUEsRUFBQW9CLEdBQUEsSUFBRTtZQUF6QixJQUFNRSxNQUFNLEdBQUFELFFBQUEsQ0FBQUQsR0FBQTtZQUNmLElBQUcsSUFBSSxDQUFDdEQsUUFBUSxDQUFDeUQsUUFBUSxDQUFDRCxNQUFNLENBQUNFLE1BQU0sQ0FBQy9DLEVBQUUsQ0FBQyxFQUFFO2NBQzNDZSxPQUFPLENBQUNpQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2NBQ2pCLFNBQVN0QixlQUFlO1lBQzFCO1VBQ0Y7VUFDQSxJQUFNdUIsTUFBTSxHQUFHbEMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDbUMsS0FBSztVQUMvQm5DLE9BQU8sQ0FBQ2lDLE1BQU0sQ0FBQyxDQUFDLENBQUM7VUFDakJDLE1BQU0sQ0FBQzVCLENBQUMsSUFBSSxJQUFJLENBQUMvQixJQUFJLENBQUNOLE1BQU07VUFDNUIsSUFBSXFCLFlBQVksQ0FBQ2dCLENBQUMsSUFBSTRCLE1BQU0sQ0FBQzVCLENBQUMsR0FBR0wsSUFBSSxHQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRTtZQUMvQ0EsSUFBSSxJQUFJbUIsSUFBSSxDQUFDZ0IsR0FBRyxDQUFDdEMsT0FBTyxHQUFHTSxLQUFLLEdBQUcsS0FBSyxFQUFFLENBQUNMLFlBQVksQ0FBQztZQUN4RG1DLE1BQU0sQ0FBQzVCLENBQUMsR0FBR2hCLFlBQVksQ0FBQ2dCLENBQUMsR0FBR0wsSUFBSTtVQUNsQyxDQUFDLE1BQU07WUFDTEEsSUFBSSxHQUFHLENBQUM7VUFDVjtVQUNBUixPQUFPLENBQUM0QyxJQUFJLENBQUNILE1BQU0sQ0FBQztVQUNwQixJQUFJLENBQUMvRCxRQUFRLENBQUNlLFFBQVEsQ0FBQ29ELE1BQU0sQ0FBQ0MsWUFBWSxDQUFDOUMsT0FBTyxDQUFDO1VBQ25EQSxPQUFPLENBQUMrQyxHQUFHLENBQUMsSUFBSSxDQUFDckUsUUFBUSxDQUFDZSxRQUFRLENBQUNxQixRQUFRLENBQUM7VUFDNUMsSUFBSSxJQUFJLENBQUNoQyxJQUFJLENBQUNKLFFBQVEsRUFBRXNCLE9BQU8sQ0FBQ2EsQ0FBQyxJQUFJLElBQUksQ0FBQ25DLFFBQVEsQ0FBQ2UsUUFBUSxDQUFDcUIsUUFBUSxDQUFDRCxDQUFDO1VBQ3RFLElBQUksQ0FBQ3JCLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDcUIsUUFBUSxDQUFDZ0IsR0FBRyxDQUFDOUIsT0FBTyxDQUFDO1VBRXRDLElBQUksQ0FBQ3BCLFlBQVksQ0FBQ2dFLElBQUksQ0FBQ0gsTUFBTSxDQUFDO1VBQzlCeEIsTUFBTSxHQUFHLElBQUk7VUFDYjtRQUNGO01BRUY7TUFFQSxJQUFJQSxNQUFNLEVBQUU7UUFDVlIsUUFBUSxHQUFHLEtBQUs7TUFDbEI7TUFFQSxJQUFJLENBQUNBLFFBQVEsSUFBSSxDQUFDUSxNQUFNLEVBQUU7UUFDeEIsSUFBSSxDQUFDekIsRUFBRSxDQUFDQyxRQUFRLENBQUNxQixRQUFRLENBQUM4QixJQUFJLENBQUMsSUFBSSxDQUFDaEUsWUFBWSxDQUFDO1FBQ2pELElBQUksQ0FBQ1ksRUFBRSxDQUFDQyxRQUFRLENBQUNvRCxNQUFNLENBQUNDLFlBQVksQ0FBQyxJQUFJLENBQUN0RCxFQUFFLENBQUNDLFFBQVEsQ0FBQ3FCLFFBQVEsQ0FBQztNQUNqRTtJQUNGLENBQUM7RUFDSCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=\n//# sourceURL=webpack-internal:///4064\n");

/***/ }),

/***/ 9464:
/*!****************************************!*\
  !*** ./src/components/aframe/utils.js ***!
  \****************************************/
/***/ (() => {

eval("AFRAME.registerComponent(\"send-state-event\", {\n  schema: {\n    type: \"string\"\n  },\n  init: function init() {\n    var _this = this;\n    this.el.addEventListener(\"click\", function (evt) {\n      console.log(_this.data);\n      _this.el.sceneEl.emit(\"game-state-event\", _this.data);\n    });\n  }\n});\nAFRAME.registerComponent('log-on-click', {\n  init: function init() {\n    this.el.addEventListener('click', function (evt) {\n      console.log('I was clicked at: ', evt.detail.intersection.point);\n    });\n  }\n});\nAFRAME.registerComponent(\"game-clock\", {\n  init: function init() {\n    // var el = this.el;\n    // var timeLeft = 60 * 60;\n    var timeElapsed = 0;\n    var that = this;\n    var interval = setInterval(function () {\n      // console.log(\"Inside game-clock, el = \", that.el);\n      // that.el.emit(\"game-clock-tick\", {time: new Date(), timeDelta: timeElapsed})\n      timeElapsed += 1000;\n      console.log(\"timeElapsed = \", timeElapsed);\n      document.querySelector(\"esc-watch\").tick({\n        time: new Date(),\n        timeDelta: timeElapsed\n      });\n      //   timeLeft--;\n      //   var minutes = Math.floor(timeLeft / 60);\n      //   var seconds = timeLeft % 60;\n      //   timeDisplay.innerText = minutes + \":\" + (seconds < 10 ? \"0\" : \"\") + seconds;\n      //   if (timeLeft <= 0) {\n      //     clearInterval(interval);\n      //     el.emit(\"game-state-event\", \"gameover\");\n      //   }\n    }, 1000);\n  }\n  // tick: function(time, timeDelta) {\n});\n// console.log(\"Ticking\");\n// this.el.tick(time, timeDelta);\n//   this.tickTime = this.tickTime || 0;\n//   this.tickTime += timeDelta;\n//   if (this.tickTime > 1000) {\n//     console.log(\"Tick time over 1s\");\n//     this.tickTime = 0;\n//     this.el.sceneEl.emit(\"tick\", {time: time, timeDelta: timeDelta});\n//   }\n// }\n// })\nAFRAME.registerComponent(\"briefing-dismiss\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      // console.log(evt.detail);\n      if (evt.detail.target.classList.contains(\"dismiss\")) {\n        console.log(\"SHould dismiss the dialog\");\n        //     console.log(\"Briefing panel clicked\");\n        //     // End the briefing.\n        el.removeEventListener(\"lit-click\", cb);\n        el.emit(\"game-state-event\", \"end\");\n      }\n      // el.remove();\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n    // console.log(this.el.querySelector(\".dismiss\"));\n    // this.el.querySelector(\".dismiss\").addEventListener(\"click\", cb);\n  }\n});\nAFRAME.registerComponent(\"tutorial-example\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      console.log(evt.detail);\n      // if (evt.detail.target.classList.contains(\"dismiss\")) {\n      console.log(\"Button was clicked!\");\n      el.removeEventListener(\"lit-click\", cb);\n      // el.emit(\"game-state-event\", \"end\");\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n    // console.log(this.el.querySelector(\".dismiss\"));\n    // this.el.querySelector(\".dismiss\").addEventListener(\"click\", cb);\n    // this.el.querySelector(\".example_button span\").innerText = \"Good Job!\";\n    // this.el.querySelector(\".example_button\").style.backgroundColor = \"green\";\n  }\n});\nAFRAME.registerComponent(\"to-main-scene\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      // if (evt.detail.target.classList.contains(\"map\")) {\n      document.getElementById(\"fadeStationaryCamera\").emit(\"animate_fadeOut\");\n      setTimeout(function () {\n        document.getElementById(\"fadeMainCamera\").emit(\"animate_fadeIn\");\n        document.getElementById('mainScene').setAttribute('visible', 'true');\n        document.getElementById('stationaryScene').setAttribute('visible', 'false');\n        document.getElementById(\"camera\").setAttribute(\"camera\", \"active\", \"true\");\n      }, 500);\n      // el.removeEventListener(\"lit-click\", cb);\n      // el.emit(\"game-state-event\", \"end\");\n      // }\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n    // console.log(this.el.querySelector(\".dismiss\"));\n    // this.el.querySelector(\".dismiss\").addEventListener(\"click\", cb);\n  }\n});\nAFRAME.registerComponent(\"to-stationary-scene\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      document.getElementById(\"fadeMainCamera\").emit(\"animate_fadeOut\");\n      document.getElementById(\"fadeStationaryCamera\").emit(\"animate_fadeIn\");\n      setTimeout(function () {\n        document.getElementById('mainScene').setAttribute('visible', 'false');\n        document.getElementById('stationaryScene').setAttribute('visible', 'true');\n        document.getElementById(\"stationaryCamera\").setAttribute(\"camera\", \"active\", \"true\");\n      }, 500);\n      // el.removeEventListener(\"lit-click\", cb);\n      // el.emit(\"game-state-event\", \"end\");\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n    // console.log(this.el.querySelector(\".dismiss\"));\n    // this.el.querySelector(\".dismiss\").addEventListener(\"click\", cb);\n  }\n});\n\n// TODO: Make one of these for each puzzle.\nAFRAME.registerComponent(\"puzzle1solved\", {\n  init: function init() {\n    var el = this.el;\n    var cb = function cb(evt) {\n      console.log(\"Room 1 Puzzle 1 clicked\");\n      if (evt.detail.target.classList.contains(\"solve_puzzle_1\")) {\n        console.log(\"SHould End puzzle 1\");\n        el.removeEventListener(\"lit-click\", cb);\n        el.emit(\"game-state-event\", \"puzzle1.solved\");\n      }\n    };\n    this.el.addEventListener(\"lit-click\", cb);\n  }\n});\n\n// Add actions to the state machine for this application.\nAFRAME.registerComponent(\"custom-game-state-actions\", {\n  init: function init() {\n    this.el.sceneEl.systems['game-state'].addActions({\n      room1complete: function room1complete(_ref) {\n        var context = _ref.context,\n          event = _ref.event;\n        console.log('Room 1 complete');\n        document.querySelector(\"#firstPuzzleDoor .navmesh-hole\").remove();\n        document.querySelector(\"#firstPuzzleDoor\").setAttribute(\"visible\", \"false\");\n      },\n      room2complete: function room2complete(_ref2) {\n        var context = _ref2.context,\n          event = _ref2.event;\n        console.log('Room 2 complete');\n        document.querySelector(\"#secondPuzzleDoor .navmesh-hole\").remove();\n        document.querySelector(\"#secondPuzzleDoor\").setAttribute(\"visible\", \"false\");\n      },\n      finalCoomComplete: function finalCoomComplete(_ref3) {\n        var context = _ref3.context,\n          event = _ref3.event;\n        console.log('Final Room complete');\n        document.querySelector(\"#exitDoor .navmesh-hole\").remove();\n        document.querySelector(\"#exitDoor\").setAttribute(\"visible\", \"false\");\n      }\n    });\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTQ2NC5qcyIsIm5hbWVzIjpbIkFGUkFNRSIsInJlZ2lzdGVyQ29tcG9uZW50Iiwic2NoZW1hIiwidHlwZSIsImluaXQiLCJfdGhpcyIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwic2NlbmVFbCIsImVtaXQiLCJkZXRhaWwiLCJpbnRlcnNlY3Rpb24iLCJwb2ludCIsInRpbWVFbGFwc2VkIiwidGhhdCIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0aWNrIiwidGltZSIsIkRhdGUiLCJ0aW1lRGVsdGEiLCJjYiIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldEVsZW1lbnRCeUlkIiwic2V0VGltZW91dCIsInNldEF0dHJpYnV0ZSIsInN5c3RlbXMiLCJhZGRBY3Rpb25zIiwicm9vbTFjb21wbGV0ZSIsIl9yZWYiLCJjb250ZXh0IiwiZXZlbnQiLCJyZW1vdmUiLCJyb29tMmNvbXBsZXRlIiwiX3JlZjIiLCJmaW5hbENvb21Db21wbGV0ZSIsIl9yZWYzIl0sInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2FmcmFtZS91dGlscy5qcz8zYzFiIl0sInNvdXJjZXNDb250ZW50IjpbIkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcInNlbmQtc3RhdGUtZXZlbnRcIiwge1xuICAgIHNjaGVtYTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpO1xuICAgICAgICAgICAgdGhpcy5lbC5zY2VuZUVsLmVtaXQoXCJnYW1lLXN0YXRlLWV2ZW50XCIsIHRoaXMuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSlcblxuXG4gICAgQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdsb2ctb24tY2xpY2snLCB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0kgd2FzIGNsaWNrZWQgYXQ6ICcsIGV2dC5kZXRhaWwuaW50ZXJzZWN0aW9uLnBvaW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cblxuICAgIEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcImdhbWUtY2xvY2tcIiwge1xuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyB2YXIgZWwgPSB0aGlzLmVsO1xuICAgICAgICAgIC8vIHZhciB0aW1lTGVmdCA9IDYwICogNjA7XG4gICAgICAgICAgdmFyIHRpbWVFbGFwc2VkID0gMDtcbiAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkluc2lkZSBnYW1lLWNsb2NrLCBlbCA9IFwiLCB0aGF0LmVsKTtcbiAgICAgICAgICAgIC8vIHRoYXQuZWwuZW1pdChcImdhbWUtY2xvY2stdGlja1wiLCB7dGltZTogbmV3IERhdGUoKSwgdGltZURlbHRhOiB0aW1lRWxhcHNlZH0pXG4gICAgICAgICAgICB0aW1lRWxhcHNlZCArPSAxMDAwO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aW1lRWxhcHNlZCA9IFwiLCB0aW1lRWxhcHNlZCk7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZXNjLXdhdGNoXCIpLnRpY2soe3RpbWU6IG5ldyBEYXRlKCksIHRpbWVEZWx0YTogdGltZUVsYXBzZWR9KTtcbiAgICAgICAgICAvLyAgIHRpbWVMZWZ0LS07XG4gICAgICAgICAgLy8gICB2YXIgbWludXRlcyA9IE1hdGguZmxvb3IodGltZUxlZnQgLyA2MCk7XG4gICAgICAgICAgLy8gICB2YXIgc2Vjb25kcyA9IHRpbWVMZWZ0ICUgNjA7XG4gICAgICAgICAgLy8gICB0aW1lRGlzcGxheS5pbm5lclRleHQgPSBtaW51dGVzICsgXCI6XCIgKyAoc2Vjb25kcyA8IDEwID8gXCIwXCIgOiBcIlwiKSArIHNlY29uZHM7XG4gICAgICAgICAgLy8gICBpZiAodGltZUxlZnQgPD0gMCkge1xuICAgICAgICAgIC8vICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAvLyAgICAgZWwuZW1pdChcImdhbWUtc3RhdGUtZXZlbnRcIiwgXCJnYW1lb3ZlclwiKTtcbiAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aWNrOiBmdW5jdGlvbih0aW1lLCB0aW1lRGVsdGEpIHtcbiAgICAgICAgfSk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJUaWNraW5nXCIpO1xuICAgICAgICAgIC8vIHRoaXMuZWwudGljayh0aW1lLCB0aW1lRGVsdGEpO1xuICAgICAgICAvLyAgIHRoaXMudGlja1RpbWUgPSB0aGlzLnRpY2tUaW1lIHx8IDA7XG4gICAgICAgIC8vICAgdGhpcy50aWNrVGltZSArPSB0aW1lRGVsdGE7XG4gICAgICAgIC8vICAgaWYgKHRoaXMudGlja1RpbWUgPiAxMDAwKSB7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIlRpY2sgdGltZSBvdmVyIDFzXCIpO1xuICAgICAgICAvLyAgICAgdGhpcy50aWNrVGltZSA9IDA7XG4gICAgICAgIC8vICAgICB0aGlzLmVsLnNjZW5lRWwuZW1pdChcInRpY2tcIiwge3RpbWU6IHRpbWUsIHRpbWVEZWx0YTogdGltZURlbHRhfSk7XG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyB9XG4gICAgICAvLyB9KVxuICAgICAgQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwiYnJpZWZpbmctZGlzbWlzc1wiLCB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICAgICAgdmFyIGNiID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldnQuZGV0YWlsKTtcbiAgICAgICAgICAgIGlmIChldnQuZGV0YWlsLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNtaXNzXCIpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU0hvdWxkIGRpc21pc3MgdGhlIGRpYWxvZ1wiKTtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIkJyaWVmaW5nIHBhbmVsIGNsaWNrZWRcIik7XG4gICAgICAgICAgICAvLyAgICAgLy8gRW5kIHRoZSBicmllZmluZy5cbiAgICAgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcImVuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVsLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJsaXQtY2xpY2tcIiwgY2IpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5kaXNtaXNzXCIpKTtcbiAgICAgICAgICAvLyB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzbWlzc1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2IpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwidHV0b3JpYWwtZXhhbXBsZVwiLCB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICAgICAgdmFyIGNiID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldnQuZGV0YWlsKTtcbiAgICAgICAgICAgIC8vIGlmIChldnQuZGV0YWlsLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNtaXNzXCIpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkJ1dHRvbiB3YXMgY2xpY2tlZCFcIik7XG4gICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcImVuZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzbWlzc1wiKSk7XG4gICAgICAgICAgLy8gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmRpc21pc3NcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAvLyB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZXhhbXBsZV9idXR0b24gc3BhblwiKS5pbm5lclRleHQgPSBcIkdvb2QgSm9iIVwiO1xuICAgICAgICAgIC8vIHRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5leGFtcGxlX2J1dHRvblwiKS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG5cbiAgICAgIEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcInRvLW1haW4tc2NlbmVcIiwge1xuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgICAgICAgIHZhciBjYiA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgLy8gaWYgKGV2dC5kZXRhaWwudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1hcFwiKSkge1xuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZhZGVTdGF0aW9uYXJ5Q2FtZXJhXCIpLmVtaXQoXCJhbmltYXRlX2ZhZGVPdXRcIik7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmFkZU1haW5DYW1lcmFcIikuZW1pdChcImFuaW1hdGVfZmFkZUluXCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluU2NlbmUnKS5zZXRBdHRyaWJ1dGUoJ3Zpc2libGUnLCAndHJ1ZScpXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRpb25hcnlTY2VuZScpLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsICdmYWxzZScpXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW1lcmFcIikuc2V0QXR0cmlidXRlKFwiY2FtZXJhXCIsIFwiYWN0aXZlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcImVuZFwiKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzbWlzc1wiKSk7XG4gICAgICAgICAgLy8gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmRpc21pc3NcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJ0by1zdGF0aW9uYXJ5LXNjZW5lXCIsIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgICAgICB2YXIgY2IgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmYWRlTWFpbkNhbWVyYVwiKS5lbWl0KFwiYW5pbWF0ZV9mYWRlT3V0XCIpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZhZGVTdGF0aW9uYXJ5Q2FtZXJhXCIpLmVtaXQoXCJhbmltYXRlX2ZhZGVJblwiKTtcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5TY2VuZScpLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsICdmYWxzZScpXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRpb25hcnlTY2VuZScpLnNldEF0dHJpYnV0ZSgndmlzaWJsZScsICd0cnVlJylcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXRpb25hcnlDYW1lcmFcIikuc2V0QXR0cmlidXRlKFwiY2FtZXJhXCIsIFwiYWN0aXZlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICAvLyBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcImVuZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzbWlzc1wiKSk7XG4gICAgICAgICAgLy8gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLmRpc21pc3NcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cblxuICAgICAgLy8gVE9ETzogTWFrZSBvbmUgb2YgdGhlc2UgZm9yIGVhY2ggcHV6emxlLlxuICAgICAgQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwicHV6emxlMXNvbHZlZFwiLCB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICAgICAgdmFyIGNiID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJvb20gMSBQdXp6bGUgMSBjbGlja2VkXCIpO1xuICAgICAgICAgICAgaWYgKGV2dC5kZXRhaWwudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInNvbHZlX3B1enpsZV8xXCIpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU0hvdWxkIEVuZCBwdXp6bGUgMVwiKTtcbiAgICAgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibGl0LWNsaWNrXCIsIGNiKTtcbiAgICAgICAgICAgICAgICBlbC5lbWl0KFwiZ2FtZS1zdGF0ZS1ldmVudFwiLCBcInB1enpsZTEuc29sdmVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJsaXQtY2xpY2tcIiwgY2IpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIGFjdGlvbnMgdG8gdGhlIHN0YXRlIG1hY2hpbmUgZm9yIHRoaXMgYXBwbGljYXRpb24uXG4gICAgICBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJjdXN0b20tZ2FtZS1zdGF0ZS1hY3Rpb25zXCIsIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXNbJ2dhbWUtc3RhdGUnXS5hZGRBY3Rpb25zKHtcbiAgICAgICAgICAgIHJvb20xY29tcGxldGU6IGZ1bmN0aW9uKHtjb250ZXh0LCBldmVudH0pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Jvb20gMSBjb21wbGV0ZScpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpcnN0UHV6emxlRG9vciAubmF2bWVzaC1ob2xlXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpcnN0UHV6emxlRG9vclwiKS5zZXRBdHRyaWJ1dGUoXCJ2aXNpYmxlXCIsIFwiZmFsc2VcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcm9vbTJjb21wbGV0ZTogZnVuY3Rpb24oe2NvbnRleHQsIGV2ZW50fSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUm9vbSAyIGNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2Vjb25kUHV6emxlRG9vciAubmF2bWVzaC1ob2xlXCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3NlY29uZFB1enpsZURvb3JcIikuc2V0QXR0cmlidXRlKFwidmlzaWJsZVwiLCBcImZhbHNlXCIpOyAgICAgICAgICBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmaW5hbENvb21Db21wbGV0ZTogZnVuY3Rpb24oe2NvbnRleHQsIGV2ZW50fSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmluYWwgUm9vbSBjb21wbGV0ZScpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2V4aXREb29yIC5uYXZtZXNoLWhvbGVcIikucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZXhpdERvb3JcIikuc2V0QXR0cmlidXRlKFwidmlzaWJsZVwiLCBcImZhbHNlXCIpOyAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7Il0sIm1hcHBpbmdzIjoiQUFBQUEsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyxrQkFBa0IsRUFBRTtFQUN6Q0MsTUFBTSxFQUFFO0lBQUVDLElBQUksRUFBRTtFQUFTLENBQUM7RUFDMUJDLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVk7SUFBQSxJQUFBQyxLQUFBO0lBQ2QsSUFBSSxDQUFDQyxFQUFFLENBQUNDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFDQyxHQUFHLEVBQUs7TUFDdkNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTCxLQUFJLENBQUNNLElBQUksQ0FBQztNQUN0Qk4sS0FBSSxDQUFDQyxFQUFFLENBQUNNLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLGtCQUFrQixFQUFFUixLQUFJLENBQUNNLElBQUksQ0FBQztJQUN2RCxDQUFDLENBQUM7RUFDTjtBQUNGLENBQUMsQ0FBQztBQUdBWCxNQUFNLENBQUNDLGlCQUFpQixDQUFDLGNBQWMsRUFBRTtFQUNyQ0csSUFBSSxFQUFFLFNBQUFBLEtBQUEsRUFBWTtJQUNkLElBQUksQ0FBQ0UsRUFBRSxDQUFDQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBVUMsR0FBRyxFQUFFO01BQzdDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRUYsR0FBRyxDQUFDTSxNQUFNLENBQUNDLFlBQVksQ0FBQ0MsS0FBSyxDQUFDO0lBQ3BFLENBQUMsQ0FBQztFQUNOO0FBQ0osQ0FBQyxDQUFDO0FBR0ZoQixNQUFNLENBQUNDLGlCQUFpQixDQUFDLFlBQVksRUFBRTtFQUNuQ0csSUFBSSxFQUFFLFNBQUFBLEtBQUEsRUFBVztJQUNmO0lBQ0E7SUFDQSxJQUFJYSxXQUFXLEdBQUcsQ0FBQztJQUNuQixJQUFJQyxJQUFJLEdBQUcsSUFBSTtJQUNmLElBQUlDLFFBQVEsR0FBR0MsV0FBVyxDQUFDLFlBQVc7TUFDcEM7TUFDQTtNQUNBSCxXQUFXLElBQUksSUFBSTtNQUNuQlIsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUVPLFdBQVcsQ0FBQztNQUMxQ0ksUUFBUSxDQUFDQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFDQyxJQUFJLEVBQUUsSUFBSUMsSUFBSSxDQUFDLENBQUM7UUFBRUMsU0FBUyxFQUFFVDtNQUFXLENBQUMsQ0FBQztNQUN0RjtNQUNBO01BQ0E7TUFDQTtNQUNBO01BQ0E7TUFDQTtNQUNBO0lBQ0EsQ0FBQyxFQUFFLElBQUksQ0FBQztFQUNWO0VBQ0E7QUFDQSxDQUFDLENBQUM7QUFDQTtBQUNBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNGO0FBQ0FqQixNQUFNLENBQUNDLGlCQUFpQixDQUFDLGtCQUFrQixFQUFFO0VBQzNDRyxJQUFJLEVBQUUsU0FBQUEsS0FBQSxFQUFXO0lBQ2YsSUFBSUUsRUFBRSxHQUFHLElBQUksQ0FBQ0EsRUFBRTtJQUNoQixJQUFJcUIsRUFBRSxHQUFHLFNBQUxBLEVBQUVBLENBQVluQixHQUFHLEVBQUU7TUFDckI7TUFDQSxJQUFJQSxHQUFHLENBQUNNLE1BQU0sQ0FBQ2MsTUFBTSxDQUFDQyxTQUFTLENBQUNDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBRTtRQUNuRHJCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDJCQUEyQixDQUFDO1FBQzFDO1FBQ0E7UUFDSUosRUFBRSxDQUFDeUIsbUJBQW1CLENBQUMsV0FBVyxFQUFFSixFQUFFLENBQUM7UUFDdkNyQixFQUFFLENBQUNPLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxLQUFLLENBQUM7TUFDdEM7TUFDQTtJQUNGLENBQUM7SUFDRCxJQUFJLENBQUNQLEVBQUUsQ0FBQ0MsZ0JBQWdCLENBQUMsV0FBVyxFQUFFb0IsRUFBRSxDQUFDO0lBQ3pDO0lBQ0E7RUFDRjtBQUNGLENBQUMsQ0FBQztBQUVGM0IsTUFBTSxDQUFDQyxpQkFBaUIsQ0FBQyxrQkFBa0IsRUFBRTtFQUMzQ0csSUFBSSxFQUFFLFNBQUFBLEtBQUEsRUFBVztJQUNmLElBQUlFLEVBQUUsR0FBRyxJQUFJLENBQUNBLEVBQUU7SUFDaEIsSUFBSXFCLEVBQUUsR0FBRyxTQUFMQSxFQUFFQSxDQUFZbkIsR0FBRyxFQUFFO01BQ3JCQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsR0FBRyxDQUFDTSxNQUFNLENBQUM7TUFDdkI7TUFDQUwsT0FBTyxDQUFDQyxHQUFHLENBQUMscUJBQXFCLENBQUM7TUFDbENKLEVBQUUsQ0FBQ3lCLG1CQUFtQixDQUFDLFdBQVcsRUFBRUosRUFBRSxDQUFDO01BQ25DO0lBQ04sQ0FBQztJQUVELElBQUksQ0FBQ3JCLEVBQUUsQ0FBQ0MsZ0JBQWdCLENBQUMsV0FBVyxFQUFFb0IsRUFBRSxDQUFDO0lBQ3pDO0lBQ0E7SUFDQTtJQUNBO0VBQ0Y7QUFDRixDQUFDLENBQUM7QUFHRjNCLE1BQU0sQ0FBQ0MsaUJBQWlCLENBQUMsZUFBZSxFQUFFO0VBQ3hDRyxJQUFJLEVBQUUsU0FBQUEsS0FBQSxFQUFXO0lBQ2YsSUFBSUUsRUFBRSxHQUFHLElBQUksQ0FBQ0EsRUFBRTtJQUNoQixJQUFJcUIsRUFBRSxHQUFHLFNBQUxBLEVBQUVBLENBQVluQixHQUFHLEVBQUU7TUFDckI7TUFDRWEsUUFBUSxDQUFDVyxjQUFjLENBQUMsc0JBQXNCLENBQUMsQ0FBQ25CLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztNQUN2RW9CLFVBQVUsQ0FBQyxZQUFNO1FBQ2ZaLFFBQVEsQ0FBQ1csY0FBYyxDQUFDLGdCQUFnQixDQUFDLENBQUNuQixJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDaEVRLFFBQVEsQ0FBQ1csY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDRSxZQUFZLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQztRQUNwRWIsUUFBUSxDQUFDVyxjQUFjLENBQUMsaUJBQWlCLENBQUMsQ0FBQ0UsWUFBWSxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUM7UUFDM0ViLFFBQVEsQ0FBQ1csY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDRSxZQUFZLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUM7TUFDNUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQztNQUNMO01BQ0E7TUFDSjtJQUNGLENBQUM7SUFDRCxJQUFJLENBQUM1QixFQUFFLENBQUNDLGdCQUFnQixDQUFDLFdBQVcsRUFBRW9CLEVBQUUsQ0FBQztJQUN6QztJQUNBO0VBQ0Y7QUFDRixDQUFDLENBQUM7QUFDRjNCLE1BQU0sQ0FBQ0MsaUJBQWlCLENBQUMscUJBQXFCLEVBQUU7RUFDOUNHLElBQUksRUFBRSxTQUFBQSxLQUFBLEVBQVc7SUFDZixJQUFJRSxFQUFFLEdBQUcsSUFBSSxDQUFDQSxFQUFFO0lBQ2hCLElBQUlxQixFQUFFLEdBQUcsU0FBTEEsRUFBRUEsQ0FBWW5CLEdBQUcsRUFBRTtNQUNuQmEsUUFBUSxDQUFDVyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQ25CLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztNQUNqRVEsUUFBUSxDQUFDVyxjQUFjLENBQUMsc0JBQXNCLENBQUMsQ0FBQ25CLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztNQUN0RW9CLFVBQVUsQ0FBQyxZQUFNO1FBQ2ZaLFFBQVEsQ0FBQ1csY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDRSxZQUFZLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQztRQUNyRWIsUUFBUSxDQUFDVyxjQUFjLENBQUMsaUJBQWlCLENBQUMsQ0FBQ0UsWUFBWSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUM7UUFDMUViLFFBQVEsQ0FBQ1csY0FBYyxDQUFDLGtCQUFrQixDQUFDLENBQUNFLFlBQVksQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQztNQUN0RixDQUFDLEVBQUUsR0FBRyxDQUFDO01BQ0w7TUFDQTtJQUNOLENBQUM7SUFDRCxJQUFJLENBQUM1QixFQUFFLENBQUNDLGdCQUFnQixDQUFDLFdBQVcsRUFBRW9CLEVBQUUsQ0FBQztJQUN6QztJQUNBO0VBQ0Y7QUFDRixDQUFDLENBQUM7O0FBR0Y7QUFDQTNCLE1BQU0sQ0FBQ0MsaUJBQWlCLENBQUMsZUFBZSxFQUFFO0VBQ3hDRyxJQUFJLEVBQUUsU0FBQUEsS0FBQSxFQUFXO0lBQ2YsSUFBSUUsRUFBRSxHQUFHLElBQUksQ0FBQ0EsRUFBRTtJQUNoQixJQUFJcUIsRUFBRSxHQUFHLFNBQUxBLEVBQUVBLENBQVluQixHQUFHLEVBQUU7TUFDckJDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHlCQUF5QixDQUFDO01BQ3RDLElBQUlGLEdBQUcsQ0FBQ00sTUFBTSxDQUFDYyxNQUFNLENBQUNDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDLGdCQUFnQixDQUFDLEVBQUU7UUFDMURyQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztRQUNoQ0osRUFBRSxDQUFDeUIsbUJBQW1CLENBQUMsV0FBVyxFQUFFSixFQUFFLENBQUM7UUFDdkNyQixFQUFFLENBQUNPLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxnQkFBZ0IsQ0FBQztNQUNqRDtJQUNGLENBQUM7SUFDRCxJQUFJLENBQUNQLEVBQUUsQ0FBQ0MsZ0JBQWdCLENBQUMsV0FBVyxFQUFFb0IsRUFBRSxDQUFDO0VBQzNDO0FBQ0YsQ0FBQyxDQUFDOztBQUVGO0FBQ0EzQixNQUFNLENBQUNDLGlCQUFpQixDQUFDLDJCQUEyQixFQUFFO0VBQ3BERyxJQUFJLEVBQUUsU0FBQUEsS0FBQSxFQUFXO0lBQ2YsSUFBSSxDQUFDRSxFQUFFLENBQUNNLE9BQU8sQ0FBQ3VCLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQ0MsVUFBVSxDQUFDO01BQy9DQyxhQUFhLEVBQUUsU0FBQUEsY0FBQUMsSUFBQSxFQUEyQjtRQUFBLElBQWpCQyxPQUFPLEdBQUFELElBQUEsQ0FBUEMsT0FBTztVQUFFQyxLQUFLLEdBQUFGLElBQUEsQ0FBTEUsS0FBSztRQUNyQy9CLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlCQUFpQixDQUFDO1FBQzlCVyxRQUFRLENBQUNDLGFBQWEsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDbUIsTUFBTSxDQUFDLENBQUM7UUFDakVwQixRQUFRLENBQUNDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDWSxZQUFZLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQztNQUM3RSxDQUFDO01BQ0RRLGFBQWEsRUFBRSxTQUFBQSxjQUFBQyxLQUFBLEVBQTJCO1FBQUEsSUFBakJKLE9BQU8sR0FBQUksS0FBQSxDQUFQSixPQUFPO1VBQUVDLEtBQUssR0FBQUcsS0FBQSxDQUFMSCxLQUFLO1FBQ3JDL0IsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCLENBQUM7UUFDOUJXLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGlDQUFpQyxDQUFDLENBQUNtQixNQUFNLENBQUMsQ0FBQztRQUNsRXBCLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLG1CQUFtQixDQUFDLENBQUNZLFlBQVksQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDO01BQzlFLENBQUM7TUFDRFUsaUJBQWlCLEVBQUUsU0FBQUEsa0JBQUFDLEtBQUEsRUFBMkI7UUFBQSxJQUFqQk4sT0FBTyxHQUFBTSxLQUFBLENBQVBOLE9BQU87VUFBRUMsS0FBSyxHQUFBSyxLQUFBLENBQUxMLEtBQUs7UUFDekMvQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztRQUNsQ1csUUFBUSxDQUFDQyxhQUFhLENBQUMseUJBQXlCLENBQUMsQ0FBQ21CLE1BQU0sQ0FBQyxDQUFDO1FBQzFEcEIsUUFBUSxDQUFDQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUNZLFlBQVksQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDO01BQ3RFO0lBQ0YsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=\n//# sourceURL=webpack-internal:///9464\n");

/***/ }),

/***/ 4388:
/*!**************************************!*\
  !*** ./src/components/lit/Button.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Button: () => (/* binding */ Button)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar Button = /*#__PURE__*/function (_ComponentBaseElement) {\n  function Button() {\n    _classCallCheck(this, Button);\n    return _callSuper(this, Button);\n  }\n  _inherits(Button, _ComponentBaseElement);\n  return _createClass(Button, [{\n    key: \"render\",\n    value: function render() {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div class=\\\"html-container\\\" id=\\\"container_\", \"\\\">\\n            <button @click=\\\"\", \"\\\" class=\\\"btn btn-primary\\\">\", \"</button>\\n        </div>\\n      \"])), this.id, this._clickHandler, this.text);\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      // Click Handler here is delegated to the AFrame click handler, which listens on the entire entity.\n      // this.infoVisible = !this.infoVisible;\n      // console.log(\"Inside the click handler, evt is \", e);\n      // this.web2vrComponent.aframe.container.emit(\"click\", e);\n      // this.shadowRoot.getElementById(\"info\").innerText = \"Button Clicked!\";      \n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// Note: All elements are placed at -9999 to avoid the Flash of Unstyled Content (FOUC)\n// prior to AFrame loading.\n_defineProperty(Button, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      .html-container {\\n        position: absolute;\\n        width: 200px;\\n      }\\n      .visible {\\n        display: block;\\n      }\\n      .invisible {\\n        display: none;\\n      }\\n      .card-body {\\n        margin: 0;\\n      }\\n      \\n    \"])))]);\n_defineProperty(Button, \"properties\", _objectSpread(_objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties), {}, {\n  text: {\n    type: String,\n    \"default\": \"Hello world!\"\n  }\n}));\ncustomElements.define('esc-button', Button);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDM4OC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQTJCQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUE1Q0E7QUFDQTtBQUFBO0FBbUJBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXdCQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvbGl0L0J1dHRvbi5qcz85M2QzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG5pbXBvcnQge2h0bWwsIGNzcywgTGl0RWxlbWVudH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IENvbXBvbmVudEJhc2VFbGVtZW50IH0gZnJvbSAnLi9Db21wb25lbnRCYXNlJztcblxuZXhwb3J0IGNsYXNzIEJ1dHRvbiBleHRlbmRzIENvbXBvbmVudEJhc2VFbGVtZW50IHtcbiAgLy8gTm90ZTogQWxsIGVsZW1lbnRzIGFyZSBwbGFjZWQgYXQgLTk5OTkgdG8gYXZvaWQgdGhlIEZsYXNoIG9mIFVuc3R5bGVkIENvbnRlbnQgKEZPVUMpXG4gIC8vIHByaW9yIHRvIEFGcmFtZSBsb2FkaW5nLlxuICBzdGF0aWMgc3R5bGVzID0gW1xuICAgIENvbXBvbmVudEJhc2VFbGVtZW50LnN0eWxlcyA/PyBbXSxcbiAgICBjc3NgXG4gICAgICAuaHRtbC1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHdpZHRoOiAyMDBweDtcbiAgICAgIH1cbiAgICAgIC52aXNpYmxlIHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICB9XG4gICAgICAuaW52aXNpYmxlIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgIH1cbiAgICAgIC5jYXJkLWJvZHkge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG4gICAgICBcbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBwcm9wZXJ0aWVzID0ge1xuICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICAgIHRleHQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIkhlbGxvIHdvcmxkIVwifSxcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gaHRtbGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImh0bWwtY29udGFpbmVyXCIgaWQ9XCJjb250YWluZXJfJHt0aGlzLmlkfVwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9XCIke3RoaXMuX2NsaWNrSGFuZGxlcn1cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPiR7dGhpcy50ZXh0fTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgX2NsaWNrSGFuZGxlcihlKSB7XG4gICAgICAvLyBDbGljayBIYW5kbGVyIGhlcmUgaXMgZGVsZWdhdGVkIHRvIHRoZSBBRnJhbWUgY2xpY2sgaGFuZGxlciwgd2hpY2ggbGlzdGVucyBvbiB0aGUgZW50aXJlIGVudGl0eS5cbiAgICAgIC8vIHRoaXMuaW5mb1Zpc2libGUgPSAhdGhpcy5pbmZvVmlzaWJsZTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiSW5zaWRlIHRoZSBjbGljayBoYW5kbGVyLCBldnQgaXMgXCIsIGUpO1xuICAgICAgLy8gdGhpcy53ZWIydnJDb21wb25lbnQuYWZyYW1lLmNvbnRhaW5lci5lbWl0KFwiY2xpY2tcIiwgZSk7XG4gICAgICAvLyB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJpbmZvXCIpLmlubmVyVGV4dCA9IFwiQnV0dG9uIENsaWNrZWQhXCI7ICAgICAgXG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2VzYy1idXR0b24nLCBCdXR0b24pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4388\n");

/***/ }),

/***/ 3484:
/*!*********************************************!*\
  !*** ./src/components/lit/ComponentBase.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ComponentBaseElement: () => (/* binding */ ComponentBaseElement),\n/* harmony export */   ComponentBaseMixin: () => (/* binding */ ComponentBaseMixin)\n/* harmony export */ });\n/* harmony import */ var web2vr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! web2vr */ 2051);\n/* harmony import */ var web2vr__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(web2vr__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _rootstyles_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rootstyles.js */ 5382);\nvar _templateObject;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\n\nvar ComponentBaseMixin = function ComponentBaseMixin(superClass) {\n  var ComponentBaseElement = /*#__PURE__*/function (_superClass) {\n    function ComponentBaseElement() {\n      _classCallCheck(this, ComponentBaseElement);\n      return _callSuper(this, ComponentBaseElement);\n    }\n    _inherits(ComponentBaseElement, _superClass);\n    return _createClass(ComponentBaseElement, [{\n      key: \"id\",\n      get: function get() {\n        if (!this._id) {\n          var array = new Uint32Array(1);\n          window.crypto.getRandomValues(array);\n          this._id = array[0];\n          return this._id;\n        } else {\n          return this._id;\n        }\n      }\n    }, {\n      key: \"connectedCallback\",\n      value: function connectedCallback() {\n        _get(_getPrototypeOf(ComponentBaseElement.prototype), \"connectedCallback\", this).call(this);\n\n        // Should updateComplete resolve the after first time render ran?\n        var that = this;\n        this.updateComplete.then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var settings, components, component;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"Update Complete callback has fired\");\n                _context.next = 3;\n                return new Promise(function (r) {\n                  return setTimeout(r, 100);\n                });\n              case 3:\n                settings = that.settings ? JSON.parse(that.settings) : {}; // Disable border because there are race condition issues between border and the LitElement.\n                settings.border = false;\n                // console.log(\"Settings = \", settings)\n                that.web2vrComponent = new web2vr__WEBPACK_IMPORTED_MODULE_0__(that.shadowRoot.getElementById(\"container_\".concat(that.id)), settings);\n                _context.next = 8;\n                return that.web2vrComponent.start();\n              case 8:\n                components = that.components ? JSON.parse(that.components) : {}; // console.log(\"Components = \", components);\n                for (component in components) {\n                  that.web2vrComponent.aframe.container.setAttribute(component, components[component]);\n                }\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        })));\n      }\n    }, {\n      key: \"firstUpdated\",\n      value: function () {\n        var _firstUpdated = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(changedProperties) {\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                // Give the browser a chance to paint\n                this.shadowRoot.addEventListener('slotchange', this._slotChanged);\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2, this);\n        }));\n        function firstUpdated(_x) {\n          return _firstUpdated.apply(this, arguments);\n        }\n        return firstUpdated;\n      }()\n    }, {\n      key: \"baseRender\",\n      value: function baseRender(template) {\n        return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n                <div class=\\\"html-container\\\" id=\\\"container_\", \"\\\">\\n                  \", \"\\n                </div>\\n            \"])), this.id, template);\n      }\n    }, {\n      key: \"slotChanged\",\n      value: function slotChanged() {}\n    }]);\n  }(superClass);\n  _defineProperty(ComponentBaseElement, \"styles\", [_rootstyles_js__WEBPACK_IMPORTED_MODULE_2__.RootStyleElement.styles]);\n  _defineProperty(ComponentBaseElement, \"properties\", {\n    settings: {\n      type: String,\n      \"default\": undefined\n    },\n    // position: { type: Object, default: {x: 0, y: 0, z: 0}},\n    web2vrComponent: {\n      type: Object,\n      \"default\": null\n    },\n    components: {\n      type: String,\n      \"default\": \"\"\n    }\n  });\n  return ComponentBaseElement;\n};\nvar ComponentBaseElement = ComponentBaseMixin(lit__WEBPACK_IMPORTED_MODULE_1__.LitElement);\n\n// Cannot use this element directly - must use it as a base class.//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQ4NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUF3QkE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQW5CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFjQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQWxFQTtBQUdBO0FBY0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWdEQTtBQUNBO0FBRUE7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2xpdC9Db21wb25lbnRCYXNlLmpzP2Y4ZTIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIEFGUkFNRSwgVEhSRUUgKi9cbmltcG9ydCAqIGFzIFdlYjJWUiBmcm9tIFwid2ViMnZyXCI7XG5pbXBvcnQge2h0bWwsIGNzcywgTGl0RWxlbWVudH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IFJvb3RTdHlsZUVsZW1lbnQgfSBmcm9tICcuL3Jvb3RzdHlsZXMuanMnO1xuXG5cbmV4cG9ydCBjb25zdCBDb21wb25lbnRCYXNlTWl4aW4gPSAoc3VwZXJDbGFzcykgPT4ge1xuICAgIGNsYXNzIENvbXBvbmVudEJhc2VFbGVtZW50IGV4dGVuZHMgc3VwZXJDbGFzcyB7XG4gICAgICAgIHN0YXRpYyBzdHlsZXMgPSBbXG4gICAgICAgICAgUm9vdFN0eWxlRWxlbWVudC5zdHlsZXMsXG4gICAgICAgICAgXVxuXG4gICAgICAgIGdldCBpZCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5faWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheSA9IG5ldyBVaW50MzJBcnJheSgxKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnJheSk7ICBcbiAgICAgICAgICAgICAgICB0aGlzLl9pZCA9IGFycmF5WzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgc3RhdGljIHByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICBzZXR0aW5nczogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgLy8gcG9zaXRpb246IHsgdHlwZTogT2JqZWN0LCBkZWZhdWx0OiB7eDogMCwgeTogMCwgejogMH19LFxuICAgICAgICAgICAgd2ViMnZyQ29tcG9uZW50OiB7IHR5cGU6IE9iamVjdCwgZGVmYXVsdDogbnVsbH0sXG4gICAgICAgICAgICBjb21wb25lbnRzOiB7IHR5cGU6IFN0cmluZyAsIGRlZmF1bHQ6IFwiXCJ9LFxuICAgICAgICAgIH1cbiAgICAgIFxuICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgIH1cbiAgICAgIFxuICAgICAgICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBTaG91bGQgdXBkYXRlQ29tcGxldGUgcmVzb2x2ZSB0aGUgYWZ0ZXIgZmlyc3QgdGltZSByZW5kZXIgcmFuP1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb21wbGV0ZS50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVcGRhdGUgQ29tcGxldGUgY2FsbGJhY2sgaGFzIGZpcmVkXCIpO1xuICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCAxMDApKTtcbiAgICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gdGhhdC5zZXR0aW5ncyA/IEpTT04ucGFyc2UodGhhdC5zZXR0aW5ncykgOiB7fTtcbiAgICAgICAgICAgICAgLy8gRGlzYWJsZSBib3JkZXIgYmVjYXVzZSB0aGVyZSBhcmUgcmFjZSBjb25kaXRpb24gaXNzdWVzIGJldHdlZW4gYm9yZGVyIGFuZCB0aGUgTGl0RWxlbWVudC5cbiAgICAgICAgICAgICAgc2V0dGluZ3MuYm9yZGVyID0gZmFsc2U7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiU2V0dGluZ3MgPSBcIiwgc2V0dGluZ3MpXG4gICAgICAgICAgICAgIHRoYXQud2ViMnZyQ29tcG9uZW50ID0gbmV3IFdlYjJWUih0aGF0LnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoYGNvbnRhaW5lcl8ke3RoYXQuaWR9YCksIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgYXdhaXQgdGhhdC53ZWIydnJDb21wb25lbnQuc3RhcnQoKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHZhciBjb21wb25lbnRzID0gdGhhdC5jb21wb25lbnRzID8gSlNPTi5wYXJzZSh0aGF0LmNvbXBvbmVudHMpIDoge307XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQ29tcG9uZW50cyA9IFwiLCBjb21wb25lbnRzKTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgY29tcG9uZW50IGluIGNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGF0LndlYjJ2ckNvbXBvbmVudC5hZnJhbWUuY29udGFpbmVyLnNldEF0dHJpYnV0ZShjb21wb25lbnQsIGNvbXBvbmVudHNbY29tcG9uZW50XSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXN5bmMgZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAvLyBHaXZlIHRoZSBicm93c2VyIGEgY2hhbmNlIHRvIHBhaW50XG4gICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYWRkRXZlbnRMaXN0ZW5lciggJ3Nsb3RjaGFuZ2UnLCB0aGlzLl9zbG90Q2hhbmdlZCApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJhc2VSZW5kZXIodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBodG1sYFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJodG1sLWNvbnRhaW5lclwiIGlkPVwiY29udGFpbmVyXyR7dGhpcy5pZH1cIj5cbiAgICAgICAgICAgICAgICAgICR7dGVtcGxhdGV9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgOyAgICAgICAgICAgIFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNsb3RDaGFuZ2VkKCkge1xuXG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29tcG9uZW50QmFzZUVsZW1lbnQ7XG59IFxuXG5leHBvcnQgY29uc3QgQ29tcG9uZW50QmFzZUVsZW1lbnQgPSBDb21wb25lbnRCYXNlTWl4aW4oTGl0RWxlbWVudClcblxuLy8gQ2Fubm90IHVzZSB0aGlzIGVsZW1lbnQgZGlyZWN0bHkgLSBtdXN0IHVzZSBpdCBhcyBhIGJhc2UgY2xhc3MuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3484\n");

/***/ }),

/***/ 87:
/*!*****************************************!*\
  !*** ./src/components/lit/HtmlPanel.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HtmlPanel: () => (/* binding */ HtmlPanel)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar HtmlPanel = /*#__PURE__*/function (_ComponentBaseElement) {\n  function HtmlPanel() {\n    _classCallCheck(this, HtmlPanel);\n    return _callSuper(this, HtmlPanel); // console.log(\"Creating HTML panel\");\n  }\n  _inherits(HtmlPanel, _ComponentBaseElement);\n  return _createClass(HtmlPanel, [{\n    key: \"updated\",\n    value: function updated(changedProperties) {\n      changedProperties.forEach(function (oldValue, propName) {});\n    }\n  }, {\n    key: \"createRenderRoot\",\n    value: function createRenderRoot() {\n      var root = _get(_getPrototypeOf(HtmlPanel.prototype), \"createRenderRoot\", this).call(this);\n      // root.addEventListener(\n      //   'click',\n      //   (e) => ( root.emit(\"lit-click\", e.target.localName)\n      // );\n      return root;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div id=\\\"container_\", \"\\\" class=\\\"html-container\\\">\\n            <slot @click=\\\"\", \"\\\"></slot>\\n        </div>\\n      \"])), this.id, this._clickHandler);\n      // <button slot=\"dismiss\" @click=\"${this._clickHandler}\" class=\"btn btn-primary dismiss rounded\">Dismiss</button>\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      // Click Handler here is delegated to the AFrame click handler, which listens on the entire entity.\n      // this.infoVisible = !this.infoVisible;\n      // console.log(\"Inside the lit element click handler, evt is \", e);\n      // console.log(\"Inside lit element, composed path = \", e.composedPath());\n      // console.log(\"Shadow name = \", e.target.localName);\n      this.web2vrComponent.aframe.container.emit(\"lit-click\", e);\n      // this.shadowRoot.getElementById(\"info\").innerText = \"Button Clicked!\";      \n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// prior to AFrame loading.\n_defineProperty(HtmlPanel, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      .html-container {\\n        position: absolute;\\n        width: 300px;\\n      }\\n      .visible {\\n        display: block;\\n      }\\n      .invisible {\\n        display: none;\\n      }\\n      .card-body {\\n        margin: 0;\\n      }\\n    \"])))]);\n_defineProperty(HtmlPanel, \"properties\", _objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties));\ncustomElements.define('esc-html-panel', HtmlPanel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQXdCQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFLQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUE3REE7QUFBQTtBQWtCQTtBQThDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2NvbXBvbmVudHMvbGl0L0h0bWxQYW5lbC5qcz9kYzBlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG5pbXBvcnQge2h0bWwsIGNzcywgTGl0RWxlbWVudH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IENvbXBvbmVudEJhc2VFbGVtZW50IH0gZnJvbSAnLi9Db21wb25lbnRCYXNlJztcblxuZXhwb3J0IGNsYXNzIEh0bWxQYW5lbCBleHRlbmRzIENvbXBvbmVudEJhc2VFbGVtZW50IHtcbiAgLy8gcHJpb3IgdG8gQUZyYW1lIGxvYWRpbmcuXG4gIHN0YXRpYyBzdHlsZXMgPSBbXG4gICAgQ29tcG9uZW50QmFzZUVsZW1lbnQuc3R5bGVzID8/IFtdLFxuICAgIGNzc2BcbiAgICAgIC5odG1sLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgfVxuICAgICAgLnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICAgIC5pbnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgICAgLmNhcmQtYm9keSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBwcm9wZXJ0aWVzID0ge1xuICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJDcmVhdGluZyBIVE1MIHBhbmVsXCIpO1xuICAgIH1cblxuICAgIHVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgIGNoYW5nZWRQcm9wZXJ0aWVzLmZvckVhY2goKG9sZFZhbHVlLCBwcm9wTmFtZSkgPT4ge1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlUmVuZGVyUm9vdCgpIHtcbiAgICAgIGNvbnN0IHJvb3QgPSBzdXBlci5jcmVhdGVSZW5kZXJSb290KCk7XG4gICAgICAvLyByb290LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAvLyAgICdjbGljaycsXG4gICAgICAvLyAgIChlKSA9PiAoIHJvb3QuZW1pdChcImxpdC1jbGlja1wiLCBlLnRhcmdldC5sb2NhbE5hbWUpXG4gICAgICAvLyApO1xuICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxuICBcblxuICAgIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGlkPVwiY29udGFpbmVyXyR7dGhpcy5pZH1cIiBjbGFzcz1cImh0bWwtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8c2xvdCBAY2xpY2s9XCIke3RoaXMuX2NsaWNrSGFuZGxlcn1cIj48L3Nsb3Q+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICAgIC8vIDxidXR0b24gc2xvdD1cImRpc21pc3NcIiBAY2xpY2s9XCIke3RoaXMuX2NsaWNrSGFuZGxlcn1cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBkaXNtaXNzIHJvdW5kZWRcIj5EaXNtaXNzPC9idXR0b24+XG5cbiAgICB9XG5cbiAgICBfY2xpY2tIYW5kbGVyKGUpIHtcbiAgICAgIC8vIENsaWNrIEhhbmRsZXIgaGVyZSBpcyBkZWxlZ2F0ZWQgdG8gdGhlIEFGcmFtZSBjbGljayBoYW5kbGVyLCB3aGljaCBsaXN0ZW5zIG9uIHRoZSBlbnRpcmUgZW50aXR5LlxuICAgICAgLy8gdGhpcy5pbmZvVmlzaWJsZSA9ICF0aGlzLmluZm9WaXNpYmxlO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJJbnNpZGUgdGhlIGxpdCBlbGVtZW50IGNsaWNrIGhhbmRsZXIsIGV2dCBpcyBcIiwgZSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIkluc2lkZSBsaXQgZWxlbWVudCwgY29tcG9zZWQgcGF0aCA9IFwiLCBlLmNvbXBvc2VkUGF0aCgpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiU2hhZG93IG5hbWUgPSBcIiwgZS50YXJnZXQubG9jYWxOYW1lKTtcbiAgICAgIHRoaXMud2ViMnZyQ29tcG9uZW50LmFmcmFtZS5jb250YWluZXIuZW1pdChcImxpdC1jbGlja1wiLCBlKTtcbiAgICAgIC8vIHRoaXMuc2hhZG93Um9vdC5nZXRFbGVtZW50QnlJZChcImluZm9cIikuaW5uZXJUZXh0ID0gXCJCdXR0b24gQ2xpY2tlZCFcIjsgICAgICBcbiAgICB9XG59XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnZXNjLWh0bWwtcGFuZWwnLCBIdG1sUGFuZWwpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///87\n");

/***/ }),

/***/ 7536:
/*!*****************************************!*\
  !*** ./src/components/lit/InfoPanel.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InfoPanel: () => (/* binding */ InfoPanel)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar InfoPanel = /*#__PURE__*/function (_ComponentBaseElement) {\n  function InfoPanel() {\n    _classCallCheck(this, InfoPanel);\n    return _callSuper(this, InfoPanel); // console.log(\"Creating Info panel\");\n  }\n  _inherits(InfoPanel, _ComponentBaseElement);\n  return _createClass(InfoPanel, [{\n    key: \"updated\",\n    value: function updated(changedProperties) {\n      changedProperties.forEach(function (oldValue, propName) {});\n    }\n  }, {\n    key: \"createRenderRoot\",\n    value: function createRenderRoot() {\n      var root = _get(_getPrototypeOf(InfoPanel.prototype), \"createRenderRoot\", this).call(this);\n      // root.addEventListener(\n      //   'click',\n      //   (e) => ( root.emit(\"lit-click\", e.target.localName)\n      // );\n      return root;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      <div id=\\\"container_\", \"\\\" class=\\\"html-container\\\">\\n            <slot></slot>\\n            <button @click=\\\"\", \"\\\" class=\\\"btn btn-primary dismiss\\\">Start The Game</button>\\n      </div>\\n      \"])), this.id, this._clickHandler);\n      // <button slot=\"dismiss\" @click=\"${this._clickHandler}\" class=\"btn btn-primary dismiss rounded\">Dismiss</button>\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      // Click Handler here is delegated to the AFrame click handler, which listens on the entire entity.\n      // this.infoVisible = !this.infoVisible;\n      // console.log(\"Inside the lit element click handler, evt is \", e);\n      // console.log(\"Inside lit element, composed path = \", e.composedPath());\n      // console.log(\"Shadow name = \", e.target.localName);\n      this.web2vrComponent.aframe.container.emit(\"lit-click\", e);\n      // this.shadowRoot.getElementById(\"info\").innerText = \"Button Clicked!\";      \n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// Note: All elements are placed at -9999 to avoid the Flash of Unstyled Content (FOUC)\n// prior to AFrame loading.\n_defineProperty(InfoPanel, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      .html-container {\\n        position: absolute;\\n      }\\n      .visible {\\n        display: block;\\n      }\\n      .invisible {\\n        display: none;\\n      }\\n      .card-body {\\n        margin: 0;\\n      }\\n    \"])))]);\n_defineProperty(InfoPanel, \"properties\", _objectSpread(_objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties), {}, {\n  title: {\n    type: String,\n    \"default\": \"Hello world!\"\n  },\n  message: {\n    type: String,\n    \"default\": \"Hello world message!\"\n  }\n}));\ncustomElements.define('esc-info-panel', InfoPanel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUzNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBMEJBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQU1BO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQWhFQTtBQUNBO0FBQUE7QUFpQkE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUE2Q0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2xpdC9JbmZvUGFuZWwuanM/NDcyNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQUZSQU1FLCBUSFJFRSAqL1xuaW1wb3J0IHtodG1sLCBjc3MsIExpdEVsZW1lbnR9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBDb21wb25lbnRCYXNlRWxlbWVudCB9IGZyb20gJy4vQ29tcG9uZW50QmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBJbmZvUGFuZWwgZXh0ZW5kcyBDb21wb25lbnRCYXNlRWxlbWVudCB7XG4gIC8vIE5vdGU6IEFsbCBlbGVtZW50cyBhcmUgcGxhY2VkIGF0IC05OTk5IHRvIGF2b2lkIHRoZSBGbGFzaCBvZiBVbnN0eWxlZCBDb250ZW50IChGT1VDKVxuICAvLyBwcmlvciB0byBBRnJhbWUgbG9hZGluZy5cbiAgc3RhdGljIHN0eWxlcyA9IFtcbiAgICBDb21wb25lbnRCYXNlRWxlbWVudC5zdHlsZXMgPz8gW10sXG4gICAgY3NzYFxuICAgICAgLmh0bWwtY29udGFpbmVyIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgfVxuICAgICAgLnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICAgIC5pbnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgICAgLmNhcmQtYm9keSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBwcm9wZXJ0aWVzID0ge1xuICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICAgIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJIZWxsbyB3b3JsZCFcIn0sXG4gICAgICBtZXNzYWdlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJIZWxsbyB3b3JsZCBtZXNzYWdlIVwifVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkNyZWF0aW5nIEluZm8gcGFuZWxcIik7XG4gICAgfVxuXG4gICAgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgY2hhbmdlZFByb3BlcnRpZXMuZm9yRWFjaCgob2xkVmFsdWUsIHByb3BOYW1lKSA9PiB7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVSZW5kZXJSb290KCkge1xuICAgICAgY29uc3Qgcm9vdCA9IHN1cGVyLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAgIC8vIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIC8vICAgJ2NsaWNrJyxcbiAgICAgIC8vICAgKGUpID0+ICggcm9vdC5lbWl0KFwibGl0LWNsaWNrXCIsIGUudGFyZ2V0LmxvY2FsTmFtZSlcbiAgICAgIC8vICk7XG4gICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG4gIFxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIGh0bWxgXG4gICAgICA8ZGl2IGlkPVwiY29udGFpbmVyXyR7dGhpcy5pZH1cIiBjbGFzcz1cImh0bWwtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgICAgICA8YnV0dG9uIEBjbGljaz1cIiR7dGhpcy5fY2xpY2tIYW5kbGVyfVwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGRpc21pc3NcIj5TdGFydCBUaGUgR2FtZTwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgICAgLy8gPGJ1dHRvbiBzbG90PVwiZGlzbWlzc1wiIEBjbGljaz1cIiR7dGhpcy5fY2xpY2tIYW5kbGVyfVwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGRpc21pc3Mgcm91bmRlZFwiPkRpc21pc3M8L2J1dHRvbj5cblxuICAgIH1cblxuICAgIF9jbGlja0hhbmRsZXIoZSkge1xuICAgICAgLy8gQ2xpY2sgSGFuZGxlciBoZXJlIGlzIGRlbGVnYXRlZCB0byB0aGUgQUZyYW1lIGNsaWNrIGhhbmRsZXIsIHdoaWNoIGxpc3RlbnMgb24gdGhlIGVudGlyZSBlbnRpdHkuXG4gICAgICAvLyB0aGlzLmluZm9WaXNpYmxlID0gIXRoaXMuaW5mb1Zpc2libGU7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIkluc2lkZSB0aGUgbGl0IGVsZW1lbnQgY2xpY2sgaGFuZGxlciwgZXZ0IGlzIFwiLCBlKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiSW5zaWRlIGxpdCBlbGVtZW50LCBjb21wb3NlZCBwYXRoID0gXCIsIGUuY29tcG9zZWRQYXRoKCkpO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJTaGFkb3cgbmFtZSA9IFwiLCBlLnRhcmdldC5sb2NhbE5hbWUpO1xuICAgICAgdGhpcy53ZWIydnJDb21wb25lbnQuYWZyYW1lLmNvbnRhaW5lci5lbWl0KFwibGl0LWNsaWNrXCIsIGUpO1xuICAgICAgLy8gdGhpcy5zaGFkb3dSb290LmdldEVsZW1lbnRCeUlkKFwiaW5mb1wiKS5pbm5lclRleHQgPSBcIkJ1dHRvbiBDbGlja2VkIVwiOyAgICAgIFxuICAgIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdlc2MtaW5mby1wYW5lbCcsIEluZm9QYW5lbCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7536\n");

/***/ }),

/***/ 3997:
/*!***********************************************************!*\
  !*** ./src/components/lit/Tutorial/TutorialClickPanel.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TutorialClickPanel: () => (/* binding */ TutorialClickPanel)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar TutorialClickPanel = /*#__PURE__*/function (_ComponentBaseElement) {\n  function TutorialClickPanel() {\n    _classCallCheck(this, TutorialClickPanel);\n    return _callSuper(this, TutorialClickPanel);\n  }\n  _inherits(TutorialClickPanel, _ComponentBaseElement);\n  return _createClass(TutorialClickPanel, [{\n    key: \"firstUpdated\",\n    value: function () {\n      var _firstUpdated = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(changedProperties) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return new Promise(function (r) {\n                return setTimeout(r, 0);\n              });\n            case 2:\n              this.addEventListener('click', this._clickHandler);\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function firstUpdated(_x) {\n        return _firstUpdated.apply(this, arguments);\n      }\n      return firstUpdated;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div id=\\\"container_\", \"\\\" class=\\\"html-container\\\" @click=\\\"\", \"\\\">\\n            <slot></slot>\\n            <div class=\\\"card card-body\\\" style=\\\"background-color: white; display: none;\\\" id=\\\"info\\\"></div>\\n        </div>\\n      \"])), this.id, this._clickHandler);\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      console.log(\"Inside lit element, composed path = \", e.composedPath());\n      // console.log(this.shadowRoot.querySelector(\"slot\").assignedElements({ flatten: true }));\n      this.web2vrComponent.aframe.container.emit(\"lit-click\", e);\n      this.querySelector(\".example_button span\").innerText = \"Good Job!\";\n      this.querySelector(\".example_button\").style.backgroundColor = \"green\";\n      // e.composedPath()[0].value = \"Good Job!\";\n      // e.composedPath()[0].style.backgroundColor = \"green\";\n      // this.shadowRoot.getElementById(\"info\").style.display = \"block\";\n      // console.log(this.shadowRoot.querySelector('.example_button'));\n      // this.shadowRoot.querySelector(\".example_button\").style.backgroundColor = \"green\";\n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// prior to AFrame loading.\n_defineProperty(TutorialClickPanel, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n      .html-container {\\n        position: absolute;\\n        width: 300px;\\n      }\\n      .visible {\\n        display: block;\\n      }\\n      .invisible {\\n        display: none;\\n      }\\n      .card-body {\\n        margin: 0;\\n      }\\n    \"])))]);\n_defineProperty(TutorialClickPanel, \"properties\", _objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties));\ncustomElements.define('esc-tutorial-click-panel', TutorialClickPanel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzk5Ny5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUF3QkE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQXJEQTtBQUFBO0FBa0JBO0FBc0NBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9saXQvVHV0b3JpYWwvVHV0b3JpYWxDbGlja1BhbmVsLmpzP2VkMDEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIEFGUkFNRSwgVEhSRUUgKi9cbmltcG9ydCB7aHRtbCwgY3NzLCBMaXRFbGVtZW50fSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgQ29tcG9uZW50QmFzZUVsZW1lbnQgfSBmcm9tICcuLi9Db21wb25lbnRCYXNlJztcblxuZXhwb3J0IGNsYXNzIFR1dG9yaWFsQ2xpY2tQYW5lbCBleHRlbmRzIENvbXBvbmVudEJhc2VFbGVtZW50IHtcbiAgLy8gcHJpb3IgdG8gQUZyYW1lIGxvYWRpbmcuXG4gIHN0YXRpYyBzdHlsZXMgPSBbXG4gICAgQ29tcG9uZW50QmFzZUVsZW1lbnQuc3R5bGVzID8/IFtdLFxuICAgIGNzc2BcbiAgICAgIC5odG1sLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgd2lkdGg6IDMwMHB4O1xuICAgICAgfVxuICAgICAgLnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cbiAgICAgIC5pbnZpc2libGUge1xuICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgfVxuICAgICAgLmNhcmQtYm9keSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBwcm9wZXJ0aWVzID0ge1xuICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICBhc3luYyBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgIC8vIEdpdmUgdGhlIGJyb3dzZXIgYSBjaGFuY2UgdG8gcGFpbnRcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIDApKTtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja0hhbmRsZXIpOyAgICAgIFxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGlkPVwiY29udGFpbmVyXyR7dGhpcy5pZH1cIiBjbGFzcz1cImh0bWwtY29udGFpbmVyXCIgQGNsaWNrPVwiJHt0aGlzLl9jbGlja0hhbmRsZXJ9XCI+XG4gICAgICAgICAgICA8c2xvdD48L3Nsb3Q+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZCBjYXJkLWJvZHlcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IHdoaXRlOyBkaXNwbGF5OiBub25lO1wiIGlkPVwiaW5mb1wiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgX2NsaWNrSGFuZGxlcihlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkluc2lkZSBsaXQgZWxlbWVudCwgY29tcG9zZWQgcGF0aCA9IFwiLCBlLmNvbXBvc2VkUGF0aCgpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwic2xvdFwiKS5hc3NpZ25lZEVsZW1lbnRzKHsgZmxhdHRlbjogdHJ1ZSB9KSk7XG4gICAgICB0aGlzLndlYjJ2ckNvbXBvbmVudC5hZnJhbWUuY29udGFpbmVyLmVtaXQoXCJsaXQtY2xpY2tcIiwgZSk7XG4gICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIuZXhhbXBsZV9idXR0b24gc3BhblwiKS5pbm5lclRleHQgPSBcIkdvb2QgSm9iIVwiO1xuICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmV4YW1wbGVfYnV0dG9uXCIpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiZ3JlZW5cIjtcbiAgICAgIC8vIGUuY29tcG9zZWRQYXRoKClbMF0udmFsdWUgPSBcIkdvb2QgSm9iIVwiO1xuICAgICAgLy8gZS5jb21wb3NlZFBhdGgoKVswXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgICAvLyB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJpbmZvXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLmV4YW1wbGVfYnV0dG9uJykpO1xuICAgICAgLy8gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIuZXhhbXBsZV9idXR0b25cIikuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmVlblwiO1xuICAgIH1cbn1cblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdlc2MtdHV0b3JpYWwtY2xpY2stcGFuZWwnLCBUdXRvcmlhbENsaWNrUGFuZWwpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3997\n");

/***/ }),

/***/ 4457:
/*!*************************************!*\
  !*** ./src/components/lit/Watch.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Watch: () => (/* binding */ Watch)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var _ComponentBase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComponentBase */ 3484);\nvar _templateObject, _ComponentBaseElement2, _templateObject2;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* global AFRAME, THREE */\n\n\nvar Watch = /*#__PURE__*/function (_ComponentBaseElement) {\n  function Watch() {\n    var _this;\n    _classCallCheck(this, Watch);\n    _this = _callSuper(this, Watch);\n    _this.minutes = 60;\n    _this.seconds = 0;\n    _this.hintsLeft = 3;\n    _this.tickTime = 0;\n    _this.timeDelta = 0;\n    console.log(\"Creating Watch\");\n    return _this;\n  }\n  _inherits(Watch, _ComponentBaseElement);\n  return _createClass(Watch, [{\n    key: \"_checkTime\",\n    value: function _checkTime(i) {\n      if (i < 10) {\n        i = \"0\" + i;\n      }\n      ; // add zero in front of numbers < 10\n      return i;\n    }\n  }, {\n    key: \"firstUpdated\",\n    value: function firstUpdated(changedProperties) {\n      _get(_getPrototypeOf(Watch.prototype), \"firstUpdated\", this).call(this, changedProperties);\n      console.log(\"Watch Connected\");\n      // this.shadowRoot.querySelector(\".hint-button\").addEventListener(\"click\", this._clickHandler.bind(this));\n      // document.querySelector(\"a-scene\").addEventListener(\"tick\", this.tick.bind(this));\n      // this.addEventListener(\"tick\", this.tick.bind(this));\n      // this.web2vrComponent.aframe.container.addEventListener(\"tick\", this.tick.bind(this));\n      // this.web2vrComponent.aframe.container.addEventListener(\"tick\", (e) => { console.log(e) });\n    }\n  }, {\n    key: \"updated\",\n    value: function updated(changedProperties) {\n      _get(_getPrototypeOf(Watch.prototype), \"updated\", this).call(this, changedProperties);\n      changedProperties.forEach(function (oldValue, propName) {\n        console.log(\"\".concat(propName, \" changed. oldValue: \").concat(oldValue));\n      });\n    }\n  }, {\n    key: \"createRenderRoot\",\n    value: function createRenderRoot() {\n      var root = _get(_getPrototypeOf(Watch.prototype), \"createRenderRoot\", this).call(this);\n      // root.addEventListener(\n      //   'click',\n      //   (e) => ( root.emit(\"lit-click\", e.target.localName)\n      // );\n      return root;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (0,lit__WEBPACK_IMPORTED_MODULE_0__.html)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        <div class=\\\"watch\\\" id=\\\"container_\", \"\\\">\\n            <div class=\\\"watch\\\">\\n               <div class=\\\"time_header\\\">Time Remaining</div>\\n               <div class=\\\"time\\\"><span>\", \":\", \"</span></div>\\n               <div class=\\\"hintsLeftHeader\\\">Hints Left: <span class=\\\"hintsLeftcount\\\">\", \"</span></div>         \\n               <slot @click=\\\"\", \"\\\"></slot>\\n                <button @click=\\\"\", \"\\\" class=\\\"hint-button control btn btn-secondary\\\">HINT</button>\\n            </div>\\n        </div>\\n      \"])), this.id, this._checkTime(this.minutes), this._checkTime(this.seconds), this.hintsLeft, this._clickHandler, this._clickHandler);\n    }\n  }, {\n    key: \"tick\",\n    value: function tick(_ref) {\n      var time = _ref.time,\n        timeDelta = _ref.timeDelta;\n      this.tickTime = this.tickTime + timeDelta;\n      // console.log(\"Tick received\", timeDelta);\n      if (this.tickTime > 1000) {\n        this.tickTime = 0;\n        this._updateTime();\n      }\n    }\n  }, {\n    key: \"_updateTime\",\n    value: function _updateTime() {\n      if (this.seconds == 0) {\n        if (this.minutes == 0) {\n          this.web2vrComponent.aframe.container.emit(\"time-up\");\n          return;\n        }\n        this.minutes = this.minutes - 1;\n        this.seconds = 59;\n        this.requestUpdate(\"minutes\", this.minutes);\n        this.requestUpdate(\"seconds\", this.seconds);\n      } else {\n        this.seconds = this.seconds - 1;\n        this.requestUpdate(\"seconds\", this.seconds);\n      }\n      // this.requestUpdate();\n    }\n  }, {\n    key: \"_clickHandler\",\n    value: function _clickHandler(e) {\n      // Click Handler here is delegated to the AFrame click handler, which listens on the entire entity.\n      // this.infoVisible = !this.infoVisible;\n      // console.log(\"Inside the click handler, evt is \", e);\n      this.web2vrComponent.aframe.container.emit(\"lit-click\", e);\n      // this.shadowRoot.getElementById(\"info\").innerText = \"Button Clicked!\";      \n    }\n  }], [{\n    key: \"properties\",\n    get: function get() {\n      return _objectSpread(_objectSpread({}, _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.properties), {}, {\n        //   text: { type: String, default: \"Hello world!\"},\n        \"minutes\": {\n          type: Number,\n          \"default\": 60\n        },\n        \"seconds\": {\n          type: Number,\n          \"default\": 0\n        },\n        \"hintsLeft\": {\n          type: Number,\n          \"default\": 3\n        },\n        \"tickTime\": {\n          type: Number,\n          \"default\": 0\n        },\n        \"timeDelta\": {\n          type: Number,\n          \"default\": 0\n        }\n      });\n    }\n  }]);\n}(_ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement);\n// Note: All elements are placed at -9999 to avoid the Flash of Unstyled Content (FOUC)\n// prior to AFrame loading.\n_defineProperty(Watch, \"styles\", [(_ComponentBaseElement2 = _ComponentBase__WEBPACK_IMPORTED_MODULE_1__.ComponentBaseElement.styles) !== null && _ComponentBaseElement2 !== void 0 ? _ComponentBaseElement2 : [], (0,lit__WEBPACK_IMPORTED_MODULE_0__.css)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n    .watch {\\n      position: absolute;\\n      width: 200px;\\n      height: 200px;\\n      background-image: url(/images/backgroundWatch.png);\\n      background-size: cover;\\n      color: white;\\n      z-index: 0.5;\\n  }\\n  \\n  .time_header {\\n      font-size: 20px;\\n      margin-left: 15%;\\n      margin-top: 20%;\\n      height: 18px;\\n  }\\n  \\n  .time {\\n      font-size: 28px;\\n      margin-left: 30%;\\n      margin-top: 5%;\\n      height: 32px;\\n  }\\n\\n  .hintsLeftHeader {\\n    font-size: 20px;\\n    margin-left: 25%;\\n    margin-top: 3%;\\n    height: 18px;\\n}\\n.hintsLeft {\\n    font-size: 20px;\\n    margin-left: 50%;\\n    margin-top: 5%;\\n    height: 30px;\\n}\\n\\n  .hint-button {\\n    font-size: 30px;\\n    margin-left: 32%;\\n    margin-top: 5%;\\n    height: 38px;\\n  }\\n  \\n    \"])))]);\ncustomElements.define('esc-watch', Watch);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQ1Ny5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBZ0VBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBWUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFwR0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQTdEQTtBQUNBO0FBQUE7QUEwSkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uL3NyYy9jb21wb25lbnRzL2xpdC9XYXRjaC5qcz8yNWE5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG5pbXBvcnQge2h0bWwsIGNzcywgTGl0RWxlbWVudH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IENvbXBvbmVudEJhc2VFbGVtZW50IH0gZnJvbSAnLi9Db21wb25lbnRCYXNlJztcblxuZXhwb3J0IGNsYXNzIFdhdGNoIGV4dGVuZHMgQ29tcG9uZW50QmFzZUVsZW1lbnQge1xuICAvLyBOb3RlOiBBbGwgZWxlbWVudHMgYXJlIHBsYWNlZCBhdCAtOTk5OSB0byBhdm9pZCB0aGUgRmxhc2ggb2YgVW5zdHlsZWQgQ29udGVudCAoRk9VQylcbiAgLy8gcHJpb3IgdG8gQUZyYW1lIGxvYWRpbmcuXG4gIHN0YXRpYyBzdHlsZXMgPSBbXG4gICAgQ29tcG9uZW50QmFzZUVsZW1lbnQuc3R5bGVzID8/IFtdLFxuICAgIGNzc2BcbiAgICAud2F0Y2gge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgd2lkdGg6IDIwMHB4O1xuICAgICAgaGVpZ2h0OiAyMDBweDtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgvaW1hZ2VzL2JhY2tncm91bmRXYXRjaC5wbmcpO1xuICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIHotaW5kZXg6IDAuNTtcbiAgfVxuICBcbiAgLnRpbWVfaGVhZGVyIHtcbiAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxNSU7XG4gICAgICBtYXJnaW4tdG9wOiAyMCU7XG4gICAgICBoZWlnaHQ6IDE4cHg7XG4gIH1cbiAgXG4gIC50aW1lIHtcbiAgICAgIGZvbnQtc2l6ZTogMjhweDtcbiAgICAgIG1hcmdpbi1sZWZ0OiAzMCU7XG4gICAgICBtYXJnaW4tdG9wOiA1JTtcbiAgICAgIGhlaWdodDogMzJweDtcbiAgfVxuXG4gIC5oaW50c0xlZnRIZWFkZXIge1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBtYXJnaW4tbGVmdDogMjUlO1xuICAgIG1hcmdpbi10b3A6IDMlO1xuICAgIGhlaWdodDogMThweDtcbn1cbi5oaW50c0xlZnQge1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBtYXJnaW4tbGVmdDogNTAlO1xuICAgIG1hcmdpbi10b3A6IDUlO1xuICAgIGhlaWdodDogMzBweDtcbn1cblxuICAuaGludC1idXR0b24ge1xuICAgIGZvbnQtc2l6ZTogMzBweDtcbiAgICBtYXJnaW4tbGVmdDogMzIlO1xuICAgIG1hcmdpbi10b3A6IDUlO1xuICAgIGhlaWdodDogMzhweDtcbiAgfVxuICBcbiAgICBgXG4gICAgXVxuICAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpe1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uQ29tcG9uZW50QmFzZUVsZW1lbnQucHJvcGVydGllcyxcbiAgICAgICAgLy8gICB0ZXh0OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJIZWxsbyB3b3JsZCFcIn0sXG4gICAgICAgIFwibWludXRlc1wiOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogNjB9LFxuICAgICAgICBcInNlY29uZHNcIjogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDB9LFxuICAgICAgICBcImhpbnRzTGVmdFwiOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogM30sXG4gICAgICAgIFwidGlja1RpbWVcIjogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDB9LFxuICAgICAgICBcInRpbWVEZWx0YVwiOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMH0sXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5taW51dGVzID0gNjA7XG4gICAgICB0aGlzLnNlY29uZHMgPSAwO1xuICAgICAgdGhpcy5oaW50c0xlZnQgPSAzO1xuICAgICAgdGhpcy50aWNrVGltZSA9IDA7XG4gICAgICB0aGlzLnRpbWVEZWx0YSA9IDA7XG4gICAgICBjb25zb2xlLmxvZyhcIkNyZWF0aW5nIFdhdGNoXCIpO1xuICAgIH1cblxuICAgIF9jaGVja1RpbWUoaSkge1xuICAgICAgaWYgKGkgPCAxMCkgeyBpID0gXCIwXCIgKyBpIH07ICAvLyBhZGQgemVybyBpbiBmcm9udCBvZiBudW1iZXJzIDwgMTBcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBcbiAgICBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgIHN1cGVyLmZpcnN0VXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICBjb25zb2xlLmxvZyhcIldhdGNoIENvbm5lY3RlZFwiKTtcbiAgICAgIC8vIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiLmhpbnQtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYS1zY2VuZVwiKS5hZGRFdmVudExpc3RlbmVyKFwidGlja1wiLCB0aGlzLnRpY2suYmluZCh0aGlzKSk7XG4gICAgICAvLyB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0aWNrXCIsIHRoaXMudGljay5iaW5kKHRoaXMpKTtcbiAgICAgIC8vIHRoaXMud2ViMnZyQ29tcG9uZW50LmFmcmFtZS5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRpY2tcIiwgdGhpcy50aWNrLmJpbmQodGhpcykpO1xuICAgICAgLy8gdGhpcy53ZWIydnJDb21wb25lbnQuYWZyYW1lLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwidGlja1wiLCAoZSkgPT4geyBjb25zb2xlLmxvZyhlKSB9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgIGNoYW5nZWRQcm9wZXJ0aWVzLmZvckVhY2goKG9sZFZhbHVlLCBwcm9wTmFtZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtwcm9wTmFtZX0gY2hhbmdlZC4gb2xkVmFsdWU6ICR7b2xkVmFsdWV9YCk7XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIGNyZWF0ZVJlbmRlclJvb3QoKSB7XG4gICAgICBjb25zdCByb290ID0gc3VwZXIuY3JlYXRlUmVuZGVyUm9vdCgpO1xuICAgICAgLy8gcm9vdC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgLy8gICAnY2xpY2snLFxuICAgICAgLy8gICAoZSkgPT4gKCByb290LmVtaXQoXCJsaXQtY2xpY2tcIiwgZS50YXJnZXQubG9jYWxOYW1lKVxuICAgICAgLy8gKTtcbiAgICAgIHJldHVybiByb290O1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8ZGl2IGNsYXNzPVwid2F0Y2hcIiBpZD1cImNvbnRhaW5lcl8ke3RoaXMuaWR9XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2F0Y2hcIj5cbiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lX2hlYWRlclwiPlRpbWUgUmVtYWluaW5nPC9kaXY+XG4gICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZVwiPjxzcGFuPiR7dGhpcy5fY2hlY2tUaW1lKHRoaXMubWludXRlcyl9OiR7dGhpcy5fY2hlY2tUaW1lKHRoaXMuc2Vjb25kcyl9PC9zcGFuPjwvZGl2PlxuICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhpbnRzTGVmdEhlYWRlclwiPkhpbnRzIExlZnQ6IDxzcGFuIGNsYXNzPVwiaGludHNMZWZ0Y291bnRcIj4ke3RoaXMuaGludHNMZWZ0fTwvc3Bhbj48L2Rpdj4gICAgICAgICBcbiAgICAgICAgICAgICAgIDxzbG90IEBjbGljaz1cIiR7dGhpcy5fY2xpY2tIYW5kbGVyfVwiPjwvc2xvdD5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIEBjbGljaz1cIiR7dGhpcy5fY2xpY2tIYW5kbGVyfVwiIGNsYXNzPVwiaGludC1idXR0b24gY29udHJvbCBidG4gYnRuLXNlY29uZGFyeVwiPkhJTlQ8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG5cbiAgICB9XG5cbiAgICB0aWNrKHt0aW1lLCB0aW1lRGVsdGF9KSB7XG4gICAgICB0aGlzLnRpY2tUaW1lID0gdGhpcy50aWNrVGltZSArIHRpbWVEZWx0YTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiVGljayByZWNlaXZlZFwiLCB0aW1lRGVsdGEpO1xuICAgICAgaWYgKHRoaXMudGlja1RpbWUgPiAxMDAwKSB7XG4gICAgICAgIHRoaXMudGlja1RpbWUgPSAwO1xuICAgICAgICB0aGlzLl91cGRhdGVUaW1lKCk7XG4gICAgICB9XG4gICAgfVxuICBcbiAgICBfdXBkYXRlVGltZSgpIHtcbiAgICAgIGlmICh0aGlzLnNlY29uZHMgPT0gMCkge1xuICAgICAgICBpZiAodGhpcy5taW51dGVzID09IDApIHtcbiAgICAgICAgICB0aGlzLndlYjJ2ckNvbXBvbmVudC5hZnJhbWUuY29udGFpbmVyLmVtaXQoXCJ0aW1lLXVwXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1pbnV0ZXMgPSB0aGlzLm1pbnV0ZXMgLSAxO1xuICAgICAgICB0aGlzLnNlY29uZHMgPSA1OTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKFwibWludXRlc1wiLCB0aGlzLm1pbnV0ZXMpO1xuICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoXCJzZWNvbmRzXCIsIHRoaXMuc2Vjb25kcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlY29uZHMgPSB0aGlzLnNlY29uZHMgLSAxO1xuICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoXCJzZWNvbmRzXCIsIHRoaXMuc2Vjb25kcyk7XG4gICAgICB9XG4gICAgICAvLyB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICB9XG5cbiAgICBfY2xpY2tIYW5kbGVyKGUpIHtcbiAgICAgIC8vIENsaWNrIEhhbmRsZXIgaGVyZSBpcyBkZWxlZ2F0ZWQgdG8gdGhlIEFGcmFtZSBjbGljayBoYW5kbGVyLCB3aGljaCBsaXN0ZW5zIG9uIHRoZSBlbnRpcmUgZW50aXR5LlxuICAgICAgLy8gdGhpcy5pbmZvVmlzaWJsZSA9ICF0aGlzLmluZm9WaXNpYmxlO1xuICAgICAgLy8gY29uc29sZS5sb2coXCJJbnNpZGUgdGhlIGNsaWNrIGhhbmRsZXIsIGV2dCBpcyBcIiwgZSk7XG4gICAgICB0aGlzLndlYjJ2ckNvbXBvbmVudC5hZnJhbWUuY29udGFpbmVyLmVtaXQoXCJsaXQtY2xpY2tcIiwgZSk7XG4gICAgICAvLyB0aGlzLnNoYWRvd1Jvb3QuZ2V0RWxlbWVudEJ5SWQoXCJpbmZvXCIpLmlubmVyVGV4dCA9IFwiQnV0dG9uIENsaWNrZWQhXCI7ICAgICAgXG4gICAgfVxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2VzYy13YXRjaCcsIFdhdGNoKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4457\n");

/***/ }),

/***/ 294:
/*!*************************************!*\
  !*** ./src/components/lit/index.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ComponentBase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ComponentBase.js */ 3484);\n/* harmony import */ var _InfoPanel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./InfoPanel.js */ 7536);\n/* harmony import */ var _HtmlPanel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./HtmlPanel.js */ 87);\n/* harmony import */ var _Button_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Button.js */ 4388);\n/* harmony import */ var _Watch_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Watch.js */ 4457);\n/* harmony import */ var _Tutorial_TutorialClickPanel_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Tutorial/TutorialClickPanel.js */ 3997);\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjk0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9saXQvaW5kZXguanM/YmYxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCIuL0NvbXBvbmVudEJhc2UuanNcIjtcbmltcG9ydCBcIi4vSW5mb1BhbmVsLmpzXCI7XG5pbXBvcnQgXCIuL0h0bWxQYW5lbC5qc1wiO1xuaW1wb3J0IFwiLi9CdXR0b24uanNcIjtcbmltcG9ydCBcIi4vV2F0Y2guanNcIlxuaW1wb3J0IFwiLi9UdXRvcmlhbC9UdXRvcmlhbENsaWNrUGFuZWwuanNcIjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///294\n");

/***/ }),

/***/ 5382:
/*!******************************************!*\
  !*** ./src/components/lit/rootstyles.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootStyleElement: () => (/* binding */ RootStyleElement)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ 6161);\n/* harmony import */ var bootstrap_dist_css_bootstrap_min_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bootstrap/dist/css/bootstrap.min.css */ 7110);\n/* harmony import */ var animate_css_animate_min_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! animate.css/animate.min.css */ 2272);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\nvar RootStyleElement = /*#__PURE__*/function (_LitElement) {\n  function RootStyleElement() {\n    _classCallCheck(this, RootStyleElement);\n    return _callSuper(this, RootStyleElement, arguments);\n  }\n  _inherits(RootStyleElement, _LitElement);\n  return _createClass(RootStyleElement, [{\n    key: \"createRenderRoot\",\n    value: function createRenderRoot() {\n      return this;\n    }\n  }]);\n}(lit__WEBPACK_IMPORTED_MODULE_0__.LitElement);\n_defineProperty(RootStyleElement, \"styles\", [bootstrap_dist_css_bootstrap_min_css__WEBPACK_IMPORTED_MODULE_1__[\"default\"], animate_css_animate_min_css__WEBPACK_IMPORTED_MODULE_2__[\"default\"]]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTM4Mi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBQUE7QUFBQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvY29tcG9uZW50cy9saXQvcm9vdHN0eWxlcy5qcz9kOGM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aHRtbCwgY3NzLCBMaXRFbGVtZW50fSBmcm9tICdsaXQnO1xuaW1wb3J0IGJvb3RzdHJhcCBmcm9tIFwiYm9vdHN0cmFwL2Rpc3QvY3NzL2Jvb3RzdHJhcC5taW4uY3NzXCI7XG5pbXBvcnQgYW5pbWF0ZSBmcm9tIFwiYW5pbWF0ZS5jc3MvYW5pbWF0ZS5taW4uY3NzXCI7XG5cbmV4cG9ydCBjbGFzcyBSb290U3R5bGVFbGVtZW50IGV4dGVuZHMgTGl0RWxlbWVudCB7XG5cbiAgICBzdGF0aWMgc3R5bGVzID0gWyAgICAgICAgXG4gICAgICAgIGJvb3RzdHJhcCxcbiAgICAgICAgYW5pbWF0ZVxuICAgIF1cbiAgICBcbiAgICBjcmVhdGVSZW5kZXJSb290KCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5382\n");

/***/ }),

/***/ 9571:
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ./components/lit/index.js */ 294);\n__webpack_require__(/*! ./components/aframe/index.js */ 4877);\n// require('aframe-locomotion');\n__webpack_require__(/*! aframe-extras */ 8551);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTU3MS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLy4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZShcIi4vY29tcG9uZW50cy9saXQvaW5kZXguanNcIik7XG5yZXF1aXJlKFwiLi9jb21wb25lbnRzL2FmcmFtZS9pbmRleC5qc1wiKTtcbi8vIHJlcXVpcmUoJ2FmcmFtZS1sb2NvbW90aW9uJyk7XG5yZXF1aXJlKFwiYWZyYW1lLWV4dHJhc1wiKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9571\n");

/***/ }),

/***/ 2051:
/*!********************************!*\
  !*** ../web2vr/dist/web2vr.js ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory(__webpack_require__(/*! aframe */ 6167));\n\telse {}\n})(self, (__WEBPACK_EXTERNAL_MODULE_aframe__) => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./aframe-super-hands-component/index.js\":\n/*!***********************************************!*\\\n  !*** ./aframe-super-hands-component/index.js ***!\n  \\***********************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_794__) => {\n\n/* global AFRAME */\n\nif (typeof AFRAME === 'undefined') {\n  throw new Error('Component attempted to register before AFRAME was available.');\n}\n__nested_webpack_require_794__(/*! ./systems/super-hands-system.js */ \"./aframe-super-hands-component/systems/super-hands-system.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/hoverable.js */ \"./aframe-super-hands-component/reaction_components/hoverable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/grabbable.js */ \"./aframe-super-hands-component/reaction_components/grabbable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/stretchable.js */ \"./aframe-super-hands-component/reaction_components/stretchable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/drag-droppable.js */ \"./aframe-super-hands-component/reaction_components/drag-droppable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/draggable.js */ \"./aframe-super-hands-component/reaction_components/draggable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/droppable.js */ \"./aframe-super-hands-component/reaction_components/droppable.js\");\n__nested_webpack_require_794__(/*! ./reaction_components/clickable.js */ \"./aframe-super-hands-component/reaction_components/clickable.js\");\n\n/**\n * Super Hands component for A-Frame.\n */\nAFRAME.registerComponent('super-hands', {\n  schema: {\n    colliderEvent: {\n      \"default\": 'hit'\n    },\n    colliderEventProperty: {\n      \"default\": 'el'\n    },\n    colliderEndEvent: {\n      \"default\": 'hitend'\n    },\n    colliderEndEventProperty: {\n      \"default\": 'el'\n    },\n    grabStartButtons: {\n      \"default\": ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown', 'pointup', 'thumbup', 'pointingstart', 'pistolstart', 'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    grabEndButtons: {\n      \"default\": ['gripup', 'trackpadup', 'triggerup', 'gripopen', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup', 'pointdown', 'thumbdown', 'pointingend', 'pistolend', 'thumbstickup', 'mouseup', 'touchend']\n    },\n    stretchStartButtons: {\n      \"default\": ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown', 'pointup', 'thumbup', 'pointingstart', 'pistolstart', 'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    stretchEndButtons: {\n      \"default\": ['gripup', 'trackpadup', 'triggerup', 'gripopen', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup', 'pointdown', 'thumbdown', 'pointingend', 'pistolend', 'thumbstickup', 'mouseup', 'touchend']\n    },\n    dragDropStartButtons: {\n      \"default\": ['gripdown', 'trackpaddown', 'triggerdown', 'gripclose', 'abuttondown', 'bbuttondown', 'xbuttondown', 'ybuttondown', 'pointup', 'thumbup', 'pointingstart', 'pistolstart', 'thumbstickdown', 'mousedown', 'touchstart']\n    },\n    dragDropEndButtons: {\n      \"default\": ['gripup', 'trackpadup', 'triggerup', 'gripopen', 'abuttonup', 'bbuttonup', 'xbuttonup', 'ybuttonup', 'pointdown', 'thumbdown', 'pointingend', 'pistolend', 'thumbstickup', 'mouseup', 'touchend']\n    },\n    interval: {\n      \"default\": 0\n    }\n  },\n  /**\n   * Set if component needs multiple instancing.\n   */\n  multiple: false,\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function init() {\n    // constants\n    this.HOVER_EVENT = 'hover-start';\n    this.UNHOVER_EVENT = 'hover-end';\n    this.GRAB_EVENT = 'grab-start';\n    this.UNGRAB_EVENT = 'grab-end';\n    this.STRETCH_EVENT = 'stretch-start';\n    this.UNSTRETCH_EVENT = 'stretch-end';\n    this.DRAG_EVENT = 'drag-start';\n    this.UNDRAG_EVENT = 'drag-end';\n    this.DRAGOVER_EVENT = 'dragover-start';\n    this.UNDRAGOVER_EVENT = 'dragover-end';\n    this.DRAGDROP_EVENT = 'drag-drop';\n\n    // links to other systems/components\n    this.otherSuperHand = null;\n\n    // state tracking - global event handlers (GEH)\n    this.gehDragged = new Set();\n    this.gehClicking = new Set();\n\n    // state tracking - reaction components\n    this.hoverEls = [];\n    this.hoverElsIntersections = [];\n    this.prevCheckTime = null;\n    this.state = new Map();\n    this.dragging = false;\n    this.unHover = this.unHover.bind(this);\n    this.unWatch = this.unWatch.bind(this);\n    this.onHit = this.onHit.bind(this);\n    this.onGrabStartButton = this.onGrabStartButton.bind(this);\n    this.onGrabEndButton = this.onGrabEndButton.bind(this);\n    this.onStretchStartButton = this.onStretchStartButton.bind(this);\n    this.onStretchEndButton = this.onStretchEndButton.bind(this);\n    this.onDragDropStartButton = this.onDragDropStartButton.bind(this);\n    this.onDragDropEndButton = this.onDragDropEndButton.bind(this);\n    this.system.registerMe(this);\n  },\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function update(oldData) {\n    this.unRegisterListeners(oldData);\n    this.registerListeners();\n  },\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function remove() {\n    this.system.unregisterMe(this);\n    this.unRegisterListeners();\n    this.hoverEls.length = 0;\n    if (this.state.get(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT));\n    }\n    this.onGrabEndButton();\n    this.onStretchEndButton();\n    this.onDragDropEndButton();\n  },\n  tick: function () {\n    // closer objects and objects with no distance come later in list\n    function sorter(a, b) {\n      var aDist = a.distance == null ? -1 : a.distance;\n      var bDist = b.distance == null ? -1 : b.distance;\n      if (aDist < bDist) {\n        return 1;\n      }\n      if (bDist < aDist) {\n        return -1;\n      }\n      return 0;\n    }\n    return function (time) {\n      var data = this.data;\n      var prevCheckTime = this.prevCheckTime;\n      if (prevCheckTime && time - prevCheckTime < data.interval) {\n        return;\n      }\n      this.prevCheckTime = time;\n      var orderChanged = false;\n      this.hoverElsIntersections.sort(sorter);\n      for (var i = 0; i < this.hoverElsIntersections.length; i++) {\n        if (this.hoverEls[i] !== this.hoverElsIntersections[i].object.el) {\n          orderChanged = true;\n          this.hoverEls[i] = this.hoverElsIntersections[i].object.el;\n        }\n      }\n      if (orderChanged) {\n        this.hover();\n      }\n    };\n  }(),\n  onGrabStartButton: function onGrabStartButton(evt) {\n    var carried = this.state.get(this.GRAB_EVENT);\n    this.dispatchMouseEventAll('mousedown', this.el);\n    this.gehClicking = new Set(this.hoverEls);\n    if (!carried) {\n      carried = this.findTarget(this.GRAB_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      });\n      if (carried) {\n        this.state.set(this.GRAB_EVENT, carried);\n        this._unHover(carried);\n      }\n    }\n  },\n  onGrabEndButton: function onGrabEndButton(evt) {\n    var _this = this;\n    var clickables = this.hoverEls.filter(function (h) {\n      return _this.gehClicking.has(h);\n    });\n    var grabbed = this.state.get(this.GRAB_EVENT);\n    var endEvt = {\n      hand: this.el,\n      buttonEvent: evt\n    };\n    this.dispatchMouseEventAll('mouseup', this.el);\n    for (var i = 0; i < clickables.length; i++) {\n      this.dispatchMouseEvent(clickables[i], 'click', this.el);\n    }\n    this.gehClicking.clear();\n    // check if grabbed entity accepts ungrab event\n    if (grabbed && !this.emitCancelable(grabbed, this.UNGRAB_EVENT, endEvt)) {\n      /* push to top of stack so a drop followed by re-grab gets the same\n         target */\n      this.promoteHoveredEl(this.state.get(this.GRAB_EVENT));\n      this.state[\"delete\"](this.GRAB_EVENT);\n      this.hover();\n    }\n  },\n  onStretchStartButton: function onStretchStartButton(evt) {\n    var stretched = this.state.get(this.STRETCH_EVENT);\n    if (!stretched) {\n      stretched = this.findTarget(this.STRETCH_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      });\n      if (stretched) {\n        this.state.set(this.STRETCH_EVENT, stretched);\n        this._unHover(stretched);\n      }\n    }\n  },\n  onStretchEndButton: function onStretchEndButton(evt) {\n    var stretched = this.state.get(this.STRETCH_EVENT);\n    var endEvt = {\n      hand: this.el,\n      buttonEvent: evt\n    };\n    // check if end event accepted\n    if (stretched && !this.emitCancelable(stretched, this.UNSTRETCH_EVENT, endEvt)) {\n      this.promoteHoveredEl(stretched);\n      this.state[\"delete\"](this.STRETCH_EVENT);\n      this.hover();\n    }\n  },\n  onDragDropStartButton: function onDragDropStartButton(evt) {\n    var dragged = this.state.get(this.DRAG_EVENT);\n    this.dragging = true;\n    if (this.hoverEls.length) {\n      this.gehDragged = new Set(this.hoverEls);\n      this.dispatchMouseEventAll('dragstart', this.el);\n    }\n    if (!dragged) {\n      /* prefer carried so that a drag started after a grab will work\n       with carried element rather than a currently intersected drop target.\n       fall back to queue in case a drag is initiated independent\n       of a grab */\n      if (this.state.get(this.GRAB_EVENT) && !this.emitCancelable(this.state.get(this.GRAB_EVENT), this.DRAG_EVENT, {\n        hand: this.el,\n        buttonEvent: evt\n      })) {\n        dragged = this.state.get(this.GRAB_EVENT);\n      } else {\n        dragged = this.findTarget(this.DRAG_EVENT, {\n          hand: this.el,\n          buttonEvent: evt\n        });\n      }\n      if (dragged) {\n        this.state.set(this.DRAG_EVENT, dragged);\n        this._unHover(dragged);\n      }\n    }\n  },\n  onDragDropEndButton: function onDragDropEndButton(evt) {\n    var _this2 = this;\n    var carried = this.state.get(this.DRAG_EVENT);\n    this.dragging = false; // keep _unHover() from activating another droptarget\n    this.gehDragged.forEach(function (carried) {\n      _this2.dispatchMouseEvent(carried, 'dragend', _this2.el);\n      // fire event both ways for all intersected targets\n      _this2.dispatchMouseEventAll('drop', carried, true, true);\n      _this2.dispatchMouseEventAll('dragleave', carried, true, true);\n    });\n    this.gehDragged.clear();\n    if (carried) {\n      var ddEvt = {\n        hand: this.el,\n        dropped: carried,\n        on: null,\n        buttonEvent: evt\n      };\n      var endEvt = {\n        hand: this.el,\n        buttonEvent: evt\n      };\n      var dropTarget = this.findTarget(this.DRAGDROP_EVENT, ddEvt, true);\n      if (dropTarget) {\n        ddEvt.on = dropTarget;\n        this.emitCancelable(carried, this.DRAGDROP_EVENT, ddEvt);\n        this._unHover(dropTarget);\n      }\n      // check if end event accepted\n      if (!this.emitCancelable(carried, this.UNDRAG_EVENT, endEvt)) {\n        this.promoteHoveredEl(carried);\n        this.state[\"delete\"](this.DRAG_EVENT);\n        this.hover();\n      }\n    }\n  },\n  processHitEl: function processHitEl(hitEl, intersection) {\n    var _this3 = this;\n    var dist = intersection && intersection.distance;\n    var sects = this.hoverElsIntersections;\n    var hoverEls = this.hoverEls;\n    var hitElIndex = this.hoverEls.indexOf(hitEl);\n    var hoverNeedsUpdate = false;\n    if (hitElIndex === -1) {\n      hoverNeedsUpdate = true;\n      // insert in order of distance when available\n      if (dist != null) {\n        var i = 0;\n        while (i < sects.length && dist < sects[i].distance) {\n          i++;\n        }\n        hoverEls.splice(i, 0, hitEl);\n        sects.splice(i, 0, intersection);\n      } else {\n        hoverEls.push(hitEl);\n        sects.push({\n          object: {\n            el: hitEl\n          }\n        });\n      }\n      this.dispatchMouseEvent(hitEl, 'mouseover', this.el);\n      if (this.dragging && this.gehDragged.size) {\n        // events on targets and on dragged\n        this.gehDragged.forEach(function (dragged) {\n          _this3.dispatchMouseEventAll('dragenter', dragged, true, true);\n        });\n      }\n    }\n    return hoverNeedsUpdate;\n  },\n  onHit: function onHit(evt) {\n    var hitEl = evt.detail[this.data.colliderEventProperty];\n    var hoverNeedsUpdate = 0;\n    if (!hitEl) {\n      return;\n    }\n    if (Array.isArray(hitEl)) {\n      for (var i = 0, sect; i < hitEl.length; i++) {\n        sect = evt.detail.intersections && evt.detail.intersections[i];\n        hoverNeedsUpdate += this.processHitEl(hitEl[i], sect);\n      }\n    } else {\n      hoverNeedsUpdate += this.processHitEl(hitEl, null);\n    }\n    if (hoverNeedsUpdate) {\n      this.hover();\n    }\n  },\n  /* search collided entities for target to hover/dragover */\n  hover: function hover() {\n    var hvrevt, hoverEl;\n    // end previous hover\n    if (this.state.has(this.HOVER_EVENT)) {\n      this._unHover(this.state.get(this.HOVER_EVENT), true);\n    }\n    if (this.state.has(this.DRAGOVER_EVENT)) {\n      this._unHover(this.state.get(this.DRAGOVER_EVENT), true);\n    }\n    if (this.dragging && this.state.get(this.DRAG_EVENT)) {\n      hvrevt = {\n        hand: this.el,\n        hovered: hoverEl,\n        carried: this.state.get(this.DRAG_EVENT)\n      };\n      hoverEl = this.findTarget(this.DRAGOVER_EVENT, hvrevt, true);\n      if (hoverEl) {\n        this.emitCancelable(this.state.get(this.DRAG_EVENT), this.DRAGOVER_EVENT, hvrevt);\n        this.state.set(this.DRAGOVER_EVENT, hoverEl);\n      }\n    }\n    // fallback to hover if not dragging or dragover wasn't successful\n    if (!this.state.has(this.DRAGOVER_EVENT)) {\n      hoverEl = this.findTarget(this.HOVER_EVENT, {\n        hand: this.el\n      }, true);\n      if (hoverEl) {\n        this.state.set(this.HOVER_EVENT, hoverEl);\n      }\n    }\n  },\n  /* called when controller moves out of collision range of entity */\n  unHover: function unHover(evt) {\n    var _this4 = this;\n    var clearedEls = evt.detail[this.data.colliderEndEventProperty];\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(function (el) {\n          return _this4._unHover(el);\n        });\n      } else {\n        this._unHover(clearedEls);\n      }\n    }\n  },\n  /* inner unHover steps needed regardless of cause of unHover */\n  _unHover: function _unHover(el, skipNextHover) {\n    var unHovered = false;\n    var evt;\n    if (el === this.state.get(this.DRAGOVER_EVENT)) {\n      this.state[\"delete\"](this.DRAGOVER_EVENT);\n      unHovered = true;\n      evt = {\n        hand: this.el,\n        hovered: el,\n        carried: this.state.get(this.DRAG_EVENT)\n      };\n      this.emitCancelable(el, this.UNDRAGOVER_EVENT, evt);\n      if (this.state.has(this.DRAG_EVENT)) {\n        this.emitCancelable(this.state.get(this.DRAG_EVENT), this.UNDRAGOVER_EVENT, evt);\n      }\n    }\n    if (el === this.state.get(this.HOVER_EVENT)) {\n      this.state[\"delete\"](this.HOVER_EVENT);\n      unHovered = true;\n      this.emitCancelable(el, this.UNHOVER_EVENT, {\n        hand: this.el\n      });\n    }\n    // activate next target, if present\n    if (unHovered && !skipNextHover) {\n      this.hover();\n    }\n  },\n  unWatch: function unWatch(evt) {\n    var _this5 = this;\n    var clearedEls = evt.detail[this.data.colliderEndEventProperty];\n    if (clearedEls) {\n      if (Array.isArray(clearedEls)) {\n        clearedEls.forEach(function (el) {\n          return _this5._unWatch(el);\n        });\n      } else {\n        // deprecation path: sphere-collider\n        this._unWatch(clearedEls);\n      }\n    }\n  },\n  _unWatch: function _unWatch(target) {\n    var _this6 = this;\n    var hoverIndex = this.hoverEls.indexOf(target);\n    if (hoverIndex !== -1) {\n      this.hoverEls.splice(hoverIndex, 1);\n      this.hoverElsIntersections.splice(hoverIndex, 1);\n    }\n    this.gehDragged.forEach(function (dragged) {\n      _this6.dispatchMouseEvent(target, 'dragleave', dragged);\n      _this6.dispatchMouseEvent(dragged, 'dragleave', target);\n    });\n    this.dispatchMouseEvent(target, 'mouseout', this.el);\n  },\n  registerListeners: function registerListeners() {\n    var _this7 = this;\n    this.el.addEventListener(this.data.colliderEvent, this.onHit);\n    this.el.addEventListener(this.data.colliderEndEvent, this.unWatch);\n    this.el.addEventListener(this.data.colliderEndEvent, this.unHover);\n\n    // binding order to keep grabEnd from triggering dragover\n    // again before dragDropEnd can delete its carried state\n    this.data.grabStartButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onGrabStartButton);\n    });\n    this.data.stretchStartButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onStretchStartButton);\n    });\n    this.data.dragDropStartButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onDragDropStartButton);\n    });\n    this.data.dragDropEndButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onDragDropEndButton);\n    });\n    this.data.stretchEndButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onStretchEndButton);\n    });\n    this.data.grabEndButtons.forEach(function (b) {\n      _this7.el.addEventListener(b, _this7.onGrabEndButton);\n    });\n  },\n  unRegisterListeners: function unRegisterListeners(data) {\n    var _this8 = this;\n    data = data || this.data;\n    if (Object.keys(data).length === 0) {\n      // Empty object passed on initalization\n      return;\n    }\n    this.el.removeEventListener(data.colliderEvent, this.onHit);\n    this.el.removeEventListener(data.colliderEndEvent, this.unHover);\n    this.el.removeEventListener(data.colliderEndEvent, this.unWatch);\n    data.grabStartButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onGrabStartButton);\n    });\n    data.grabEndButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onGrabEndButton);\n    });\n    data.stretchStartButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onStretchStartButton);\n    });\n    data.stretchEndButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onStretchEndButton);\n    });\n    data.dragDropStartButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onDragDropStartButton);\n    });\n    data.dragDropEndButtons.forEach(function (b) {\n      _this8.el.removeEventListener(b, _this8.onDragDropEndButton);\n    });\n  },\n  emitCancelable: function emitCancelable(target, name, detail) {\n    detail = detail || {};\n    var data = {\n      bubbles: true,\n      cancelable: true,\n      detail: detail\n    };\n    data.detail.target = data.detail.target || target;\n    var evt = new window.CustomEvent(name, data);\n    return target.dispatchEvent(evt);\n  },\n  dispatchMouseEvent: function dispatchMouseEvent(target, name, relatedTarget) {\n    var mEvt = new window.MouseEvent(name, {\n      relatedTarget: relatedTarget\n    });\n    target.dispatchEvent(mEvt);\n  },\n  dispatchMouseEventAll: function dispatchMouseEventAll(name, relatedTarget, filterUsed, alsoReverse) {\n    var _this9 = this;\n    var els = this.hoverEls;\n    if (filterUsed) {\n      els = els.filter(function (el) {\n        return el !== _this9.state.get(_this9.GRAB_EVENT) && el !== _this9.state.get(_this9.DRAG_EVENT) && el !== _this9.state.get(_this9.STRETCH_EVENT) && !_this9.gehDragged.has(el);\n      });\n    }\n    if (alsoReverse) {\n      for (var i = 0; i < els.length; i++) {\n        this.dispatchMouseEvent(els[i], name, relatedTarget);\n        this.dispatchMouseEvent(relatedTarget, name, els[i]);\n      }\n    } else {\n      for (var _i = 0; _i < els.length; _i++) {\n        this.dispatchMouseEvent(els[_i], name, relatedTarget);\n      }\n    }\n  },\n  findTarget: function findTarget(evType, detail, filterUsed) {\n    var _this10 = this;\n    var elIndex;\n    var eligibleEls = this.hoverEls;\n    if (filterUsed) {\n      eligibleEls = eligibleEls.filter(function (el) {\n        return el !== _this10.state.get(_this10.GRAB_EVENT) && el !== _this10.state.get(_this10.DRAG_EVENT) && el !== _this10.state.get(_this10.STRETCH_EVENT);\n      });\n    }\n    for (elIndex = eligibleEls.length - 1; elIndex >= 0; elIndex--) {\n      if (!this.emitCancelable(eligibleEls[elIndex], evType, detail)) {\n        return eligibleEls[elIndex];\n      }\n    }\n    return null;\n  },\n  // Helper to ensure dropping and regrabbing finds the same target for\n  // for order-sorted hoverEls (grabbing; no-op for distance-sorted (pointing)\n  promoteHoveredEl: function promoteHoveredEl(el) {\n    var hoverIndex = this.hoverEls.indexOf(el);\n    if (hoverIndex !== -1 && this.hoverElsIntersections[hoverIndex].distance == null) {\n      this.hoverEls.splice(hoverIndex, 1);\n      var sect = this.hoverElsIntersections.splice(hoverIndex, 1);\n      this.hoverEls.push(el);\n      this.hoverElsIntersections.push(sect[0]);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/clickable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/clickable.js ***!\n  \\***********************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_21783__) => {\n\n/* global AFRAME */\nvar buttonCore = __nested_webpack_require_21783__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\nAFRAME.registerComponent('clickable', AFRAME.utils.extendDeep({}, buttonCore, {\n  schema: {\n    onclick: {\n      type: 'string'\n    }\n  },\n  init: function init() {\n    this.CLICKED_STATE = 'clicked';\n    this.CLICK_EVENT = 'grab-start';\n    this.UNCLICK_EVENT = 'grab-end';\n    this.clickers = [];\n    this.start = this.start.bind(this);\n    this.end = this.end.bind(this);\n    this.el.addEventListener(this.CLICK_EVENT, this.start);\n    this.el.addEventListener(this.UNCLICK_EVENT, this.end);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.CLICK_EVENT, this.start);\n    this.el.removeEventListener(this.UNCLICK_EVENT, this.end);\n  },\n  start: function start(evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return;\n    }\n    this.el.addState(this.CLICKED_STATE);\n    if (this.clickers.indexOf(evt.detail.hand) === -1) {\n      this.clickers.push(evt.detail.hand);\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      }\n    }\n  },\n  end: function end(evt) {\n    var handIndex = this.clickers.indexOf(evt.detail.hand);\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    if (handIndex !== -1) {\n      this.clickers.splice(handIndex, 1);\n    }\n    if (this.clickers.length < 1) {\n      this.el.removeState(this.CLICKED_STATE);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/drag-droppable.js\":\n/*!****************************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/drag-droppable.js ***!\n  \\****************************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_23779__) => {\n\n/* global AFRAME */\nvar inherit = AFRAME.utils.extendDeep;\nvar buttonCore = __nested_webpack_require_23779__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\nAFRAME.registerComponent('drag-droppable', inherit({}, buttonCore, {\n  init: function init() {\n    console.warn('Warning: drag-droppable is deprecated. Use draggable and droppable components instead');\n    this.HOVERED_STATE = 'dragover';\n    this.DRAGGED_STATE = 'dragged';\n    this.HOVER_EVENT = 'dragover-start';\n    this.UNHOVER_EVENT = 'dragover-end';\n    this.DRAG_EVENT = 'drag-start';\n    this.UNDRAG_EVENT = 'drag-end';\n    this.DRAGDROP_EVENT = 'drag-drop';\n    this.hoverStart = this.hoverStart.bind(this);\n    this.dragStart = this.dragStart.bind(this);\n    this.hoverEnd = this.hoverEnd.bind(this);\n    this.dragEnd = this.dragEnd.bind(this);\n    this.dragDrop = this.dragDrop.bind(this);\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStart);\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStart);\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEnd);\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEnd);\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDrop);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStart);\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart);\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEnd);\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd);\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDrop);\n  },\n  hoverStart: function hoverStart(evt) {\n    this.el.addState(this.HOVERED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  dragStart: function dragStart(evt) {\n    if (!this.startButtonOk(evt)) {\n      return;\n    }\n    this.el.addState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  hoverEnd: function hoverEnd(evt) {\n    this.el.removeState(this.HOVERED_STATE);\n  },\n  dragEnd: function dragEnd(evt) {\n    if (!this.endButtonOk(evt)) {\n      return;\n    }\n    this.el.removeState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  dragDrop: function dragDrop(evt) {\n    if (!this.endButtonOk(evt)) {\n      return;\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/draggable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/draggable.js ***!\n  \\***********************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_26609__) => {\n\n/* global AFRAME */\nvar inherit = AFRAME.utils.extendDeep;\nvar buttonCore = __nested_webpack_require_26609__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\nAFRAME.registerComponent('draggable', inherit({}, buttonCore, {\n  init: function init() {\n    this.DRAGGED_STATE = 'dragged';\n    this.DRAG_EVENT = 'drag-start';\n    this.UNDRAG_EVENT = 'drag-end';\n    this.dragStartBound = this.dragStart.bind(this);\n    this.dragEndBound = this.dragEnd.bind(this);\n    this.el.addEventListener(this.DRAG_EVENT, this.dragStartBound);\n    this.el.addEventListener(this.UNDRAG_EVENT, this.dragEndBound);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.DRAG_EVENT, this.dragStart);\n    this.el.removeEventListener(this.UNDRAG_EVENT, this.dragEnd);\n  },\n  dragStart: function dragStart(evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return;\n    }\n    this.el.addState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  dragEnd: function dragEnd(evt) {\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    this.el.removeState(this.DRAGGED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/droppable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/droppable.js ***!\n  \\***********************************************************************/\n/***/ (() => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/* global AFRAME */\nfunction elementMatches(el, selector) {\n  if (el.matches) {\n    return el.matches(selector);\n  }\n  if (el.msMatchesSelector) {\n    return el.msMatchesSelector(selector);\n  }\n  if (el.webkitMatchesSelector) {\n    return el.webkitMatchesSelector(selector);\n  }\n}\nAFRAME.registerComponent('droppable', {\n  schema: {\n    accepts: {\n      \"default\": ''\n    },\n    autoUpdate: {\n      \"default\": true\n    },\n    acceptEvent: {\n      \"default\": ''\n    },\n    rejectEvent: {\n      \"default\": ''\n    }\n  },\n  multiple: true,\n  init: function init() {\n    this.HOVERED_STATE = 'dragover';\n    this.HOVER_EVENT = 'dragover-start';\n    this.UNHOVER_EVENT = 'dragover-end';\n    this.DRAGDROP_EVENT = 'drag-drop';\n\n    // better for Sinon spying if original method not overwritten\n    this.hoverStartBound = this.hoverStart.bind(this);\n    this.hoverEndBound = this.hoverEnd.bind(this);\n    this.dragDropBound = this.dragDrop.bind(this);\n    this.mutateAcceptsBound = this.mutateAccepts.bind(this);\n    this.acceptableEntities = [];\n    this.observer = new window.MutationObserver(this.mutateAcceptsBound);\n    this.observerOpts = {\n      childList: true,\n      subtree: true\n    };\n    this.el.addEventListener(this.HOVER_EVENT, this.hoverStartBound);\n    this.el.addEventListener(this.UNHOVER_EVENT, this.hoverEndBound);\n    this.el.addEventListener(this.DRAGDROP_EVENT, this.dragDropBound);\n  },\n  update: function update() {\n    if (this.data.accepts.length) {\n      this.acceptableEntities = Array.prototype.slice.call(this.el.sceneEl.querySelectorAll(this.data.accepts));\n    } else {\n      this.acceptableEntities = null;\n    }\n    if (this.data.autoUpdate && this.acceptableEntities != null) {\n      this.observer.observe(this.el.sceneEl, this.observerOpts);\n    } else {\n      this.observer.disconnect();\n    }\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.HOVER_EVENT, this.hoverStartBound);\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.hoverEndBound);\n    this.el.removeEventListener(this.DRAGDROP_EVENT, this.dragDropBound);\n    this.observer.disconnect();\n  },\n  mutateAccepts: function mutateAccepts(mutations) {\n    var _this = this;\n    var query = this.data.accepts;\n    mutations.forEach(function (mutation) {\n      mutation.addedNodes.forEach(function (added) {\n        if (elementMatches(added, query)) {\n          _this.acceptableEntities.push(added);\n        }\n      });\n    });\n  },\n  entityAcceptable: function entityAcceptable(entity) {\n    var acceptableEntities = this.acceptableEntities;\n    if (acceptableEntities == null) {\n      return true;\n    }\n    var _iterator = _createForOfIteratorHelper(acceptableEntities),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var item = _step.value;\n        if (item === entity) {\n          return true;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return false;\n  },\n  hoverStart: function hoverStart(evt) {\n    if (evt.defaultPrevented || !this.entityAcceptable(evt.detail.carried)) {\n      return;\n    }\n    this.el.addState(this.HOVERED_STATE);\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  hoverEnd: function hoverEnd(evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    this.el.removeState(this.HOVERED_STATE);\n  },\n  dragDrop: function dragDrop(evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    var dropped = evt.detail.dropped;\n    if (!this.entityAcceptable(dropped)) {\n      if (this.data.rejectEvent.length) {\n        this.el.emit(this.data.rejectEvent, {\n          el: dropped\n        });\n      }\n      return;\n    }\n    if (this.data.acceptEvent.length) {\n      this.el.emit(this.data.acceptEvent, {\n        el: dropped\n      });\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/grabbable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/grabbable.js ***!\n  \\***********************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_34117__) => {\n\n/* global AFRAME, THREE */\nvar inherit = AFRAME.utils.extendDeep;\nvar physicsCore = __nested_webpack_require_34117__(/*! ./prototypes/physics-grab-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/physics-grab-proto.js\");\nvar buttonsCore = __nested_webpack_require_34117__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\n// new object with all core modules\nvar base = inherit({}, physicsCore, buttonsCore);\nAFRAME.registerComponent('sh-grabbable', inherit(base, {\n  schema: {\n    maxGrabbers: {\n      type: 'int',\n      \"default\": NaN\n    },\n    invert: {\n      \"default\": false\n    },\n    suppressY: {\n      \"default\": false\n    }\n  },\n  init: function init() {\n    var _this = this;\n    this.GRABBED_STATE = 'grabbed';\n    this.GRAB_EVENT = 'grab-start';\n    this.UNGRAB_EVENT = 'grab-end';\n    this.grabbed = false;\n    this.grabbers = [];\n    this.constraints = new Map();\n    this.deltaPositionIsValid = false;\n    this.grabDistance = undefined;\n    this.grabDirection = {\n      x: 0,\n      y: 0,\n      z: -1\n    };\n    this.grabOffset = {\n      x: 0,\n      y: 0,\n      z: 0\n    };\n    // persistent object speeds up repeat setAttribute calls\n    this.destPosition = {\n      x: 0,\n      y: 0,\n      z: 0\n    };\n    this.deltaPosition = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n    this.physicsInit();\n    this.el.addEventListener(this.GRAB_EVENT, function (e) {\n      return _this.start(e);\n    });\n    this.el.addEventListener(this.UNGRAB_EVENT, function (e) {\n      return _this.end(e);\n    });\n    this.el.addEventListener('mouseout', function (e) {\n      return _this.lostGrabber(e);\n    });\n  },\n  update: function update() {\n    this.physicsUpdate();\n    this.xFactor = this.data.invert ? -1 : 1;\n    this.zFactor = this.data.invert ? -1 : 1;\n    this.yFactor = (this.data.invert ? -1 : 1) * !this.data.suppressY;\n  },\n  tick: function () {\n    var q = new THREE.Quaternion();\n    var v = new THREE.Vector3();\n    return function () {\n      var entityPosition;\n      if (this.grabber) {\n        // reflect on z-axis to point in same direction as the laser\n        this.targetPosition.copy(this.grabDirection);\n        this.targetPosition.applyQuaternion(this.grabber.object3D.getWorldQuaternion(q)).setLength(this.grabDistance).add(this.grabber.object3D.getWorldPosition(v)).add(this.grabOffset);\n        if (this.deltaPositionIsValid) {\n          // relative position changes work better with nested entities\n          this.deltaPosition.sub(this.targetPosition);\n          entityPosition = this.el.getAttribute('position');\n          this.destPosition.x = entityPosition.x - this.deltaPosition.x * this.xFactor;\n          this.destPosition.y = entityPosition.y - this.deltaPosition.y * this.yFactor;\n          this.destPosition.z = entityPosition.z - this.deltaPosition.z * this.zFactor;\n          this.el.setAttribute('position', this.destPosition);\n        } else {\n          this.deltaPositionIsValid = true;\n        }\n        this.deltaPosition.copy(this.targetPosition);\n      }\n    };\n  }(),\n  remove: function remove() {\n    this.el.removeEventListener(this.GRAB_EVENT, this.start);\n    this.el.removeEventListener(this.UNGRAB_EVENT, this.end);\n    this.physicsRemove();\n  },\n  start: function start(evt) {\n    if (evt.defaultPrevented || !this.startButtonOk(evt)) {\n      return;\n    }\n    // room for more grabbers?\n    var grabAvailable = !Number.isFinite(this.data.maxGrabbers) || this.grabbers.length < this.data.maxGrabbers;\n    if (this.grabbers.indexOf(evt.detail.hand) === -1 && grabAvailable) {\n      if (!evt.detail.hand.object3D) {\n        console.warn('sh-grabbable entities must have an object3D');\n        return;\n      }\n      this.grabbers.push(evt.detail.hand);\n      // initiate physics if available, otherwise manual\n      if (!this.physicsStart(evt) && !this.grabber) {\n        this.grabber = evt.detail.hand;\n        this.resetGrabber();\n      }\n      // notify super-hands that the gesture was accepted\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      }\n      this.grabbed = true;\n      this.el.addState(this.GRABBED_STATE);\n    }\n  },\n  end: function end(evt) {\n    var handIndex = this.grabbers.indexOf(evt.detail.hand);\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    if (handIndex !== -1) {\n      this.grabbers.splice(handIndex, 1);\n      this.grabber = this.grabbers[0];\n    }\n    this.physicsEnd(evt);\n    if (!this.resetGrabber()) {\n      this.grabbed = false;\n      this.el.removeState(this.GRABBED_STATE);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  resetGrabber: function () {\n    var objPos = new THREE.Vector3();\n    var grabPos = new THREE.Vector3();\n    return function () {\n      if (!this.grabber) {\n        return false;\n      }\n      var raycaster = this.grabber.getAttribute('raycaster');\n      this.deltaPositionIsValid = false;\n      this.grabDistance = this.el.object3D.getWorldPosition(objPos).distanceTo(this.grabber.object3D.getWorldPosition(grabPos));\n      if (raycaster) {\n        this.grabDirection = raycaster.direction;\n        this.grabOffset = raycaster.origin;\n      }\n      return true;\n    };\n  }(),\n  lostGrabber: function lostGrabber(evt) {\n    var i = this.grabbers.indexOf(evt.relatedTarget);\n    // if a queued, non-physics grabber leaves the collision zone, forget it\n    if (i !== -1 && evt.relatedTarget !== this.grabber && !this.physicsIsConstrained(evt.relatedTarget)) {\n      this.grabbers.splice(i, 1);\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/hoverable.js\":\n/*!***********************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/hoverable.js ***!\n  \\***********************************************************************/\n/***/ (() => {\n\n/* global AFRAME */\nAFRAME.registerComponent('hoverable', {\n  init: function init() {\n    this.HOVERED_STATE = 'hovered';\n    this.HOVER_EVENT = 'hover-start';\n    this.UNHOVER_EVENT = 'hover-end';\n    this.hoverers = [];\n    this.start = this.start.bind(this);\n    this.end = this.end.bind(this);\n    this.el.addEventListener(this.HOVER_EVENT, this.start);\n    this.el.addEventListener(this.UNHOVER_EVENT, this.end);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.HOVER_EVENT, this.start);\n    this.el.removeEventListener(this.UNHOVER_EVENT, this.end);\n  },\n  start: function start(evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    this.el.addState(this.HOVERED_STATE);\n    if (this.hoverers.indexOf(evt.detail.hand) === -1) {\n      this.hoverers.push(evt.detail.hand);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  end: function end(evt) {\n    if (evt.defaultPrevented) {\n      return;\n    }\n    var handIndex = this.hoverers.indexOf(evt.detail.hand);\n    if (handIndex !== -1) {\n      this.hoverers.splice(handIndex, 1);\n    }\n    if (this.hoverers.length < 1) {\n      this.el.removeState(this.HOVERED_STATE);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\":\n/*!**************************************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js ***!\n  \\**************************************************************************************/\n/***/ ((module) => {\n\n// common code used in customizing reaction components by button\nmodule.exports = function () {\n  function buttonIsValid(evt, buttonList) {\n    return buttonList.length === 0 || buttonList.indexOf(evt.detail.buttonEvent.type) !== -1;\n  }\n  return {\n    schema: {\n      startButtons: {\n        \"default\": []\n      },\n      endButtons: {\n        \"default\": []\n      }\n    },\n    startButtonOk: function startButtonOk(evt) {\n      return buttonIsValid(evt, this.data.startButtons);\n    },\n    endButtonOk: function endButtonOk(evt) {\n      return buttonIsValid(evt, this.data.endButtons);\n    }\n  };\n}();\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/prototypes/physics-grab-proto.js\":\n/*!*******************************************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/prototypes/physics-grab-proto.js ***!\n  \\*******************************************************************************************/\n/***/ ((module) => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n// base code used by grabbable for physics interactions\nmodule.exports = {\n  schema: {\n    usePhysics: {\n      \"default\": 'ifavailable'\n    }\n  },\n  physicsInit: function physicsInit() {\n    this.constraints = new Map();\n  },\n  physicsUpdate: function physicsUpdate() {\n    if (this.data.usePhysics === 'never' && this.constraints.size) {\n      this.physicsClear();\n    }\n  },\n  physicsRemove: function physicsRemove() {\n    this.physicsClear();\n  },\n  physicsStart: function physicsStart(evt) {\n    // initiate physics constraint if available and not already existing\n    if (this.data.usePhysics !== 'never' && this.el.body && evt.detail.hand.body && !this.constraints.has(evt.detail.hand)) {\n      var newConId = Math.random().toString(36).substr(2, 9);\n      this.el.setAttribute('constraint__' + newConId, {\n        target: evt.detail.hand\n      });\n      this.constraints.set(evt.detail.hand, newConId);\n      return true;\n    }\n    // Prevent manual grab by returning true\n    if (this.data.usePhysics === 'only') {\n      return true;\n    }\n    return false;\n  },\n  physicsEnd: function physicsEnd(evt) {\n    var constraintId = this.constraints.get(evt.detail.hand);\n    if (constraintId) {\n      this.el.removeAttribute('constraint__' + constraintId);\n      this.constraints[\"delete\"](evt.detail.hand);\n    }\n  },\n  physicsClear: function physicsClear() {\n    if (this.el.body) {\n      var _iterator = _createForOfIteratorHelper(this.constraints.values()),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var c = _step.value;\n          this.el.body.world.removeConstraint(c);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n    this.constraints.clear();\n  },\n  physicsIsConstrained: function physicsIsConstrained(el) {\n    return this.constraints.has(el);\n  },\n  physicsIsGrabbing: function physicsIsGrabbing() {\n    return this.constraints.size > 0;\n  }\n};\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/reaction_components/stretchable.js\":\n/*!*************************************************************************!*\\\n  !*** ./aframe-super-hands-component/reaction_components/stretchable.js ***!\n  \\*************************************************************************/\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __nested_webpack_require_46646__) => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/* global AFRAME, THREE */\nvar inherit = AFRAME.utils.extendDeep;\nvar buttonsCore = __nested_webpack_require_46646__(/*! ./prototypes/buttons-proto.js */ \"./aframe-super-hands-component/reaction_components/prototypes/buttons-proto.js\");\n// new object with all core modules\nvar base = inherit({}, buttonsCore);\nAFRAME.registerComponent('stretchable', inherit(base, {\n  schema: {\n    usePhysics: {\n      \"default\": 'ifavailable'\n    },\n    invert: {\n      \"default\": false\n    },\n    physicsUpdateRate: {\n      \"default\": 100\n    }\n  },\n  init: function init() {\n    this.STRETCHED_STATE = 'stretched';\n    this.STRETCH_EVENT = 'stretch-start';\n    this.UNSTRETCH_EVENT = 'stretch-end';\n    this.stretched = false;\n    this.stretchers = [];\n    this.scale = new THREE.Vector3();\n    this.handPos = new THREE.Vector3();\n    this.otherHandPos = new THREE.Vector3();\n    this.start = this.start.bind(this);\n    this.end = this.end.bind(this);\n    this.el.addEventListener(this.STRETCH_EVENT, this.start);\n    this.el.addEventListener(this.UNSTRETCH_EVENT, this.end);\n  },\n  update: function update(oldDat) {\n    this.updateBodies = AFRAME.utils.throttleTick(this._updateBodies, this.data.physicsUpdateRate, this);\n  },\n  tick: function tick(time, timeDelta) {\n    if (!this.stretched) {\n      return;\n    }\n    this.scale.copy(this.el.getAttribute('scale'));\n    this.stretchers[0].object3D.getWorldPosition(this.handPos);\n    this.stretchers[1].object3D.getWorldPosition(this.otherHandPos);\n    var currentStretch = this.handPos.distanceTo(this.otherHandPos);\n    var deltaStretch = 1;\n    if (this.previousStretch !== null && currentStretch !== 0) {\n      deltaStretch = Math.pow(currentStretch / this.previousStretch, this.data.invert ? -1 : 1);\n    }\n    this.previousStretch = currentStretch;\n    if (this.previousPhysicsStretch == null) {\n      // establish correct baseline even if throttled function isn't called\n      this.previousPhysicsStretch = currentStretch;\n    }\n    this.scale.multiplyScalar(deltaStretch);\n    this.el.setAttribute('scale', this.scale);\n    // scale update for all nested physics bodies (throttled)\n    this.updateBodies(time, timeDelta);\n  },\n  remove: function remove() {\n    this.el.removeEventListener(this.STRETCH_EVENT, this.start);\n    this.el.removeEventListener(this.UNSTRETCH_EVENT, this.end);\n  },\n  start: function start(evt) {\n    if (this.stretched || this.stretchers.includes(evt.detail.hand) || !this.startButtonOk(evt) || evt.defaultPrevented) {\n      return;\n    } // already stretched or already captured this hand or wrong button\n    this.stretchers.push(evt.detail.hand);\n    if (this.stretchers.length === 2) {\n      this.stretched = true;\n      this.previousStretch = null;\n      this.previousPhysicsStretch = null;\n      this.el.addState(this.STRETCHED_STATE);\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } // gesture accepted\n  },\n  end: function end(evt) {\n    var stretcherIndex = this.stretchers.indexOf(evt.detail.hand);\n    if (evt.defaultPrevented || !this.endButtonOk(evt)) {\n      return;\n    }\n    if (stretcherIndex !== -1) {\n      this.stretchers.splice(stretcherIndex, 1);\n      this.stretched = false;\n      this.el.removeState(this.STRETCHED_STATE);\n      // override throttle to push last stretch to physics bodies\n      this._updateBodies();\n    }\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n  },\n  _updateBodies: function _updateBodies() {\n    if (!this.el.body || this.data.usePhysics === 'never') {\n      return;\n    }\n    var currentStretch = this.previousStretch; // last visible geometry stretch\n    var deltaStretch = 1;\n    if (this.previousPhysicsStretch !== null && currentStretch > 0) {\n      deltaStretch = Math.pow(currentStretch / this.previousPhysicsStretch, this.data.invert ? -1 : 1);\n    }\n    this.previousPhysicsStretch = currentStretch;\n    if (deltaStretch === 1) {\n      return;\n    }\n    var _iterator = _createForOfIteratorHelper(this.el.childNodes),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var c = _step.value;\n        this.stretchBody(c, deltaStretch);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    this.stretchBody(this.el, deltaStretch);\n  },\n  stretchBody: function stretchBody(el, deltaStretch) {\n    if (!el.body) {\n      return;\n    }\n    var physicsShape;\n    var offset;\n    for (var i = 0; i < el.body.shapes.length; i++) {\n      physicsShape = el.body.shapes[i];\n      if (physicsShape.halfExtents) {\n        physicsShape.halfExtents.scale(deltaStretch, physicsShape.halfExtents);\n        physicsShape.updateConvexPolyhedronRepresentation();\n      } else if (physicsShape.radius) {\n        physicsShape.radius *= deltaStretch;\n        physicsShape.updateBoundingSphereRadius();\n      } else if (!this.shapeWarned) {\n        console.warn('Unable to stretch physics body: unsupported shape');\n        this.shapeWarned = true;\n      }\n      // also move offset to match scale change\n      offset = el.body.shapeOffsets[i];\n      offset.scale(deltaStretch, offset);\n    }\n    el.body.updateBoundingRadius();\n  }\n}));\n\n/***/ }),\n\n/***/ \"./aframe-super-hands-component/systems/super-hands-system.js\":\n/*!********************************************************************!*\\\n  !*** ./aframe-super-hands-component/systems/super-hands-system.js ***!\n  \\********************************************************************/\n/***/ (() => {\n\n/* global AFRAME */\nAFRAME.registerSystem('super-hands', {\n  init: function init() {\n    this.superHands = [];\n  },\n  registerMe: function registerMe(comp) {\n    // when second hand registers, store links\n    if (this.superHands.length === 1) {\n      this.superHands[0].otherSuperHand = comp;\n      comp.otherSuperHand = this.superHands[0];\n    }\n    this.superHands.push(comp);\n  },\n  unregisterMe: function unregisterMe(comp) {\n    var index = this.superHands.indexOf(comp);\n    if (index !== -1) {\n      this.superHands.splice(index, 1);\n    }\n    this.superHands.forEach(function (x) {\n      if (x.otherSuperHand === comp) {\n        x.otherSuperHand = null;\n      }\n    });\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/aframeContext.js\":\n/*!******************************!*\\\n  !*** ./src/aframeContext.js ***!\n  \\******************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_54640__) => {\n\n\"use strict\";\n__nested_webpack_require_54640__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_54640__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AframeContext)\n/* harmony export */ });\n/* harmony import */ var _assetManager__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_54640__(/*! ./assetManager */ \"./src/assetManager.js\");\n/* harmony import */ var _components_renderer__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_54640__(/*! ./components/renderer */ \"./src/components/renderer.js\");\n/* harmony import */ var _components_renderer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_54640__.n(_components_renderer__WEBPACK_IMPORTED_MODULE_1__);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar AframeContext = /*#__PURE__*/function () {\n  function AframeContext(settings) {\n    _classCallCheck(this, AframeContext);\n    this.inVR = false;\n    // settings pointer\n    this.settings = settings;\n    this.createScene();\n    // create asset manager\n    this.assetManager = new _assetManager__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.scene);\n  }\n  return _createClass(AframeContext, [{\n    key: \"createScene\",\n    value: function createScene() {\n      var _this = this;\n      // find scene if exists else create scene\n      var scene = document.getElementsByTagName(\"a-scene\");\n      if (scene.length > 0) this.scene = scene[0];else {\n        this.scene = document.createElement(\"a-scene\");\n        document.body.appendChild(this.scene);\n        this.newScene = true;\n      }\n\n      // add stats to scene if debug\n      if (this.settings.debug) this.scene.setAttribute(\"stats\", \"\");\n\n      //custom renderer params like local clipping\n      this.scene.setAttribute(\"vr-renderer\", \"\");\n\n      // check if in VR\n      this.scene.addEventListener(\"enter-vr\", function () {\n        _this.inVR = true;\n      }.bind(this));\n      this.scene.addEventListener(\"exit-vr\", function () {\n        _this.inVR = false;\n      }.bind(this));\n    }\n  }, {\n    key: \"createContainer\",\n    value: function createContainer(web2vr) {\n      // conttainer for all aframe elements\n      this.container = document.createElement(\"a-entity\");\n      this.container.classList.add(\"vr-container\");\n      this.container.classList.add(this.settings.interactiveTag);\n\n      // position container\n      var width = parseFloat(window.getComputedStyle(web2vr.container).width) * (1 / this.settings.scale);\n      var x = this.settings.position.x;\n      // if x=0 then then we want to be in center for testing and showcase\n      if (x == 0) x = x - width / 2;\n      this.container.object3D.position.set(x, this.settings.position.y, this.settings.position.z);\n      // update rotation from aframe(1.0.4) because there is bug(rotation x will be wrong) if you update with three.js\n      this.container.setAttribute(\"rotation\", {\n        x: this.settings.rotation.x,\n        y: this.settings.rotation.y,\n        z: this.settings.rotation.z\n      });\n      var parentElement = document.querySelector(this.settings.parentSelector);\n      if (parentElement) parentElement.appendChild(this.container);else {\n        this.container.setAttribute(\"vr-grab-rotate-static\", \"\");\n        this.container.setAttribute(\"sh-grabbable\", \"\");\n        this.container.setAttribute(\"stretchable\", \"\");\n        this.scene.appendChild(this.container);\n      }\n\n      // pointer for grabRotateStatic\n      this.container.web2vr = web2vr;\n    }\n  }, {\n    key: \"createSky\",\n    value: function createSky() {\n      // create sky if sky doesnt exist\n      if (document.getElementsByTagName(\"a-sky\").length == 0 && this.settings.skybox) {\n        this.sky = document.createElement(\"a-sky\");\n        this.sky.setAttribute(\"color\", \"#a9f8fe\");\n        this.scene.appendChild(this.sky);\n      }\n    }\n  }, {\n    key: \"createControllers\",\n    value: function createControllers() {\n      var _this2 = this;\n      // cursor only for dev testing on desktop\n      if (!document.getElementById(\"mouseCursor\")) {\n        var cursor = document.createElement(\"a-entity\");\n        cursor.id = \"mouseCursor\";\n        cursor.setAttribute(\"cursor\", \"rayOrigin\", \"mouse\");\n        cursor.setAttribute(\"raycaster\", \"objects: .\".concat(this.settings.interactiveTag, \", .collidable\"));\n        this.scene.appendChild(cursor);\n      }\n\n      // super hands 6DOF\n      if (this.settings.createControllers && !document.getElementById(\"leftHand\")) {\n        var raycaster = \"objects: .\".concat(this.settings.interactiveTag, \", .collidable; far: \").concat(this.settings.raycasterFar);\n        var superhands = \"colliderEvent: raycaster-intersection; colliderEventProperty: els; colliderEndEvent:raycaster-intersection-cleared; colliderEndEventProperty: clearedEls; grabStartButtons: gripdown; grabEndButtons: gripup; stretchStartButtons: gripdown; stretchEndButtons: gripup\";\n        var leftHand = document.createElement(\"a-entity\");\n        leftHand.id = \"leftHand\";\n        leftHand.setAttribute(\"hand-controls\", \"hand:left; handModelStyle: highPoly; color: #ffcccc\");\n        leftHand.setAttribute(\"laser-controls\", \"\");\n        leftHand.setAttribute(\"raycaster\", raycaster);\n        leftHand.setAttribute(\"super-hands\", superhands);\n        var rightHand = document.createElement(\"a-entity\");\n        rightHand.id = \"rightHand\";\n        rightHand.setAttribute(\"hand-controls\", \"hand:right; handModelStyle: highPoly; color: #ffcccc\");\n        rightHand.setAttribute(\"laser-controls\", \"\");\n        rightHand.setAttribute(\"raycaster\", raycaster);\n        rightHand.setAttribute(\"super-hands\", superhands);\n        this.scene.appendChild(leftHand);\n        this.scene.appendChild(rightHand);\n      }\n      // keyboard\n      this.keyboard = document.getElementById(\"vr-keyboard\");\n      if (!this.keyboard) {\n        this.keyboard = document.createElement(\"a-entity\");\n        this.keyboard.id = \"vr-keyboard\";\n        this.keyboard.setAttribute(\"a-keyboard\", \"\");\n        this.keyboard.setAttribute(\"sh-grabbable\", \"\");\n        this.scene.appendChild(this.keyboard);\n        this.keyboard.object3D.visible = false;\n\n        // current active input\n        this.keyboard.activeInput = null;\n        // event listener for the keyboard key press \n        document.addEventListener('a-keyboard-update', function (e) {\n          if (_this2.keyboard.activeInput) {\n            var code = parseInt(e.detail.code);\n            var value = _this2.keyboard.activeInput.value;\n\n            // backspace\n            if (code == 8) value = value.slice(0, -1);\n            // submit or cancel\n            else if (code == 6 || code == 24) {\n              _this2.keyboard.object3D.visible = false;\n              _this2.keyboard.object3D.position.y = 10000; // because raycasting still collides with invisible objects\n              _this2.keyboard.activeInput.element.active = false;\n              _this2.keyboard.activeInput.element.update();\n              _this2.keyboard.activeInput = null;\n              return;\n            }\n            // ignore arrow keys\n            else if (![37, 38, 39, 40].includes(code)) value += e.detail.value;\n            _this2.keyboard.activeInput.value = value;\n            _this2.keyboard.activeInput.element.update();\n          }\n        });\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/assetManager.js\":\n/*!*****************************!*\\\n  !*** ./src/assetManager.js ***!\n  \\*****************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_63585__) => {\n\n\"use strict\";\n__nested_webpack_require_63585__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_63585__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AssetManager)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar AssetManager = /*#__PURE__*/function () {\n  function AssetManager(scene) {\n    _classCallCheck(this, AssetManager);\n    var assets = document.getElementsByTagName(\"a-assets\")[0];\n    if (assets) this.assets = assets;else {\n      this.assets = document.createElement(\"a-assets\");\n      scene.appendChild(this.assets);\n    }\n  }\n\n  // update current-id attribute\n  return _createClass(AssetManager, [{\n    key: \"updateCurrentAssetId\",\n    value: function updateCurrentAssetId() {\n      var currentAssetId = parseInt(this.assets.getAttribute(\"current-id\"));\n      if (!this.assets.getAttribute(\"current-id\")) {\n        this.assets.setAttribute(\"current-id\", 0);\n        currentAssetId = 0;\n      }\n      this.assets.setAttribute(\"current-id\", currentAssetId + 1);\n    }\n    // update current-id attribute and return it.\n    // used for elements (ex. video) outside a-assets tag\n  }, {\n    key: \"updateCurrentAssetIdReturn\",\n    value: function updateCurrentAssetIdReturn() {\n      this.updateCurrentAssetId();\n      return \"asset-\" + this.assets.getAttribute(\"current-id\");\n    }\n\n    // find asset if exists if not create and return it\n  }, {\n    key: \"getAsset\",\n    value: function getAsset(path, type) {\n      var assets = this.assets.getChildren();\n      var _iterator = _createForOfIteratorHelper(assets),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var asset = _step.value;\n          if (asset.getAttribute(\"src\") === path) return asset.getAttribute(\"id\");\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return this.createAsset(path, type);\n    }\n  }, {\n    key: \"createAsset\",\n    value: function createAsset(path, type) {\n      var asset = document.createElement(type);\n      asset.setAttribute(\"src\", path);\n      this.updateCurrentAssetId();\n      var id = \"asset-\" + this.assets.getAttribute(\"current-id\");\n      asset.setAttribute(\"id\", id);\n      // have to manualy add crossorigin for all external assets to load\n      asset.setAttribute(\"crossorigin\", \"Anonymous\");\n      this.assets.appendChild(asset);\n      return id;\n    }\n  }, {\n    key: \"removeAsset\",\n    value: function removeAsset(id) {\n      this.assets.querySelector(\"#\" + id).remove();\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/components/animate.js\":\n/*!***********************************!*\\\n  !*** ./src/components/animate.js ***!\n  \\***********************************/\n/***/ (() => {\n\nAFRAME.registerComponent(\"vr-animate\", {\n  init: function init() {\n    var _this$el$element, _this$el$element2, _this$el$element3, _this$el$element4;\n    this.running = false;\n    // listenes for css animation and translation\n    (_this$el$element = this.el.element) === null || _this$el$element === void 0 || _this$el$element.domElement.addEventListener(\"animationstart\", this.startAnimation.bind(this));\n    (_this$el$element2 = this.el.element) === null || _this$el$element2 === void 0 || _this$el$element2.domElement.addEventListener(\"animationend\", this.stopAnimation.bind(this));\n    (_this$el$element3 = this.el.element) === null || _this$el$element3 === void 0 || _this$el$element3.domElement.addEventListener(\"transitionstart\", this.startAnimation.bind(this));\n    (_this$el$element4 = this.el.element) === null || _this$el$element4 === void 0 || _this$el$element4.domElement.addEventListener(\"transitionend\", this.stopAnimation.bind(this));\n  },\n  tick: function tick() {\n    var _this$el$element5;\n    if (this.running) (_this$el$element5 = this.el.element) === null || _this$el$element5 === void 0 || _this$el$element5.web2vr.update();\n  },\n  startAnimation: function startAnimation() {\n    this.running = true;\n  },\n  stopAnimation: function stopAnimation() {\n    var _this$el$element6;\n    this.running = false;\n    // one final update\n    (_this$el$element6 = this.el.element) === null || _this$el$element6 === void 0 || _this$el$element6.web2vr.update();\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/components/border.js\":\n/*!**********************************!*\\\n  !*** ./src/components/border.js ***!\n  \\**********************************/\n/***/ (() => {\n\nAFRAME.registerComponent(\"vr-border\", {\n  schema: {\n    width: {\n      type: \"number\"\n    },\n    color: {\n      type: \"string\"\n    }\n  },\n  init: function init() {\n    this.running = true;\n    var plane = this.el.object3D.children[0];\n    var edges = new THREE.EdgesGeometry(plane.geometry);\n    var line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({\n      color: 0x000000,\n      linewidth: this.data.width\n    }));\n    this.borderObject = line;\n    this.el.element.web2vr.aframe.container.object3D.add(this.borderObject);\n\n    //maybe clippingContext inside tick?\n    if (this.el.element.clippingContext) {\n      line.material.clippingPlanes = this.el.element.clippingContext.planes;\n      line.material.needsUpdate = true;\n    }\n  },\n  update: function update() {\n    // waiting for three.js(WebGL) to add lineWidth support for Windows(DirectX) browsers for now linewidth is 1 no matter what you set it.\n    // lineWidth works for other OS.\n    var borderWidth = this.data.width;\n\n    // custom element border width\n    if (this.el.element.borderWidth) this.borderObject.material.linewidth = this.el.element.borderWidth;else this.borderObject.material.linewidth = borderWidth;\n\n    // custom element border color\n    if (this.el.element.borderColor) this.borderObject.material.color = this.el.element.borderColor;else this.borderObject.material.color = new THREE.Color(this.data.color);\n  },\n  updateBorder: function updateBorder() {\n    var _this$el$element;\n    if ((_this$el$element = this.el.element) !== null && _this$el$element !== void 0 && _this$el$element.visible) {\n      this.running = true;\n      this.borderObject.material.visible = true;\n    } else this.borderObject.material.visible = false;\n  },\n  tick: function tick() {\n    if (this.running) {\n      var scale = this.el.object3D.scale;\n      var plane = this.el.object3D.children[0].geometry.clone();\n      plane.scale(scale.x, scale.y, scale.z);\n      var edges = new THREE.EdgesGeometry(plane);\n      var position = this.el.object3D.position;\n      this.borderObject.geometry = edges;\n      this.borderObject.position.set(position.x, position.y, position.z + this.el.element.web2vr.settings.layerStep * 2);\n      this.running = false;\n    }\n  },\n  remove: function remove() {\n    this.el.element.web2vr.aframe.container.object3D.remove(this.borderObject);\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/components/grabRotateStatic.js\":\n/*!********************************************!*\\\n  !*** ./src/components/grabRotateStatic.js ***!\n  \\********************************************/\n/***/ (() => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nAFRAME.registerComponent(\"vr-grab-rotate-static\", {\n  tick: function tick() {\n    if (this.el.components[\"sh-grabbable\"].grabbed) {\n      // update clipping when moving\n      if (this.el.web2vr.scroll.hasScroll) {\n        var _iterator = _createForOfIteratorHelper(this.el.web2vr.elements),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var element = _step.value;\n            element.updateClipping();\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      var obj = this.el.object3D;\n      var hand = this.el.components[\"sh-grabbable\"].grabbers[0].object3D;\n      obj.rotation.y = Math.atan2(hand.position.x - (obj.position.x + this.el.children[0].getAttribute(\"width\") / 2), hand.position.z - obj.position.z);\n\n      //obj.rotation.x = hand.rotation.x;\n      //obj.rotation.y = hand.rotation.y;\n      //obj.rotation.z = hand.rotation.z;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/components/renderer.js\":\n/*!************************************!*\\\n  !*** ./src/components/renderer.js ***!\n  \\************************************/\n/***/ (() => {\n\nAFRAME.registerComponent(\"vr-renderer\", {\n  init: function init() {\n    this.el.sceneEl.renderer.localClippingEnabled = true;\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/components/scrollbar.js\":\n/*!*************************************!*\\\n  !*** ./src/components/scrollbar.js ***!\n  \\*************************************/\n/***/ (() => {\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nAFRAME.registerComponent(\"vr-scrollbar\", {\n  init: function init() {\n    this.el.addEventListener(\"click\", function (evt) {\n      var scrollHeight = parseFloat(this.el.web2vr.aframe.container.firstElementChild.element.style.height) - this.el.web2vr.settings.scrollWindowHeight;\n      if (this.el.web2vr.scroll.scrollContainer == this.el.web2vr.container) scrollHeight = this.el.web2vr.scroll.scrollContainer.scrollHeight - this.el.web2vr.scroll.scrollContainer.clientHeight;\n      var scrollY = (1 - evt.detail.intersection.uv.y) * scrollHeight / this.el.web2vr.settings.scale;\n      var elements = _toConsumableArray(this.el.web2vr.elements);\n      // remove first element that is the backgorund of container\n      elements.shift();\n      this.el.pointer.object3D.position.setY(this.pointEndY + evt.detail.intersection.uv.y * (this.pointStartY - this.pointEndY));\n      var _iterator = _createForOfIteratorHelper(elements),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var element = _step.value;\n          element.position.scrollY = scrollY;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      this.el.web2vr.update();\n    }.bind(this));\n  },\n  play: function play() {\n    var width = parseFloat(this.el.web2vr.aframe.container.firstElementChild.getAttribute(\"width\"));\n    var height = parseFloat(this.el.web2vr.aframe.container.firstElementChild.getAttribute(\"height\"));\n\n    // init plane size\n    this.el.setAttribute(\"width\", width / 20);\n    this.el.setAttribute(\"height\", height);\n\n    //init scrollbar position\n    this.el.scrollbar.object3D.position.setX(width + parseFloat(this.el.getAttribute(\"width\") / 2));\n    this.el.scrollbar.object3D.position.setY(0 - height / 2); //1.96\n    this.el.scrollbar.object3D.position.setZ(-(this.el.web2vr.settings.layerStep * 4));\n\n    // init pointer position and size\n    this.el.pointer.setAttribute(\"height\", width / 20);\n    this.el.pointer.setAttribute(\"width\", width / 20);\n    this.pointStartY = height / 2 - parseFloat(this.el.pointer.getAttribute(\"height\")) / 2;\n    this.pointEndY = this.pointStartY - height + parseFloat(this.el.pointer.getAttribute(\"height\"));\n    this.el.pointer.object3D.position.setY(this.pointStartY);\n    this.el.pointer.object3D.position.setZ(this.el.web2vr.settings.layerStep * 2);\n  }\n});\n\n/***/ }),\n\n/***/ \"./src/elements/buttonElement.js\":\n/*!***************************************!*\\\n  !*** ./src/elements/buttonElement.js ***!\n  \\***************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_81623__) => {\n\n\"use strict\";\n__nested_webpack_require_81623__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_81623__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ButtomElement)\n/* harmony export */ });\n/* harmony import */ var _textElement__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_81623__(/*! ./textElement */ \"./src/elements/textElement.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar ButtomElement = /*#__PURE__*/function (_TextElement) {\n  function ButtomElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, ButtomElement);\n    _this = _callSuper(this, ButtomElement, [web2vr, domElement, layer]);\n    _this.borderColor = new THREE.Color(0x000000);\n    _this.borderWidth = 1;\n    return _this;\n  }\n  _inherits(ButtomElement, _TextElement);\n  return _createClass(ButtomElement, [{\n    key: \"updateTextPadding\",\n    value: function updateTextPadding() {\n      // ignore padding for buttons\n    }\n  }, {\n    key: \"updateText\",\n    value: function updateText() {\n      if (this.domElement.tagName == \"INPUT\") this.textValue = this.domElement.value.replace(/\\s{2,}/g, ' ');\n    }\n  }]);\n}(_textElement__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/canvasElement.js\":\n/*!***************************************!*\\\n  !*** ./src/elements/canvasElement.js ***!\n  \\***************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_86332__) => {\n\n\"use strict\";\n__nested_webpack_require_86332__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_86332__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CanvasElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_86332__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar CanvasElement = /*#__PURE__*/function (_Element) {\n  function CanvasElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, CanvasElement);\n    _this = _callSuper(this, CanvasElement, [web2vr, domElement, layer]);\n    _this.imageId = null;\n    _this.entity = document.createElement(\"a-image\");\n    return _this;\n  }\n  _inherits(CanvasElement, _Element);\n  return _createClass(CanvasElement, [{\n    key: \"updateImage\",\n    value: function updateImage(src) {\n      var assetId = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\n\n      // remove old image if there is new image\n      if (this.imageId && this.imageId != assetId) this.web2vr.aframe.assetManager.removeAsset(this.imageId);\n      this.entity.setAttribute(\"id\", \"IMAGE_\" + assetId);\n      this.entity.setAttribute(\"src\", \"#\" + assetId);\n      this.imageId = assetId;\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      this.updateImage(this.domElement.toDataURL());\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/checkboxElement.js\":\n/*!*****************************************!*\\\n  !*** ./src/elements/checkboxElement.js ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_91308__) => {\n\n\"use strict\";\n__nested_webpack_require_91308__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_91308__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CheckBoxElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_91308__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar CheckBoxElement = /*#__PURE__*/function (_Element) {\n  function CheckBoxElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, CheckBoxElement);\n    _this = _callSuper(this, CheckBoxElement, [web2vr, domElement, layer]);\n    _this.borderColor = new THREE.Color(0x000000);\n    _this.borderWidth = 1;\n    _this.entity = document.createElement(\"a-plane\");\n    _this.domElement.addEventListener(\"click\", function () {\n      _this.specificUpdate();\n    }.bind(_this));\n    return _this;\n  }\n  _inherits(CheckBoxElement, _Element);\n  return _createClass(CheckBoxElement, [{\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      if (this.domElement.checked) this.entity.setAttribute(\"color\", \"#0075FF\");else this.entity.setAttribute(\"color\", \"#FFFFFF\");\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/containerElement.js\":\n/*!******************************************!*\\\n  !*** ./src/elements/containerElement.js ***!\n  \\******************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_96092__) => {\n\n\"use strict\";\n__nested_webpack_require_96092__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_96092__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ContainerElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_96092__(/*! ./element */ \"./src/elements/element.js\");\n/* harmony import */ var _utils_helper__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_96092__(/*! ../utils/helper */ \"./src/utils/helper.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\nvar ContainerElement = /*#__PURE__*/function (_Element) {\n  function ContainerElement(web2vr, domElement, layer) {\n    var _this;\n    var textOnly = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    _classCallCheck(this, ContainerElement);\n    _this = _callSuper(this, ContainerElement, [web2vr, domElement, layer]);\n    _this.textOnly = textOnly;\n    _this.entity = document.createElement(\"a-plane\");\n\n    // if hyperlink trigger a click event\n    if (_this.domElement.tagName == \"A\") {\n      _this.entity.addEventListener(\"click\", function () {\n        console.log(\"Link clicked!\", _this.domElement.click());\n      });\n    }\n    if (!_this.textOnly) {\n      // show back plane for the main container\n      if (_this.domElement == _this.web2vr.container) _this.entity.setAttribute(\"material\", \"side\", \"double\");\n\n      // only needed for experimental background\n      _this.expImageId = null;\n      _this.oldBackgroundImage = null;\n      _this.oldDomPosition = null;\n    }\n    return _this;\n  }\n  _inherits(ContainerElement, _Element);\n  return _createClass(ContainerElement, [{\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      var _this2 = this;\n      if (!this.textOnly) {\n        var backgroundColor = this.style.backgroundColor;\n        var backgroundImage = this.style.backgroundImage; // to get 1:1 as html have to use background-size: cover; or use experimental\n\n        if (backgroundImage != \"none\") {\n          // cannot use animations that require update to be called every frame. html2canvas is very performance heavy.\n          if (this.web2vr.settings.experimental) {\n            if (backgroundImage != this.oldBackgroundImage || this.oldDomPosition && !this.position.equalsDOMPosition(this.oldDomPosition)) {\n              var id = this.domElement.id;\n              var customId = false;\n              if (!id) {\n                customId = true;\n                id = \"html2canvas-\" + this.web2vr.html2canvasIDcounter++;\n                this.domElement.id = id;\n              }\n              html2canvas(this.domElement, {\n                onclone: function onclone(clone) {\n                  var style = document.createElement('style');\n                  clone.head.appendChild(style);\n                  // ignoring opacity because we use opacity from aframe\n                  style.sheet.insertRule(\"\\n                    #\".concat(id, \" {\\n                        opacity: 1;\\n                    }\"));\n                  // hide the text\n                  style.sheet.insertRule(\"\\n                    #\".concat(id, \" {\\n                        color: transparent;\\n                    }\"));\n                  // hide the children elements\n                  style.sheet.insertRule(\"\\n                    #\".concat(id, \" > * {\\n                        display:none\\n                    }\"));\n                  // vr-span has to be block so it can render properly\n                  style.sheet.insertRule(\"\\n                    #\".concat(id, \" > .vr-span {\\n                        display:block\\n                    }\"));\n                  if (customId) _this2.domElement.removeAttribute(\"id\");\n                }\n              }).then(function (canvas) {\n                if (_this2.expImageId) _this2.web2vr.aframe.assetManager.removeAsset(_this2.expImageId);\n                _this2.expImageId = _this2.web2vr.aframe.assetManager.getAsset(canvas.toDataURL(), \"img\");\n                _this2.entity.setAttribute(\"material\", \"src: #\" + _this2.expImageId);\n              });\n              this.oldBackgroundImage = backgroundImage;\n            }\n          } else if (_utils_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isUrl(backgroundImage)) {\n            // remove url(\"\")\n            backgroundImage = backgroundImage.substring(backgroundImage.lastIndexOf('(\\\"') + 2, backgroundImage.lastIndexOf('\\\")'));\n            this.entity.setAttribute(\"material\", \"src: #\" + this.web2vr.aframe.assetManager.getAsset(backgroundImage, \"img\"));\n            // transparent images support\n            this.entity.setAttribute(\"material\", \"transparent\", true);\n          }\n        } else {\n          // if there is no backgroundColor dont renders\n          if (backgroundColor == \"rgba(0, 0, 0, 0)\") {\n            this.entity.setAttribute(\"material\", \"visible\", false);\n          } else {\n            this.entity.setAttribute(\"material\", \"visible\", true);\n            this.entity.setAttribute(\"color\", backgroundColor);\n            this.updateOpacity();\n          }\n        }\n        this.oldDomPosition = this.position.domPosition;\n      }\n    }\n  }, {\n    key: \"updateOpacity\",\n    value: function updateOpacity() {\n      var alpha = parseFloat(this.style.backgroundColor.split(',')[3]);\n      // calculate final alpha channel result\n      if (alpha) {\n        var a = alpha;\n        var b = this.style.opacity;\n        if (a < b) {\n          b = alpha;\n          a = this.style.opacity;\n        }\n        this.entity.setAttribute(\"opacity\", a - (a - b));\n      }\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/element.js\":\n/*!*********************************!*\\\n  !*** ./src/elements/element.js ***!\n  \\*********************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_105208__) => {\n\n\"use strict\";\n__nested_webpack_require_105208__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_105208__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Element)\n/* harmony export */ });\n/* harmony import */ var _utils_position__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_105208__(/*! ../utils/position */ \"./src/utils/position.js\");\n/* harmony import */ var _utils_mouseEventHandler__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_105208__(/*! ../utils/mouseEventHandler */ \"./src/utils/mouseEventHandler.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar Element = /*#__PURE__*/function () {\n  function Element(web2vr, domElement, layer) {\n    _classCallCheck(this, Element);\n    this.web2vr = web2vr;\n    this.domElement = domElement;\n    this.layer = layer;\n    this.domElement.element = this; // so we can do domeElement.parentNode.element\n    this.childElements = new Set();\n    this.entity = null; // aframe entity this null becasue Element class is abstract\n    this.visible = true;\n    if (this.domElement.classList.contains(\"vr-span\")) this.paddingToMargin();\n    this.position = new _utils_position__WEBPACK_IMPORTED_MODULE_0__[\"default\"](this.domElement.getBoundingClientRect(), layer * this.web2vr.settings.layerStep, web2vr.settings.scale);\n    this.style = window.getComputedStyle(this.domElement);\n    this.parentTransform = \"none\";\n    this.needsStartingTransformSize = true;\n  }\n\n  // call after entity is created in inheriting class\n  return _createClass(Element, [{\n    key: \"initEventHandlers\",\n    value: function initEventHandlers() {\n      var _this = this;\n      this.initHover();\n\n      // setting up MouseEventHandler\n      this.mouseEventHandle = new _utils_mouseEventHandler__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this);\n\n      // dynamic listeners\n      this.domElement.addEventListener(\"eventListenerAdded\", function () {\n        return _this.mouseEventHandle.resync();\n      });\n      this.domElement.addEventListener(\"eventListenerRemoved\", function () {\n        return _this.mouseEventHandle.resync();\n      });\n    }\n\n    // add animation compoment if dom element has animation\n  }, {\n    key: \"checkAnimation\",\n    value: function checkAnimation() {\n      if (parseFloat(this.style.animationDuration) || parseFloat(this.style.transitionDuration)) this.entity.setAttribute(\"vr-animate\", \"\");else this.entity.removeAttribute(\"vr-animate\");\n    }\n  }, {\n    key: \"initHover\",\n    value: function initHover() {\n      var _this2 = this;\n      // find what has hover\n      var tag = null;\n      if (this.web2vr.hoverSelectors.has(this.domElement.tagName.toLowerCase())) tag = this.domElement.tagName.toLowerCase();\n      var classes = [];\n      var _iterator = _createForOfIteratorHelper(this.domElement.classList),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var cls = _step.value;\n          if (this.web2vr.hoverSelectors.has(\".\" + cls)) classes.push(cls);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var id = null;\n      if (this.web2vr.hoverSelectors.has(\"#\" + this.domElement.id)) id = this.domElement.id;\n\n      // add mouseenter and mouseleave if element has hover.\n      if (tag || classes.length > 0 || id) {\n        this.entity.addEventListener(\"mouseenter\", function () {\n          if (tag) _this2.domElement.classList.add(tag + \"hover\");\n          if (classes.length > 0) {\n            var _iterator2 = _createForOfIteratorHelper(classes),\n              _step2;\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var cls = _step2.value;\n                _this2.domElement.classList.add(cls + \"hover\");\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n          }\n          if (id) _this2.domElement.classList.add(id + \"hover\");\n          // this is only for hover transform. Update all elements when transform gets added\n          if (_this2.style.transform != \"none\") {\n            _this2.web2vr.update();\n            _this2.hoverTransform = true;\n          }\n        });\n        this.entity.addEventListener(\"mouseleave\", function () {\n          if (tag) _this2.domElement.classList.remove(tag + \"hover\");\n          if (classes.length > 0) {\n            var _iterator3 = _createForOfIteratorHelper(classes),\n              _step3;\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                var cls = _step3.value;\n                _this2.domElement.classList.remove(cls + \"hover\");\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n          }\n          if (id) _this2.domElement.classList.remove(id + \"hover\");\n          if (_this2.hoverTransform) {\n            _this2.position.depth = _this2.position.startDepth;\n            var _iterator4 = _createForOfIteratorHelper(_this2.domElement.querySelectorAll('*')),\n              _step4;\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                var element = _step4.value;\n                if (element.element) {\n                  element.element.parentTransform = \"none\";\n                  element.element.position.depth = element.element.position.startDepth;\n                }\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n          }\n        });\n      }\n    }\n\n    // getBoundingClientRect works great with margin while with padding it has problems with paddingRight that needs to be manualy calculated and set\n    // because dealing with paddingRight is problematic we can make the padding be margin for the textNode(vr-span)\n  }, {\n    key: \"paddingToMargin\",\n    value: function paddingToMargin() {\n      // only if element has text\n      if (this.domElement.textContent.trim()) {\n        //const left = this.domElement.parentElement.element.style.paddingLeft;\n        var right = this.domElement.parentElement.element.style.paddingRight;\n        //const top = this.domElement.parentElement.element.style.paddingTop;\n        //const bottom = this.domElement.parentElement.element.style.paddingBottom;\n\n        /*if (parseFloat(left)) {\n            this.domElement.style.marginLeft = left;\n            this.domElement.parentElement.style.paddingLeft = \"0px\";\n        }*/\n        if (parseFloat(right)) {\n          this.domElement.style.marginRight = right;\n          this.domElement.parentElement.style.paddingRight = \"0px\";\n        }\n        /*if (parseFloat(top)) {\n            this.domElement.style.marginTop = top;\n            //this.domElement.parentElement.style.paddingTop = \"0px\";\n        }\n        if (parseFloat(bottom)) {\n            this.domElement.style.marginBottom = bottom;\n            //this.domElement.parentElement.style.paddingBottom = \"0px\";\n        }*/\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      // reference of the element for aframe compoment\n      this.entity.element = this;\n\n      // dont need light to affect material\n      this.entity.setAttribute(\"material\", \"shader\", \"flat\");\n\n      //init sizes at start\n      this.entity.setAttribute(\"width\", this.position.width);\n      this.entity.setAttribute(\"height\", this.position.height);\n      this.initEventHandlers();\n      this.setupClipping();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _this$web2vr$scroll, _this$web2vr$scroll2;\n      var clientRect = this.domElement.getBoundingClientRect();\n\n      // its not on the screen\n      if (clientRect.width == 0 || clientRect.height == 0) {\n        this.entity.object3D.visible = false;\n        if (!this.domElement.classList.contains(\"vr-span\")) this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n        this.position.aframePosition.y = 1000; // for some reason raycast still hits so have to move position\n        return;\n      }\n\n      // for future move this in TextElement class\n      if (this.domElement.classList.contains(\"vr-span\")) {\n        // dont need interaction with the text when we always have the background as interaction\n        this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n        // so all inline text width is good, dont do this if its text inside button\n        if (this.domElement.parentElement.tagName != \"BUTTON\") {\n          clientRect.width += 8;\n          clientRect.x -= 2;\n        }\n      }\n\n      // set fixed container height if its using scrollBody, best is to move this code outside update loop for future\n      if ((_this$web2vr$scroll = this.web2vr.scroll) !== null && _this$web2vr$scroll !== void 0 && _this$web2vr$scroll.hasScroll && this.domElement == this.web2vr.container && (_this$web2vr$scroll2 = this.web2vr.scroll) !== null && _this$web2vr$scroll2 !== void 0 && _this$web2vr$scroll2.scrollBody) clientRect.height = this.web2vr.settings.scrollWindowHeight;\n      this.position.updatePosition(clientRect);\n      this.checkVisible();\n      if (this.visible) {\n        this.style = window.getComputedStyle(this.domElement);\n\n        // its on visible screen but its hidden by style\n        if (this.style.visibility === \"hidden\" || this.style.display === \"none\") {\n          this.entity.object3D.visible = false;\n          if (!this.domElement.classList.contains(\"vr-span\")) this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n          this.position.aframePosition.y = 1000; // for some reason raycast still hits so have to move position\n          // update border so we can remove it because element is hidden\n          this.updateBorder();\n          return;\n        } else {\n          this.entity.object3D.visible = true;\n          // for input text because it has custom event for entity it cannot detect with this.mouseEventHandle.listeningForMouseEvents\n          // we have to check tagName and type to see if its input text, for future make this work with mouseEventHandle\n          // also add interactiveTag if its main container\n          if (!this.domElement.classList.contains(\"vr-span\") && (this.mouseEventHandle.listeningForMouseEvents || this.domElement.tagName == \"INPUT\" && this.domElement.type == \"text\") || this.domElement == this.web2vr.container) this.entity.classList.add(this.web2vr.settings.interactiveTag);\n        }\n\n        // if there is transform then width and height will be set with the transform matrix scale\n        // using needsStartingTransformSize so width and height are never 0 when doing transform scale\n        if (this.style.transform == \"none\" || this.needsStartingTransformSize) {\n          this.entity.setAttribute(\"width\", this.position.width);\n          this.entity.setAttribute(\"height\", this.position.height);\n        }\n        this.checkAnimation();\n        var opacity = this.style.opacity;\n        this.entity.setAttribute(\"opacity\", opacity);\n        this.specificUpdate();\n        this.updateTransform();\n        this.updateClipping();\n      }\n      this.updateBorder();\n    }\n  }, {\n    key: \"updateTransform\",\n    value: function updateTransform() {\n      var transform = this.style.transform;\n      if (transform == \"none\") transform = this.parentTransform;else {\n        // give transform to all descendents\n        var _iterator5 = _createForOfIteratorHelper(this.domElement.querySelectorAll('*')),\n          _step5;\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var element = _step5.value;\n            if (element.element) element.element.parentTransform = transform;\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n      }\n      if (transform != \"none\") {\n        this.needsStartingTransformSize = false;\n        var matrixType = transform.split('(')[0];\n        // get matrix values in float\n        var values = transform.split('(')[1];\n        values = values.split(')')[0];\n        values = values.split(',');\n        values = values.map(function (v) {\n          return parseFloat(v);\n        });\n        var matrix = null;\n        if (matrixType == \"matrix\") {\n          // transform to matrix4x4 and invert skewX to match three.js\n          matrix = new THREE.Matrix4().fromArray([values[0], values[1], 0, 0, -values[2], values[3], 0, 0, 0, 0, 1, 0, values[4], values[5], 0, 1]);\n        } else if (matrixType == \"matrix3d\") {\n          // invert skewX and skewZ? to match three.js\n          values[4] *= -1;\n          values[9] *= -1;\n          matrix = new THREE.Matrix4().fromArray(values);\n        }\n        var position = new THREE.Vector3();\n        var quaternion = new THREE.Quaternion();\n        var scale = new THREE.Vector3();\n        matrix.decompose(position, quaternion, scale);\n\n        // position\n        this.position.domPosition.x += position.x;\n        this.position.domPosition.y += position.y;\n        if (position.z != 0) this.position.depth = position.z * this.position.scalingFactor + this.position.startDepth;\n\n        // rotation\n        this.entity.object3D.rotation.setFromRotationMatrix(matrix);\n\n        // calcualte scale and set it to entity\n        if (this.parentTransform == \"none\") {\n          var elements = matrix.elements;\n          var scaleX = Math.sqrt(elements[0] * elements[0] + elements[1] * elements[1]);\n          var scaleY = Math.sqrt(elements[5] * elements[5] + elements[4] * elements[4]);\n          // for radio scale is 2 times smaller because its circle, for some rason checkbox scale needs to be in half else its too big\n          if (this.domElement.tagName == \"INPUT\" && (this.domElement.type == \"radio\" || this.domElement.type == \"checkbox\")) this.entity.object3D.scale.set(scaleX / 2, scaleY / 2, 1);else this.entity.object3D.scale.set(scaleX, scaleY, 1);\n        }\n      }\n      this.entity.object3D.position.set(this.position.x, this.position.y, this.position.z);\n    }\n\n    // abstract method\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {}\n  }, {\n    key: \"updateBorder\",\n    value: function updateBorder() {\n      if (this.web2vr.settings.border) {\n        // using borderTopWidth and borderTopColor because borderWidth and borderColor doesnt work in firefox\n        var borderWidth = parseFloat(this.style.borderTopWidth);\n        if ((borderWidth || this.borderWidth) && this.entity.object3D.visible) {\n          this.entity.setAttribute(\"vr-border\", \"width:\".concat(borderWidth, \"; color:\").concat(this.style.borderTopColor, \";\"));\n          this.entity.components[\"vr-border\"].updateBorder();\n        } else if (this.entity.components[\"vr-border\"]) this.entity.removeAttribute(\"vr-border\");\n      }\n    }\n  }, {\n    key: \"rotateNormal\",\n    value: function rotateNormal(normal) {\n      var normalMatrix = new THREE.Matrix3().getNormalMatrix(this.web2vr.aframe.container.object3D.matrixWorld);\n      var output = normal.clone().applyMatrix3(normalMatrix).normalize();\n      return output;\n    }\n  }, {\n    key: \"getClippingContext\",\n    value: function getClippingContext() {\n      var output = null;\n      if (this.domElement.parentNode && this.domElement.parentNode.element && this.domElement.parentNode.element.clippingContext) output = this.domElement.parentNode.element.clippingContext;else {\n        var _this$web2vr$scroll3;\n        if (this.style.overflow && this.style.overflow == \"hidden\" || (_this$web2vr$scroll3 = this.web2vr.scroll) !== null && _this$web2vr$scroll3 !== void 0 && _this$web2vr$scroll3.hasScroll && this.domElement == this.web2vr.container || this.web2vr.settings.forceClipping && this.domElement == this.web2vr.container) {\n          // ignore if its svg\n          if (this.domElement.tagName != \"svg\") {\n            var clippingContext = {};\n            clippingContext.authority = this;\n            clippingContext.bottom = new THREE.Plane(this.rotateNormal(new THREE.Vector3(0, 1, 0))); // normal up\n            clippingContext.top = new THREE.Plane(this.rotateNormal(new THREE.Vector3(0, -1, 0))); // normal down\n            clippingContext.left = new THREE.Plane(this.rotateNormal(new THREE.Vector3(1, 0, 0))); // normal right\n            clippingContext.right = new THREE.Plane(this.rotateNormal(new THREE.Vector3(-1, 0, 0))); // normal left\n\n            clippingContext.planes = [clippingContext.bottom, clippingContext.top, clippingContext.left, clippingContext.right];\n            output = clippingContext;\n          }\n        }\n      }\n      return output;\n    }\n  }, {\n    key: \"setupClipping\",\n    value: function setupClipping() {\n      var _this3 = this;\n      var clippingContext = this.getClippingContext();\n      if (clippingContext) {\n        this.clippingContext = clippingContext;\n\n        // we are sure the renderer is loaded\n        var object3D = this.entity.object3D;\n        if (!object3D || !object3D.children || !object3D.children.length > 0 || !object3D.children[0].material) {\n          return;\n        }\n        var material = object3D.children[0].material;\n        material.clippingPlanes = clippingContext.planes;\n\n        //this.updateClipping();\n        setTimeout(function () {\n          _this3.updateClipping();\n        }, 200); // if it doesnt work use this\n        // return new Promise();\n      }\n    }\n  }, {\n    key: \"updateClipping\",\n    value: function updateClipping() {\n      // only element with authority can change the clipping planes position\n      if (!this.clippingContext || this.clippingContext.authority != this) return;\n      var position = this.entity.object3D.position;\n      var bottomLocal = position.clone().add(new THREE.Vector3(0, -1, 0).multiplyScalar(this.position.height / 2));\n      var topLocal = position.clone().add(new THREE.Vector3(0, 1, 0).multiplyScalar(this.position.height / 2));\n      var leftLocal = position.clone().add(new THREE.Vector3(-1, 0, 0).multiplyScalar(this.position.width / 2));\n      var rightLocal = position.clone().add(new THREE.Vector3(1, 0, 0).multiplyScalar(this.position.width / 2));\n      var bottomGlobal = this.web2vr.aframe.container.object3D.localToWorld(bottomLocal.clone());\n      var topGlobal = this.web2vr.aframe.container.object3D.localToWorld(topLocal.clone());\n      var leftGlobal = this.web2vr.aframe.container.object3D.localToWorld(leftLocal.clone());\n      var rightGlobal = this.web2vr.aframe.container.object3D.localToWorld(rightLocal.clone());\n      this.clippingContext.bottom.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(0, 1, 0)), bottomGlobal).normalize();\n      this.clippingContext.top.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(0, -1, 0)), topGlobal).normalize();\n      this.clippingContext.left.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(1, 0, 0)), leftGlobal).normalize();\n      this.clippingContext.right.setFromNormalAndCoplanarPoint(this.rotateNormal(new THREE.Vector3(-1, 0, 0)), rightGlobal).normalize();\n      if (this.web2vr.settings.showClipping) {\n        if (!this.clippingPlaneHelpers) {\n          this.clippingPlaneHelpers = [];\n          var _iterator6 = _createForOfIteratorHelper(this.clippingContext.planes),\n            _step6;\n          try {\n            for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n              var plane = _step6.value;\n              var material = new THREE.MeshBasicMaterial({\n                color: 0x00e33d,\n                side: THREE.DoubleSide\n              });\n              var geometry = new THREE.PlaneGeometry(200 * this.position.scalingFactor, 200 * this.position.scalingFactor); // no need same width and height as container because this is only for debugging\n              var mesh = new THREE.Mesh(geometry, material);\n              mesh.debugPlane = plane;\n              this.clippingPlaneHelpers.push(mesh);\n              var axisHelper = new THREE.AxesHelper(5);\n              mesh.add(axisHelper);\n            }\n          } catch (err) {\n            _iterator6.e(err);\n          } finally {\n            _iterator6.f();\n          }\n          var _iterator7 = _createForOfIteratorHelper(this.clippingPlaneHelpers),\n            _step7;\n          try {\n            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n              var helper = _step7.value;\n              this.web2vr.aframe.scene.object3D.add(helper);\n            }\n          } catch (err) {\n            _iterator7.e(err);\n          } finally {\n            _iterator7.f();\n          }\n        }\n        var _iterator8 = _createForOfIteratorHelper(this.clippingPlaneHelpers),\n          _step8;\n        try {\n          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n            var _mesh = _step8.value;\n            _mesh.visible = true;\n            var worldPos = new THREE.Vector3();\n            this.entity.object3D.getWorldPosition(worldPos);\n            var point = new THREE.Vector3();\n            _mesh.debugPlane.projectPoint(worldPos, point);\n            _mesh.position.set(point.x, point.y, point.z);\n\n            // clipping plane normals are inverted, we multiply by -1\n            var focalPoint = point.clone().add(_mesh.debugPlane.normal.clone().multiplyScalar(-1));\n            _mesh.lookAt(focalPoint);\n          }\n        } catch (err) {\n          _iterator8.e(err);\n        } finally {\n          _iterator8.f();\n        }\n      } else {\n        if (this.clippingPlaneHelpers) {\n          var _iterator9 = _createForOfIteratorHelper(this.clippingPlaneHelpers),\n            _step9;\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var _mesh2 = _step9.value;\n              _mesh2.visible = false;\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n        }\n      }\n    }\n  }, {\n    key: \"checkVisible\",\n    value: function checkVisible() {\n      if (this.clippingContext) {\n        var container = this.clippingContext.authority;\n        if (this.position.bottom.y > container.position.top.y || this.position.top.y < container.position.bottom.y) {\n          this.visible = false;\n          this.entity.object3D.visible = false;\n          // remove interactive tag\n          if (!this.domElement.classList.contains(\"vr-span\")) this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n        } else {\n          this.visible = true;\n          this.entity.object3D.visible = true;\n          // interactive tag so we can do raycasting if it has mouse events or its container background\n          if (!this.domElement.classList.contains(\"vr-span\") && this.mouseEventHandle.listeningForMouseEvents || this.domElement == this.web2vr.container) this.entity.classList.add(this.web2vr.settings.interactiveTag);\n        }\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/elements/imageElement.js\":\n/*!**************************************!*\\\n  !*** ./src/elements/imageElement.js ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_131456__) => {\n\n\"use strict\";\n__nested_webpack_require_131456__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_131456__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ImageElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_131456__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar ImageElement = /*#__PURE__*/function (_Element) {\n  function ImageElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, ImageElement);\n    _this = _callSuper(this, ImageElement, [web2vr, domElement, layer]);\n    _this.currentSrc = null;\n    _this.changed = false;\n    _this.entity = document.createElement(\"a-image\");\n    _this.entity.setAttribute(\"material\", \"side\", \"front\");\n    // know when image is loaded\n    _this.loaded = false;\n    _this.domElement.addEventListener(\"load\", function () {\n      _this.loaded = true;\n      // if image changed update all after image loaded\n      if (_this.changed) {\n        _this.changed = false;\n        _this.web2vr.update();\n      }\n    });\n    return _this;\n  }\n  _inherits(ImageElement, _Element);\n  return _createClass(ImageElement, [{\n    key: \"updateImage\",\n    value: function updateImage(src) {\n      var assetID = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\n      this.entity.setAttribute(\"id\", \"IMAGE_\" + assetID);\n      var isGif = /\\.(gif)$/i;\n      if (isGif.test(src)) {\n        this.entity.setAttribute(\"material\", \"shader\", \"gif\");\n        this.entity.setAttribute(\"material\", \"src\", \"#\" + assetID);\n      } else {\n        this.entity.setAttribute(\"material\", \"shader\", \"flat\");\n        this.entity.setAttribute(\"src\", \"#\" + assetID);\n      }\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      var src = this.domElement.getAttribute(\"src\");\n      if (src != this.currentSrc) {\n        if (this.currentSrc) {\n          this.loaded = false;\n          this.changed = true;\n        }\n        this.currentSrc = src;\n        this.updateImage(this.currentSrc);\n      }\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]); // TODO: No need to save image copy in assets you can directly read it from the orignal\n\n\n/***/ }),\n\n/***/ \"./src/elements/inputElement.js\":\n/*!**************************************!*\\\n  !*** ./src/elements/inputElement.js ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_137210__) => {\n\n\"use strict\";\n__nested_webpack_require_137210__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_137210__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InputElement)\n/* harmony export */ });\n/* harmony import */ var _textElement__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_137210__(/*! ./textElement */ \"./src/elements/textElement.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar InputElement = /*#__PURE__*/function (_TextElement) {\n  function InputElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, InputElement);\n    _this = _callSuper(this, InputElement, [web2vr, domElement, layer]);\n    _this.borderColor = new THREE.Color(0x000000);\n    _this.borderWidth = 1;\n    _this.active = false;\n\n    // update when there is change of value\n    _this.domElement.addEventListener(\"input\", function () {\n      return _this.update();\n    });\n    // when clicked make it active input for the keyboard and position the keyboard relative to camera\n    _this.entity.addEventListener(\"click\", function () {\n      var camera = _this.web2vr.aframe.scene.camera.parent;\n      var keyboard = _this.web2vr.aframe.keyboard.object3D;\n      keyboard.position.copy(camera.position);\n      keyboard.rotation.copy(camera.rotation);\n      keyboard.rotation.z = 0;\n      keyboard.rotation.x = THREE.Math.degToRad(-30);\n      keyboard.translateX(-0.24);\n      keyboard.translateY(-0.1);\n      keyboard.translateZ(-0.6);\n      keyboard.visible = true;\n      if (_this.web2vr.aframe.keyboard.activeInput) {\n        _this.web2vr.aframe.keyboard.activeInput.element.active = false;\n        // update web2vr where activeInput is located\n        _this.web2vr.aframe.keyboard.activeInput.element.web2vr.update();\n      }\n      _this.active = true;\n      _this.web2vr.aframe.keyboard.activeInput = _this.domElement;\n      _this.web2vr.update();\n    });\n    return _this;\n  }\n  _inherits(InputElement, _TextElement);\n  return _createClass(InputElement, [{\n    key: \"updateText\",\n    value: function updateText() {\n      var value = this.domElement.value;\n      if (value) this.textValue = value;else this.textValue = this.domElement.placeholder;\n    }\n  }, {\n    key: \"updateTextColor\",\n    value: function updateTextColor() {\n      var value = this.domElement.value;\n      if (value) _get(_getPrototypeOf(InputElement.prototype), \"updateTextColor\", this).call(this);else this.entity.setAttribute(\"text\", \"color\", \"#999\");\n      if (this.active) this.entity.setAttribute(\"color\", \"#ffffcc\");\n    }\n  }]);\n}(_textElement__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/radioElement.js\":\n/*!**************************************!*\\\n  !*** ./src/elements/radioElement.js ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_143925__) => {\n\n\"use strict\";\n__nested_webpack_require_143925__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_143925__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RadioElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_143925__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar RadioElement = /*#__PURE__*/function (_Element) {\n  function RadioElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, RadioElement);\n    _this = _callSuper(this, RadioElement, [web2vr, domElement, layer]);\n    _this.borderColor = new THREE.Color(0x000000);\n    _this.borderWidth = 1;\n    _this.entity = document.createElement(\"a-circle\");\n    _this.domElement.addEventListener(\"click\", function () {\n      _this.web2vr.update();\n    }.bind(_this));\n    return _this;\n  }\n  _inherits(RadioElement, _Element);\n  return _createClass(RadioElement, [{\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      this.entity.setAttribute(\"radius\", this.position.width / 2);\n      if (this.domElement.checked) this.entity.setAttribute(\"color\", \"#0075FF\");else this.entity.setAttribute(\"color\", \"#FFFFFF\");\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/svgElement.js\":\n/*!************************************!*\\\n  !*** ./src/elements/svgElement.js ***!\n  \\************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_148731__) => {\n\n\"use strict\";\n__nested_webpack_require_148731__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_148731__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SvgElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_148731__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar SvgElement = /*#__PURE__*/function (_Element) {\n  function SvgElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, SvgElement);\n    _this = _callSuper(this, SvgElement, [web2vr, domElement, layer]);\n    _this.imageId = null;\n    _this.entity = document.createElement(\"a-image\");\n    return _this;\n  }\n  _inherits(SvgElement, _Element);\n  return _createClass(SvgElement, [{\n    key: \"svgToImage\",\n    value: function svgToImage() {\n      var _this2 = this;\n      var svgString = new XMLSerializer().serializeToString(this.domElement);\n      var canvas = document.createElement(\"canvas\");\n      var ctx = canvas.getContext(\"2d\");\n      canvas.width = this.position.domPosition.width * 2;\n      canvas.height = this.position.domPosition.height * 2;\n      var DOMURL = self.URL || self.webkitURL || self;\n      var img = new Image();\n      var svg = new Blob([svgString], {\n        type: \"image/svg+xml;charset=utf-8\"\n      });\n      var url = DOMURL.createObjectURL(svg);\n      img.onload = function () {\n        if (_this2.domElement.style.width) ctx.drawImage(img, 0, 0, canvas.width * 2, canvas.height * 2);else ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n        DOMURL.revokeObjectURL(url);\n        _this2.updateImage(canvas.toDataURL());\n        canvas.remove();\n      };\n      img.src = url;\n    }\n  }, {\n    key: \"updateImage\",\n    value: function updateImage(src) {\n      var assetId = this.web2vr.aframe.assetManager.getAsset(src, \"img\");\n\n      // remove old image if there is new image\n      if (this.imageId && this.imageId != assetId) this.web2vr.aframe.assetManager.removeAsset(this.imageId);\n      this.entity.setAttribute(\"id\", \"IMAGE_\" + assetId);\n      this.entity.setAttribute(\"src\", \"#\" + assetId);\n      this.imageId = assetId;\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      this.svgToImage();\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/textElement.js\":\n/*!*************************************!*\\\n  !*** ./src/elements/textElement.js ***!\n  \\*************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_154589__) => {\n\n\"use strict\";\n__nested_webpack_require_154589__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_154589__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ TextElement)\n/* harmony export */ });\n/* harmony import */ var _containerElement__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_154589__(/*! ./containerElement */ \"./src/elements/containerElement.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar TextElement = /*#__PURE__*/function (_ContainerElement) {\n  function TextElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, TextElement);\n    _this = _callSuper(this, TextElement, [web2vr, domElement, layer, false]);\n    _this.entity.setAttribute(\"text\", \"value\", \"\");\n    _this.textValue = null;\n    return _this;\n  }\n  _inherits(TextElement, _ContainerElement);\n  return _createClass(TextElement, [{\n    key: \"setupClipping\",\n    value: function setupClipping() {\n      var clippingContext = this.getClippingContext();\n      if (clippingContext) {\n        this.clippingContext = clippingContext;\n        var material = this.entity.components.text.material;\n\n        // text component uses custom shader so default three.js clipping doesnt work, needed to inject clipping shader code inside the custom shader code(RawShaderMaterial)\n        // help from https://stackoverflow.com/questions/42532545/add-clipping-to-three-shadermaterial\n        // 1.1.0 version changes: Because Aframe 1.1.0 changes text material shader to use webgl 2(glsl 3) some of the three.js ShaderChunk had to be converted to glsl 3.\n        var fragmentShader = \"#version 300 es\\n            precision highp float;\\n            uniform bool negate;\\n            uniform float alphaTest;\\n            uniform float opacity;\\n            uniform sampler2D map;\\n            uniform vec3 color;\\n            in vec2 vUV;\\n            out vec4 fragColor;\\n            float median(float r, float g, float b) {\\n                return max(min(r, g), min(max(r, g), b));\\n            }\\n            #define BIG_ENOUGH 0.001\\n            #define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\\n            \\n            // clipping_planes_pars_fragment converted to glsl 3\\n            #if NUM_CLIPPING_PLANES > 0\\n                in vec3 vClipPosition;\\n                uniform vec4 clippingPlanes[NUM_CLIPPING_PLANES];\\n            #endif\\n            \\n            void main() {\\n                // compatible with glsl 3\\n                #include <clipping_planes_fragment>\\n\\n                vec3 sampleColor = texture(map, vUV).rgb;\\n                if (negate) { sampleColor = 1.0 - sampleColor; }\\n                float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;\\n                float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);\\n                float dscale = 0.353505;\\n                vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));\\n                float isBigEnough = max(abs(duv.x), abs(duv.y));\\n                // Do modified alpha test.\\n                if (isBigEnough > BIG_ENOUGH) {\\n                    float ratio = BIG_ENOUGH / isBigEnough;\\n                    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);\\n                }\\n                // Do modified alpha test.\\n                if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\\n                fragColor = vec4(color.xyz, alpha * opacity);\\n            }\";\n        var vertexShader = \"#version 300 es\\n            in vec2 uv;\\n            in vec3 position;\\n            uniform mat4 projectionMatrix;\\n            uniform mat4 modelViewMatrix;\\n            out vec2 vUV;\\n\\n            // clipping_planes_pars_vertex converted to glsl 3\\n            #if NUM_CLIPPING_PLANES > 0\\n\\t            out vec3 vClipPosition;\\n            #endif\\n\\n            void main(void) {\\n                // compatible with glsl 3\\n                #include <begin_vertex>\\n\\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n                vUV = uv;\\n\\n                // compatible with glsl 3\\n                #include <project_vertex>\\n                #include <clipping_planes_vertex>\\n\\n            }\";\n        material.fragmentShader = fragmentShader;\n        material.vertexShader = vertexShader;\n        material.clipping = true;\n        material.clippingPlanes = clippingContext.planes;\n        this.updateClipping();\n      }\n    }\n  }, {\n    key: \"updateTextAlignment\",\n    value: function updateTextAlignment() {\n      // align css text-align to text component\n      var align = this.style.textAlign;\n      if (![\"left\", \"right\", \"center\"].includes(align)) align = \"left\";\n      this.entity.setAttribute(\"text\", \"align\", align);\n\n      // set text lineHeight if it has custom css lineHeight\n      var text = this.entity.components.text;\n      if (this.style.lineHeight != \"normal\" && typeof text.currentFont != \"undefined\") {\n        this.entity.setAttribute(\"text\", \"lineHeight\", text.currentFont.common.lineHeight + parseFloat(this.style.lineHeight));\n      }\n    }\n  }, {\n    key: \"updateTextSize\",\n    value: function updateTextSize() {\n      var actualFontSize = parseFloat(this.style.fontSize);\n      var width = this.position.width;\n      var widthInPixels = width / this.position.scalingFactor;\n      var wrapPixels = widthInPixels * 42 / actualFontSize;\n      wrapPixels *= 1.107; //1.10706774183070233\n      this.entity.setAttribute(\"text\", \"wrapPixels\", wrapPixels);\n      this.entity.setAttribute(\"text\", \"width\", width);\n    }\n  }, {\n    key: \"updateTextColor\",\n    value: function updateTextColor() {\n      // opacity from parent because it doesnt pass it to children\n      var opacity = this.domElement.parentElement.element.style.opacity;\n      this.entity.setAttribute(\"text\", \"opacity\", opacity);\n      var textColor = this.style.color;\n      this.entity.setAttribute(\"text\", \"color\", textColor);\n    }\n  }, {\n    key: \"updateText\",\n    value: function updateText() {\n      // remove new lines and whitespaces\n      this.textValue = this.domElement.textContent.replace(/\\s{2,}/g, ' ');\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      _get(_getPrototypeOf(TextElement.prototype), \"specificUpdate\", this).call(this);\n      this.updateTextSize();\n      this.updateTextAlignment();\n      this.updateText();\n      this.entity.setAttribute(\"text\", \"value\", this.textValue);\n      this.updateTextColor();\n    }\n  }]);\n}(_containerElement__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/elements/videoElement.js\":\n/*!**************************************!*\\\n  !*** ./src/elements/videoElement.js ***!\n  \\**************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_165253__) => {\n\n\"use strict\";\n__nested_webpack_require_165253__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_165253__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ VideoElement)\n/* harmony export */ });\n/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_165253__(/*! ./element */ \"./src/elements/element.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar VideoElement = /*#__PURE__*/function (_Element) {\n  function VideoElement(web2vr, domElement, layer) {\n    var _this;\n    _classCallCheck(this, VideoElement);\n    _this = _callSuper(this, VideoElement, [web2vr, domElement, layer]);\n    // normal video\n    _this.entity = document.createElement(\"a-video\");\n    // 360 video\n    _this.video360 = document.createElement(\"a-videosphere\");\n    _this.web2vr.aframe.scene.appendChild(_this.video360);\n    _this.createClickEvent();\n    _this.domElement.addEventListener(\"play\", function () {\n      if (_this.domElement.hasAttribute(\"vr\")) _this.video360.components.material.material.map.image.play();\n    });\n    _this.domElement.addEventListener(\"pause\", function () {\n      if (_this.domElement.hasAttribute(\"vr\")) _this.video360.components.material.material.map.image.pause();\n    });\n    return _this;\n  }\n  _inherits(VideoElement, _Element);\n  return _createClass(VideoElement, [{\n    key: \"createClickEvent\",\n    value: function createClickEvent() {\n      var _this2 = this;\n      // for normal video\n      this.domElement.addEventListener(\"click\", function () {\n        _this2.domElement.paused ? _this2.domElement.play() : _this2.domElement.pause();\n      });\n    }\n  }, {\n    key: \"specificUpdate\",\n    value: function specificUpdate() {\n      var src = this.domElement.currentSrc;\n      var id = this.domElement.id;\n\n      // if there is no video id generate new id\n      if (!id) {\n        id = this.web2vr.aframe.assetManager.updateCurrentAssetIdReturn();\n        this.domElement.id = id;\n      }\n      if (this.domElement.hasAttribute(\"vr\")) {\n        this.video360.object3D.visible = true;\n        this.video360.classList.add(this.web2vr.settings.interactiveTag);\n        this.entity.object3D.visible = false;\n        this.entity.classList.remove(this.web2vr.settings.interactiveTag);\n        this.video360.setAttribute(\"src\", \"#\" + id);\n        // set video360 rotation\n        var rotation = this.domElement.getAttribute(\"vr\");\n        if (rotation) this.video360.object3D.rotation.y = THREE.Math.degToRad(rotation);else this.video360.object3D.rotation.y = 0;\n      } else {\n        this.video360.object3D.visible = false;\n        this.video360.classList.remove(this.web2vr.settings.interactiveTag);\n        this.entity.object3D.visible = true;\n        this.entity.classList.add(this.web2vr.settings.interactiveTag);\n        this.entity.setAttribute(\"src\", \"#\" + id);\n      }\n    }\n  }]);\n}(_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n/***/ }),\n\n/***/ \"./src/plugins/aframe-keyboard.min.js\":\n/*!********************************************!*\\\n  !*** ./src/plugins/aframe-keyboard.min.js ***!\n  \\********************************************/\n/***/ (() => {\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n!function (e) {\n  var t = {};\n  function a(d) {\n    if (t[d]) return t[d].exports;\n    var n = t[d] = {\n      i: d,\n      l: !1,\n      exports: {}\n    };\n    return e[d].call(n.exports, n, n.exports, a), n.l = !0, n.exports;\n  }\n  a.m = e, a.c = t, a.d = function (e, t, d) {\n    a.o(e, t) || Object.defineProperty(e, t, {\n      enumerable: !0,\n      get: d\n    });\n  }, a.r = function (e) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, a.t = function (e, t) {\n    if (1 & t && (e = a(e)), 8 & t) return e;\n    if (4 & t && \"object\" == _typeof(e) && e && e.__esModule) return e;\n    var d = Object.create(null);\n    if (a.r(d), Object.defineProperty(d, \"default\", {\n      enumerable: !0,\n      value: e\n    }), 2 & t && \"string\" != typeof e) for (var n in e) a.d(d, n, function (t) {\n      return e[t];\n    }.bind(null, n));\n    return d;\n  }, a.n = function (e) {\n    var t = e && e.__esModule ? function () {\n      return e[\"default\"];\n    } : function () {\n      return e;\n    };\n    return a.d(t, \"a\", t), t;\n  }, a.o = function (e, t) {\n    return Object.prototype.hasOwnProperty.call(e, t);\n  }, a.p = \"\", a(a.s = 0);\n}([function (e, t, a) {\n  a(1), a(3);\n  var d = a(4),\n    n = {\n      mode: \"normal\"\n    };\n  n.template = new d(), e.exports = window.AFK = n;\n}, function (e, t, a) {\n  var d = a(2);\n  if (\"undefined\" == typeof AFRAME) throw new Error(\"Component attempted to register before AFRAME was available.\");\n  AFRAME.registerComponent(\"a-keyboard\", {\n    schema: {\n      audio: {\n        \"default\": !1\n      },\n      color: {\n        \"default\": \"#fff\"\n      },\n      highlightColor: {\n        \"default\": \"#1a79dc\"\n      },\n      dismissable: {\n        \"default\": !0\n      },\n      font: {\n        \"default\": \"monoid\"\n      },\n      fontSize: {\n        \"default\": \"0.39\"\n      },\n      locale: {\n        \"default\": \"en\"\n      },\n      model: {\n        \"default\": \"\"\n      },\n      baseTexture: {\n        \"default\": \"\"\n      },\n      keyTexture: {\n        \"default\": \"\"\n      },\n      verticalAlign: {\n        \"default\": \"center\"\n      }\n    },\n    init: function init() {\n      AFK.template.draw(_objectSpread(_objectSpread({}, this.data), {}, {\n        el: this.el\n      })), this.attachEventListeners();\n    },\n    attachEventListeners: function attachEventListeners() {\n      window.addEventListener(\"keydown\", this.handleKeyboardPress), this.el.addEventListener(\"click\", this.handleKeyboardVR);\n    },\n    removeEventListeners: function removeEventListeners() {\n      window.removeEventListener(\"keydown\", this.handleKeyboardPress), this.el.removeEventListener(\"click\", this.handleKeyboardVR);\n    },\n    handleKeyboardPress: function handleKeyboardPress(e) {\n      d(e);\n    },\n    handleKeyboardVR: function handleKeyboardVR(e) {\n      d(e, \"vr\");\n    },\n    remove: function remove() {\n      this.removeEventListeners();\n    }\n  });\n}, function (e, t) {\n  e.exports = function (e, t) {\n    var a;\n    var d = new Set([16, 17, 18, 20, 33, 34, 35, 36, 45, 46, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123]),\n      n = e.key && e.key.charCodeAt(0);\n    var r = e.key,\n      s = e.keyCode;\n    if (\"vr\" === t) s = parseInt(document.querySelector(\"#\".concat(e.target.id)).getAttribute(\"key-code\")), r = document.querySelector(\"#\".concat(e.target.id)).getAttribute(\"value\");else if (d.has(e.keyCode)) return;\n    switch (s) {\n      case 9:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \"\\t\"\n          }\n        }), document.dispatchEvent(a);\n        break;\n      case 8:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \"\"\n          }\n        }), document.dispatchEvent(a);\n        break;\n      case 13:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \"\\n\"\n          }\n        }), document.dispatchEvent(a);\n        break;\n      case 16:\n        AFK.template.toggleActiveMode(\"shift\");\n        break;\n      case 18:\n        AFK.template.toggleActiveMode(\"alt\");\n        break;\n      case 27:\n        this.dismissable && (a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \"\"\n          }\n        }), document.dispatchEvent(a));\n        break;\n      case 32:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: \" \"\n          }\n        }), document.dispatchEvent(a);\n        break;\n      default:\n        a = new CustomEvent(\"a-keyboard-update\", {\n          detail: {\n            code: s,\n            value: r\n          }\n        }), document.dispatchEvent(a);\n    }\n    if (\"vr\" !== t) {\n      var _t = document.querySelector(\"#a-keyboard-\".concat(n)) || document.querySelector(\"#a-keyboard-\".concat(e.keyCode));\n      _t && (_t.dispatchEvent(new Event(\"mousedown\")), setTimeout(function () {\n        _t.dispatchEvent(new Event(\"mouseleave\"));\n      }, 80));\n    }\n  };\n}, function (e, t) {\n  if (\"undefined\" == typeof AFRAME) throw new Error(\"Component attempted to register before AFRAME was available.\");\n  AFRAME.registerComponent(\"keyboard-button\", {\n    init: function init() {\n      var _this = this;\n      var e = this.el;\n      e.addEventListener(\"mousedown\", function () {\n        e.setAttribute(\"material\", \"opacity\", \"0.7\");\n      }), e.addEventListener(\"mouseup\", function () {\n        e.setAttribute(\"material\", \"opacity\", _this.isMouseEnter ? \"0.9\" : \"0\");\n      }), e.addEventListener(\"mouseenter\", function () {\n        e.setAttribute(\"material\", \"opacity\", \"0.9\"), self.isMouseEnter = !0;\n      }), e.addEventListener(\"mouseleave\", function () {\n        e.setAttribute(\"material\", \"opacity\", \"0\"), self.isMouseEnter = !1;\n      });\n    }\n  });\n}, function (e, t, a) {\n  var d = a(5);\n  e.exports = /*#__PURE__*/function () {\n    function _class() {\n      _classCallCheck(this, _class);\n      this.keyboardKeys = {}, this.activeMode = \"normal\";\n    }\n    return _createClass(_class, [{\n      key: \"draw\",\n      value: function draw(e) {\n        for (var _t2 in e) this[_t2] = e[_t2];\n        this.keyboardKeys = d(e.locale), this.drawKeyboard();\n      }\n    }, {\n      key: \"drawButton\",\n      value: function drawButton(e) {\n        var t = e.key,\n          a = t.size.split(\" \")[0],\n          d = t.size.split(\" \")[1],\n          n = document.createElement(\"a-entity\");\n        n.setAttribute(\"position\", e.position);\n        var r = document.createElement(\"a-entity\");\n        r.setAttribute(\"geometry\", \"primitive: plane; width: \".concat(a, \"; height: \").concat(d, \";\")), this.keyTexture && this.keyTexture.length > 0 ? r.setAttribute(\"material\", \"src: \".concat(this.keyTexture)) : r.setAttribute(\"material\", \"color: #4a4a4a; opacity: 0.9\");\n        var s = document.createElement(\"a-text\");\n        s.id = \"a-keyboard-\".concat(t.code), s.setAttribute(\"key-code\", t.code), s.setAttribute(\"value\", t.value), s.setAttribute(\"align\", \"center\"), s.setAttribute(\"baseline\", this.verticalAlign), s.setAttribute(\"position\", \"0 0 0.001\"), s.setAttribute(\"width\", this.fontSize), s.setAttribute(\"height\", this.fontSize), s.setAttribute(\"geometry\", \"primitive: plane; width: \".concat(a, \"; height: \").concat(d)), s.setAttribute(\"material\", \"opacity: 0.0; transparent: true; color: \".concat(this.highlightColor)), s.setAttribute(\"color\", this.color), s.setAttribute(\"font\", this.font), s.setAttribute(\"shader\", \"msdf\"), s.setAttribute(\"negate\", \"false\"), s.setAttribute(\"keyboard-button\", !0), s.setAttribute(\"class\", \"collidable\"), n.appendChild(r), n.appendChild(s), this.el.appendChild(n);\n      }\n    }, {\n      key: \"drawKeyboard\",\n      value: function drawKeyboard() {\n        for (; this.el.firstChild;) this.el.removeChild(this.el.firstChild);\n        if (this.keyboardKeys) {\n          var _e = this.keyboardKeys[this.activeMode] || this.keyboardKeys.normal,\n            _t3 = document.createElement(\"a-entity\"),\n            _a = .52,\n            _d = .04 * _e.length + .004 * (_e.length - 1) + .04;\n          _t3.setAttribute(\"position\", \"\".concat(_a / 2 - .02, \" \").concat(-_d / 2 + .02, \" -0.01\")), _t3.setAttribute(\"geometry\", \"primitive: plane; width: \".concat(_a, \"; height: \").concat(_d)), this.baseTexture && this.baseTexture.length > 0 ? _t3.setAttribute(\"material\", \"src: \".concat(this.baseTexture)) : _t3.setAttribute(\"material\", \"color: #4a4a4a; side: double; opacity: 0.7\"), this.el.appendChild(_t3);\n          var n = 0;\n          for (var _t4 = 0; _t4 < _e.length; _t4++) {\n            var _a2 = _e[_t4];\n            var _d2 = 0;\n            for (var _e2 = 0; _e2 < _a2.length; _e2++) {\n              var _t5 = _a2[_e2],\n                r = this.parseKeyObjects(_t5);\n              if (!this.dismissable && \"cancel\" === _t5.type) continue;\n              var s = r.size.split(\" \")[0],\n                l = r.size.split(\" \")[1];\n              this.drawButton({\n                key: r,\n                position: \"\".concat(_d2 + s / 2, \" \").concat(n - l / 2, \" 0\")\n              }), _d2 += parseFloat(s) + .004, _a2.length === _e2 + 1 && (n -= .044);\n            }\n          }\n        }\n      }\n    }, {\n      key: \"toggleActiveMode\",\n      value: function toggleActiveMode(e) {\n        e === this.activeMode ? (this.activeMode = \"normal\", this.drawKeyboard()) : (this.activeMode = e, this.drawKeyboard());\n      }\n    }, {\n      key: \"parseKeyObjects\",\n      value: function parseKeyObjects(e) {\n        var t = e.type,\n          a = e.value;\n        switch (t) {\n          case \"delete\":\n            return {\n              size: \"0.04 0.04 0\",\n              value: a,\n              code: \"8\"\n            };\n          case \"enter\":\n            return {\n              size: \"0.04 0.084 0\",\n              value: a,\n              code: \"13\"\n            };\n          case \"shift\":\n            return {\n              size: \"0.084 0.04 0\",\n              value: a,\n              code: \"16\"\n            };\n          case \"alt\":\n            return {\n              size: \"0.084 0.04 0\",\n              value: a,\n              code: \"18\"\n            };\n          case \"space\":\n            return {\n              size: \"\".concat(.2 + .016, \" 0.04 0\"),\n              value: a,\n              code: \"32\"\n            };\n          case \"cancel\":\n            return {\n              size: \"0.084 0.04 0\",\n              value: a,\n              code: \"24\"\n            };\n          case \"submit\":\n            return {\n              size: \"0.084 0.04 0\",\n              value: a,\n              code: \"06\"\n            };\n          default:\n            return {\n              size: \"0.04 0.04 0\",\n              value: a,\n              code: a.charCodeAt(0)\n            };\n        }\n      }\n    }]);\n  }();\n}, function (e, t, a) {\n  var d = a(6);\n  e.exports = function (e) {\n    switch (e) {\n      case \"en\":\n      default:\n        return d;\n    }\n  };\n}, function (e, t) {\n  e.exports = {\n    name: \"ms-US-International\",\n    normal: [[{\n      value: \"1\",\n      type: \"standard\"\n    }, {\n      value: \"2\",\n      type: \"standard\"\n    }, {\n      value: \"3\",\n      type: \"standard\"\n    }, {\n      value: \"4\",\n      type: \"standard\"\n    }, {\n      value: \"5\",\n      type: \"standard\"\n    }, {\n      value: \"6\",\n      type: \"standard\"\n    }, {\n      value: \"7\",\n      type: \"standard\"\n    }, {\n      value: \"8\",\n      type: \"standard\"\n    }, {\n      value: \"9\",\n      type: \"standard\"\n    }, {\n      value: \"0\",\n      type: \"standard\"\n    }, {\n      value: \"<-\",\n      type: \"delete\"\n    }], [{\n      value: \"q\",\n      type: \"standard\"\n    }, {\n      value: \"w\",\n      type: \"standard\"\n    }, {\n      value: \"e\",\n      type: \"standard\"\n    }, {\n      value: \"r\",\n      type: \"standard\"\n    }, {\n      value: \"t\",\n      type: \"standard\"\n    }, {\n      value: \"y\",\n      type: \"standard\"\n    }, {\n      value: \"u\",\n      type: \"standard\"\n    }, {\n      value: \"i\",\n      type: \"standard\"\n    }, {\n      value: \"o\",\n      type: \"standard\"\n    }, {\n      value: \"p\",\n      type: \"standard\"\n    }, {\n      value: \"Ent\",\n      type: \"enter\"\n    }], [{\n      value: \"a\",\n      type: \"standard\"\n    }, {\n      value: \"s\",\n      type: \"standard\"\n    }, {\n      value: \"d\",\n      type: \"standard\"\n    }, {\n      value: \"f\",\n      type: \"standard\"\n    }, {\n      value: \"g\",\n      type: \"standard\"\n    }, {\n      value: \"h\",\n      type: \"standard\"\n    }, {\n      value: \"j\",\n      type: \"standard\"\n    }, {\n      value: \"k\",\n      type: \"standard\"\n    }, {\n      value: \"l\",\n      type: \"standard\"\n    }, {\n      value: '\"',\n      type: \"standard\"\n    }], [{\n      value: \"Shift\",\n      type: \"shift\"\n    }, {\n      value: \"z\",\n      type: \"standard\"\n    }, {\n      value: \"x\",\n      type: \"standard\"\n    }, {\n      value: \"c\",\n      type: \"standard\"\n    }, {\n      value: \"v\",\n      type: \"standard\"\n    }, {\n      value: \"b\",\n      type: \"standard\"\n    }, {\n      value: \"n\",\n      type: \"standard\"\n    }, {\n      value: \"m\",\n      type: \"standard\"\n    }, {\n      value: \"Alt\",\n      type: \"alt\"\n    }], [{\n      value: \"Cancel\",\n      type: \"cancel\"\n    }, {\n      value: \"\",\n      type: \"space\"\n    }, {\n      value: \",\",\n      type: \"standard\"\n    }, {\n      value: \".\",\n      type: \"standard\"\n    }, {\n      value: \"Submit\",\n      type: \"submit\"\n    }]],\n    shift: [[{\n      value: \"1\",\n      type: \"standard\"\n    }, {\n      value: \"2\",\n      type: \"standard\"\n    }, {\n      value: \"3\",\n      type: \"standard\"\n    }, {\n      value: \"4\",\n      type: \"standard\"\n    }, {\n      value: \"5\",\n      type: \"standard\"\n    }, {\n      value: \"6\",\n      type: \"standard\"\n    }, {\n      value: \"7\",\n      type: \"standard\"\n    }, {\n      value: \"8\",\n      type: \"standard\"\n    }, {\n      value: \"9\",\n      type: \"standard\"\n    }, {\n      value: \"0\",\n      type: \"standard\"\n    }, {\n      value: \"<-\",\n      type: \"delete\"\n    }], [{\n      value: \"Q\",\n      type: \"standard\"\n    }, {\n      value: \"W\",\n      type: \"standard\"\n    }, {\n      value: \"E\",\n      type: \"standard\"\n    }, {\n      value: \"R\",\n      type: \"standard\"\n    }, {\n      value: \"T\",\n      type: \"standard\"\n    }, {\n      value: \"Y\",\n      type: \"standard\"\n    }, {\n      value: \"U\",\n      type: \"standard\"\n    }, {\n      value: \"I\",\n      type: \"standard\"\n    }, {\n      value: \"O\",\n      type: \"standard\"\n    }, {\n      value: \"P\",\n      type: \"standard\"\n    }, {\n      value: \"Ent\",\n      type: \"enter\"\n    }], [{\n      value: \"A\",\n      type: \"standard\"\n    }, {\n      value: \"S\",\n      type: \"standard\"\n    }, {\n      value: \"D\",\n      type: \"standard\"\n    }, {\n      value: \"F\",\n      type: \"standard\"\n    }, {\n      value: \"G\",\n      type: \"standard\"\n    }, {\n      value: \"H\",\n      type: \"standard\"\n    }, {\n      value: \"J\",\n      type: \"standard\"\n    }, {\n      value: \"K\",\n      type: \"standard\"\n    }, {\n      value: \"L\",\n      type: \"standard\"\n    }, {\n      value: '\"',\n      type: \"standard\"\n    }], [{\n      value: \"Shift\",\n      type: \"shift\"\n    }, {\n      value: \"Z\",\n      type: \"standard\"\n    }, {\n      value: \"X\",\n      type: \"standard\"\n    }, {\n      value: \"C\",\n      type: \"standard\"\n    }, {\n      value: \"V\",\n      type: \"standard\"\n    }, {\n      value: \"B\",\n      type: \"standard\"\n    }, {\n      value: \"N\",\n      type: \"standard\"\n    }, {\n      value: \"M\",\n      type: \"standard\"\n    }, {\n      value: \"Alt\",\n      type: \"alt\"\n    }], [{\n      value: \"Cancel\",\n      type: \"cancel\"\n    }, {\n      value: \"\",\n      type: \"space\"\n    }, {\n      value: \",\",\n      type: \"standard\"\n    }, {\n      value: \".\",\n      type: \"standard\"\n    }, {\n      value: \"Submit\",\n      type: \"submit\"\n    }]],\n    alt: [[{\n      value: \"1\",\n      type: \"standard\"\n    }, {\n      value: \"2\",\n      type: \"standard\"\n    }, {\n      value: \"3\",\n      type: \"standard\"\n    }, {\n      value: \"4\",\n      type: \"standard\"\n    }, {\n      value: \"5\",\n      type: \"standard\"\n    }, {\n      value: \"6\",\n      type: \"standard\"\n    }, {\n      value: \"7\",\n      type: \"standard\"\n    }, {\n      value: \"8\",\n      type: \"standard\"\n    }, {\n      value: \"9\",\n      type: \"standard\"\n    }, {\n      value: \"0\",\n      type: \"standard\"\n    }, {\n      value: \"<-\",\n      type: \"delete\"\n    }], [{\n      value: \"~\",\n      type: \"standard\"\n    }, {\n      value: \"`\",\n      type: \"standard\"\n    }, {\n      value: \"|\",\n      type: \"standard\"\n    }, {\n      value: \"(\",\n      type: \"standard\"\n    }, {\n      value: \")\",\n      type: \"standard\"\n    }, {\n      value: \"^\",\n      type: \"standard\"\n    }, {\n      value: \"_\",\n      type: \"standard\"\n    }, {\n      value: \"-\",\n      type: \"standard\"\n    }, {\n      value: \"=\",\n      type: \"standard\"\n    }, {\n      value: \"!\",\n      type: \"standard\"\n    }, {\n      value: \"Ent\",\n      type: \"enter\"\n    }], [{\n      value: \"@\",\n      type: \"standard\"\n    }, {\n      value: \"#\",\n      type: \"standard\"\n    }, {\n      value: \"$\",\n      type: \"standard\"\n    }, {\n      value: \"%\",\n      type: \"standard\"\n    }, {\n      value: \"*\",\n      type: \"standard\"\n    }, {\n      value: \"[\",\n      type: \"standard\"\n    }, {\n      value: \"]\",\n      type: \"standard\"\n    }, {\n      value: \"#\",\n      type: \"standard\"\n    }, {\n      value: \"<\",\n      type: \"standard\"\n    }, {\n      value: \"?\",\n      type: \"standard\"\n    }], [{\n      value: \"Shift\",\n      type: \"shift\"\n    }, {\n      value: \":\",\n      type: \"standard\"\n    }, {\n      value: \";\",\n      type: \"standard\"\n    }, {\n      value: \"{\",\n      type: \"standard\"\n    }, {\n      value: \"}\",\n      type: \"standard\"\n    }, {\n      value: \"/\",\n      type: \"standard\"\n    }, {\n      value: \"\\\\\",\n      type: \"standard\"\n    }, {\n      value: \">\",\n      type: \"standard\"\n    }, {\n      value: \"Alt\",\n      type: \"alt\"\n    }], [{\n      value: \"Cancel\",\n      type: \"cancel\"\n    }, {\n      value: \"\",\n      type: \"space\"\n    }, {\n      value: \",\",\n      type: \"standard\"\n    }, {\n      value: \".\",\n      type: \"standard\"\n    }, {\n      value: \"Submit\",\n      type: \"submit\"\n    }]]\n  };\n}]);\n\n/***/ }),\n\n/***/ \"./src/plugins/eventListenerListPlugin.js\":\n/*!************************************************!*\\\n  !*** ./src/plugins/eventListenerListPlugin.js ***!\n  \\************************************************/\n/***/ (() => {\n\n// https://gist.github.com/stringparser/a3b0555fd915138a0ed3 edited version from DOM2AFrame\n;\n[Element].forEach(function (self) {\n  //self.prototype.eventListenerList = {}; // shared STATIC object across all instances... NOT what we want\n  self.prototype._addEventListener = self.prototype.addEventListener;\n  self.prototype.addEventListener = function (type, handle, useCapture) {\n    if (!this.eventListenerList) this.eventListenerList = {};\n    useCapture = useCapture === void 0 ? false : useCapture;\n    var node = this;\n    node._addEventListener(type, handle, useCapture);\n    if (!node.eventListenerList[type]) {\n      node.eventListenerList[type] = [];\n    }\n    node.eventListenerList[type].push({\n      type: type,\n      handle: handle,\n      useCapture: useCapture,\n      remove: function remove() {\n        node.removeEventListener(this.type, this.handle, this.useCapture);\n        return node.eventListenerList[type];\n      }\n    });\n    if (type != \"eventListenerAdded\" && type != \"eventListenerRemoved\") {\n      var eventDetail = {\n        'type': type,\n        'handle': handle,\n        'useCapture': useCapture\n      };\n      var addedEvent = new CustomEvent(\"eventListenerAdded\", {\n        detail: eventDetail\n      });\n      this.dispatchEvent(addedEvent);\n    }\n  };\n  self.prototype._removeEventListener = self.prototype.removeEventListener;\n  self.prototype.removeEventListener = function (type, handle, useCapture) {\n    if (!this.eventListenerList) this.eventListenerList = {};\n    var node = this;\n    if (!node.eventListenerList[type]) return;\n    node._removeEventListener(type, handle, useCapture);\n    node.eventListenerList[type] = node.eventListenerList[type].filter(function (listener) {\n      return listener && listener.handle && handle && listener.handle.toString() !== handle.toString(); // native event listener API supports empty handles/listeners, but .toString obviously doesn't\n    });\n    if (node.eventListenerList[type].length === 0) {\n      delete node.eventListenerList[type];\n    }\n    if (type != \"eventListenerAdded\" && type != \"eventListenerRemoved\") {\n      var eventDetail = {\n        'type': type,\n        'handle': handle,\n        'useCapture': useCapture\n      };\n      var removedEvent = new CustomEvent(\"eventListenerRemoved\", {\n        detail: eventDetail\n      });\n      this.dispatchEvent(removedEvent);\n    }\n  };\n});\n\n/***/ }),\n\n/***/ \"./src/scroll.js\":\n/*!***********************!*\\\n  !*** ./src/scroll.js ***!\n  \\***********************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_194987__) => {\n\n\"use strict\";\n__nested_webpack_require_194987__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_194987__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Scroll)\n/* harmony export */ });\n/* harmony import */ var _components_scrollbar__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_194987__(/*! ./components/scrollbar */ \"./src/components/scrollbar.js\");\n/* harmony import */ var _components_scrollbar__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_194987__.n(_components_scrollbar__WEBPACK_IMPORTED_MODULE_0__);\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\nvar Scroll = /*#__PURE__*/function () {\n  function Scroll(web2vr) {\n    _classCallCheck(this, Scroll);\n    this.web2vr = web2vr;\n    this.hasScroll = false;\n    this.scrollBody = false;\n    this.scrollContainer = null;\n    if (this.web2vr.settings.scroll) {\n      this.checkScrollbar();\n      if (this.hasScroll) this.createScrollbar();\n    }\n  }\n  return _createClass(Scroll, [{\n    key: \"checkScrollbar\",\n    value: function checkScrollbar() {\n      // entire body scroll\n      var body = document.scrollingElement;\n      // div container scroll\n      var container = this.web2vr.container;\n      if (body.scrollHeight > body.clientHeight) {\n        this.hasScroll = true;\n        this.scrollContainer = body;\n        this.scrollBody = true;\n      } else if (container.element.style.overflow == \"scroll\") {\n        //container.scrollHeight > container.clientHeight\n        this.hasScroll = true;\n        this.scrollContainer = container;\n      }\n    }\n  }, {\n    key: \"createScrollbar\",\n    value: function createScrollbar() {\n      this.scrollbar = document.createElement(\"a-entity\");\n      this.pointer = document.createElement(\"a-plane\");\n      this.pointer.setAttribute(\"material\", \"shader\", \"flat\");\n      this.pointer.setAttribute(\"color\", \"#C1C1C1\");\n      this.plane = document.createElement(\"a-plane\");\n      this.plane.setAttribute(\"material\", \"shader\", \"flat\");\n      this.plane.setAttribute(\"material\", \"side\", \"double\");\n      this.plane.classList.add(this.web2vr.settings.interactiveTag);\n      this.plane.setAttribute(\"color\", \"#F1F1F1\");\n      this.plane.setAttribute(\"width\", 1);\n      this.plane.setAttribute(\"vr-scrollbar\", \"\");\n\n      // pointers for scroll compoment\n      this.plane.web2vr = this.web2vr;\n      this.plane.pointer = this.pointer;\n      this.plane.scrollbar = this.scrollbar;\n      this.plane.appendChild(this.pointer);\n      this.scrollbar.appendChild(this.plane);\n      this.web2vr.aframe.container.appendChild(this.scrollbar);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      // there is no need to show scrollbar if the main container is hidden\n      if (this.hasScroll) {\n        if (this.web2vr.container.element.style.visibility == \"visible\") {\n          this.scrollbar.object3D.visible = true;\n          this.plane.classList.add(this.web2vr.settings.interactiveTag);\n        } else if (this.web2vr.container.element.style.visibility == \"hidden\") {\n          this.scrollbar.object3D.visible = false;\n          this.plane.classList.remove(this.web2vr.settings.interactiveTag);\n        }\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/settings.js\":\n/*!*************************!*\\\n  !*** ./src/settings.js ***!\n  \\*************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_199847__) => {\n\n\"use strict\";\n__nested_webpack_require_199847__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_199847__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Settings)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar Settings = /*#__PURE__*/_createClass(function Settings() {\n  _classCallCheck(this, Settings);\n  this.scale = 600;\n  this.position = {\n    x: 0,\n    y: 2,\n    z: -1\n  };\n  this.rotation = {\n    x: 0,\n    y: 0,\n    z: 0\n  };\n  this.layerStep = 0.0005; // z space between the layers\n\n  this.parentSelector = null;\n  this.interactiveTag = \"vr-interactable\";\n  this.ignoreTags = [\"BR\", \"SOURCE\", \"SCRIPT\", \"AUDIO\", \"NOSCRIPT\"];\n  this.debug = false;\n  this.showClipping = false;\n  this.forceClipping = false;\n  this.experimental = false;\n  this.scroll = true;\n  this.scrollWindowHeight = 800;\n  this.createControllers = true;\n  this.raycasterFar = 5;\n  this.skybox = true;\n  this.border = true;\n});\n\n\n/***/ }),\n\n/***/ \"./src/utils/helper.js\":\n/*!*****************************!*\\\n  !*** ./src/utils/helper.js ***!\n  \\*****************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_202508__) => {\n\n\"use strict\";\n__nested_webpack_require_202508__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_202508__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Helper)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar Helper = /*#__PURE__*/function () {\n  function Helper() {\n    _classCallCheck(this, Helper);\n  }\n  return _createClass(Helper, null, [{\n    key: \"isUrl\",\n    value: function isUrl(string) {\n      var regexp = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n      return regexp.test(string);\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(value, min, max) {\n      return Math.min(max, Math.max(min, value));\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/utils/mouseEventHandler.js\":\n/*!****************************************!*\\\n  !*** ./src/utils/mouseEventHandler.js ***!\n  \\****************************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_204989__) => {\n\n\"use strict\";\n__nested_webpack_require_204989__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_204989__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MouseEventHandler)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar MouseEventHandler = /*#__PURE__*/function () {\n  function MouseEventHandler(element) {\n    _classCallCheck(this, MouseEventHandler);\n    this.element = element;\n    this.listeningForMouseEvents = false;\n    this.resync();\n    this.checkEntityEvents();\n  }\n  return _createClass(MouseEventHandler, [{\n    key: \"resync\",\n    value: function resync() {\n      var mouseEvents = [\"click\", \"mouseenter\", \"mouseleave\", \"mousedown\", \"mouseup\"];\n      var mouseProperties = [\"onclick\", \"onmouseenter\", \"onmouseleave\", \"onmousedown\", \"onmouseup\"];\n      var hasMouseEventRegistered = false;\n      for (var _i = 0, _mouseEvents = mouseEvents; _i < _mouseEvents.length; _i++) {\n        var mouseEvent = _mouseEvents[_i];\n        if (this.element.domElement.eventListenerList && this.element.domElement.eventListenerList[mouseEvent]) {\n          hasMouseEventRegistered = true;\n          break;\n        }\n      }\n      var hasMouseProperty = false;\n      for (var _i2 = 0, _mouseProperties = mouseProperties; _i2 < _mouseProperties.length; _i2++) {\n        var mouseProperty = _mouseProperties[_i2];\n        if (this.element.domElement[mouseProperty]) {\n          hasMouseProperty = true;\n          break;\n        }\n      }\n      if (hasMouseEventRegistered || hasMouseProperty) {\n        if (!this.listeningForMouseEvents) {\n          this.addMouseListeners(mouseEvents);\n          this.listeningForMouseEvents = true;\n        }\n      }\n      // no event handlers or event properties registered, so we can safely remove our listeners\n      else if (this.listeningForMouseEvents) {\n        this.removeMouseListeners(mouseEvents);\n        this.listeningForMouseEvents = false;\n      }\n    }\n  }, {\n    key: \"mouseEventHandler\",\n    value: function mouseEventHandler(evt) {\n      var mouseEvent = new MouseEvent(evt.type, {\n        \"view\": window,\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"target\": this.element.domElement // maybe?\n      });\n      this.element.domElement.dispatchEvent(mouseEvent);\n    }\n  }, {\n    key: \"addMouseListeners\",\n    value: function addMouseListeners(mouseEvents) {\n      var _this = this;\n      mouseEvents.forEach(function (eventName) {\n        _this.element.entity.addEventListener(eventName, _this.mouseEventHandler.bind(_this));\n      });\n    }\n  }, {\n    key: \"removeMouseListeners\",\n    value: function removeMouseListeners(mouseEvents) {\n      var _this2 = this;\n      mouseEvents.forEach(function (eventName) {\n        _this2.element.entity.removeEventListener(eventName, _this2.mouseEventHandler.bind(_this2));\n      });\n    }\n\n    // for hover and input element\n  }, {\n    key: \"checkEntityEvents\",\n    value: function checkEntityEvents() {\n      var mouseEvents = [\"click\", \"mouseenter\", \"mouseleave\", \"mousedown\", \"mouseup\"];\n      for (var _i3 = 0, _mouseEvents2 = mouseEvents; _i3 < _mouseEvents2.length; _i3++) {\n        var mouseEvent = _mouseEvents2[_i3];\n        if (this.element.entity.eventListenerList && this.element.entity.eventListenerList[mouseEvent]) {\n          this.listeningForMouseEvents = true;\n          break;\n        }\n      }\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"./src/utils/position.js\":\n/*!*******************************!*\\\n  !*** ./src/utils/position.js ***!\n  \\*******************************/\n/***/ ((__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_210088__) => {\n\n\"use strict\";\n__nested_webpack_require_210088__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_210088__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Position)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar Position = /*#__PURE__*/function () {\n  function Position(domPosition, depth, scale) {\n    _classCallCheck(this, Position);\n    // depth = z\n    this.depth = depth;\n    this.startDepth = depth;\n    this.scale = scale;\n    this.scrollY = 0;\n    this.updatePosition(domPosition);\n  }\n  return _createClass(Position, [{\n    key: \"updatePosition\",\n    value: function updatePosition(domPosition) {\n      this.domPosition = domPosition;\n      this.aframePosition = this.calculateAFramePosition(this.domPosition);\n    }\n  }, {\n    key: \"calculateAFramePosition\",\n    value: function calculateAFramePosition(domPosition) {\n      // making positions be in center because dom positions are in top left\n      var aframePosition = {\n        x: domPosition.x + domPosition.width / 2,\n        y: domPosition.y + domPosition.height / 2,\n        z: this.depth\n      };\n\n      // scaling\n      aframePosition.x *= this.scalingFactor;\n      aframePosition.y *= this.scalingFactor * -1; // * -1 to match aframe y-axis\n\n      aframePosition.width = domPosition.width * this.scalingFactor;\n      aframePosition.height = domPosition.height * this.scalingFactor;\n      return aframePosition;\n    }\n  }, {\n    key: \"equalsDOMPosition\",\n    value: function equalsDOMPosition(domPosition) {\n      return this.domPosition.top == domPosition.top && this.domPosition.bottom == domPosition.bottom && this.domPosition.left == domPosition.left && this.domPosition.right == domPosition.right;\n    }\n  }, {\n    key: \"scalingFactor\",\n    get: function get() {\n      return 1 / this.scale;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.aframePosition.x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.aframePosition.y + this.scrollY;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this.aframePosition.z;\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.aframePosition.width;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.aframePosition.height;\n    }\n\n    // vector3\n  }, {\n    key: \"xyz\",\n    get: function get() {\n      return {\n        x: this.x,\n        y: this.y,\n        z: this.z\n      };\n    }\n  }, {\n    key: \"left\",\n    get: function get() {\n      return {\n        x: this.x - this.width / 2,\n        y: this.y,\n        z: this.z\n      };\n    }\n  }, {\n    key: \"right\",\n    get: function get() {\n      return {\n        x: this.x + this.width / 2,\n        y: this.y,\n        z: this.z\n      };\n    }\n  }, {\n    key: \"top\",\n    get: function get() {\n      return {\n        x: this.x,\n        y: this.y + this.height / 2,\n        z: this.z\n      };\n    }\n  }, {\n    key: \"bottom\",\n    get: function get() {\n      return {\n        x: this.x,\n        y: this.y - this.height / 2,\n        z: this.z\n      };\n    }\n  }]);\n}();\n\n\n/***/ }),\n\n/***/ \"../node_modules/deepmerge/dist/cjs.js\":\n/*!*********************************************!*\\\n  !*** ../node_modules/deepmerge/dist/cjs.js ***!\n  \\*********************************************/\n/***/ ((module) => {\n\n\"use strict\";\n\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n\n\n/***/ }),\n\n/***/ \"aframe\":\n/*!*************************!*\\\n  !*** external \"aframe\" ***!\n  \\*************************/\n/***/ ((module) => {\n\n\"use strict\";\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_aframe__;\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __nested_webpack_require_219394__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __nested_webpack_require_219394__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__nested_webpack_require_219394__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__nested_webpack_require_219394__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__nested_webpack_require_219394__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__nested_webpack_require_219394__.o(definition, key) && !__nested_webpack_require_219394__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__nested_webpack_require_219394__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__nested_webpack_require_219394__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __nested_webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n(() => {\n\"use strict\";\n/*!***********************!*\\\n  !*** ./src/web2vr.js ***!\n  \\***********************/\n__nested_webpack_require_219394__.r(__nested_webpack_exports__);\n/* harmony export */ __nested_webpack_require_219394__.d(__nested_webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Web2VR)\n/* harmony export */ });\n/* harmony import */ var _plugins_eventListenerListPlugin__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_219394__(/*! ./plugins/eventListenerListPlugin */ \"./src/plugins/eventListenerListPlugin.js\");\n/* harmony import */ var _plugins_eventListenerListPlugin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__nested_webpack_require_219394__.n(_plugins_eventListenerListPlugin__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_219394__(/*! deepmerge */ \"../node_modules/deepmerge/dist/cjs.js\");\n/* harmony import */ var deepmerge__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__nested_webpack_require_219394__.n(deepmerge__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var aframe__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_219394__(/*! aframe */ \"aframe\");\n/* harmony import */ var aframe__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__nested_webpack_require_219394__.n(aframe__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _plugins_aframe_keyboard_min__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_219394__(/*! ./plugins/aframe-keyboard.min */ \"./src/plugins/aframe-keyboard.min.js\");\n/* harmony import */ var _plugins_aframe_keyboard_min__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__nested_webpack_require_219394__.n(_plugins_aframe_keyboard_min__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var super_hands__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_219394__(/*! super-hands */ \"./aframe-super-hands-component/index.js\");\n/* harmony import */ var super_hands__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__nested_webpack_require_219394__.n(super_hands__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_219394__(/*! ./settings */ \"./src/settings.js\");\n/* harmony import */ var _components_border__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_219394__(/*! ./components/border */ \"./src/components/border.js\");\n/* harmony import */ var _components_border__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__nested_webpack_require_219394__.n(_components_border__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _components_animate__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_219394__(/*! ./components/animate */ \"./src/components/animate.js\");\n/* harmony import */ var _components_animate__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__nested_webpack_require_219394__.n(_components_animate__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _components_grabRotateStatic__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_219394__(/*! ./components/grabRotateStatic */ \"./src/components/grabRotateStatic.js\");\n/* harmony import */ var _components_grabRotateStatic__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__nested_webpack_require_219394__.n(_components_grabRotateStatic__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _scroll__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_219394__(/*! ./scroll */ \"./src/scroll.js\");\n/* harmony import */ var _aframeContext__WEBPACK_IMPORTED_MODULE_10__ = __nested_webpack_require_219394__(/*! ./aframeContext */ \"./src/aframeContext.js\");\n/* harmony import */ var _elements_containerElement__WEBPACK_IMPORTED_MODULE_11__ = __nested_webpack_require_219394__(/*! ./elements/containerElement */ \"./src/elements/containerElement.js\");\n/* harmony import */ var _elements_textElement__WEBPACK_IMPORTED_MODULE_12__ = __nested_webpack_require_219394__(/*! ./elements/textElement */ \"./src/elements/textElement.js\");\n/* harmony import */ var _elements_imageElement__WEBPACK_IMPORTED_MODULE_13__ = __nested_webpack_require_219394__(/*! ./elements/imageElement */ \"./src/elements/imageElement.js\");\n/* harmony import */ var _elements_videoElement__WEBPACK_IMPORTED_MODULE_14__ = __nested_webpack_require_219394__(/*! ./elements/videoElement */ \"./src/elements/videoElement.js\");\n/* harmony import */ var _elements_checkboxElement__WEBPACK_IMPORTED_MODULE_15__ = __nested_webpack_require_219394__(/*! ./elements/checkboxElement */ \"./src/elements/checkboxElement.js\");\n/* harmony import */ var _elements_radioElement__WEBPACK_IMPORTED_MODULE_16__ = __nested_webpack_require_219394__(/*! ./elements/radioElement */ \"./src/elements/radioElement.js\");\n/* harmony import */ var _elements_inputElement__WEBPACK_IMPORTED_MODULE_17__ = __nested_webpack_require_219394__(/*! ./elements/inputElement */ \"./src/elements/inputElement.js\");\n/* harmony import */ var _elements_buttonElement__WEBPACK_IMPORTED_MODULE_18__ = __nested_webpack_require_219394__(/*! ./elements/buttonElement */ \"./src/elements/buttonElement.js\");\n/* harmony import */ var _elements_svgElement__WEBPACK_IMPORTED_MODULE_19__ = __nested_webpack_require_219394__(/*! ./elements/svgElement */ \"./src/elements/svgElement.js\");\n/* harmony import */ var _elements_canvasElement__WEBPACK_IMPORTED_MODULE_20__ = __nested_webpack_require_219394__(/*! ./elements/canvasElement */ \"./src/elements/canvasElement.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n // Get all event listeners for DOM elements\n\n\n\n// import \"aframe-gif-shader\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Web2VR = /*#__PURE__*/function () {\n  function Web2VR(container) {\n    var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Web2VR);\n    // main div container\n    if (container.nodeType == Node.ELEMENT_NODE) this.container = container;else this.container = document.querySelector(container);\n\n    // deep merge settings\n    this.settings = deepmerge__WEBPACK_IMPORTED_MODULE_1___default()(new _settings__WEBPACK_IMPORTED_MODULE_5__[\"default\"](), settings, {\n      arrayMerge: function arrayMerge(destination, source) {\n        return [].concat(_toConsumableArray(destination), _toConsumableArray(source));\n      }\n    });\n\n    // aframe context\n    this.aframe = new _aframeContext__WEBPACK_IMPORTED_MODULE_10__[\"default\"](this.settings);\n    // vr elements\n    this.elements = new Set();\n    // set of all the hover css selectors\n    this.hoverSelectors = new Set();\n    this.observer = null;\n    // observer parametars\n    this.observerConfig = {\n      childList: true,\n      subtree: true,\n      characterData: true,\n      attributes: true\n    }; //attributeFilter: [\"style\", \"class\", \"id\"]\n    this.updating = false;\n\n    // experimental only\n    this.html2canvasIDcounter = 0;\n  }\n\n  // find all hover css rules and add {selector}hover class to them\n  return _createClass(Web2VR, [{\n    key: \"findHoverCss\",\n    value: function findHoverCss() {\n      try {\n        for (var _i = 0, _arr = _toConsumableArray(document.styleSheets); _i < _arr.length; _i++) {\n          var styleSheet = _arr[_i];\n          for (var _i2 = 0, _arr2 = _toConsumableArray(styleSheet.cssRules); _i2 < _arr2.length; _i2++) {\n            var rule = _arr2[_i2];\n            if (rule instanceof CSSStyleRule) {\n              var selectors = rule.selectorText.split(\",\");\n              var _iterator = _createForOfIteratorHelper(selectors),\n                _step;\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  var selector = _step.value;\n                  var sel = selector.split(\":\");\n                  // is hover\n                  if (sel[1] == \"hover\") {\n                    var s = sel[0].replace(/\\s/g, '');\n                    if (s[0] == \".\") rule.selectorText += \", \".concat(s, \"hover\");else if (s[0] == \"#\") rule.selectorText += \", .\".concat(s.substr(1), \"hover\");else rule.selectorText += \", .\".concat(s, \"hover\");\n                    this.hoverSelectors.add(s);\n                  }\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n            }\n          }\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n\n    // add all svg needed styles to defs inside svg so we can convert svg to png with all styles applied \n  }, {\n    key: \"generateStyleDefs\",\n    value: function generateStyleDefs(svgDomElement) {\n      var styleDefs = \"\";\n      var sheets = document.styleSheets;\n      for (var i = 0; i < sheets.length; i++) {\n        var rules = sheets[i].cssRules;\n        for (var j = 0; j < rules.length; j++) {\n          var rule = rules[j];\n          if (rule.style) {\n            var selectorText = rule.selectorText;\n            var elems = svgDomElement.querySelectorAll(selectorText);\n            if (elems.length) {\n              styleDefs += selectorText + \" { \" + rule.style.cssText + \" }\\n\";\n            }\n          }\n        }\n      }\n      var s = document.createElement('style');\n      s.setAttribute('type', 'text/css');\n      s.innerHTML = styleDefs;\n      var defs = document.createElement('defs');\n      defs.appendChild(s);\n      svgDomElement.insertBefore(defs, svgDomElement.firstChild);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n      // Return a promise that will resolve when the VR elements are added / scene is loaded.\n      return new Promise(function (resolve, reject) {\n        _this.findHoverCss();\n        if (!_this.aframe.scene.hasLoaded) {\n          _this.aframe.scene.addEventListener(\"loaded\", function (resolve, init, context) {\n            init.call(context);\n            resolve();\n          }(resolve, _this.init, _this), {\n            once: true\n          });\n        } else _this.init().then(function () {\n          resolve();\n        });\n      });\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n      this.aframe.createContainer(this);\n      this.aframe.createSky();\n      this.aframe.createControllers();\n      // scroll feature\n\n      return this.convertToVR().then(function () {\n        _this2.scroll = new _scroll__WEBPACK_IMPORTED_MODULE_9__[\"default\"](_this2);\n        return _this2.allLoadedUpdate();\n      }).then(function () {\n        return _this2.update();\n      });\n    }\n\n    // update once after all images are loaded in the dom\n  }, {\n    key: \"allLoadedUpdate\",\n    value: function allLoadedUpdate() {\n      var _this3 = this;\n      return new Promise(function (resolve, reject) {\n        var interval = setInterval(function () {\n          var allLoaded = true;\n          var _iterator2 = _createForOfIteratorHelper(_this3.elements),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var element = _step2.value;\n              if (element instanceof _elements_imageElement__WEBPACK_IMPORTED_MODULE_13__[\"default\"] && !element.loaded) allLoaded = false;\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n          if (allLoaded) {\n            resolve();\n            clearInterval(interval);\n          }\n        }, 100);\n      });\n    }\n  }, {\n    key: \"addElement\",\n    value: function addElement(domElement, parentElement, layer) {\n      var _this4 = this;\n      // ignore tag if in ignoreTags list or text element(vr-span) is already added\n      if (this.settings.ignoreTags.includes(domElement.tagName) || domElement.classList && domElement.classList.contains(\"vr-span\")) return null;\n      var element = null;\n      // its text node and not empty\n      if (domElement.nodeType == Node.TEXT_NODE && domElement.nodeValue.trim()) {\n        var span = document.createElement(\"span\");\n        span.classList.add(\"vr-span\");\n        span.textContent = domElement.textContent;\n\n        // dont want observer to listen changes when adding(replacing) span text into dom\n        if (this.observer) this.observer.disconnect();\n        domElement.replaceWith(span);\n        if (this.observer) {\n          this.observer.observe(this.container, this.observerConfig);\n          // We need to add the observer to every slot inside the container as well.\n          this.container.querySelectorAll(\"slot\").forEach(function (slot) {\n            _this4.observer.observe(slot, _this4.observerConfig);\n          });\n        }\n        element = new _elements_textElement__WEBPACK_IMPORTED_MODULE_12__[\"default\"](this, span, layer);\n      }\n      // for future convert this to switch statement\n      else if (domElement.tagName == \"VIDEO\") element = new _elements_videoElement__WEBPACK_IMPORTED_MODULE_14__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"IMG\") element = new _elements_imageElement__WEBPACK_IMPORTED_MODULE_13__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"svg\") element = new _elements_svgElement__WEBPACK_IMPORTED_MODULE_19__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"CANVAS\") element = new _elements_canvasElement__WEBPACK_IMPORTED_MODULE_20__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"BUTTON\") element = new _elements_buttonElement__WEBPACK_IMPORTED_MODULE_18__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"TEXTAREA\") element = new _elements_inputElement__WEBPACK_IMPORTED_MODULE_17__[\"default\"](this, domElement, layer);else if (domElement.tagName == \"INPUT\") {\n        var type = domElement.getAttribute(\"type\");\n        if (type == \"checkbox\") element = new _elements_checkboxElement__WEBPACK_IMPORTED_MODULE_15__[\"default\"](this, domElement, layer);else if (type == \"radio\") element = new _elements_radioElement__WEBPACK_IMPORTED_MODULE_16__[\"default\"](this, domElement, layer);else if ([\"text\", \"email\", \"number\", \"password\", \"search\", \"tel\", \"url\"].includes(type)) element = new _elements_inputElement__WEBPACK_IMPORTED_MODULE_17__[\"default\"](this, domElement, layer);else if ([\"button\", \"submit\", \"reset\"].includes(type)) {\n          element = new _elements_buttonElement__WEBPACK_IMPORTED_MODULE_18__[\"default\"](this, domElement, layer);\n        } else return;\n      }\n      // If this element is hosting a shadow root, we want to make sure elements are observed.\n      else if (!!domElement.shadowRoot) {\n        // console.log(\"Shadow root found\", domElement.shadowRoot);\n        this.addElementChildren(domElement.shadowRoot, parentElement, layer);\n      }\n      // any other type of element will be container\n      else if (domElement.nodeType == Node.ELEMENT_NODE) {\n        element = new _elements_containerElement__WEBPACK_IMPORTED_MODULE_11__[\"default\"](this, domElement, layer);\n      } else return;\n      this.elements.add(element);\n      this.aframe.container.appendChild(element.entity);\n      if (this.settings.debug) console.log(\"Added element\", element);\n\n      // init element and add element to parent children when aframe entity is loaded(play)\n      var onLoaded = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                if (parentElement) parentElement.childElements.add(element);\n                element.init();\n                element.update();\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }));\n        return function onLoaded(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      element.entity.addEventListener(\"play\", onLoaded, {\n        once: true\n      });\n      return element;\n    }\n  }, {\n    key: \"removeElement\",\n    value: function removeElement(element) {\n      // remove the element\n      this.aframe.container.removeChild(element.entity);\n      this.elements[\"delete\"](element);\n      // remove all the children of the element recursively\n      var _iterator3 = _createForOfIteratorHelper(element.childElements),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var child = _step3.value;\n          this.removeElement(child);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n\n    // start at root and interate over child nodes recursively\n  }, {\n    key: \"addElementChildren\",\n    value: function addElementChildren(currentNode) {\n      var _this5 = this;\n      var parentElement = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var layer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      return new Promise(function (resolve, reject) {\n        if (currentNode.tagName == \"svg\") _this5.generateStyleDefs(currentNode);\n\n        // If this is a slot element, we're using a web component and need to fetch the child elements using .assignedNodes()\n        if (currentNode.tagName == \"SLOT\") {\n          // Note: we don't increase the layer here because slots don't render directly.\n          // console.log(\"*********Slot element found\");\n          var assignedNodes = currentNode.assignedNodes();\n          var promisesToResolve = [];\n          var _iterator4 = _createForOfIteratorHelper(assignedNodes),\n            _step4;\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var assignedNode = _step4.value;\n              promisesToResolve.push(_this5.addElementChildren(assignedNode, parentElement, layer));\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n          Promise.all(promisesToResolve).then(function () {\n            resolve();\n          });\n        }\n        var element = _this5.addElement(currentNode, parentElement, layer);\n        // not supported tags or svg element that we dont need to check its children\n        if (!element || element instanceof _elements_svgElement__WEBPACK_IMPORTED_MODULE_19__[\"default\"]) return;\n        if (currentNode.childNodes && currentNode.childNodes.length > 0) {\n          layer++;\n          var promisesToResolve = [];\n          var _iterator5 = _createForOfIteratorHelper(currentNode.childNodes),\n            _step5;\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var child = _step5.value;\n              promisesToResolve.push(_this5.addElementChildren(child, element, layer));\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n          Promise.all(promisesToResolve).then(function () {\n            resolve();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"convertToVR\",\n    value: function convertToVR() {\n      var _this6 = this;\n      return new Promise(function (resolve, reject) {\n        _this6.addElementChildren(_this6.container).then(function () {\n          // observer dom element changes and for newly added and deleted dom elements\n          _this6.observer = new MutationObserver(function (mutations) {\n            var _iterator6 = _createForOfIteratorHelper(mutations),\n              _step6;\n            try {\n              for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n                var mutation = _step6.value;\n                console.log(\"Mutation encountered\", mutation);\n                var emptyRemove = false;\n                var _iterator7 = _createForOfIteratorHelper(mutation.removedNodes),\n                  _step7;\n                try {\n                  for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                    var node = _step7.value;\n                    // not empty textNode\n                    if (!(node.nodeType == Node.TEXT_NODE && !node.nodeValue.trim())) _this6.removeElement(node.element);else emptyRemove = true;\n                  }\n                } catch (err) {\n                  _iterator7.e(err);\n                } finally {\n                  _iterator7.f();\n                }\n                var _iterator8 = _createForOfIteratorHelper(mutation.addedNodes),\n                  _step8;\n                try {\n                  for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n                    var _node = _step8.value;\n                    _this6.addElementChildren(_node, mutation.target.element, mutation.target.element.layer + 1);\n                  }\n                } catch (err) {\n                  _iterator8.e(err);\n                } finally {\n                  _iterator8.f();\n                }\n                if (!emptyRemove) {\n                  // when adding new nodes we also need to check for new loaded images\n                  if (mutation.addedNodes.length > 0) _this6.allLoadedUpdate();else _this6.update();\n                }\n\n                // Listen for text changes and update when they occur.\n                if (mutation.type == \"characterData\") {\n                  _this6.update();\n                }\n              }\n            } catch (err) {\n              _iterator6.e(err);\n            } finally {\n              _iterator6.f();\n            }\n          });\n          _this6.observer.observe(_this6.container, _this6.observerConfig);\n\n          // We need to add the observer to every slot inside the container as well.\n          _this6.container.querySelectorAll(\"slot\").forEach(function (slot) {\n            slot.addEventListener(\"slotchange\", function (ev) {\n              // console.log(\"Slot change event\", ev);\n            });\n            _this6.observer.observe(slot, _this6.observerConfig);\n          });\n          resolve();\n        });\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _this7 = this;\n      return new Promise(function (resolve, reject) {\n        // we check for updating so we dont do multiple updating at same time from the async functions\n        _this7.updating = true;\n        if (_this7.updating) {\n          var _this7$scroll;\n          // using try and catch because sometimes when element is removed it calls update after and it wont find element, the errors doesnt matter because the final result is the same\n          try {\n            var _iterator9 = _createForOfIteratorHelper(_this7.elements),\n              _step9;\n            try {\n              for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n                var element = _step9.value;\n                element.update();\n              }\n            } catch (err) {\n              _iterator9.e(err);\n            } finally {\n              _iterator9.f();\n            }\n          } catch (err) {\n            console.error(err);\n          }\n          (_this7$scroll = _this7.scroll) === null || _this7$scroll === void 0 || _this7$scroll.update();\n          _this7.updating = false;\n          resolve();\n        }\n        resolve();\n      });\n    }\n  }]);\n}();\n\n})();\n\n__nested_webpack_exports__ = __nested_webpack_exports__[\"default\"];\n/******/ \treturn __nested_webpack_exports__;\n/******/ })()\n;\n});\n//# sourceMappingURL=web2vr.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA1MS5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uLi93ZWIydnIvZGlzdC93ZWIydnIuanM/MmQzMyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJhZnJhbWVcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiYWZyYW1lXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIldlYjJWUlwiXSA9IGZhY3RvcnkocmVxdWlyZShcImFmcmFtZVwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiV2ViMlZSXCJdID0gZmFjdG9yeShyb290W1wiYWZyYW1lXCJdKTtcbn0pKHNlbGYsIChfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2FmcmFtZV9fKSA9PiB7XG5yZXR1cm4gLyoqKioqKi8gKCgpID0+IHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHR2YXIgX193ZWJwYWNrX21vZHVsZXNfXyA9ICh7XG5cbi8qKiovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX191bnVzZWRfd2VicGFja19leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cbi8qIGdsb2JhbCBBRlJBTUUgKi9cblxuaWYgKHR5cGVvZiBBRlJBTUUgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRocm93IG5ldyBFcnJvcignQ29tcG9uZW50IGF0dGVtcHRlZCB0byByZWdpc3RlciBiZWZvcmUgQUZSQU1FIHdhcyBhdmFpbGFibGUuJyk7XG59XG5fX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3N5c3RlbXMvc3VwZXItaGFuZHMtc3lzdGVtLmpzICovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3N5c3RlbXMvc3VwZXItaGFuZHMtc3lzdGVtLmpzXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdGlvbl9jb21wb25lbnRzL2hvdmVyYWJsZS5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2hvdmVyYWJsZS5qc1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3Rpb25fY29tcG9uZW50cy9ncmFiYmFibGUuanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9ncmFiYmFibGUuanNcIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0aW9uX2NvbXBvbmVudHMvc3RyZXRjaGFibGUuanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9zdHJldGNoYWJsZS5qc1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3Rpb25fY29tcG9uZW50cy9kcmFnLWRyb3BwYWJsZS5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2RyYWctZHJvcHBhYmxlLmpzXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZWFjdGlvbl9jb21wb25lbnRzL2RyYWdnYWJsZS5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2RyYWdnYWJsZS5qc1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVhY3Rpb25fY29tcG9uZW50cy9kcm9wcGFibGUuanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9kcm9wcGFibGUuanNcIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlYWN0aW9uX2NvbXBvbmVudHMvY2xpY2thYmxlLmpzICovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvY2xpY2thYmxlLmpzXCIpO1xuXG4vKipcbiAqIFN1cGVyIEhhbmRzIGNvbXBvbmVudCBmb3IgQS1GcmFtZS5cbiAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdzdXBlci1oYW5kcycsIHtcbiAgc2NoZW1hOiB7XG4gICAgY29sbGlkZXJFdmVudDoge1xuICAgICAgXCJkZWZhdWx0XCI6ICdoaXQnXG4gICAgfSxcbiAgICBjb2xsaWRlckV2ZW50UHJvcGVydHk6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnZWwnXG4gICAgfSxcbiAgICBjb2xsaWRlckVuZEV2ZW50OiB7XG4gICAgICBcImRlZmF1bHRcIjogJ2hpdGVuZCdcbiAgICB9LFxuICAgIGNvbGxpZGVyRW5kRXZlbnRQcm9wZXJ0eToge1xuICAgICAgXCJkZWZhdWx0XCI6ICdlbCdcbiAgICB9LFxuICAgIGdyYWJTdGFydEJ1dHRvbnM6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiBbJ2dyaXBkb3duJywgJ3RyYWNrcGFkZG93bicsICd0cmlnZ2VyZG93bicsICdncmlwY2xvc2UnLCAnYWJ1dHRvbmRvd24nLCAnYmJ1dHRvbmRvd24nLCAneGJ1dHRvbmRvd24nLCAneWJ1dHRvbmRvd24nLCAncG9pbnR1cCcsICd0aHVtYnVwJywgJ3BvaW50aW5nc3RhcnQnLCAncGlzdG9sc3RhcnQnLCAndGh1bWJzdGlja2Rvd24nLCAnbW91c2Vkb3duJywgJ3RvdWNoc3RhcnQnXVxuICAgIH0sXG4gICAgZ3JhYkVuZEJ1dHRvbnM6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiBbJ2dyaXB1cCcsICd0cmFja3BhZHVwJywgJ3RyaWdnZXJ1cCcsICdncmlwb3BlbicsICdhYnV0dG9udXAnLCAnYmJ1dHRvbnVwJywgJ3hidXR0b251cCcsICd5YnV0dG9udXAnLCAncG9pbnRkb3duJywgJ3RodW1iZG93bicsICdwb2ludGluZ2VuZCcsICdwaXN0b2xlbmQnLCAndGh1bWJzdGlja3VwJywgJ21vdXNldXAnLCAndG91Y2hlbmQnXVxuICAgIH0sXG4gICAgc3RyZXRjaFN0YXJ0QnV0dG9uczoge1xuICAgICAgXCJkZWZhdWx0XCI6IFsnZ3JpcGRvd24nLCAndHJhY2twYWRkb3duJywgJ3RyaWdnZXJkb3duJywgJ2dyaXBjbG9zZScsICdhYnV0dG9uZG93bicsICdiYnV0dG9uZG93bicsICd4YnV0dG9uZG93bicsICd5YnV0dG9uZG93bicsICdwb2ludHVwJywgJ3RodW1idXAnLCAncG9pbnRpbmdzdGFydCcsICdwaXN0b2xzdGFydCcsICd0aHVtYnN0aWNrZG93bicsICdtb3VzZWRvd24nLCAndG91Y2hzdGFydCddXG4gICAgfSxcbiAgICBzdHJldGNoRW5kQnV0dG9uczoge1xuICAgICAgXCJkZWZhdWx0XCI6IFsnZ3JpcHVwJywgJ3RyYWNrcGFkdXAnLCAndHJpZ2dlcnVwJywgJ2dyaXBvcGVuJywgJ2FidXR0b251cCcsICdiYnV0dG9udXAnLCAneGJ1dHRvbnVwJywgJ3lidXR0b251cCcsICdwb2ludGRvd24nLCAndGh1bWJkb3duJywgJ3BvaW50aW5nZW5kJywgJ3Bpc3RvbGVuZCcsICd0aHVtYnN0aWNrdXAnLCAnbW91c2V1cCcsICd0b3VjaGVuZCddXG4gICAgfSxcbiAgICBkcmFnRHJvcFN0YXJ0QnV0dG9uczoge1xuICAgICAgXCJkZWZhdWx0XCI6IFsnZ3JpcGRvd24nLCAndHJhY2twYWRkb3duJywgJ3RyaWdnZXJkb3duJywgJ2dyaXBjbG9zZScsICdhYnV0dG9uZG93bicsICdiYnV0dG9uZG93bicsICd4YnV0dG9uZG93bicsICd5YnV0dG9uZG93bicsICdwb2ludHVwJywgJ3RodW1idXAnLCAncG9pbnRpbmdzdGFydCcsICdwaXN0b2xzdGFydCcsICd0aHVtYnN0aWNrZG93bicsICdtb3VzZWRvd24nLCAndG91Y2hzdGFydCddXG4gICAgfSxcbiAgICBkcmFnRHJvcEVuZEJ1dHRvbnM6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiBbJ2dyaXB1cCcsICd0cmFja3BhZHVwJywgJ3RyaWdnZXJ1cCcsICdncmlwb3BlbicsICdhYnV0dG9udXAnLCAnYmJ1dHRvbnVwJywgJ3hidXR0b251cCcsICd5YnV0dG9udXAnLCAncG9pbnRkb3duJywgJ3RodW1iZG93bicsICdwb2ludGluZ2VuZCcsICdwaXN0b2xlbmQnLCAndGh1bWJzdGlja3VwJywgJ21vdXNldXAnLCAndG91Y2hlbmQnXVxuICAgIH0sXG4gICAgaW50ZXJ2YWw6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAwXG4gICAgfVxuICB9LFxuICAvKipcbiAgICogU2V0IGlmIGNvbXBvbmVudCBuZWVkcyBtdWx0aXBsZSBpbnN0YW5jaW5nLlxuICAgKi9cbiAgbXVsdGlwbGU6IGZhbHNlLFxuICAvKipcbiAgICogQ2FsbGVkIG9uY2Ugd2hlbiBjb21wb25lbnQgaXMgYXR0YWNoZWQuIEdlbmVyYWxseSBmb3IgaW5pdGlhbCBzZXR1cC5cbiAgICovXG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgLy8gY29uc3RhbnRzXG4gICAgdGhpcy5IT1ZFUl9FVkVOVCA9ICdob3Zlci1zdGFydCc7XG4gICAgdGhpcy5VTkhPVkVSX0VWRU5UID0gJ2hvdmVyLWVuZCc7XG4gICAgdGhpcy5HUkFCX0VWRU5UID0gJ2dyYWItc3RhcnQnO1xuICAgIHRoaXMuVU5HUkFCX0VWRU5UID0gJ2dyYWItZW5kJztcbiAgICB0aGlzLlNUUkVUQ0hfRVZFTlQgPSAnc3RyZXRjaC1zdGFydCc7XG4gICAgdGhpcy5VTlNUUkVUQ0hfRVZFTlQgPSAnc3RyZXRjaC1lbmQnO1xuICAgIHRoaXMuRFJBR19FVkVOVCA9ICdkcmFnLXN0YXJ0JztcbiAgICB0aGlzLlVORFJBR19FVkVOVCA9ICdkcmFnLWVuZCc7XG4gICAgdGhpcy5EUkFHT1ZFUl9FVkVOVCA9ICdkcmFnb3Zlci1zdGFydCc7XG4gICAgdGhpcy5VTkRSQUdPVkVSX0VWRU5UID0gJ2RyYWdvdmVyLWVuZCc7XG4gICAgdGhpcy5EUkFHRFJPUF9FVkVOVCA9ICdkcmFnLWRyb3AnO1xuXG4gICAgLy8gbGlua3MgdG8gb3RoZXIgc3lzdGVtcy9jb21wb25lbnRzXG4gICAgdGhpcy5vdGhlclN1cGVySGFuZCA9IG51bGw7XG5cbiAgICAvLyBzdGF0ZSB0cmFja2luZyAtIGdsb2JhbCBldmVudCBoYW5kbGVycyAoR0VIKVxuICAgIHRoaXMuZ2VoRHJhZ2dlZCA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLmdlaENsaWNraW5nID0gbmV3IFNldCgpO1xuXG4gICAgLy8gc3RhdGUgdHJhY2tpbmcgLSByZWFjdGlvbiBjb21wb25lbnRzXG4gICAgdGhpcy5ob3ZlckVscyA9IFtdO1xuICAgIHRoaXMuaG92ZXJFbHNJbnRlcnNlY3Rpb25zID0gW107XG4gICAgdGhpcy5wcmV2Q2hlY2tUaW1lID0gbnVsbDtcbiAgICB0aGlzLnN0YXRlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB0aGlzLnVuSG92ZXIgPSB0aGlzLnVuSG92ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLnVuV2F0Y2ggPSB0aGlzLnVuV2F0Y2guYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uSGl0ID0gdGhpcy5vbkhpdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25HcmFiU3RhcnRCdXR0b24gPSB0aGlzLm9uR3JhYlN0YXJ0QnV0dG9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkdyYWJFbmRCdXR0b24gPSB0aGlzLm9uR3JhYkVuZEJ1dHRvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25TdHJldGNoU3RhcnRCdXR0b24gPSB0aGlzLm9uU3RyZXRjaFN0YXJ0QnV0dG9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblN0cmV0Y2hFbmRCdXR0b24gPSB0aGlzLm9uU3RyZXRjaEVuZEJ1dHRvbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25EcmFnRHJvcFN0YXJ0QnV0dG9uID0gdGhpcy5vbkRyYWdEcm9wU3RhcnRCdXR0b24uYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRHJhZ0Ryb3BFbmRCdXR0b24gPSB0aGlzLm9uRHJhZ0Ryb3BFbmRCdXR0b24uYmluZCh0aGlzKTtcbiAgICB0aGlzLnN5c3RlbS5yZWdpc3Rlck1lKHRoaXMpO1xuICB9LFxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gY29tcG9uZW50IGlzIGF0dGFjaGVkIGFuZCB3aGVuIGNvbXBvbmVudCBkYXRhIGNoYW5nZXMuXG4gICAqIEdlbmVyYWxseSBtb2RpZmllcyB0aGUgZW50aXR5IGJhc2VkIG9uIHRoZSBkYXRhLlxuICAgKi9cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUob2xkRGF0YSkge1xuICAgIHRoaXMudW5SZWdpc3Rlckxpc3RlbmVycyhvbGREYXRhKTtcbiAgICB0aGlzLnJlZ2lzdGVyTGlzdGVuZXJzKCk7XG4gIH0sXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGNvbXBvbmVudCBpcyByZW1vdmVkIChlLmcuLCB2aWEgcmVtb3ZlQXR0cmlidXRlKS5cbiAgICogR2VuZXJhbGx5IHVuZG9lcyBhbGwgbW9kaWZpY2F0aW9ucyB0byB0aGUgZW50aXR5LlxuICAgKi9cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgdGhpcy5zeXN0ZW0udW5yZWdpc3Rlck1lKHRoaXMpO1xuICAgIHRoaXMudW5SZWdpc3Rlckxpc3RlbmVycygpO1xuICAgIHRoaXMuaG92ZXJFbHMubGVuZ3RoID0gMDtcbiAgICBpZiAodGhpcy5zdGF0ZS5nZXQodGhpcy5IT1ZFUl9FVkVOVCkpIHtcbiAgICAgIHRoaXMuX3VuSG92ZXIodGhpcy5zdGF0ZS5nZXQodGhpcy5IT1ZFUl9FVkVOVCkpO1xuICAgIH1cbiAgICB0aGlzLm9uR3JhYkVuZEJ1dHRvbigpO1xuICAgIHRoaXMub25TdHJldGNoRW5kQnV0dG9uKCk7XG4gICAgdGhpcy5vbkRyYWdEcm9wRW5kQnV0dG9uKCk7XG4gIH0sXG4gIHRpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBjbG9zZXIgb2JqZWN0cyBhbmQgb2JqZWN0cyB3aXRoIG5vIGRpc3RhbmNlIGNvbWUgbGF0ZXIgaW4gbGlzdFxuICAgIGZ1bmN0aW9uIHNvcnRlcihhLCBiKSB7XG4gICAgICB2YXIgYURpc3QgPSBhLmRpc3RhbmNlID09IG51bGwgPyAtMSA6IGEuZGlzdGFuY2U7XG4gICAgICB2YXIgYkRpc3QgPSBiLmRpc3RhbmNlID09IG51bGwgPyAtMSA6IGIuZGlzdGFuY2U7XG4gICAgICBpZiAoYURpc3QgPCBiRGlzdCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIGlmIChiRGlzdCA8IGFEaXN0KSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgIHZhciBkYXRhID0gdGhpcy5kYXRhO1xuICAgICAgdmFyIHByZXZDaGVja1RpbWUgPSB0aGlzLnByZXZDaGVja1RpbWU7XG4gICAgICBpZiAocHJldkNoZWNrVGltZSAmJiB0aW1lIC0gcHJldkNoZWNrVGltZSA8IGRhdGEuaW50ZXJ2YWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5wcmV2Q2hlY2tUaW1lID0gdGltZTtcbiAgICAgIHZhciBvcmRlckNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaG92ZXJFbHNJbnRlcnNlY3Rpb25zLnNvcnQoc29ydGVyKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ob3ZlckVsc0ludGVyc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMuaG92ZXJFbHNbaV0gIT09IHRoaXMuaG92ZXJFbHNJbnRlcnNlY3Rpb25zW2ldLm9iamVjdC5lbCkge1xuICAgICAgICAgIG9yZGVyQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5ob3ZlckVsc1tpXSA9IHRoaXMuaG92ZXJFbHNJbnRlcnNlY3Rpb25zW2ldLm9iamVjdC5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9yZGVyQ2hhbmdlZCkge1xuICAgICAgICB0aGlzLmhvdmVyKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSgpLFxuICBvbkdyYWJTdGFydEJ1dHRvbjogZnVuY3Rpb24gb25HcmFiU3RhcnRCdXR0b24oZXZ0KSB7XG4gICAgdmFyIGNhcnJpZWQgPSB0aGlzLnN0YXRlLmdldCh0aGlzLkdSQUJfRVZFTlQpO1xuICAgIHRoaXMuZGlzcGF0Y2hNb3VzZUV2ZW50QWxsKCdtb3VzZWRvd24nLCB0aGlzLmVsKTtcbiAgICB0aGlzLmdlaENsaWNraW5nID0gbmV3IFNldCh0aGlzLmhvdmVyRWxzKTtcbiAgICBpZiAoIWNhcnJpZWQpIHtcbiAgICAgIGNhcnJpZWQgPSB0aGlzLmZpbmRUYXJnZXQodGhpcy5HUkFCX0VWRU5ULCB7XG4gICAgICAgIGhhbmQ6IHRoaXMuZWwsXG4gICAgICAgIGJ1dHRvbkV2ZW50OiBldnRcbiAgICAgIH0pO1xuICAgICAgaWYgKGNhcnJpZWQpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXQodGhpcy5HUkFCX0VWRU5ULCBjYXJyaWVkKTtcbiAgICAgICAgdGhpcy5fdW5Ib3ZlcihjYXJyaWVkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIG9uR3JhYkVuZEJ1dHRvbjogZnVuY3Rpb24gb25HcmFiRW5kQnV0dG9uKGV2dCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgdmFyIGNsaWNrYWJsZXMgPSB0aGlzLmhvdmVyRWxzLmZpbHRlcihmdW5jdGlvbiAoaCkge1xuICAgICAgcmV0dXJuIF90aGlzLmdlaENsaWNraW5nLmhhcyhoKTtcbiAgICB9KTtcbiAgICB2YXIgZ3JhYmJlZCA9IHRoaXMuc3RhdGUuZ2V0KHRoaXMuR1JBQl9FVkVOVCk7XG4gICAgdmFyIGVuZEV2dCA9IHtcbiAgICAgIGhhbmQ6IHRoaXMuZWwsXG4gICAgICBidXR0b25FdmVudDogZXZ0XG4gICAgfTtcbiAgICB0aGlzLmRpc3BhdGNoTW91c2VFdmVudEFsbCgnbW91c2V1cCcsIHRoaXMuZWwpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xpY2thYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5kaXNwYXRjaE1vdXNlRXZlbnQoY2xpY2thYmxlc1tpXSwgJ2NsaWNrJywgdGhpcy5lbCk7XG4gICAgfVxuICAgIHRoaXMuZ2VoQ2xpY2tpbmcuY2xlYXIoKTtcbiAgICAvLyBjaGVjayBpZiBncmFiYmVkIGVudGl0eSBhY2NlcHRzIHVuZ3JhYiBldmVudFxuICAgIGlmIChncmFiYmVkICYmICF0aGlzLmVtaXRDYW5jZWxhYmxlKGdyYWJiZWQsIHRoaXMuVU5HUkFCX0VWRU5ULCBlbmRFdnQpKSB7XG4gICAgICAvKiBwdXNoIHRvIHRvcCBvZiBzdGFjayBzbyBhIGRyb3AgZm9sbG93ZWQgYnkgcmUtZ3JhYiBnZXRzIHRoZSBzYW1lXG4gICAgICAgICB0YXJnZXQgKi9cbiAgICAgIHRoaXMucHJvbW90ZUhvdmVyZWRFbCh0aGlzLnN0YXRlLmdldCh0aGlzLkdSQUJfRVZFTlQpKTtcbiAgICAgIHRoaXMuc3RhdGVbXCJkZWxldGVcIl0odGhpcy5HUkFCX0VWRU5UKTtcbiAgICAgIHRoaXMuaG92ZXIoKTtcbiAgICB9XG4gIH0sXG4gIG9uU3RyZXRjaFN0YXJ0QnV0dG9uOiBmdW5jdGlvbiBvblN0cmV0Y2hTdGFydEJ1dHRvbihldnQpIHtcbiAgICB2YXIgc3RyZXRjaGVkID0gdGhpcy5zdGF0ZS5nZXQodGhpcy5TVFJFVENIX0VWRU5UKTtcbiAgICBpZiAoIXN0cmV0Y2hlZCkge1xuICAgICAgc3RyZXRjaGVkID0gdGhpcy5maW5kVGFyZ2V0KHRoaXMuU1RSRVRDSF9FVkVOVCwge1xuICAgICAgICBoYW5kOiB0aGlzLmVsLFxuICAgICAgICBidXR0b25FdmVudDogZXZ0XG4gICAgICB9KTtcbiAgICAgIGlmIChzdHJldGNoZWQpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXQodGhpcy5TVFJFVENIX0VWRU5ULCBzdHJldGNoZWQpO1xuICAgICAgICB0aGlzLl91bkhvdmVyKHN0cmV0Y2hlZCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBvblN0cmV0Y2hFbmRCdXR0b246IGZ1bmN0aW9uIG9uU3RyZXRjaEVuZEJ1dHRvbihldnQpIHtcbiAgICB2YXIgc3RyZXRjaGVkID0gdGhpcy5zdGF0ZS5nZXQodGhpcy5TVFJFVENIX0VWRU5UKTtcbiAgICB2YXIgZW5kRXZ0ID0ge1xuICAgICAgaGFuZDogdGhpcy5lbCxcbiAgICAgIGJ1dHRvbkV2ZW50OiBldnRcbiAgICB9O1xuICAgIC8vIGNoZWNrIGlmIGVuZCBldmVudCBhY2NlcHRlZFxuICAgIGlmIChzdHJldGNoZWQgJiYgIXRoaXMuZW1pdENhbmNlbGFibGUoc3RyZXRjaGVkLCB0aGlzLlVOU1RSRVRDSF9FVkVOVCwgZW5kRXZ0KSkge1xuICAgICAgdGhpcy5wcm9tb3RlSG92ZXJlZEVsKHN0cmV0Y2hlZCk7XG4gICAgICB0aGlzLnN0YXRlW1wiZGVsZXRlXCJdKHRoaXMuU1RSRVRDSF9FVkVOVCk7XG4gICAgICB0aGlzLmhvdmVyKCk7XG4gICAgfVxuICB9LFxuICBvbkRyYWdEcm9wU3RhcnRCdXR0b246IGZ1bmN0aW9uIG9uRHJhZ0Ryb3BTdGFydEJ1dHRvbihldnQpIHtcbiAgICB2YXIgZHJhZ2dlZCA9IHRoaXMuc3RhdGUuZ2V0KHRoaXMuRFJBR19FVkVOVCk7XG4gICAgdGhpcy5kcmFnZ2luZyA9IHRydWU7XG4gICAgaWYgKHRoaXMuaG92ZXJFbHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmdlaERyYWdnZWQgPSBuZXcgU2V0KHRoaXMuaG92ZXJFbHMpO1xuICAgICAgdGhpcy5kaXNwYXRjaE1vdXNlRXZlbnRBbGwoJ2RyYWdzdGFydCcsIHRoaXMuZWwpO1xuICAgIH1cbiAgICBpZiAoIWRyYWdnZWQpIHtcbiAgICAgIC8qIHByZWZlciBjYXJyaWVkIHNvIHRoYXQgYSBkcmFnIHN0YXJ0ZWQgYWZ0ZXIgYSBncmFiIHdpbGwgd29ya1xuICAgICAgIHdpdGggY2FycmllZCBlbGVtZW50IHJhdGhlciB0aGFuIGEgY3VycmVudGx5IGludGVyc2VjdGVkIGRyb3AgdGFyZ2V0LlxuICAgICAgIGZhbGwgYmFjayB0byBxdWV1ZSBpbiBjYXNlIGEgZHJhZyBpcyBpbml0aWF0ZWQgaW5kZXBlbmRlbnRcbiAgICAgICBvZiBhIGdyYWIgKi9cbiAgICAgIGlmICh0aGlzLnN0YXRlLmdldCh0aGlzLkdSQUJfRVZFTlQpICYmICF0aGlzLmVtaXRDYW5jZWxhYmxlKHRoaXMuc3RhdGUuZ2V0KHRoaXMuR1JBQl9FVkVOVCksIHRoaXMuRFJBR19FVkVOVCwge1xuICAgICAgICBoYW5kOiB0aGlzLmVsLFxuICAgICAgICBidXR0b25FdmVudDogZXZ0XG4gICAgICB9KSkge1xuICAgICAgICBkcmFnZ2VkID0gdGhpcy5zdGF0ZS5nZXQodGhpcy5HUkFCX0VWRU5UKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYWdnZWQgPSB0aGlzLmZpbmRUYXJnZXQodGhpcy5EUkFHX0VWRU5ULCB7XG4gICAgICAgICAgaGFuZDogdGhpcy5lbCxcbiAgICAgICAgICBidXR0b25FdmVudDogZXZ0XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGRyYWdnZWQpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZXQodGhpcy5EUkFHX0VWRU5ULCBkcmFnZ2VkKTtcbiAgICAgICAgdGhpcy5fdW5Ib3ZlcihkcmFnZ2VkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIG9uRHJhZ0Ryb3BFbmRCdXR0b246IGZ1bmN0aW9uIG9uRHJhZ0Ryb3BFbmRCdXR0b24oZXZ0KSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgdmFyIGNhcnJpZWQgPSB0aGlzLnN0YXRlLmdldCh0aGlzLkRSQUdfRVZFTlQpO1xuICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTsgLy8ga2VlcCBfdW5Ib3ZlcigpIGZyb20gYWN0aXZhdGluZyBhbm90aGVyIGRyb3B0YXJnZXRcbiAgICB0aGlzLmdlaERyYWdnZWQuZm9yRWFjaChmdW5jdGlvbiAoY2FycmllZCkge1xuICAgICAgX3RoaXMyLmRpc3BhdGNoTW91c2VFdmVudChjYXJyaWVkLCAnZHJhZ2VuZCcsIF90aGlzMi5lbCk7XG4gICAgICAvLyBmaXJlIGV2ZW50IGJvdGggd2F5cyBmb3IgYWxsIGludGVyc2VjdGVkIHRhcmdldHNcbiAgICAgIF90aGlzMi5kaXNwYXRjaE1vdXNlRXZlbnRBbGwoJ2Ryb3AnLCBjYXJyaWVkLCB0cnVlLCB0cnVlKTtcbiAgICAgIF90aGlzMi5kaXNwYXRjaE1vdXNlRXZlbnRBbGwoJ2RyYWdsZWF2ZScsIGNhcnJpZWQsIHRydWUsIHRydWUpO1xuICAgIH0pO1xuICAgIHRoaXMuZ2VoRHJhZ2dlZC5jbGVhcigpO1xuICAgIGlmIChjYXJyaWVkKSB7XG4gICAgICB2YXIgZGRFdnQgPSB7XG4gICAgICAgIGhhbmQ6IHRoaXMuZWwsXG4gICAgICAgIGRyb3BwZWQ6IGNhcnJpZWQsXG4gICAgICAgIG9uOiBudWxsLFxuICAgICAgICBidXR0b25FdmVudDogZXZ0XG4gICAgICB9O1xuICAgICAgdmFyIGVuZEV2dCA9IHtcbiAgICAgICAgaGFuZDogdGhpcy5lbCxcbiAgICAgICAgYnV0dG9uRXZlbnQ6IGV2dFxuICAgICAgfTtcbiAgICAgIHZhciBkcm9wVGFyZ2V0ID0gdGhpcy5maW5kVGFyZ2V0KHRoaXMuRFJBR0RST1BfRVZFTlQsIGRkRXZ0LCB0cnVlKTtcbiAgICAgIGlmIChkcm9wVGFyZ2V0KSB7XG4gICAgICAgIGRkRXZ0Lm9uID0gZHJvcFRhcmdldDtcbiAgICAgICAgdGhpcy5lbWl0Q2FuY2VsYWJsZShjYXJyaWVkLCB0aGlzLkRSQUdEUk9QX0VWRU5ULCBkZEV2dCk7XG4gICAgICAgIHRoaXMuX3VuSG92ZXIoZHJvcFRhcmdldCk7XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBpZiBlbmQgZXZlbnQgYWNjZXB0ZWRcbiAgICAgIGlmICghdGhpcy5lbWl0Q2FuY2VsYWJsZShjYXJyaWVkLCB0aGlzLlVORFJBR19FVkVOVCwgZW5kRXZ0KSkge1xuICAgICAgICB0aGlzLnByb21vdGVIb3ZlcmVkRWwoY2FycmllZCk7XG4gICAgICAgIHRoaXMuc3RhdGVbXCJkZWxldGVcIl0odGhpcy5EUkFHX0VWRU5UKTtcbiAgICAgICAgdGhpcy5ob3ZlcigpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgcHJvY2Vzc0hpdEVsOiBmdW5jdGlvbiBwcm9jZXNzSGl0RWwoaGl0RWwsIGludGVyc2VjdGlvbikge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuICAgIHZhciBkaXN0ID0gaW50ZXJzZWN0aW9uICYmIGludGVyc2VjdGlvbi5kaXN0YW5jZTtcbiAgICB2YXIgc2VjdHMgPSB0aGlzLmhvdmVyRWxzSW50ZXJzZWN0aW9ucztcbiAgICB2YXIgaG92ZXJFbHMgPSB0aGlzLmhvdmVyRWxzO1xuICAgIHZhciBoaXRFbEluZGV4ID0gdGhpcy5ob3ZlckVscy5pbmRleE9mKGhpdEVsKTtcbiAgICB2YXIgaG92ZXJOZWVkc1VwZGF0ZSA9IGZhbHNlO1xuICAgIGlmIChoaXRFbEluZGV4ID09PSAtMSkge1xuICAgICAgaG92ZXJOZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAvLyBpbnNlcnQgaW4gb3JkZXIgb2YgZGlzdGFuY2Ugd2hlbiBhdmFpbGFibGVcbiAgICAgIGlmIChkaXN0ICE9IG51bGwpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IHNlY3RzLmxlbmd0aCAmJiBkaXN0IDwgc2VjdHNbaV0uZGlzdGFuY2UpIHtcbiAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgICAgaG92ZXJFbHMuc3BsaWNlKGksIDAsIGhpdEVsKTtcbiAgICAgICAgc2VjdHMuc3BsaWNlKGksIDAsIGludGVyc2VjdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBob3ZlckVscy5wdXNoKGhpdEVsKTtcbiAgICAgICAgc2VjdHMucHVzaCh7XG4gICAgICAgICAgb2JqZWN0OiB7XG4gICAgICAgICAgICBlbDogaGl0RWxcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5kaXNwYXRjaE1vdXNlRXZlbnQoaGl0RWwsICdtb3VzZW92ZXInLCB0aGlzLmVsKTtcbiAgICAgIGlmICh0aGlzLmRyYWdnaW5nICYmIHRoaXMuZ2VoRHJhZ2dlZC5zaXplKSB7XG4gICAgICAgIC8vIGV2ZW50cyBvbiB0YXJnZXRzIGFuZCBvbiBkcmFnZ2VkXG4gICAgICAgIHRoaXMuZ2VoRHJhZ2dlZC5mb3JFYWNoKGZ1bmN0aW9uIChkcmFnZ2VkKSB7XG4gICAgICAgICAgX3RoaXMzLmRpc3BhdGNoTW91c2VFdmVudEFsbCgnZHJhZ2VudGVyJywgZHJhZ2dlZCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaG92ZXJOZWVkc1VwZGF0ZTtcbiAgfSxcbiAgb25IaXQ6IGZ1bmN0aW9uIG9uSGl0KGV2dCkge1xuICAgIHZhciBoaXRFbCA9IGV2dC5kZXRhaWxbdGhpcy5kYXRhLmNvbGxpZGVyRXZlbnRQcm9wZXJ0eV07XG4gICAgdmFyIGhvdmVyTmVlZHNVcGRhdGUgPSAwO1xuICAgIGlmICghaGl0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaGl0RWwpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgc2VjdDsgaSA8IGhpdEVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNlY3QgPSBldnQuZGV0YWlsLmludGVyc2VjdGlvbnMgJiYgZXZ0LmRldGFpbC5pbnRlcnNlY3Rpb25zW2ldO1xuICAgICAgICBob3Zlck5lZWRzVXBkYXRlICs9IHRoaXMucHJvY2Vzc0hpdEVsKGhpdEVsW2ldLCBzZWN0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaG92ZXJOZWVkc1VwZGF0ZSArPSB0aGlzLnByb2Nlc3NIaXRFbChoaXRFbCwgbnVsbCk7XG4gICAgfVxuICAgIGlmIChob3Zlck5lZWRzVXBkYXRlKSB7XG4gICAgICB0aGlzLmhvdmVyKCk7XG4gICAgfVxuICB9LFxuICAvKiBzZWFyY2ggY29sbGlkZWQgZW50aXRpZXMgZm9yIHRhcmdldCB0byBob3Zlci9kcmFnb3ZlciAqL1xuICBob3ZlcjogZnVuY3Rpb24gaG92ZXIoKSB7XG4gICAgdmFyIGh2cmV2dCwgaG92ZXJFbDtcbiAgICAvLyBlbmQgcHJldmlvdXMgaG92ZXJcbiAgICBpZiAodGhpcy5zdGF0ZS5oYXModGhpcy5IT1ZFUl9FVkVOVCkpIHtcbiAgICAgIHRoaXMuX3VuSG92ZXIodGhpcy5zdGF0ZS5nZXQodGhpcy5IT1ZFUl9FVkVOVCksIHRydWUpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZS5oYXModGhpcy5EUkFHT1ZFUl9FVkVOVCkpIHtcbiAgICAgIHRoaXMuX3VuSG92ZXIodGhpcy5zdGF0ZS5nZXQodGhpcy5EUkFHT1ZFUl9FVkVOVCksIHRydWUpO1xuICAgIH1cbiAgICBpZiAodGhpcy5kcmFnZ2luZyAmJiB0aGlzLnN0YXRlLmdldCh0aGlzLkRSQUdfRVZFTlQpKSB7XG4gICAgICBodnJldnQgPSB7XG4gICAgICAgIGhhbmQ6IHRoaXMuZWwsXG4gICAgICAgIGhvdmVyZWQ6IGhvdmVyRWwsXG4gICAgICAgIGNhcnJpZWQ6IHRoaXMuc3RhdGUuZ2V0KHRoaXMuRFJBR19FVkVOVClcbiAgICAgIH07XG4gICAgICBob3ZlckVsID0gdGhpcy5maW5kVGFyZ2V0KHRoaXMuRFJBR09WRVJfRVZFTlQsIGh2cmV2dCwgdHJ1ZSk7XG4gICAgICBpZiAoaG92ZXJFbCkge1xuICAgICAgICB0aGlzLmVtaXRDYW5jZWxhYmxlKHRoaXMuc3RhdGUuZ2V0KHRoaXMuRFJBR19FVkVOVCksIHRoaXMuRFJBR09WRVJfRVZFTlQsIGh2cmV2dCk7XG4gICAgICAgIHRoaXMuc3RhdGUuc2V0KHRoaXMuRFJBR09WRVJfRVZFTlQsIGhvdmVyRWwpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBmYWxsYmFjayB0byBob3ZlciBpZiBub3QgZHJhZ2dpbmcgb3IgZHJhZ292ZXIgd2Fzbid0IHN1Y2Nlc3NmdWxcbiAgICBpZiAoIXRoaXMuc3RhdGUuaGFzKHRoaXMuRFJBR09WRVJfRVZFTlQpKSB7XG4gICAgICBob3ZlckVsID0gdGhpcy5maW5kVGFyZ2V0KHRoaXMuSE9WRVJfRVZFTlQsIHtcbiAgICAgICAgaGFuZDogdGhpcy5lbFxuICAgICAgfSwgdHJ1ZSk7XG4gICAgICBpZiAoaG92ZXJFbCkge1xuICAgICAgICB0aGlzLnN0YXRlLnNldCh0aGlzLkhPVkVSX0VWRU5ULCBob3ZlckVsKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIC8qIGNhbGxlZCB3aGVuIGNvbnRyb2xsZXIgbW92ZXMgb3V0IG9mIGNvbGxpc2lvbiByYW5nZSBvZiBlbnRpdHkgKi9cbiAgdW5Ib3ZlcjogZnVuY3Rpb24gdW5Ib3ZlcihldnQpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcbiAgICB2YXIgY2xlYXJlZEVscyA9IGV2dC5kZXRhaWxbdGhpcy5kYXRhLmNvbGxpZGVyRW5kRXZlbnRQcm9wZXJ0eV07XG4gICAgaWYgKGNsZWFyZWRFbHMpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNsZWFyZWRFbHMpKSB7XG4gICAgICAgIGNsZWFyZWRFbHMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM0Ll91bkhvdmVyKGVsKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl91bkhvdmVyKGNsZWFyZWRFbHMpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgLyogaW5uZXIgdW5Ib3ZlciBzdGVwcyBuZWVkZWQgcmVnYXJkbGVzcyBvZiBjYXVzZSBvZiB1bkhvdmVyICovXG4gIF91bkhvdmVyOiBmdW5jdGlvbiBfdW5Ib3ZlcihlbCwgc2tpcE5leHRIb3Zlcikge1xuICAgIHZhciB1bkhvdmVyZWQgPSBmYWxzZTtcbiAgICB2YXIgZXZ0O1xuICAgIGlmIChlbCA9PT0gdGhpcy5zdGF0ZS5nZXQodGhpcy5EUkFHT1ZFUl9FVkVOVCkpIHtcbiAgICAgIHRoaXMuc3RhdGVbXCJkZWxldGVcIl0odGhpcy5EUkFHT1ZFUl9FVkVOVCk7XG4gICAgICB1bkhvdmVyZWQgPSB0cnVlO1xuICAgICAgZXZ0ID0ge1xuICAgICAgICBoYW5kOiB0aGlzLmVsLFxuICAgICAgICBob3ZlcmVkOiBlbCxcbiAgICAgICAgY2FycmllZDogdGhpcy5zdGF0ZS5nZXQodGhpcy5EUkFHX0VWRU5UKVxuICAgICAgfTtcbiAgICAgIHRoaXMuZW1pdENhbmNlbGFibGUoZWwsIHRoaXMuVU5EUkFHT1ZFUl9FVkVOVCwgZXZ0KTtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmhhcyh0aGlzLkRSQUdfRVZFTlQpKSB7XG4gICAgICAgIHRoaXMuZW1pdENhbmNlbGFibGUodGhpcy5zdGF0ZS5nZXQodGhpcy5EUkFHX0VWRU5UKSwgdGhpcy5VTkRSQUdPVkVSX0VWRU5ULCBldnQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZWwgPT09IHRoaXMuc3RhdGUuZ2V0KHRoaXMuSE9WRVJfRVZFTlQpKSB7XG4gICAgICB0aGlzLnN0YXRlW1wiZGVsZXRlXCJdKHRoaXMuSE9WRVJfRVZFTlQpO1xuICAgICAgdW5Ib3ZlcmVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZW1pdENhbmNlbGFibGUoZWwsIHRoaXMuVU5IT1ZFUl9FVkVOVCwge1xuICAgICAgICBoYW5kOiB0aGlzLmVsXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gYWN0aXZhdGUgbmV4dCB0YXJnZXQsIGlmIHByZXNlbnRcbiAgICBpZiAodW5Ib3ZlcmVkICYmICFza2lwTmV4dEhvdmVyKSB7XG4gICAgICB0aGlzLmhvdmVyKCk7XG4gICAgfVxuICB9LFxuICB1bldhdGNoOiBmdW5jdGlvbiB1bldhdGNoKGV2dCkge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuICAgIHZhciBjbGVhcmVkRWxzID0gZXZ0LmRldGFpbFt0aGlzLmRhdGEuY29sbGlkZXJFbmRFdmVudFByb3BlcnR5XTtcbiAgICBpZiAoY2xlYXJlZEVscykge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2xlYXJlZEVscykpIHtcbiAgICAgICAgY2xlYXJlZEVscy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczUuX3VuV2F0Y2goZWwpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRlcHJlY2F0aW9uIHBhdGg6IHNwaGVyZS1jb2xsaWRlclxuICAgICAgICB0aGlzLl91bldhdGNoKGNsZWFyZWRFbHMpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgX3VuV2F0Y2g6IGZ1bmN0aW9uIF91bldhdGNoKHRhcmdldCkge1xuICAgIHZhciBfdGhpczYgPSB0aGlzO1xuICAgIHZhciBob3ZlckluZGV4ID0gdGhpcy5ob3ZlckVscy5pbmRleE9mKHRhcmdldCk7XG4gICAgaWYgKGhvdmVySW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLmhvdmVyRWxzLnNwbGljZShob3ZlckluZGV4LCAxKTtcbiAgICAgIHRoaXMuaG92ZXJFbHNJbnRlcnNlY3Rpb25zLnNwbGljZShob3ZlckluZGV4LCAxKTtcbiAgICB9XG4gICAgdGhpcy5nZWhEcmFnZ2VkLmZvckVhY2goZnVuY3Rpb24gKGRyYWdnZWQpIHtcbiAgICAgIF90aGlzNi5kaXNwYXRjaE1vdXNlRXZlbnQodGFyZ2V0LCAnZHJhZ2xlYXZlJywgZHJhZ2dlZCk7XG4gICAgICBfdGhpczYuZGlzcGF0Y2hNb3VzZUV2ZW50KGRyYWdnZWQsICdkcmFnbGVhdmUnLCB0YXJnZXQpO1xuICAgIH0pO1xuICAgIHRoaXMuZGlzcGF0Y2hNb3VzZUV2ZW50KHRhcmdldCwgJ21vdXNlb3V0JywgdGhpcy5lbCk7XG4gIH0sXG4gIHJlZ2lzdGVyTGlzdGVuZXJzOiBmdW5jdGlvbiByZWdpc3Rlckxpc3RlbmVycygpIHtcbiAgICB2YXIgX3RoaXM3ID0gdGhpcztcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5kYXRhLmNvbGxpZGVyRXZlbnQsIHRoaXMub25IaXQpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmRhdGEuY29sbGlkZXJFbmRFdmVudCwgdGhpcy51bldhdGNoKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5kYXRhLmNvbGxpZGVyRW5kRXZlbnQsIHRoaXMudW5Ib3Zlcik7XG5cbiAgICAvLyBiaW5kaW5nIG9yZGVyIHRvIGtlZXAgZ3JhYkVuZCBmcm9tIHRyaWdnZXJpbmcgZHJhZ292ZXJcbiAgICAvLyBhZ2FpbiBiZWZvcmUgZHJhZ0Ryb3BFbmQgY2FuIGRlbGV0ZSBpdHMgY2FycmllZCBzdGF0ZVxuICAgIHRoaXMuZGF0YS5ncmFiU3RhcnRCdXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICAgIF90aGlzNy5lbC5hZGRFdmVudExpc3RlbmVyKGIsIF90aGlzNy5vbkdyYWJTdGFydEJ1dHRvbik7XG4gICAgfSk7XG4gICAgdGhpcy5kYXRhLnN0cmV0Y2hTdGFydEJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgX3RoaXM3LmVsLmFkZEV2ZW50TGlzdGVuZXIoYiwgX3RoaXM3Lm9uU3RyZXRjaFN0YXJ0QnV0dG9uKTtcbiAgICB9KTtcbiAgICB0aGlzLmRhdGEuZHJhZ0Ryb3BTdGFydEJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgX3RoaXM3LmVsLmFkZEV2ZW50TGlzdGVuZXIoYiwgX3RoaXM3Lm9uRHJhZ0Ryb3BTdGFydEJ1dHRvbik7XG4gICAgfSk7XG4gICAgdGhpcy5kYXRhLmRyYWdEcm9wRW5kQnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICBfdGhpczcuZWwuYWRkRXZlbnRMaXN0ZW5lcihiLCBfdGhpczcub25EcmFnRHJvcEVuZEJ1dHRvbik7XG4gICAgfSk7XG4gICAgdGhpcy5kYXRhLnN0cmV0Y2hFbmRCdXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICAgIF90aGlzNy5lbC5hZGRFdmVudExpc3RlbmVyKGIsIF90aGlzNy5vblN0cmV0Y2hFbmRCdXR0b24pO1xuICAgIH0pO1xuICAgIHRoaXMuZGF0YS5ncmFiRW5kQnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICBfdGhpczcuZWwuYWRkRXZlbnRMaXN0ZW5lcihiLCBfdGhpczcub25HcmFiRW5kQnV0dG9uKTtcbiAgICB9KTtcbiAgfSxcbiAgdW5SZWdpc3Rlckxpc3RlbmVyczogZnVuY3Rpb24gdW5SZWdpc3Rlckxpc3RlbmVycyhkYXRhKSB7XG4gICAgdmFyIF90aGlzOCA9IHRoaXM7XG4gICAgZGF0YSA9IGRhdGEgfHwgdGhpcy5kYXRhO1xuICAgIGlmIChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIEVtcHR5IG9iamVjdCBwYXNzZWQgb24gaW5pdGFsaXphdGlvblxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZGF0YS5jb2xsaWRlckV2ZW50LCB0aGlzLm9uSGl0KTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZGF0YS5jb2xsaWRlckVuZEV2ZW50LCB0aGlzLnVuSG92ZXIpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihkYXRhLmNvbGxpZGVyRW5kRXZlbnQsIHRoaXMudW5XYXRjaCk7XG4gICAgZGF0YS5ncmFiU3RhcnRCdXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICAgIF90aGlzOC5lbC5yZW1vdmVFdmVudExpc3RlbmVyKGIsIF90aGlzOC5vbkdyYWJTdGFydEJ1dHRvbik7XG4gICAgfSk7XG4gICAgZGF0YS5ncmFiRW5kQnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICBfdGhpczguZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLCBfdGhpczgub25HcmFiRW5kQnV0dG9uKTtcbiAgICB9KTtcbiAgICBkYXRhLnN0cmV0Y2hTdGFydEJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgX3RoaXM4LmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoYiwgX3RoaXM4Lm9uU3RyZXRjaFN0YXJ0QnV0dG9uKTtcbiAgICB9KTtcbiAgICBkYXRhLnN0cmV0Y2hFbmRCdXR0b25zLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICAgIF90aGlzOC5lbC5yZW1vdmVFdmVudExpc3RlbmVyKGIsIF90aGlzOC5vblN0cmV0Y2hFbmRCdXR0b24pO1xuICAgIH0pO1xuICAgIGRhdGEuZHJhZ0Ryb3BTdGFydEJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgX3RoaXM4LmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoYiwgX3RoaXM4Lm9uRHJhZ0Ryb3BTdGFydEJ1dHRvbik7XG4gICAgfSk7XG4gICAgZGF0YS5kcmFnRHJvcEVuZEJ1dHRvbnMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgX3RoaXM4LmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoYiwgX3RoaXM4Lm9uRHJhZ0Ryb3BFbmRCdXR0b24pO1xuICAgIH0pO1xuICB9LFxuICBlbWl0Q2FuY2VsYWJsZTogZnVuY3Rpb24gZW1pdENhbmNlbGFibGUodGFyZ2V0LCBuYW1lLCBkZXRhaWwpIHtcbiAgICBkZXRhaWwgPSBkZXRhaWwgfHwge307XG4gICAgdmFyIGRhdGEgPSB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIGRldGFpbDogZGV0YWlsXG4gICAgfTtcbiAgICBkYXRhLmRldGFpbC50YXJnZXQgPSBkYXRhLmRldGFpbC50YXJnZXQgfHwgdGFyZ2V0O1xuICAgIHZhciBldnQgPSBuZXcgd2luZG93LkN1c3RvbUV2ZW50KG5hbWUsIGRhdGEpO1xuICAgIHJldHVybiB0YXJnZXQuZGlzcGF0Y2hFdmVudChldnQpO1xuICB9LFxuICBkaXNwYXRjaE1vdXNlRXZlbnQ6IGZ1bmN0aW9uIGRpc3BhdGNoTW91c2VFdmVudCh0YXJnZXQsIG5hbWUsIHJlbGF0ZWRUYXJnZXQpIHtcbiAgICB2YXIgbUV2dCA9IG5ldyB3aW5kb3cuTW91c2VFdmVudChuYW1lLCB7XG4gICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0XG4gICAgfSk7XG4gICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobUV2dCk7XG4gIH0sXG4gIGRpc3BhdGNoTW91c2VFdmVudEFsbDogZnVuY3Rpb24gZGlzcGF0Y2hNb3VzZUV2ZW50QWxsKG5hbWUsIHJlbGF0ZWRUYXJnZXQsIGZpbHRlclVzZWQsIGFsc29SZXZlcnNlKSB7XG4gICAgdmFyIF90aGlzOSA9IHRoaXM7XG4gICAgdmFyIGVscyA9IHRoaXMuaG92ZXJFbHM7XG4gICAgaWYgKGZpbHRlclVzZWQpIHtcbiAgICAgIGVscyA9IGVscy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbCAhPT0gX3RoaXM5LnN0YXRlLmdldChfdGhpczkuR1JBQl9FVkVOVCkgJiYgZWwgIT09IF90aGlzOS5zdGF0ZS5nZXQoX3RoaXM5LkRSQUdfRVZFTlQpICYmIGVsICE9PSBfdGhpczkuc3RhdGUuZ2V0KF90aGlzOS5TVFJFVENIX0VWRU5UKSAmJiAhX3RoaXM5LmdlaERyYWdnZWQuaGFzKGVsKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYWxzb1JldmVyc2UpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hNb3VzZUV2ZW50KGVsc1tpXSwgbmFtZSwgcmVsYXRlZFRhcmdldCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hNb3VzZUV2ZW50KHJlbGF0ZWRUYXJnZXQsIG5hbWUsIGVsc1tpXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBlbHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hNb3VzZUV2ZW50KGVsc1tfaV0sIG5hbWUsIHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgZmluZFRhcmdldDogZnVuY3Rpb24gZmluZFRhcmdldChldlR5cGUsIGRldGFpbCwgZmlsdGVyVXNlZCkge1xuICAgIHZhciBfdGhpczEwID0gdGhpcztcbiAgICB2YXIgZWxJbmRleDtcbiAgICB2YXIgZWxpZ2libGVFbHMgPSB0aGlzLmhvdmVyRWxzO1xuICAgIGlmIChmaWx0ZXJVc2VkKSB7XG4gICAgICBlbGlnaWJsZUVscyA9IGVsaWdpYmxlRWxzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsICE9PSBfdGhpczEwLnN0YXRlLmdldChfdGhpczEwLkdSQUJfRVZFTlQpICYmIGVsICE9PSBfdGhpczEwLnN0YXRlLmdldChfdGhpczEwLkRSQUdfRVZFTlQpICYmIGVsICE9PSBfdGhpczEwLnN0YXRlLmdldChfdGhpczEwLlNUUkVUQ0hfRVZFTlQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAoZWxJbmRleCA9IGVsaWdpYmxlRWxzLmxlbmd0aCAtIDE7IGVsSW5kZXggPj0gMDsgZWxJbmRleC0tKSB7XG4gICAgICBpZiAoIXRoaXMuZW1pdENhbmNlbGFibGUoZWxpZ2libGVFbHNbZWxJbmRleF0sIGV2VHlwZSwgZGV0YWlsKSkge1xuICAgICAgICByZXR1cm4gZWxpZ2libGVFbHNbZWxJbmRleF07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9LFxuICAvLyBIZWxwZXIgdG8gZW5zdXJlIGRyb3BwaW5nIGFuZCByZWdyYWJiaW5nIGZpbmRzIHRoZSBzYW1lIHRhcmdldCBmb3JcbiAgLy8gZm9yIG9yZGVyLXNvcnRlZCBob3ZlckVscyAoZ3JhYmJpbmc7IG5vLW9wIGZvciBkaXN0YW5jZS1zb3J0ZWQgKHBvaW50aW5nKVxuICBwcm9tb3RlSG92ZXJlZEVsOiBmdW5jdGlvbiBwcm9tb3RlSG92ZXJlZEVsKGVsKSB7XG4gICAgdmFyIGhvdmVySW5kZXggPSB0aGlzLmhvdmVyRWxzLmluZGV4T2YoZWwpO1xuICAgIGlmIChob3ZlckluZGV4ICE9PSAtMSAmJiB0aGlzLmhvdmVyRWxzSW50ZXJzZWN0aW9uc1tob3ZlckluZGV4XS5kaXN0YW5jZSA9PSBudWxsKSB7XG4gICAgICB0aGlzLmhvdmVyRWxzLnNwbGljZShob3ZlckluZGV4LCAxKTtcbiAgICAgIHZhciBzZWN0ID0gdGhpcy5ob3ZlckVsc0ludGVyc2VjdGlvbnMuc3BsaWNlKGhvdmVySW5kZXgsIDEpO1xuICAgICAgdGhpcy5ob3ZlckVscy5wdXNoKGVsKTtcbiAgICAgIHRoaXMuaG92ZXJFbHNJbnRlcnNlY3Rpb25zLnB1c2goc2VjdFswXSk7XG4gICAgfVxuICB9XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvY2xpY2thYmxlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9jbGlja2FibGUuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX191bnVzZWRfd2VicGFja19leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cbi8qIGdsb2JhbCBBRlJBTUUgKi9cbnZhciBidXR0b25Db3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanNcIik7XG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2NsaWNrYWJsZScsIEFGUkFNRS51dGlscy5leHRlbmREZWVwKHt9LCBidXR0b25Db3JlLCB7XG4gIHNjaGVtYToge1xuICAgIG9uY2xpY2s6IHtcbiAgICAgIHR5cGU6ICdzdHJpbmcnXG4gICAgfVxuICB9LFxuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMuQ0xJQ0tFRF9TVEFURSA9ICdjbGlja2VkJztcbiAgICB0aGlzLkNMSUNLX0VWRU5UID0gJ2dyYWItc3RhcnQnO1xuICAgIHRoaXMuVU5DTElDS19FVkVOVCA9ICdncmFiLWVuZCc7XG4gICAgdGhpcy5jbGlja2VycyA9IFtdO1xuICAgIHRoaXMuc3RhcnQgPSB0aGlzLnN0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbmQgPSB0aGlzLmVuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLkNMSUNLX0VWRU5ULCB0aGlzLnN0YXJ0KTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5VTkNMSUNLX0VWRU5ULCB0aGlzLmVuZCk7XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLkNMSUNLX0VWRU5ULCB0aGlzLnN0YXJ0KTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5VTkNMSUNLX0VWRU5ULCB0aGlzLmVuZCk7XG4gIH0sXG4gIHN0YXJ0OiBmdW5jdGlvbiBzdGFydChldnQpIHtcbiAgICBpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQgfHwgIXRoaXMuc3RhcnRCdXR0b25PayhldnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZWwuYWRkU3RhdGUodGhpcy5DTElDS0VEX1NUQVRFKTtcbiAgICBpZiAodGhpcy5jbGlja2Vycy5pbmRleE9mKGV2dC5kZXRhaWwuaGFuZCkgPT09IC0xKSB7XG4gICAgICB0aGlzLmNsaWNrZXJzLnB1c2goZXZ0LmRldGFpbC5oYW5kKTtcbiAgICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBlbmQ6IGZ1bmN0aW9uIGVuZChldnQpIHtcbiAgICB2YXIgaGFuZEluZGV4ID0gdGhpcy5jbGlja2Vycy5pbmRleE9mKGV2dC5kZXRhaWwuaGFuZCk7XG4gICAgaWYgKGV2dC5kZWZhdWx0UHJldmVudGVkIHx8ICF0aGlzLmVuZEJ1dHRvbk9rKGV2dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGhhbmRJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuY2xpY2tlcnMuc3BsaWNlKGhhbmRJbmRleCwgMSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmNsaWNrZXJzLmxlbmd0aCA8IDEpIHtcbiAgICAgIHRoaXMuZWwucmVtb3ZlU3RhdGUodGhpcy5DTElDS0VEX1NUQVRFKTtcbiAgICB9XG4gICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG59KSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2RyYWctZHJvcHBhYmxlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2RyYWctZHJvcHBhYmxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX191bnVzZWRfd2VicGFja19leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cbi8qIGdsb2JhbCBBRlJBTUUgKi9cbnZhciBpbmhlcml0ID0gQUZSQU1FLnV0aWxzLmV4dGVuZERlZXA7XG52YXIgYnV0dG9uQ29yZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcHJvdG90eXBlcy9idXR0b25zLXByb3RvLmpzICovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvcHJvdG90eXBlcy9idXR0b25zLXByb3RvLmpzXCIpO1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdkcmFnLWRyb3BwYWJsZScsIGluaGVyaXQoe30sIGJ1dHRvbkNvcmUsIHtcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBjb25zb2xlLndhcm4oJ1dhcm5pbmc6IGRyYWctZHJvcHBhYmxlIGlzIGRlcHJlY2F0ZWQuIFVzZSBkcmFnZ2FibGUgYW5kIGRyb3BwYWJsZSBjb21wb25lbnRzIGluc3RlYWQnKTtcbiAgICB0aGlzLkhPVkVSRURfU1RBVEUgPSAnZHJhZ292ZXInO1xuICAgIHRoaXMuRFJBR0dFRF9TVEFURSA9ICdkcmFnZ2VkJztcbiAgICB0aGlzLkhPVkVSX0VWRU5UID0gJ2RyYWdvdmVyLXN0YXJ0JztcbiAgICB0aGlzLlVOSE9WRVJfRVZFTlQgPSAnZHJhZ292ZXItZW5kJztcbiAgICB0aGlzLkRSQUdfRVZFTlQgPSAnZHJhZy1zdGFydCc7XG4gICAgdGhpcy5VTkRSQUdfRVZFTlQgPSAnZHJhZy1lbmQnO1xuICAgIHRoaXMuRFJBR0RST1BfRVZFTlQgPSAnZHJhZy1kcm9wJztcbiAgICB0aGlzLmhvdmVyU3RhcnQgPSB0aGlzLmhvdmVyU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRyYWdTdGFydCA9IHRoaXMuZHJhZ1N0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5ob3ZlckVuZCA9IHRoaXMuaG92ZXJFbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRyYWdFbmQgPSB0aGlzLmRyYWdFbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRyYWdEcm9wID0gdGhpcy5kcmFnRHJvcC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLkhPVkVSX0VWRU5ULCB0aGlzLmhvdmVyU3RhcnQpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLkRSQUdfRVZFTlQsIHRoaXMuZHJhZ1N0YXJ0KTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5VTkhPVkVSX0VWRU5ULCB0aGlzLmhvdmVyRW5kKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5VTkRSQUdfRVZFTlQsIHRoaXMuZHJhZ0VuZCk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuRFJBR0RST1BfRVZFTlQsIHRoaXMuZHJhZ0Ryb3ApO1xuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5IT1ZFUl9FVkVOVCwgdGhpcy5ob3ZlclN0YXJ0KTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5EUkFHX0VWRU5ULCB0aGlzLmRyYWdTdGFydCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuVU5IT1ZFUl9FVkVOVCwgdGhpcy5ob3ZlckVuZCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuVU5EUkFHX0VWRU5ULCB0aGlzLmRyYWdFbmQpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLkRSQUdEUk9QX0VWRU5ULCB0aGlzLmRyYWdEcm9wKTtcbiAgfSxcbiAgaG92ZXJTdGFydDogZnVuY3Rpb24gaG92ZXJTdGFydChldnQpIHtcbiAgICB0aGlzLmVsLmFkZFN0YXRlKHRoaXMuSE9WRVJFRF9TVEFURSk7XG4gICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LFxuICBkcmFnU3RhcnQ6IGZ1bmN0aW9uIGRyYWdTdGFydChldnQpIHtcbiAgICBpZiAoIXRoaXMuc3RhcnRCdXR0b25PayhldnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZWwuYWRkU3RhdGUodGhpcy5EUkFHR0VEX1NUQVRFKTtcbiAgICBpZiAoZXZ0LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sXG4gIGhvdmVyRW5kOiBmdW5jdGlvbiBob3ZlckVuZChldnQpIHtcbiAgICB0aGlzLmVsLnJlbW92ZVN0YXRlKHRoaXMuSE9WRVJFRF9TVEFURSk7XG4gIH0sXG4gIGRyYWdFbmQ6IGZ1bmN0aW9uIGRyYWdFbmQoZXZ0KSB7XG4gICAgaWYgKCF0aGlzLmVuZEJ1dHRvbk9rKGV2dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbC5yZW1vdmVTdGF0ZSh0aGlzLkRSQUdHRURfU1RBVEUpO1xuICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSxcbiAgZHJhZ0Ryb3A6IGZ1bmN0aW9uIGRyYWdEcm9wKGV2dCkge1xuICAgIGlmICghdGhpcy5lbmRCdXR0b25PayhldnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxufSkpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9kcmFnZ2FibGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2RyYWdnYWJsZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3VudXNlZF93ZWJwYWNrX2V4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuLyogZ2xvYmFsIEFGUkFNRSAqL1xudmFyIGluaGVyaXQgPSBBRlJBTUUudXRpbHMuZXh0ZW5kRGVlcDtcbnZhciBidXR0b25Db3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanNcIik7XG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2RyYWdnYWJsZScsIGluaGVyaXQoe30sIGJ1dHRvbkNvcmUsIHtcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0aGlzLkRSQUdHRURfU1RBVEUgPSAnZHJhZ2dlZCc7XG4gICAgdGhpcy5EUkFHX0VWRU5UID0gJ2RyYWctc3RhcnQnO1xuICAgIHRoaXMuVU5EUkFHX0VWRU5UID0gJ2RyYWctZW5kJztcbiAgICB0aGlzLmRyYWdTdGFydEJvdW5kID0gdGhpcy5kcmFnU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmRyYWdFbmRCb3VuZCA9IHRoaXMuZHJhZ0VuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLkRSQUdfRVZFTlQsIHRoaXMuZHJhZ1N0YXJ0Qm91bmQpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlVORFJBR19FVkVOVCwgdGhpcy5kcmFnRW5kQm91bmQpO1xuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5EUkFHX0VWRU5ULCB0aGlzLmRyYWdTdGFydCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuVU5EUkFHX0VWRU5ULCB0aGlzLmRyYWdFbmQpO1xuICB9LFxuICBkcmFnU3RhcnQ6IGZ1bmN0aW9uIGRyYWdTdGFydChldnQpIHtcbiAgICBpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQgfHwgIXRoaXMuc3RhcnRCdXR0b25PayhldnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZWwuYWRkU3RhdGUodGhpcy5EUkFHR0VEX1NUQVRFKTtcbiAgICBpZiAoZXZ0LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0sXG4gIGRyYWdFbmQ6IGZ1bmN0aW9uIGRyYWdFbmQoZXZ0KSB7XG4gICAgaWYgKGV2dC5kZWZhdWx0UHJldmVudGVkIHx8ICF0aGlzLmVuZEJ1dHRvbk9rKGV2dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbC5yZW1vdmVTdGF0ZSh0aGlzLkRSQUdHRURfU1RBVEUpO1xuICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxufSkpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9kcm9wcGFibGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2Ryb3BwYWJsZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKCkgPT4ge1xuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0W1wicmV0dXJuXCJdICE9IG51bGwpIGl0W1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH1cbi8qIGdsb2JhbCBBRlJBTUUgKi9cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVzKGVsLCBzZWxlY3Rvcikge1xuICBpZiAoZWwubWF0Y2hlcykge1xuICAgIHJldHVybiBlbC5tYXRjaGVzKHNlbGVjdG9yKTtcbiAgfVxuICBpZiAoZWwubXNNYXRjaGVzU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gZWwubXNNYXRjaGVzU2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG4gIGlmIChlbC53ZWJraXRNYXRjaGVzU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gZWwud2Via2l0TWF0Y2hlc1NlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfVxufVxuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdkcm9wcGFibGUnLCB7XG4gIHNjaGVtYToge1xuICAgIGFjY2VwdHM6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnJ1xuICAgIH0sXG4gICAgYXV0b1VwZGF0ZToge1xuICAgICAgXCJkZWZhdWx0XCI6IHRydWVcbiAgICB9LFxuICAgIGFjY2VwdEV2ZW50OiB7XG4gICAgICBcImRlZmF1bHRcIjogJydcbiAgICB9LFxuICAgIHJlamVjdEV2ZW50OiB7XG4gICAgICBcImRlZmF1bHRcIjogJydcbiAgICB9XG4gIH0sXG4gIG11bHRpcGxlOiB0cnVlLFxuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMuSE9WRVJFRF9TVEFURSA9ICdkcmFnb3Zlcic7XG4gICAgdGhpcy5IT1ZFUl9FVkVOVCA9ICdkcmFnb3Zlci1zdGFydCc7XG4gICAgdGhpcy5VTkhPVkVSX0VWRU5UID0gJ2RyYWdvdmVyLWVuZCc7XG4gICAgdGhpcy5EUkFHRFJPUF9FVkVOVCA9ICdkcmFnLWRyb3AnO1xuXG4gICAgLy8gYmV0dGVyIGZvciBTaW5vbiBzcHlpbmcgaWYgb3JpZ2luYWwgbWV0aG9kIG5vdCBvdmVyd3JpdHRlblxuICAgIHRoaXMuaG92ZXJTdGFydEJvdW5kID0gdGhpcy5ob3ZlclN0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5ob3ZlckVuZEJvdW5kID0gdGhpcy5ob3ZlckVuZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZHJhZ0Ryb3BCb3VuZCA9IHRoaXMuZHJhZ0Ryb3AuYmluZCh0aGlzKTtcbiAgICB0aGlzLm11dGF0ZUFjY2VwdHNCb3VuZCA9IHRoaXMubXV0YXRlQWNjZXB0cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYWNjZXB0YWJsZUVudGl0aWVzID0gW107XG4gICAgdGhpcy5vYnNlcnZlciA9IG5ldyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlcih0aGlzLm11dGF0ZUFjY2VwdHNCb3VuZCk7XG4gICAgdGhpcy5vYnNlcnZlck9wdHMgPSB7XG4gICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgfTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5IT1ZFUl9FVkVOVCwgdGhpcy5ob3ZlclN0YXJ0Qm91bmQpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlVOSE9WRVJfRVZFTlQsIHRoaXMuaG92ZXJFbmRCb3VuZCk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuRFJBR0RST1BfRVZFTlQsIHRoaXMuZHJhZ0Ryb3BCb3VuZCk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYWNjZXB0cy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuYWNjZXB0YWJsZUVudGl0aWVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5lbC5zY2VuZUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5kYXRhLmFjY2VwdHMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hY2NlcHRhYmxlRW50aXRpZXMgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmF1dG9VcGRhdGUgJiYgdGhpcy5hY2NlcHRhYmxlRW50aXRpZXMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMuZWwuc2NlbmVFbCwgdGhpcy5vYnNlcnZlck9wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLkhPVkVSX0VWRU5ULCB0aGlzLmhvdmVyU3RhcnRCb3VuZCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuVU5IT1ZFUl9FVkVOVCwgdGhpcy5ob3ZlckVuZEJvdW5kKTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5EUkFHRFJPUF9FVkVOVCwgdGhpcy5kcmFnRHJvcEJvdW5kKTtcbiAgICB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgfSxcbiAgbXV0YXRlQWNjZXB0czogZnVuY3Rpb24gbXV0YXRlQWNjZXB0cyhtdXRhdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgIHZhciBxdWVyeSA9IHRoaXMuZGF0YS5hY2NlcHRzO1xuICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtdXRhdGlvbikge1xuICAgICAgbXV0YXRpb24uYWRkZWROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChhZGRlZCkge1xuICAgICAgICBpZiAoZWxlbWVudE1hdGNoZXMoYWRkZWQsIHF1ZXJ5KSkge1xuICAgICAgICAgIF90aGlzLmFjY2VwdGFibGVFbnRpdGllcy5wdXNoKGFkZGVkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG4gIGVudGl0eUFjY2VwdGFibGU6IGZ1bmN0aW9uIGVudGl0eUFjY2VwdGFibGUoZW50aXR5KSB7XG4gICAgdmFyIGFjY2VwdGFibGVFbnRpdGllcyA9IHRoaXMuYWNjZXB0YWJsZUVudGl0aWVzO1xuICAgIGlmIChhY2NlcHRhYmxlRW50aXRpZXMgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihhY2NlcHRhYmxlRW50aXRpZXMpLFxuICAgICAgX3N0ZXA7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XG4gICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7XG4gICAgICAgIGlmIChpdGVtID09PSBlbnRpdHkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgX2l0ZXJhdG9yLmYoKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBob3ZlclN0YXJ0OiBmdW5jdGlvbiBob3ZlclN0YXJ0KGV2dCkge1xuICAgIGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCB8fCAhdGhpcy5lbnRpdHlBY2NlcHRhYmxlKGV2dC5kZXRhaWwuY2FycmllZCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbC5hZGRTdGF0ZSh0aGlzLkhPVkVSRURfU1RBVEUpO1xuICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSxcbiAgaG92ZXJFbmQ6IGZ1bmN0aW9uIGhvdmVyRW5kKGV2dCkge1xuICAgIGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVsLnJlbW92ZVN0YXRlKHRoaXMuSE9WRVJFRF9TVEFURSk7XG4gIH0sXG4gIGRyYWdEcm9wOiBmdW5jdGlvbiBkcmFnRHJvcChldnQpIHtcbiAgICBpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGRyb3BwZWQgPSBldnQuZGV0YWlsLmRyb3BwZWQ7XG4gICAgaWYgKCF0aGlzLmVudGl0eUFjY2VwdGFibGUoZHJvcHBlZCkpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEucmVqZWN0RXZlbnQubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuZWwuZW1pdCh0aGlzLmRhdGEucmVqZWN0RXZlbnQsIHtcbiAgICAgICAgICBlbDogZHJvcHBlZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5hY2NlcHRFdmVudC5sZW5ndGgpIHtcbiAgICAgIHRoaXMuZWwuZW1pdCh0aGlzLmRhdGEuYWNjZXB0RXZlbnQsIHtcbiAgICAgICAgZWw6IGRyb3BwZWRcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZXZ0LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9ncmFiYmFibGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL2dyYWJiYWJsZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3VudXNlZF93ZWJwYWNrX2V4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuLyogZ2xvYmFsIEFGUkFNRSwgVEhSRUUgKi9cbnZhciBpbmhlcml0ID0gQUZSQU1FLnV0aWxzLmV4dGVuZERlZXA7XG52YXIgcGh5c2ljc0NvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3Byb3RvdHlwZXMvcGh5c2ljcy1ncmFiLXByb3RvLmpzICovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvcHJvdG90eXBlcy9waHlzaWNzLWdyYWItcHJvdG8uanNcIik7XG52YXIgYnV0dG9uc0NvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3Byb3RvdHlwZXMvYnV0dG9ucy1wcm90by5qcyAqLyBcIi4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9yZWFjdGlvbl9jb21wb25lbnRzL3Byb3RvdHlwZXMvYnV0dG9ucy1wcm90by5qc1wiKTtcbi8vIG5ldyBvYmplY3Qgd2l0aCBhbGwgY29yZSBtb2R1bGVzXG52YXIgYmFzZSA9IGluaGVyaXQoe30sIHBoeXNpY3NDb3JlLCBidXR0b25zQ29yZSk7XG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3NoLWdyYWJiYWJsZScsIGluaGVyaXQoYmFzZSwge1xuICBzY2hlbWE6IHtcbiAgICBtYXhHcmFiYmVyczoge1xuICAgICAgdHlwZTogJ2ludCcsXG4gICAgICBcImRlZmF1bHRcIjogTmFOXG4gICAgfSxcbiAgICBpbnZlcnQ6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiBmYWxzZVxuICAgIH0sXG4gICAgc3VwcHJlc3NZOiB7XG4gICAgICBcImRlZmF1bHRcIjogZmFsc2VcbiAgICB9XG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICB0aGlzLkdSQUJCRURfU1RBVEUgPSAnZ3JhYmJlZCc7XG4gICAgdGhpcy5HUkFCX0VWRU5UID0gJ2dyYWItc3RhcnQnO1xuICAgIHRoaXMuVU5HUkFCX0VWRU5UID0gJ2dyYWItZW5kJztcbiAgICB0aGlzLmdyYWJiZWQgPSBmYWxzZTtcbiAgICB0aGlzLmdyYWJiZXJzID0gW107XG4gICAgdGhpcy5jb25zdHJhaW50cyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmRlbHRhUG9zaXRpb25Jc1ZhbGlkID0gZmFsc2U7XG4gICAgdGhpcy5ncmFiRGlzdGFuY2UgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5ncmFiRGlyZWN0aW9uID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB6OiAtMVxuICAgIH07XG4gICAgdGhpcy5ncmFiT2Zmc2V0ID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB6OiAwXG4gICAgfTtcbiAgICAvLyBwZXJzaXN0ZW50IG9iamVjdCBzcGVlZHMgdXAgcmVwZWF0IHNldEF0dHJpYnV0ZSBjYWxsc1xuICAgIHRoaXMuZGVzdFBvc2l0aW9uID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB6OiAwXG4gICAgfTtcbiAgICB0aGlzLmRlbHRhUG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHRoaXMudGFyZ2V0UG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHRoaXMucGh5c2ljc0luaXQoKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5HUkFCX0VWRU5ULCBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIF90aGlzLnN0YXJ0KGUpO1xuICAgIH0pO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlVOR1JBQl9FVkVOVCwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBfdGhpcy5lbmQoZSk7XG4gICAgfSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gX3RoaXMubG9zdEdyYWJiZXIoZSk7XG4gICAgfSk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIHRoaXMucGh5c2ljc1VwZGF0ZSgpO1xuICAgIHRoaXMueEZhY3RvciA9IHRoaXMuZGF0YS5pbnZlcnQgPyAtMSA6IDE7XG4gICAgdGhpcy56RmFjdG9yID0gdGhpcy5kYXRhLmludmVydCA/IC0xIDogMTtcbiAgICB0aGlzLnlGYWN0b3IgPSAodGhpcy5kYXRhLmludmVydCA/IC0xIDogMSkgKiAhdGhpcy5kYXRhLnN1cHByZXNzWTtcbiAgfSxcbiAgdGljazogZnVuY3Rpb24gKCkge1xuICAgIHZhciBxID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcbiAgICB2YXIgdiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBlbnRpdHlQb3NpdGlvbjtcbiAgICAgIGlmICh0aGlzLmdyYWJiZXIpIHtcbiAgICAgICAgLy8gcmVmbGVjdCBvbiB6LWF4aXMgdG8gcG9pbnQgaW4gc2FtZSBkaXJlY3Rpb24gYXMgdGhlIGxhc2VyXG4gICAgICAgIHRoaXMudGFyZ2V0UG9zaXRpb24uY29weSh0aGlzLmdyYWJEaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLnRhcmdldFBvc2l0aW9uLmFwcGx5UXVhdGVybmlvbih0aGlzLmdyYWJiZXIub2JqZWN0M0QuZ2V0V29ybGRRdWF0ZXJuaW9uKHEpKS5zZXRMZW5ndGgodGhpcy5ncmFiRGlzdGFuY2UpLmFkZCh0aGlzLmdyYWJiZXIub2JqZWN0M0QuZ2V0V29ybGRQb3NpdGlvbih2KSkuYWRkKHRoaXMuZ3JhYk9mZnNldCk7XG4gICAgICAgIGlmICh0aGlzLmRlbHRhUG9zaXRpb25Jc1ZhbGlkKSB7XG4gICAgICAgICAgLy8gcmVsYXRpdmUgcG9zaXRpb24gY2hhbmdlcyB3b3JrIGJldHRlciB3aXRoIG5lc3RlZCBlbnRpdGllc1xuICAgICAgICAgIHRoaXMuZGVsdGFQb3NpdGlvbi5zdWIodGhpcy50YXJnZXRQb3NpdGlvbik7XG4gICAgICAgICAgZW50aXR5UG9zaXRpb24gPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSgncG9zaXRpb24nKTtcbiAgICAgICAgICB0aGlzLmRlc3RQb3NpdGlvbi54ID0gZW50aXR5UG9zaXRpb24ueCAtIHRoaXMuZGVsdGFQb3NpdGlvbi54ICogdGhpcy54RmFjdG9yO1xuICAgICAgICAgIHRoaXMuZGVzdFBvc2l0aW9uLnkgPSBlbnRpdHlQb3NpdGlvbi55IC0gdGhpcy5kZWx0YVBvc2l0aW9uLnkgKiB0aGlzLnlGYWN0b3I7XG4gICAgICAgICAgdGhpcy5kZXN0UG9zaXRpb24ueiA9IGVudGl0eVBvc2l0aW9uLnogLSB0aGlzLmRlbHRhUG9zaXRpb24ueiAqIHRoaXMuekZhY3RvcjtcbiAgICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCB0aGlzLmRlc3RQb3NpdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5kZWx0YVBvc2l0aW9uSXNWYWxpZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWx0YVBvc2l0aW9uLmNvcHkodGhpcy50YXJnZXRQb3NpdGlvbik7XG4gICAgICB9XG4gICAgfTtcbiAgfSgpLFxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5HUkFCX0VWRU5ULCB0aGlzLnN0YXJ0KTtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5VTkdSQUJfRVZFTlQsIHRoaXMuZW5kKTtcbiAgICB0aGlzLnBoeXNpY3NSZW1vdmUoKTtcbiAgfSxcbiAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0KGV2dCkge1xuICAgIGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCB8fCAhdGhpcy5zdGFydEJ1dHRvbk9rKGV2dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gcm9vbSBmb3IgbW9yZSBncmFiYmVycz9cbiAgICB2YXIgZ3JhYkF2YWlsYWJsZSA9ICFOdW1iZXIuaXNGaW5pdGUodGhpcy5kYXRhLm1heEdyYWJiZXJzKSB8fCB0aGlzLmdyYWJiZXJzLmxlbmd0aCA8IHRoaXMuZGF0YS5tYXhHcmFiYmVycztcbiAgICBpZiAodGhpcy5ncmFiYmVycy5pbmRleE9mKGV2dC5kZXRhaWwuaGFuZCkgPT09IC0xICYmIGdyYWJBdmFpbGFibGUpIHtcbiAgICAgIGlmICghZXZ0LmRldGFpbC5oYW5kLm9iamVjdDNEKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybignc2gtZ3JhYmJhYmxlIGVudGl0aWVzIG11c3QgaGF2ZSBhbiBvYmplY3QzRCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmdyYWJiZXJzLnB1c2goZXZ0LmRldGFpbC5oYW5kKTtcbiAgICAgIC8vIGluaXRpYXRlIHBoeXNpY3MgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgbWFudWFsXG4gICAgICBpZiAoIXRoaXMucGh5c2ljc1N0YXJ0KGV2dCkgJiYgIXRoaXMuZ3JhYmJlcikge1xuICAgICAgICB0aGlzLmdyYWJiZXIgPSBldnQuZGV0YWlsLmhhbmQ7XG4gICAgICAgIHRoaXMucmVzZXRHcmFiYmVyKCk7XG4gICAgICB9XG4gICAgICAvLyBub3RpZnkgc3VwZXItaGFuZHMgdGhhdCB0aGUgZ2VzdHVyZSB3YXMgYWNjZXB0ZWRcbiAgICAgIGlmIChldnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmdyYWJiZWQgPSB0cnVlO1xuICAgICAgdGhpcy5lbC5hZGRTdGF0ZSh0aGlzLkdSQUJCRURfU1RBVEUpO1xuICAgIH1cbiAgfSxcbiAgZW5kOiBmdW5jdGlvbiBlbmQoZXZ0KSB7XG4gICAgdmFyIGhhbmRJbmRleCA9IHRoaXMuZ3JhYmJlcnMuaW5kZXhPZihldnQuZGV0YWlsLmhhbmQpO1xuICAgIGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCB8fCAhdGhpcy5lbmRCdXR0b25PayhldnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChoYW5kSW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLmdyYWJiZXJzLnNwbGljZShoYW5kSW5kZXgsIDEpO1xuICAgICAgdGhpcy5ncmFiYmVyID0gdGhpcy5ncmFiYmVyc1swXTtcbiAgICB9XG4gICAgdGhpcy5waHlzaWNzRW5kKGV2dCk7XG4gICAgaWYgKCF0aGlzLnJlc2V0R3JhYmJlcigpKSB7XG4gICAgICB0aGlzLmdyYWJiZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlU3RhdGUodGhpcy5HUkFCQkVEX1NUQVRFKTtcbiAgICB9XG4gICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LFxuICByZXNldEdyYWJiZXI6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JqUG9zID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB2YXIgZ3JhYlBvcyA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5ncmFiYmVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciByYXljYXN0ZXIgPSB0aGlzLmdyYWJiZXIuZ2V0QXR0cmlidXRlKCdyYXljYXN0ZXInKTtcbiAgICAgIHRoaXMuZGVsdGFQb3NpdGlvbklzVmFsaWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZ3JhYkRpc3RhbmNlID0gdGhpcy5lbC5vYmplY3QzRC5nZXRXb3JsZFBvc2l0aW9uKG9ialBvcykuZGlzdGFuY2VUbyh0aGlzLmdyYWJiZXIub2JqZWN0M0QuZ2V0V29ybGRQb3NpdGlvbihncmFiUG9zKSk7XG4gICAgICBpZiAocmF5Y2FzdGVyKSB7XG4gICAgICAgIHRoaXMuZ3JhYkRpcmVjdGlvbiA9IHJheWNhc3Rlci5kaXJlY3Rpb247XG4gICAgICAgIHRoaXMuZ3JhYk9mZnNldCA9IHJheWNhc3Rlci5vcmlnaW47XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9KCksXG4gIGxvc3RHcmFiYmVyOiBmdW5jdGlvbiBsb3N0R3JhYmJlcihldnQpIHtcbiAgICB2YXIgaSA9IHRoaXMuZ3JhYmJlcnMuaW5kZXhPZihldnQucmVsYXRlZFRhcmdldCk7XG4gICAgLy8gaWYgYSBxdWV1ZWQsIG5vbi1waHlzaWNzIGdyYWJiZXIgbGVhdmVzIHRoZSBjb2xsaXNpb24gem9uZSwgZm9yZ2V0IGl0XG4gICAgaWYgKGkgIT09IC0xICYmIGV2dC5yZWxhdGVkVGFyZ2V0ICE9PSB0aGlzLmdyYWJiZXIgJiYgIXRoaXMucGh5c2ljc0lzQ29uc3RyYWluZWQoZXZ0LnJlbGF0ZWRUYXJnZXQpKSB7XG4gICAgICB0aGlzLmdyYWJiZXJzLnNwbGljZShpLCAxKTtcbiAgICB9XG4gIH1cbn0pKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvaG92ZXJhYmxlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9ob3ZlcmFibGUuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKCgpID0+IHtcblxuLyogZ2xvYmFsIEFGUkFNRSAqL1xuQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdob3ZlcmFibGUnLCB7XG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdGhpcy5IT1ZFUkVEX1NUQVRFID0gJ2hvdmVyZWQnO1xuICAgIHRoaXMuSE9WRVJfRVZFTlQgPSAnaG92ZXItc3RhcnQnO1xuICAgIHRoaXMuVU5IT1ZFUl9FVkVOVCA9ICdob3Zlci1lbmQnO1xuICAgIHRoaXMuaG92ZXJlcnMgPSBbXTtcbiAgICB0aGlzLnN0YXJ0ID0gdGhpcy5zdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZW5kID0gdGhpcy5lbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5IT1ZFUl9FVkVOVCwgdGhpcy5zdGFydCk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuVU5IT1ZFUl9FVkVOVCwgdGhpcy5lbmQpO1xuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5IT1ZFUl9FVkVOVCwgdGhpcy5zdGFydCk7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuVU5IT1ZFUl9FVkVOVCwgdGhpcy5lbmQpO1xuICB9LFxuICBzdGFydDogZnVuY3Rpb24gc3RhcnQoZXZ0KSB7XG4gICAgaWYgKGV2dC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZWwuYWRkU3RhdGUodGhpcy5IT1ZFUkVEX1NUQVRFKTtcbiAgICBpZiAodGhpcy5ob3ZlcmVycy5pbmRleE9mKGV2dC5kZXRhaWwuaGFuZCkgPT09IC0xKSB7XG4gICAgICB0aGlzLmhvdmVyZXJzLnB1c2goZXZ0LmRldGFpbC5oYW5kKTtcbiAgICB9XG4gICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LFxuICBlbmQ6IGZ1bmN0aW9uIGVuZChldnQpIHtcbiAgICBpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGhhbmRJbmRleCA9IHRoaXMuaG92ZXJlcnMuaW5kZXhPZihldnQuZGV0YWlsLmhhbmQpO1xuICAgIGlmIChoYW5kSW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLmhvdmVyZXJzLnNwbGljZShoYW5kSW5kZXgsIDEpO1xuICAgIH1cbiAgICBpZiAodGhpcy5ob3ZlcmVycy5sZW5ndGggPCAxKSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZVN0YXRlKHRoaXMuSE9WRVJFRF9TVEFURSk7XG4gICAgfVxuICB9XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvcHJvdG90eXBlcy9idXR0b25zLXByb3RvLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChtb2R1bGUpID0+IHtcblxuLy8gY29tbW9uIGNvZGUgdXNlZCBpbiBjdXN0b21pemluZyByZWFjdGlvbiBjb21wb25lbnRzIGJ5IGJ1dHRvblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGJ1dHRvbklzVmFsaWQoZXZ0LCBidXR0b25MaXN0KSB7XG4gICAgcmV0dXJuIGJ1dHRvbkxpc3QubGVuZ3RoID09PSAwIHx8IGJ1dHRvbkxpc3QuaW5kZXhPZihldnQuZGV0YWlsLmJ1dHRvbkV2ZW50LnR5cGUpICE9PSAtMTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHNjaGVtYToge1xuICAgICAgc3RhcnRCdXR0b25zOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBbXVxuICAgICAgfSxcbiAgICAgIGVuZEJ1dHRvbnM6IHtcbiAgICAgICAgXCJkZWZhdWx0XCI6IFtdXG4gICAgICB9XG4gICAgfSxcbiAgICBzdGFydEJ1dHRvbk9rOiBmdW5jdGlvbiBzdGFydEJ1dHRvbk9rKGV2dCkge1xuICAgICAgcmV0dXJuIGJ1dHRvbklzVmFsaWQoZXZ0LCB0aGlzLmRhdGEuc3RhcnRCdXR0b25zKTtcbiAgICB9LFxuICAgIGVuZEJ1dHRvbk9rOiBmdW5jdGlvbiBlbmRCdXR0b25PayhldnQpIHtcbiAgICAgIHJldHVybiBidXR0b25Jc1ZhbGlkKGV2dCwgdGhpcy5kYXRhLmVuZEJ1dHRvbnMpO1xuICAgIH1cbiAgfTtcbn0oKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvcHJvdG90eXBlcy9waHlzaWNzLWdyYWItcHJvdG8uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9hZnJhbWUtc3VwZXItaGFuZHMtY29tcG9uZW50L3JlYWN0aW9uX2NvbXBvbmVudHMvcHJvdG90eXBlcy9waHlzaWNzLWdyYWItcHJvdG8uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKG1vZHVsZSkgPT4ge1xuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0W1wicmV0dXJuXCJdICE9IG51bGwpIGl0W1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH1cbi8vIGJhc2UgY29kZSB1c2VkIGJ5IGdyYWJiYWJsZSBmb3IgcGh5c2ljcyBpbnRlcmFjdGlvbnNcbm1vZHVsZS5leHBvcnRzID0ge1xuICBzY2hlbWE6IHtcbiAgICB1c2VQaHlzaWNzOiB7XG4gICAgICBcImRlZmF1bHRcIjogJ2lmYXZhaWxhYmxlJ1xuICAgIH1cbiAgfSxcbiAgcGh5c2ljc0luaXQ6IGZ1bmN0aW9uIHBoeXNpY3NJbml0KCkge1xuICAgIHRoaXMuY29uc3RyYWludHMgPSBuZXcgTWFwKCk7XG4gIH0sXG4gIHBoeXNpY3NVcGRhdGU6IGZ1bmN0aW9uIHBoeXNpY3NVcGRhdGUoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS51c2VQaHlzaWNzID09PSAnbmV2ZXInICYmIHRoaXMuY29uc3RyYWludHMuc2l6ZSkge1xuICAgICAgdGhpcy5waHlzaWNzQ2xlYXIoKTtcbiAgICB9XG4gIH0sXG4gIHBoeXNpY3NSZW1vdmU6IGZ1bmN0aW9uIHBoeXNpY3NSZW1vdmUoKSB7XG4gICAgdGhpcy5waHlzaWNzQ2xlYXIoKTtcbiAgfSxcbiAgcGh5c2ljc1N0YXJ0OiBmdW5jdGlvbiBwaHlzaWNzU3RhcnQoZXZ0KSB7XG4gICAgLy8gaW5pdGlhdGUgcGh5c2ljcyBjb25zdHJhaW50IGlmIGF2YWlsYWJsZSBhbmQgbm90IGFscmVhZHkgZXhpc3RpbmdcbiAgICBpZiAodGhpcy5kYXRhLnVzZVBoeXNpY3MgIT09ICduZXZlcicgJiYgdGhpcy5lbC5ib2R5ICYmIGV2dC5kZXRhaWwuaGFuZC5ib2R5ICYmICF0aGlzLmNvbnN0cmFpbnRzLmhhcyhldnQuZGV0YWlsLmhhbmQpKSB7XG4gICAgICB2YXIgbmV3Q29uSWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG4gICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSgnY29uc3RyYWludF9fJyArIG5ld0NvbklkLCB7XG4gICAgICAgIHRhcmdldDogZXZ0LmRldGFpbC5oYW5kXG4gICAgICB9KTtcbiAgICAgIHRoaXMuY29uc3RyYWludHMuc2V0KGV2dC5kZXRhaWwuaGFuZCwgbmV3Q29uSWQpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIFByZXZlbnQgbWFudWFsIGdyYWIgYnkgcmV0dXJuaW5nIHRydWVcbiAgICBpZiAodGhpcy5kYXRhLnVzZVBoeXNpY3MgPT09ICdvbmx5Jykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbiAgcGh5c2ljc0VuZDogZnVuY3Rpb24gcGh5c2ljc0VuZChldnQpIHtcbiAgICB2YXIgY29uc3RyYWludElkID0gdGhpcy5jb25zdHJhaW50cy5nZXQoZXZ0LmRldGFpbC5oYW5kKTtcbiAgICBpZiAoY29uc3RyYWludElkKSB7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnY29uc3RyYWludF9fJyArIGNvbnN0cmFpbnRJZCk7XG4gICAgICB0aGlzLmNvbnN0cmFpbnRzW1wiZGVsZXRlXCJdKGV2dC5kZXRhaWwuaGFuZCk7XG4gICAgfVxuICB9LFxuICBwaHlzaWNzQ2xlYXI6IGZ1bmN0aW9uIHBoeXNpY3NDbGVhcigpIHtcbiAgICBpZiAodGhpcy5lbC5ib2R5KSB7XG4gICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jb25zdHJhaW50cy52YWx1ZXMoKSksXG4gICAgICAgIF9zdGVwO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgYyA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgIHRoaXMuZWwuYm9keS53b3JsZC5yZW1vdmVDb25zdHJhaW50KGMpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9pdGVyYXRvci5mKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY29uc3RyYWludHMuY2xlYXIoKTtcbiAgfSxcbiAgcGh5c2ljc0lzQ29uc3RyYWluZWQ6IGZ1bmN0aW9uIHBoeXNpY3NJc0NvbnN0cmFpbmVkKGVsKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHMuaGFzKGVsKTtcbiAgfSxcbiAgcGh5c2ljc0lzR3JhYmJpbmc6IGZ1bmN0aW9uIHBoeXNpY3NJc0dyYWJiaW5nKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzLnNpemUgPiAwO1xuICB9XG59O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9zdHJldGNoYWJsZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9zdHJldGNoYWJsZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fdW51c2VkX3dlYnBhY2tfZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0W1wicmV0dXJuXCJdICE9IG51bGwpIGl0W1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH1cbi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG52YXIgaW5oZXJpdCA9IEFGUkFNRS51dGlscy5leHRlbmREZWVwO1xudmFyIGJ1dHRvbnNDb3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvcmVhY3Rpb25fY29tcG9uZW50cy9wcm90b3R5cGVzL2J1dHRvbnMtcHJvdG8uanNcIik7XG4vLyBuZXcgb2JqZWN0IHdpdGggYWxsIGNvcmUgbW9kdWxlc1xudmFyIGJhc2UgPSBpbmhlcml0KHt9LCBidXR0b25zQ29yZSk7XG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3N0cmV0Y2hhYmxlJywgaW5oZXJpdChiYXNlLCB7XG4gIHNjaGVtYToge1xuICAgIHVzZVBoeXNpY3M6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAnaWZhdmFpbGFibGUnXG4gICAgfSxcbiAgICBpbnZlcnQ6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiBmYWxzZVxuICAgIH0sXG4gICAgcGh5c2ljc1VwZGF0ZVJhdGU6IHtcbiAgICAgIFwiZGVmYXVsdFwiOiAxMDBcbiAgICB9XG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdGhpcy5TVFJFVENIRURfU1RBVEUgPSAnc3RyZXRjaGVkJztcbiAgICB0aGlzLlNUUkVUQ0hfRVZFTlQgPSAnc3RyZXRjaC1zdGFydCc7XG4gICAgdGhpcy5VTlNUUkVUQ0hfRVZFTlQgPSAnc3RyZXRjaC1lbmQnO1xuICAgIHRoaXMuc3RyZXRjaGVkID0gZmFsc2U7XG4gICAgdGhpcy5zdHJldGNoZXJzID0gW107XG4gICAgdGhpcy5zY2FsZSA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy5oYW5kUG9zID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB0aGlzLm90aGVySGFuZFBvcyA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy5zdGFydCA9IHRoaXMuc3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmVuZCA9IHRoaXMuZW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuU1RSRVRDSF9FVkVOVCwgdGhpcy5zdGFydCk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKHRoaXMuVU5TVFJFVENIX0VWRU5ULCB0aGlzLmVuZCk7XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9sZERhdCkge1xuICAgIHRoaXMudXBkYXRlQm9kaWVzID0gQUZSQU1FLnV0aWxzLnRocm90dGxlVGljayh0aGlzLl91cGRhdGVCb2RpZXMsIHRoaXMuZGF0YS5waHlzaWNzVXBkYXRlUmF0ZSwgdGhpcyk7XG4gIH0sXG4gIHRpY2s6IGZ1bmN0aW9uIHRpY2sodGltZSwgdGltZURlbHRhKSB7XG4gICAgaWYgKCF0aGlzLnN0cmV0Y2hlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNjYWxlLmNvcHkodGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ3NjYWxlJykpO1xuICAgIHRoaXMuc3RyZXRjaGVyc1swXS5vYmplY3QzRC5nZXRXb3JsZFBvc2l0aW9uKHRoaXMuaGFuZFBvcyk7XG4gICAgdGhpcy5zdHJldGNoZXJzWzFdLm9iamVjdDNELmdldFdvcmxkUG9zaXRpb24odGhpcy5vdGhlckhhbmRQb3MpO1xuICAgIHZhciBjdXJyZW50U3RyZXRjaCA9IHRoaXMuaGFuZFBvcy5kaXN0YW5jZVRvKHRoaXMub3RoZXJIYW5kUG9zKTtcbiAgICB2YXIgZGVsdGFTdHJldGNoID0gMTtcbiAgICBpZiAodGhpcy5wcmV2aW91c1N0cmV0Y2ggIT09IG51bGwgJiYgY3VycmVudFN0cmV0Y2ggIT09IDApIHtcbiAgICAgIGRlbHRhU3RyZXRjaCA9IE1hdGgucG93KGN1cnJlbnRTdHJldGNoIC8gdGhpcy5wcmV2aW91c1N0cmV0Y2gsIHRoaXMuZGF0YS5pbnZlcnQgPyAtMSA6IDEpO1xuICAgIH1cbiAgICB0aGlzLnByZXZpb3VzU3RyZXRjaCA9IGN1cnJlbnRTdHJldGNoO1xuICAgIGlmICh0aGlzLnByZXZpb3VzUGh5c2ljc1N0cmV0Y2ggPT0gbnVsbCkge1xuICAgICAgLy8gZXN0YWJsaXNoIGNvcnJlY3QgYmFzZWxpbmUgZXZlbiBpZiB0aHJvdHRsZWQgZnVuY3Rpb24gaXNuJ3QgY2FsbGVkXG4gICAgICB0aGlzLnByZXZpb3VzUGh5c2ljc1N0cmV0Y2ggPSBjdXJyZW50U3RyZXRjaDtcbiAgICB9XG4gICAgdGhpcy5zY2FsZS5tdWx0aXBseVNjYWxhcihkZWx0YVN0cmV0Y2gpO1xuICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdzY2FsZScsIHRoaXMuc2NhbGUpO1xuICAgIC8vIHNjYWxlIHVwZGF0ZSBmb3IgYWxsIG5lc3RlZCBwaHlzaWNzIGJvZGllcyAodGhyb3R0bGVkKVxuICAgIHRoaXMudXBkYXRlQm9kaWVzKHRpbWUsIHRpbWVEZWx0YSk7XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLlNUUkVUQ0hfRVZFTlQsIHRoaXMuc3RhcnQpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLlVOU1RSRVRDSF9FVkVOVCwgdGhpcy5lbmQpO1xuICB9LFxuICBzdGFydDogZnVuY3Rpb24gc3RhcnQoZXZ0KSB7XG4gICAgaWYgKHRoaXMuc3RyZXRjaGVkIHx8IHRoaXMuc3RyZXRjaGVycy5pbmNsdWRlcyhldnQuZGV0YWlsLmhhbmQpIHx8ICF0aGlzLnN0YXJ0QnV0dG9uT2soZXZ0KSB8fCBldnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gYWxyZWFkeSBzdHJldGNoZWQgb3IgYWxyZWFkeSBjYXB0dXJlZCB0aGlzIGhhbmQgb3Igd3JvbmcgYnV0dG9uXG4gICAgdGhpcy5zdHJldGNoZXJzLnB1c2goZXZ0LmRldGFpbC5oYW5kKTtcbiAgICBpZiAodGhpcy5zdHJldGNoZXJzLmxlbmd0aCA9PT0gMikge1xuICAgICAgdGhpcy5zdHJldGNoZWQgPSB0cnVlO1xuICAgICAgdGhpcy5wcmV2aW91c1N0cmV0Y2ggPSBudWxsO1xuICAgICAgdGhpcy5wcmV2aW91c1BoeXNpY3NTdHJldGNoID0gbnVsbDtcbiAgICAgIHRoaXMuZWwuYWRkU3RhdGUodGhpcy5TVFJFVENIRURfU1RBVEUpO1xuICAgIH1cbiAgICBpZiAoZXZ0LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9IC8vIGdlc3R1cmUgYWNjZXB0ZWRcbiAgfSxcbiAgZW5kOiBmdW5jdGlvbiBlbmQoZXZ0KSB7XG4gICAgdmFyIHN0cmV0Y2hlckluZGV4ID0gdGhpcy5zdHJldGNoZXJzLmluZGV4T2YoZXZ0LmRldGFpbC5oYW5kKTtcbiAgICBpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQgfHwgIXRoaXMuZW5kQnV0dG9uT2soZXZ0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoc3RyZXRjaGVySW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLnN0cmV0Y2hlcnMuc3BsaWNlKHN0cmV0Y2hlckluZGV4LCAxKTtcbiAgICAgIHRoaXMuc3RyZXRjaGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmVsLnJlbW92ZVN0YXRlKHRoaXMuU1RSRVRDSEVEX1NUQVRFKTtcbiAgICAgIC8vIG92ZXJyaWRlIHRocm90dGxlIHRvIHB1c2ggbGFzdCBzdHJldGNoIHRvIHBoeXNpY3MgYm9kaWVzXG4gICAgICB0aGlzLl91cGRhdGVCb2RpZXMoKTtcbiAgICB9XG4gICAgaWYgKGV2dC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9LFxuICBfdXBkYXRlQm9kaWVzOiBmdW5jdGlvbiBfdXBkYXRlQm9kaWVzKCkge1xuICAgIGlmICghdGhpcy5lbC5ib2R5IHx8IHRoaXMuZGF0YS51c2VQaHlzaWNzID09PSAnbmV2ZXInKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBjdXJyZW50U3RyZXRjaCA9IHRoaXMucHJldmlvdXNTdHJldGNoOyAvLyBsYXN0IHZpc2libGUgZ2VvbWV0cnkgc3RyZXRjaFxuICAgIHZhciBkZWx0YVN0cmV0Y2ggPSAxO1xuICAgIGlmICh0aGlzLnByZXZpb3VzUGh5c2ljc1N0cmV0Y2ggIT09IG51bGwgJiYgY3VycmVudFN0cmV0Y2ggPiAwKSB7XG4gICAgICBkZWx0YVN0cmV0Y2ggPSBNYXRoLnBvdyhjdXJyZW50U3RyZXRjaCAvIHRoaXMucHJldmlvdXNQaHlzaWNzU3RyZXRjaCwgdGhpcy5kYXRhLmludmVydCA/IC0xIDogMSk7XG4gICAgfVxuICAgIHRoaXMucHJldmlvdXNQaHlzaWNzU3RyZXRjaCA9IGN1cnJlbnRTdHJldGNoO1xuICAgIGlmIChkZWx0YVN0cmV0Y2ggPT09IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuZWwuY2hpbGROb2RlcyksXG4gICAgICBfc3RlcDtcbiAgICB0cnkge1xuICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIGMgPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgdGhpcy5zdHJldGNoQm9keShjLCBkZWx0YVN0cmV0Y2gpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgX2l0ZXJhdG9yLmYoKTtcbiAgICB9XG4gICAgdGhpcy5zdHJldGNoQm9keSh0aGlzLmVsLCBkZWx0YVN0cmV0Y2gpO1xuICB9LFxuICBzdHJldGNoQm9keTogZnVuY3Rpb24gc3RyZXRjaEJvZHkoZWwsIGRlbHRhU3RyZXRjaCkge1xuICAgIGlmICghZWwuYm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcGh5c2ljc1NoYXBlO1xuICAgIHZhciBvZmZzZXQ7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbC5ib2R5LnNoYXBlcy5sZW5ndGg7IGkrKykge1xuICAgICAgcGh5c2ljc1NoYXBlID0gZWwuYm9keS5zaGFwZXNbaV07XG4gICAgICBpZiAocGh5c2ljc1NoYXBlLmhhbGZFeHRlbnRzKSB7XG4gICAgICAgIHBoeXNpY3NTaGFwZS5oYWxmRXh0ZW50cy5zY2FsZShkZWx0YVN0cmV0Y2gsIHBoeXNpY3NTaGFwZS5oYWxmRXh0ZW50cyk7XG4gICAgICAgIHBoeXNpY3NTaGFwZS51cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKTtcbiAgICAgIH0gZWxzZSBpZiAocGh5c2ljc1NoYXBlLnJhZGl1cykge1xuICAgICAgICBwaHlzaWNzU2hhcGUucmFkaXVzICo9IGRlbHRhU3RyZXRjaDtcbiAgICAgICAgcGh5c2ljc1NoYXBlLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLnNoYXBlV2FybmVkKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIHN0cmV0Y2ggcGh5c2ljcyBib2R5OiB1bnN1cHBvcnRlZCBzaGFwZScpO1xuICAgICAgICB0aGlzLnNoYXBlV2FybmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIGFsc28gbW92ZSBvZmZzZXQgdG8gbWF0Y2ggc2NhbGUgY2hhbmdlXG4gICAgICBvZmZzZXQgPSBlbC5ib2R5LnNoYXBlT2Zmc2V0c1tpXTtcbiAgICAgIG9mZnNldC5zY2FsZShkZWx0YVN0cmV0Y2gsIG9mZnNldCk7XG4gICAgfVxuICAgIGVsLmJvZHkudXBkYXRlQm91bmRpbmdSYWRpdXMoKTtcbiAgfVxufSkpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvc3lzdGVtcy9zdXBlci1oYW5kcy1zeXN0ZW0uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vYWZyYW1lLXN1cGVyLWhhbmRzLWNvbXBvbmVudC9zeXN0ZW1zL3N1cGVyLWhhbmRzLXN5c3RlbS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKCkgPT4ge1xuXG4vKiBnbG9iYWwgQUZSQU1FICovXG5BRlJBTUUucmVnaXN0ZXJTeXN0ZW0oJ3N1cGVyLWhhbmRzJywge1xuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMuc3VwZXJIYW5kcyA9IFtdO1xuICB9LFxuICByZWdpc3Rlck1lOiBmdW5jdGlvbiByZWdpc3Rlck1lKGNvbXApIHtcbiAgICAvLyB3aGVuIHNlY29uZCBoYW5kIHJlZ2lzdGVycywgc3RvcmUgbGlua3NcbiAgICBpZiAodGhpcy5zdXBlckhhbmRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5zdXBlckhhbmRzWzBdLm90aGVyU3VwZXJIYW5kID0gY29tcDtcbiAgICAgIGNvbXAub3RoZXJTdXBlckhhbmQgPSB0aGlzLnN1cGVySGFuZHNbMF07XG4gICAgfVxuICAgIHRoaXMuc3VwZXJIYW5kcy5wdXNoKGNvbXApO1xuICB9LFxuICB1bnJlZ2lzdGVyTWU6IGZ1bmN0aW9uIHVucmVnaXN0ZXJNZShjb21wKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5zdXBlckhhbmRzLmluZGV4T2YoY29tcCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgdGhpcy5zdXBlckhhbmRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIHRoaXMuc3VwZXJIYW5kcy5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAoeC5vdGhlclN1cGVySGFuZCA9PT0gY29tcCkge1xuICAgICAgICB4Lm90aGVyU3VwZXJIYW5kID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2FmcmFtZUNvbnRleHQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9hZnJhbWVDb250ZXh0LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEFmcmFtZUNvbnRleHQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYXNzZXRNYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2Fzc2V0TWFuYWdlciAqLyBcIi4vc3JjL2Fzc2V0TWFuYWdlci5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19yZW5kZXJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3JlbmRlcmVyICovIFwiLi9zcmMvY29tcG9uZW50cy9yZW5kZXJlci5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19yZW5kZXJlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9jb21wb25lbnRzX3JlbmRlcmVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cblxuXG52YXIgQWZyYW1lQ29udGV4dCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEFmcmFtZUNvbnRleHQoc2V0dGluZ3MpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWZyYW1lQ29udGV4dCk7XG4gICAgdGhpcy5pblZSID0gZmFsc2U7XG4gICAgLy8gc2V0dGluZ3MgcG9pbnRlclxuICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB0aGlzLmNyZWF0ZVNjZW5lKCk7XG4gICAgLy8gY3JlYXRlIGFzc2V0IG1hbmFnZXJcbiAgICB0aGlzLmFzc2V0TWFuYWdlciA9IG5ldyBfYXNzZXRNYW5hZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKHRoaXMuc2NlbmUpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoQWZyYW1lQ29udGV4dCwgW3tcbiAgICBrZXk6IFwiY3JlYXRlU2NlbmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU2NlbmUoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgLy8gZmluZCBzY2VuZSBpZiBleGlzdHMgZWxzZSBjcmVhdGUgc2NlbmVcbiAgICAgIHZhciBzY2VuZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYS1zY2VuZVwiKTtcbiAgICAgIGlmIChzY2VuZS5sZW5ndGggPiAwKSB0aGlzLnNjZW5lID0gc2NlbmVbMF07ZWxzZSB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1zY2VuZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnNjZW5lKTtcbiAgICAgICAgdGhpcy5uZXdTY2VuZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGFkZCBzdGF0cyB0byBzY2VuZSBpZiBkZWJ1Z1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWcpIHRoaXMuc2NlbmUuc2V0QXR0cmlidXRlKFwic3RhdHNcIiwgXCJcIik7XG5cbiAgICAgIC8vY3VzdG9tIHJlbmRlcmVyIHBhcmFtcyBsaWtlIGxvY2FsIGNsaXBwaW5nXG4gICAgICB0aGlzLnNjZW5lLnNldEF0dHJpYnV0ZShcInZyLXJlbmRlcmVyXCIsIFwiXCIpO1xuXG4gICAgICAvLyBjaGVjayBpZiBpbiBWUlxuICAgICAgdGhpcy5zY2VuZS5hZGRFdmVudExpc3RlbmVyKFwiZW50ZXItdnJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5pblZSID0gdHJ1ZTtcbiAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLnNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoXCJleGl0LXZyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuaW5WUiA9IGZhbHNlO1xuICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlQ29udGFpbmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUNvbnRhaW5lcih3ZWIydnIpIHtcbiAgICAgIC8vIGNvbnR0YWluZXIgZm9yIGFsbCBhZnJhbWUgZWxlbWVudHNcbiAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtZW50aXR5XCIpO1xuICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcInZyLWNvbnRhaW5lclwiKTtcbiAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG5cbiAgICAgIC8vIHBvc2l0aW9uIGNvbnRhaW5lclxuICAgICAgdmFyIHdpZHRoID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh3ZWIydnIuY29udGFpbmVyKS53aWR0aCkgKiAoMSAvIHRoaXMuc2V0dGluZ3Muc2NhbGUpO1xuICAgICAgdmFyIHggPSB0aGlzLnNldHRpbmdzLnBvc2l0aW9uLng7XG4gICAgICAvLyBpZiB4PTAgdGhlbiB0aGVuIHdlIHdhbnQgdG8gYmUgaW4gY2VudGVyIGZvciB0ZXN0aW5nIGFuZCBzaG93Y2FzZVxuICAgICAgaWYgKHggPT0gMCkgeCA9IHggLSB3aWR0aCAvIDI7XG4gICAgICB0aGlzLmNvbnRhaW5lci5vYmplY3QzRC5wb3NpdGlvbi5zZXQoeCwgdGhpcy5zZXR0aW5ncy5wb3NpdGlvbi55LCB0aGlzLnNldHRpbmdzLnBvc2l0aW9uLnopO1xuICAgICAgLy8gdXBkYXRlIHJvdGF0aW9uIGZyb20gYWZyYW1lKDEuMC40KSBiZWNhdXNlIHRoZXJlIGlzIGJ1Zyhyb3RhdGlvbiB4IHdpbGwgYmUgd3JvbmcpIGlmIHlvdSB1cGRhdGUgd2l0aCB0aHJlZS5qc1xuICAgICAgdGhpcy5jb250YWluZXIuc2V0QXR0cmlidXRlKFwicm90YXRpb25cIiwge1xuICAgICAgICB4OiB0aGlzLnNldHRpbmdzLnJvdGF0aW9uLngsXG4gICAgICAgIHk6IHRoaXMuc2V0dGluZ3Mucm90YXRpb24ueSxcbiAgICAgICAgejogdGhpcy5zZXR0aW5ncy5yb3RhdGlvbi56XG4gICAgICB9KTtcbiAgICAgIHZhciBwYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNldHRpbmdzLnBhcmVudFNlbGVjdG9yKTtcbiAgICAgIGlmIChwYXJlbnRFbGVtZW50KSBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtlbHNlIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc2V0QXR0cmlidXRlKFwidnItZ3JhYi1yb3RhdGUtc3RhdGljXCIsIFwiXCIpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJzaC1ncmFiYmFibGVcIiwgXCJcIik7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnNldEF0dHJpYnV0ZShcInN0cmV0Y2hhYmxlXCIsIFwiXCIpO1xuICAgICAgICB0aGlzLnNjZW5lLmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gcG9pbnRlciBmb3IgZ3JhYlJvdGF0ZVN0YXRpY1xuICAgICAgdGhpcy5jb250YWluZXIud2ViMnZyID0gd2ViMnZyO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVTa3lcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU2t5KCkge1xuICAgICAgLy8gY3JlYXRlIHNreSBpZiBza3kgZG9lc250IGV4aXN0XG4gICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhLXNreVwiKS5sZW5ndGggPT0gMCAmJiB0aGlzLnNldHRpbmdzLnNreWJveCkge1xuICAgICAgICB0aGlzLnNreSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLXNreVwiKTtcbiAgICAgICAgdGhpcy5za3kuc2V0QXR0cmlidXRlKFwiY29sb3JcIiwgXCIjYTlmOGZlXCIpO1xuICAgICAgICB0aGlzLnNjZW5lLmFwcGVuZENoaWxkKHRoaXMuc2t5KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY3JlYXRlQ29udHJvbGxlcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQ29udHJvbGxlcnMoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICAgIC8vIGN1cnNvciBvbmx5IGZvciBkZXYgdGVzdGluZyBvbiBkZXNrdG9wXG4gICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW91c2VDdXJzb3JcIikpIHtcbiAgICAgICAgdmFyIGN1cnNvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLWVudGl0eVwiKTtcbiAgICAgICAgY3Vyc29yLmlkID0gXCJtb3VzZUN1cnNvclwiO1xuICAgICAgICBjdXJzb3Iuc2V0QXR0cmlidXRlKFwiY3Vyc29yXCIsIFwicmF5T3JpZ2luXCIsIFwibW91c2VcIik7XG4gICAgICAgIGN1cnNvci5zZXRBdHRyaWJ1dGUoXCJyYXljYXN0ZXJcIiwgXCJvYmplY3RzOiAuXCIuY29uY2F0KHRoaXMuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcsIFwiLCAuY29sbGlkYWJsZVwiKSk7XG4gICAgICAgIHRoaXMuc2NlbmUuYXBwZW5kQ2hpbGQoY3Vyc29yKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3VwZXIgaGFuZHMgNkRPRlxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY3JlYXRlQ29udHJvbGxlcnMgJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVmdEhhbmRcIikpIHtcbiAgICAgICAgdmFyIHJheWNhc3RlciA9IFwib2JqZWN0czogLlwiLmNvbmNhdCh0aGlzLnNldHRpbmdzLmludGVyYWN0aXZlVGFnLCBcIiwgLmNvbGxpZGFibGU7IGZhcjogXCIpLmNvbmNhdCh0aGlzLnNldHRpbmdzLnJheWNhc3RlckZhcik7XG4gICAgICAgIHZhciBzdXBlcmhhbmRzID0gXCJjb2xsaWRlckV2ZW50OiByYXljYXN0ZXItaW50ZXJzZWN0aW9uOyBjb2xsaWRlckV2ZW50UHJvcGVydHk6IGVsczsgY29sbGlkZXJFbmRFdmVudDpyYXljYXN0ZXItaW50ZXJzZWN0aW9uLWNsZWFyZWQ7IGNvbGxpZGVyRW5kRXZlbnRQcm9wZXJ0eTogY2xlYXJlZEVsczsgZ3JhYlN0YXJ0QnV0dG9uczogZ3JpcGRvd247IGdyYWJFbmRCdXR0b25zOiBncmlwdXA7IHN0cmV0Y2hTdGFydEJ1dHRvbnM6IGdyaXBkb3duOyBzdHJldGNoRW5kQnV0dG9uczogZ3JpcHVwXCI7XG4gICAgICAgIHZhciBsZWZ0SGFuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLWVudGl0eVwiKTtcbiAgICAgICAgbGVmdEhhbmQuaWQgPSBcImxlZnRIYW5kXCI7XG4gICAgICAgIGxlZnRIYW5kLnNldEF0dHJpYnV0ZShcImhhbmQtY29udHJvbHNcIiwgXCJoYW5kOmxlZnQ7IGhhbmRNb2RlbFN0eWxlOiBoaWdoUG9seTsgY29sb3I6ICNmZmNjY2NcIik7XG4gICAgICAgIGxlZnRIYW5kLnNldEF0dHJpYnV0ZShcImxhc2VyLWNvbnRyb2xzXCIsIFwiXCIpO1xuICAgICAgICBsZWZ0SGFuZC5zZXRBdHRyaWJ1dGUoXCJyYXljYXN0ZXJcIiwgcmF5Y2FzdGVyKTtcbiAgICAgICAgbGVmdEhhbmQuc2V0QXR0cmlidXRlKFwic3VwZXItaGFuZHNcIiwgc3VwZXJoYW5kcyk7XG4gICAgICAgIHZhciByaWdodEhhbmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1lbnRpdHlcIik7XG4gICAgICAgIHJpZ2h0SGFuZC5pZCA9IFwicmlnaHRIYW5kXCI7XG4gICAgICAgIHJpZ2h0SGFuZC5zZXRBdHRyaWJ1dGUoXCJoYW5kLWNvbnRyb2xzXCIsIFwiaGFuZDpyaWdodDsgaGFuZE1vZGVsU3R5bGU6IGhpZ2hQb2x5OyBjb2xvcjogI2ZmY2NjY1wiKTtcbiAgICAgICAgcmlnaHRIYW5kLnNldEF0dHJpYnV0ZShcImxhc2VyLWNvbnRyb2xzXCIsIFwiXCIpO1xuICAgICAgICByaWdodEhhbmQuc2V0QXR0cmlidXRlKFwicmF5Y2FzdGVyXCIsIHJheWNhc3Rlcik7XG4gICAgICAgIHJpZ2h0SGFuZC5zZXRBdHRyaWJ1dGUoXCJzdXBlci1oYW5kc1wiLCBzdXBlcmhhbmRzKTtcbiAgICAgICAgdGhpcy5zY2VuZS5hcHBlbmRDaGlsZChsZWZ0SGFuZCk7XG4gICAgICAgIHRoaXMuc2NlbmUuYXBwZW5kQ2hpbGQocmlnaHRIYW5kKTtcbiAgICAgIH1cbiAgICAgIC8vIGtleWJvYXJkXG4gICAgICB0aGlzLmtleWJvYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2ci1rZXlib2FyZFwiKTtcbiAgICAgIGlmICghdGhpcy5rZXlib2FyZCkge1xuICAgICAgICB0aGlzLmtleWJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtZW50aXR5XCIpO1xuICAgICAgICB0aGlzLmtleWJvYXJkLmlkID0gXCJ2ci1rZXlib2FyZFwiO1xuICAgICAgICB0aGlzLmtleWJvYXJkLnNldEF0dHJpYnV0ZShcImEta2V5Ym9hcmRcIiwgXCJcIik7XG4gICAgICAgIHRoaXMua2V5Ym9hcmQuc2V0QXR0cmlidXRlKFwic2gtZ3JhYmJhYmxlXCIsIFwiXCIpO1xuICAgICAgICB0aGlzLnNjZW5lLmFwcGVuZENoaWxkKHRoaXMua2V5Ym9hcmQpO1xuICAgICAgICB0aGlzLmtleWJvYXJkLm9iamVjdDNELnZpc2libGUgPSBmYWxzZTtcblxuICAgICAgICAvLyBjdXJyZW50IGFjdGl2ZSBpbnB1dFxuICAgICAgICB0aGlzLmtleWJvYXJkLmFjdGl2ZUlucHV0ID0gbnVsbDtcbiAgICAgICAgLy8gZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBrZXlib2FyZCBrZXkgcHJlc3MgXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Eta2V5Ym9hcmQtdXBkYXRlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAoX3RoaXMyLmtleWJvYXJkLmFjdGl2ZUlucHV0KSB7XG4gICAgICAgICAgICB2YXIgY29kZSA9IHBhcnNlSW50KGUuZGV0YWlsLmNvZGUpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gX3RoaXMyLmtleWJvYXJkLmFjdGl2ZUlucHV0LnZhbHVlO1xuXG4gICAgICAgICAgICAvLyBiYWNrc3BhY2VcbiAgICAgICAgICAgIGlmIChjb2RlID09IDgpIHZhbHVlID0gdmFsdWUuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgLy8gc3VibWl0IG9yIGNhbmNlbFxuICAgICAgICAgICAgZWxzZSBpZiAoY29kZSA9PSA2IHx8IGNvZGUgPT0gMjQpIHtcbiAgICAgICAgICAgICAgX3RoaXMyLmtleWJvYXJkLm9iamVjdDNELnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgX3RoaXMyLmtleWJvYXJkLm9iamVjdDNELnBvc2l0aW9uLnkgPSAxMDAwMDsgLy8gYmVjYXVzZSByYXljYXN0aW5nIHN0aWxsIGNvbGxpZGVzIHdpdGggaW52aXNpYmxlIG9iamVjdHNcbiAgICAgICAgICAgICAgX3RoaXMyLmtleWJvYXJkLmFjdGl2ZUlucHV0LmVsZW1lbnQuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgIF90aGlzMi5rZXlib2FyZC5hY3RpdmVJbnB1dC5lbGVtZW50LnVwZGF0ZSgpO1xuICAgICAgICAgICAgICBfdGhpczIua2V5Ym9hcmQuYWN0aXZlSW5wdXQgPSBudWxsO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZ25vcmUgYXJyb3cga2V5c1xuICAgICAgICAgICAgZWxzZSBpZiAoIVszNywgMzgsIDM5LCA0MF0uaW5jbHVkZXMoY29kZSkpIHZhbHVlICs9IGUuZGV0YWlsLnZhbHVlO1xuICAgICAgICAgICAgX3RoaXMyLmtleWJvYXJkLmFjdGl2ZUlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICBfdGhpczIua2V5Ym9hcmQuYWN0aXZlSW5wdXQuZWxlbWVudC51cGRhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xufSgpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2Fzc2V0TWFuYWdlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvYXNzZXRNYW5hZ2VyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQXNzZXRNYW5hZ2VyKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0W1wicmV0dXJuXCJdICE9IG51bGwpIGl0W1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH1cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgQXNzZXRNYW5hZ2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQXNzZXRNYW5hZ2VyKHNjZW5lKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFzc2V0TWFuYWdlcik7XG4gICAgdmFyIGFzc2V0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYS1hc3NldHNcIilbMF07XG4gICAgaWYgKGFzc2V0cykgdGhpcy5hc3NldHMgPSBhc3NldHM7ZWxzZSB7XG4gICAgICB0aGlzLmFzc2V0cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLWFzc2V0c1wiKTtcbiAgICAgIHNjZW5lLmFwcGVuZENoaWxkKHRoaXMuYXNzZXRzKTtcbiAgICB9XG4gIH1cblxuICAvLyB1cGRhdGUgY3VycmVudC1pZCBhdHRyaWJ1dGVcbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhBc3NldE1hbmFnZXIsIFt7XG4gICAga2V5OiBcInVwZGF0ZUN1cnJlbnRBc3NldElkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRBc3NldElkKCkge1xuICAgICAgdmFyIGN1cnJlbnRBc3NldElkID0gcGFyc2VJbnQodGhpcy5hc3NldHMuZ2V0QXR0cmlidXRlKFwiY3VycmVudC1pZFwiKSk7XG4gICAgICBpZiAoIXRoaXMuYXNzZXRzLmdldEF0dHJpYnV0ZShcImN1cnJlbnQtaWRcIikpIHtcbiAgICAgICAgdGhpcy5hc3NldHMuc2V0QXR0cmlidXRlKFwiY3VycmVudC1pZFwiLCAwKTtcbiAgICAgICAgY3VycmVudEFzc2V0SWQgPSAwO1xuICAgICAgfVxuICAgICAgdGhpcy5hc3NldHMuc2V0QXR0cmlidXRlKFwiY3VycmVudC1pZFwiLCBjdXJyZW50QXNzZXRJZCArIDEpO1xuICAgIH1cbiAgICAvLyB1cGRhdGUgY3VycmVudC1pZCBhdHRyaWJ1dGUgYW5kIHJldHVybiBpdC5cbiAgICAvLyB1c2VkIGZvciBlbGVtZW50cyAoZXguIHZpZGVvKSBvdXRzaWRlIGEtYXNzZXRzIHRhZ1xuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZUN1cnJlbnRBc3NldElkUmV0dXJuXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRBc3NldElkUmV0dXJuKCkge1xuICAgICAgdGhpcy51cGRhdGVDdXJyZW50QXNzZXRJZCgpO1xuICAgICAgcmV0dXJuIFwiYXNzZXQtXCIgKyB0aGlzLmFzc2V0cy5nZXRBdHRyaWJ1dGUoXCJjdXJyZW50LWlkXCIpO1xuICAgIH1cblxuICAgIC8vIGZpbmQgYXNzZXQgaWYgZXhpc3RzIGlmIG5vdCBjcmVhdGUgYW5kIHJldHVybiBpdFxuICB9LCB7XG4gICAga2V5OiBcImdldEFzc2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFzc2V0KHBhdGgsIHR5cGUpIHtcbiAgICAgIHZhciBhc3NldHMgPSB0aGlzLmFzc2V0cy5nZXRDaGlsZHJlbigpO1xuICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGFzc2V0cyksXG4gICAgICAgIF9zdGVwO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgYXNzZXQgPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgICBpZiAoYXNzZXQuZ2V0QXR0cmlidXRlKFwic3JjXCIpID09PSBwYXRoKSByZXR1cm4gYXNzZXQuZ2V0QXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfaXRlcmF0b3IuZShlcnIpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2l0ZXJhdG9yLmYoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUFzc2V0KHBhdGgsIHR5cGUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVBc3NldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVBc3NldChwYXRoLCB0eXBlKSB7XG4gICAgICB2YXIgYXNzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpO1xuICAgICAgYXNzZXQuc2V0QXR0cmlidXRlKFwic3JjXCIsIHBhdGgpO1xuICAgICAgdGhpcy51cGRhdGVDdXJyZW50QXNzZXRJZCgpO1xuICAgICAgdmFyIGlkID0gXCJhc3NldC1cIiArIHRoaXMuYXNzZXRzLmdldEF0dHJpYnV0ZShcImN1cnJlbnQtaWRcIik7XG4gICAgICBhc3NldC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG4gICAgICAvLyBoYXZlIHRvIG1hbnVhbHkgYWRkIGNyb3Nzb3JpZ2luIGZvciBhbGwgZXh0ZXJuYWwgYXNzZXRzIHRvIGxvYWRcbiAgICAgIGFzc2V0LnNldEF0dHJpYnV0ZShcImNyb3Nzb3JpZ2luXCIsIFwiQW5vbnltb3VzXCIpO1xuICAgICAgdGhpcy5hc3NldHMuYXBwZW5kQ2hpbGQoYXNzZXQpO1xuICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW1vdmVBc3NldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVBc3NldChpZCkge1xuICAgICAgdGhpcy5hc3NldHMucXVlcnlTZWxlY3RvcihcIiNcIiArIGlkKS5yZW1vdmUoKTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb21wb25lbnRzL2FuaW1hdGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2NvbXBvbmVudHMvYW5pbWF0ZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKCkgPT4ge1xuXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJ2ci1hbmltYXRlXCIsIHtcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgX3RoaXMkZWwkZWxlbWVudCwgX3RoaXMkZWwkZWxlbWVudDIsIF90aGlzJGVsJGVsZW1lbnQzLCBfdGhpcyRlbCRlbGVtZW50NDtcbiAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAvLyBsaXN0ZW5lcyBmb3IgY3NzIGFuaW1hdGlvbiBhbmQgdHJhbnNsYXRpb25cbiAgICAoX3RoaXMkZWwkZWxlbWVudCA9IHRoaXMuZWwuZWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXMkZWwkZWxlbWVudCA9PT0gdm9pZCAwIHx8IF90aGlzJGVsJGVsZW1lbnQuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uc3RhcnRcIiwgdGhpcy5zdGFydEFuaW1hdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAoX3RoaXMkZWwkZWxlbWVudDIgPSB0aGlzLmVsLmVsZW1lbnQpID09PSBudWxsIHx8IF90aGlzJGVsJGVsZW1lbnQyID09PSB2b2lkIDAgfHwgX3RoaXMkZWwkZWxlbWVudDIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiYW5pbWF0aW9uZW5kXCIsIHRoaXMuc3RvcEFuaW1hdGlvbi5iaW5kKHRoaXMpKTtcbiAgICAoX3RoaXMkZWwkZWxlbWVudDMgPSB0aGlzLmVsLmVsZW1lbnQpID09PSBudWxsIHx8IF90aGlzJGVsJGVsZW1lbnQzID09PSB2b2lkIDAgfHwgX3RoaXMkZWwkZWxlbWVudDMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbnN0YXJ0XCIsIHRoaXMuc3RhcnRBbmltYXRpb24uYmluZCh0aGlzKSk7XG4gICAgKF90aGlzJGVsJGVsZW1lbnQ0ID0gdGhpcy5lbC5lbGVtZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRlbCRlbGVtZW50NCA9PT0gdm9pZCAwIHx8IF90aGlzJGVsJGVsZW1lbnQ0LmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgdGhpcy5zdG9wQW5pbWF0aW9uLmJpbmQodGhpcykpO1xuICB9LFxuICB0aWNrOiBmdW5jdGlvbiB0aWNrKCkge1xuICAgIHZhciBfdGhpcyRlbCRlbGVtZW50NTtcbiAgICBpZiAodGhpcy5ydW5uaW5nKSAoX3RoaXMkZWwkZWxlbWVudDUgPSB0aGlzLmVsLmVsZW1lbnQpID09PSBudWxsIHx8IF90aGlzJGVsJGVsZW1lbnQ1ID09PSB2b2lkIDAgfHwgX3RoaXMkZWwkZWxlbWVudDUud2ViMnZyLnVwZGF0ZSgpO1xuICB9LFxuICBzdGFydEFuaW1hdGlvbjogZnVuY3Rpb24gc3RhcnRBbmltYXRpb24oKSB7XG4gICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcbiAgfSxcbiAgc3RvcEFuaW1hdGlvbjogZnVuY3Rpb24gc3RvcEFuaW1hdGlvbigpIHtcbiAgICB2YXIgX3RoaXMkZWwkZWxlbWVudDY7XG4gICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgLy8gb25lIGZpbmFsIHVwZGF0ZVxuICAgIChfdGhpcyRlbCRlbGVtZW50NiA9IHRoaXMuZWwuZWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXMkZWwkZWxlbWVudDYgPT09IHZvaWQgMCB8fCBfdGhpcyRlbCRlbGVtZW50Ni53ZWIydnIudXBkYXRlKCk7XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9jb21wb25lbnRzL2JvcmRlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9jb21wb25lbnRzL2JvcmRlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoKSA9PiB7XG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcInZyLWJvcmRlclwiLCB7XG4gIHNjaGVtYToge1xuICAgIHdpZHRoOiB7XG4gICAgICB0eXBlOiBcIm51bWJlclwiXG4gICAgfSxcbiAgICBjb2xvcjoge1xuICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgIH1cbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICAgIHZhciBwbGFuZSA9IHRoaXMuZWwub2JqZWN0M0QuY2hpbGRyZW5bMF07XG4gICAgdmFyIGVkZ2VzID0gbmV3IFRIUkVFLkVkZ2VzR2VvbWV0cnkocGxhbmUuZ2VvbWV0cnkpO1xuICAgIHZhciBsaW5lID0gbmV3IFRIUkVFLkxpbmVTZWdtZW50cyhlZGdlcywgbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtcbiAgICAgIGNvbG9yOiAweDAwMDAwMCxcbiAgICAgIGxpbmV3aWR0aDogdGhpcy5kYXRhLndpZHRoXG4gICAgfSkpO1xuICAgIHRoaXMuYm9yZGVyT2JqZWN0ID0gbGluZTtcbiAgICB0aGlzLmVsLmVsZW1lbnQud2ViMnZyLmFmcmFtZS5jb250YWluZXIub2JqZWN0M0QuYWRkKHRoaXMuYm9yZGVyT2JqZWN0KTtcblxuICAgIC8vbWF5YmUgY2xpcHBpbmdDb250ZXh0IGluc2lkZSB0aWNrP1xuICAgIGlmICh0aGlzLmVsLmVsZW1lbnQuY2xpcHBpbmdDb250ZXh0KSB7XG4gICAgICBsaW5lLm1hdGVyaWFsLmNsaXBwaW5nUGxhbmVzID0gdGhpcy5lbC5lbGVtZW50LmNsaXBwaW5nQ29udGV4dC5wbGFuZXM7XG4gICAgICBsaW5lLm1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgIC8vIHdhaXRpbmcgZm9yIHRocmVlLmpzKFdlYkdMKSB0byBhZGQgbGluZVdpZHRoIHN1cHBvcnQgZm9yIFdpbmRvd3MoRGlyZWN0WCkgYnJvd3NlcnMgZm9yIG5vdyBsaW5ld2lkdGggaXMgMSBubyBtYXR0ZXIgd2hhdCB5b3Ugc2V0IGl0LlxuICAgIC8vIGxpbmVXaWR0aCB3b3JrcyBmb3Igb3RoZXIgT1MuXG4gICAgdmFyIGJvcmRlcldpZHRoID0gdGhpcy5kYXRhLndpZHRoO1xuXG4gICAgLy8gY3VzdG9tIGVsZW1lbnQgYm9yZGVyIHdpZHRoXG4gICAgaWYgKHRoaXMuZWwuZWxlbWVudC5ib3JkZXJXaWR0aCkgdGhpcy5ib3JkZXJPYmplY3QubWF0ZXJpYWwubGluZXdpZHRoID0gdGhpcy5lbC5lbGVtZW50LmJvcmRlcldpZHRoO2Vsc2UgdGhpcy5ib3JkZXJPYmplY3QubWF0ZXJpYWwubGluZXdpZHRoID0gYm9yZGVyV2lkdGg7XG5cbiAgICAvLyBjdXN0b20gZWxlbWVudCBib3JkZXIgY29sb3JcbiAgICBpZiAodGhpcy5lbC5lbGVtZW50LmJvcmRlckNvbG9yKSB0aGlzLmJvcmRlck9iamVjdC5tYXRlcmlhbC5jb2xvciA9IHRoaXMuZWwuZWxlbWVudC5ib3JkZXJDb2xvcjtlbHNlIHRoaXMuYm9yZGVyT2JqZWN0Lm1hdGVyaWFsLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKHRoaXMuZGF0YS5jb2xvcik7XG4gIH0sXG4gIHVwZGF0ZUJvcmRlcjogZnVuY3Rpb24gdXBkYXRlQm9yZGVyKCkge1xuICAgIHZhciBfdGhpcyRlbCRlbGVtZW50O1xuICAgIGlmICgoX3RoaXMkZWwkZWxlbWVudCA9IHRoaXMuZWwuZWxlbWVudCkgIT09IG51bGwgJiYgX3RoaXMkZWwkZWxlbWVudCAhPT0gdm9pZCAwICYmIF90aGlzJGVsJGVsZW1lbnQudmlzaWJsZSkge1xuICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuYm9yZGVyT2JqZWN0Lm1hdGVyaWFsLnZpc2libGUgPSB0cnVlO1xuICAgIH0gZWxzZSB0aGlzLmJvcmRlck9iamVjdC5tYXRlcmlhbC52aXNpYmxlID0gZmFsc2U7XG4gIH0sXG4gIHRpY2s6IGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgaWYgKHRoaXMucnVubmluZykge1xuICAgICAgdmFyIHNjYWxlID0gdGhpcy5lbC5vYmplY3QzRC5zY2FsZTtcbiAgICAgIHZhciBwbGFuZSA9IHRoaXMuZWwub2JqZWN0M0QuY2hpbGRyZW5bMF0uZ2VvbWV0cnkuY2xvbmUoKTtcbiAgICAgIHBsYW5lLnNjYWxlKHNjYWxlLngsIHNjYWxlLnksIHNjYWxlLnopO1xuICAgICAgdmFyIGVkZ2VzID0gbmV3IFRIUkVFLkVkZ2VzR2VvbWV0cnkocGxhbmUpO1xuICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5lbC5vYmplY3QzRC5wb3NpdGlvbjtcbiAgICAgIHRoaXMuYm9yZGVyT2JqZWN0Lmdlb21ldHJ5ID0gZWRnZXM7XG4gICAgICB0aGlzLmJvcmRlck9iamVjdC5wb3NpdGlvbi5zZXQocG9zaXRpb24ueCwgcG9zaXRpb24ueSwgcG9zaXRpb24ueiArIHRoaXMuZWwuZWxlbWVudC53ZWIydnIuc2V0dGluZ3MubGF5ZXJTdGVwICogMik7XG4gICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIHRoaXMuZWwuZWxlbWVudC53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5vYmplY3QzRC5yZW1vdmUodGhpcy5ib3JkZXJPYmplY3QpO1xuICB9XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9ncmFiUm90YXRlU3RhdGljLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9jb21wb25lbnRzL2dyYWJSb3RhdGVTdGF0aWMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKCgpID0+IHtcblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdFtcInJldHVyblwiXSAhPSBudWxsKSBpdFtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9XG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJ2ci1ncmFiLXJvdGF0ZS1zdGF0aWNcIiwge1xuICB0aWNrOiBmdW5jdGlvbiB0aWNrKCkge1xuICAgIGlmICh0aGlzLmVsLmNvbXBvbmVudHNbXCJzaC1ncmFiYmFibGVcIl0uZ3JhYmJlZCkge1xuICAgICAgLy8gdXBkYXRlIGNsaXBwaW5nIHdoZW4gbW92aW5nXG4gICAgICBpZiAodGhpcy5lbC53ZWIydnIuc2Nyb2xsLmhhc1Njcm9sbCkge1xuICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5lbC53ZWIydnIuZWxlbWVudHMpLFxuICAgICAgICAgIF9zdGVwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgICAgZWxlbWVudC51cGRhdGVDbGlwcGluZygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBfaXRlcmF0b3IuZigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgb2JqID0gdGhpcy5lbC5vYmplY3QzRDtcbiAgICAgIHZhciBoYW5kID0gdGhpcy5lbC5jb21wb25lbnRzW1wic2gtZ3JhYmJhYmxlXCJdLmdyYWJiZXJzWzBdLm9iamVjdDNEO1xuICAgICAgb2JqLnJvdGF0aW9uLnkgPSBNYXRoLmF0YW4yKGhhbmQucG9zaXRpb24ueCAtIChvYmoucG9zaXRpb24ueCArIHRoaXMuZWwuY2hpbGRyZW5bMF0uZ2V0QXR0cmlidXRlKFwid2lkdGhcIikgLyAyKSwgaGFuZC5wb3NpdGlvbi56IC0gb2JqLnBvc2l0aW9uLnopO1xuXG4gICAgICAvL29iai5yb3RhdGlvbi54ID0gaGFuZC5yb3RhdGlvbi54O1xuICAgICAgLy9vYmoucm90YXRpb24ueSA9IGhhbmQucm90YXRpb24ueTtcbiAgICAgIC8vb2JqLnJvdGF0aW9uLnogPSBoYW5kLnJvdGF0aW9uLno7XG4gICAgfVxuICB9XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9yZW5kZXJlci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2NvbXBvbmVudHMvcmVuZGVyZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoKSA9PiB7XG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcInZyLXJlbmRlcmVyXCIsIHtcbiAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB0aGlzLmVsLnNjZW5lRWwucmVuZGVyZXIubG9jYWxDbGlwcGluZ0VuYWJsZWQgPSB0cnVlO1xuICB9XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvY29tcG9uZW50cy9zY3JvbGxiYXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvY29tcG9uZW50cy9zY3JvbGxiYXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKCkgPT4ge1xuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0W1wicmV0dXJuXCJdICE9IG51bGwpIGl0W1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH1cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfVxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlcltcIkBAaXRlcmF0b3JcIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH1cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9XG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJ2ci1zY3JvbGxiYXJcIiwge1xuICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIHZhciBzY3JvbGxIZWlnaHQgPSBwYXJzZUZsb2F0KHRoaXMuZWwud2ViMnZyLmFmcmFtZS5jb250YWluZXIuZmlyc3RFbGVtZW50Q2hpbGQuZWxlbWVudC5zdHlsZS5oZWlnaHQpIC0gdGhpcy5lbC53ZWIydnIuc2V0dGluZ3Muc2Nyb2xsV2luZG93SGVpZ2h0O1xuICAgICAgaWYgKHRoaXMuZWwud2ViMnZyLnNjcm9sbC5zY3JvbGxDb250YWluZXIgPT0gdGhpcy5lbC53ZWIydnIuY29udGFpbmVyKSBzY3JvbGxIZWlnaHQgPSB0aGlzLmVsLndlYjJ2ci5zY3JvbGwuc2Nyb2xsQ29udGFpbmVyLnNjcm9sbEhlaWdodCAtIHRoaXMuZWwud2ViMnZyLnNjcm9sbC5zY3JvbGxDb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgICAgdmFyIHNjcm9sbFkgPSAoMSAtIGV2dC5kZXRhaWwuaW50ZXJzZWN0aW9uLnV2LnkpICogc2Nyb2xsSGVpZ2h0IC8gdGhpcy5lbC53ZWIydnIuc2V0dGluZ3Muc2NhbGU7XG4gICAgICB2YXIgZWxlbWVudHMgPSBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5lbC53ZWIydnIuZWxlbWVudHMpO1xuICAgICAgLy8gcmVtb3ZlIGZpcnN0IGVsZW1lbnQgdGhhdCBpcyB0aGUgYmFja2dvcnVuZCBvZiBjb250YWluZXJcbiAgICAgIGVsZW1lbnRzLnNoaWZ0KCk7XG4gICAgICB0aGlzLmVsLnBvaW50ZXIub2JqZWN0M0QucG9zaXRpb24uc2V0WSh0aGlzLnBvaW50RW5kWSArIGV2dC5kZXRhaWwuaW50ZXJzZWN0aW9uLnV2LnkgKiAodGhpcy5wb2ludFN0YXJ0WSAtIHRoaXMucG9pbnRFbmRZKSk7XG4gICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZWxlbWVudHMpLFxuICAgICAgICBfc3RlcDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgdmFyIGVsZW1lbnQgPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgICBlbGVtZW50LnBvc2l0aW9uLnNjcm9sbFkgPSBzY3JvbGxZO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9pdGVyYXRvci5mKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmVsLndlYjJ2ci51cGRhdGUoKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuICBwbGF5OiBmdW5jdGlvbiBwbGF5KCkge1xuICAgIHZhciB3aWR0aCA9IHBhcnNlRmxvYXQodGhpcy5lbC53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSk7XG4gICAgdmFyIGhlaWdodCA9IHBhcnNlRmxvYXQodGhpcy5lbC53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIikpO1xuXG4gICAgLy8gaW5pdCBwbGFuZSBzaXplXG4gICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB3aWR0aCAvIDIwKTtcbiAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBoZWlnaHQpO1xuXG4gICAgLy9pbml0IHNjcm9sbGJhciBwb3NpdGlvblxuICAgIHRoaXMuZWwuc2Nyb2xsYmFyLm9iamVjdDNELnBvc2l0aW9uLnNldFgod2lkdGggKyBwYXJzZUZsb2F0KHRoaXMuZWwuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikgLyAyKSk7XG4gICAgdGhpcy5lbC5zY3JvbGxiYXIub2JqZWN0M0QucG9zaXRpb24uc2V0WSgwIC0gaGVpZ2h0IC8gMik7IC8vMS45NlxuICAgIHRoaXMuZWwuc2Nyb2xsYmFyLm9iamVjdDNELnBvc2l0aW9uLnNldFooLSh0aGlzLmVsLndlYjJ2ci5zZXR0aW5ncy5sYXllclN0ZXAgKiA0KSk7XG5cbiAgICAvLyBpbml0IHBvaW50ZXIgcG9zaXRpb24gYW5kIHNpemVcbiAgICB0aGlzLmVsLnBvaW50ZXIuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIHdpZHRoIC8gMjApO1xuICAgIHRoaXMuZWwucG9pbnRlci5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB3aWR0aCAvIDIwKTtcbiAgICB0aGlzLnBvaW50U3RhcnRZID0gaGVpZ2h0IC8gMiAtIHBhcnNlRmxvYXQodGhpcy5lbC5wb2ludGVyLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSkgLyAyO1xuICAgIHRoaXMucG9pbnRFbmRZID0gdGhpcy5wb2ludFN0YXJ0WSAtIGhlaWdodCArIHBhcnNlRmxvYXQodGhpcy5lbC5wb2ludGVyLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSk7XG4gICAgdGhpcy5lbC5wb2ludGVyLm9iamVjdDNELnBvc2l0aW9uLnNldFkodGhpcy5wb2ludFN0YXJ0WSk7XG4gICAgdGhpcy5lbC5wb2ludGVyLm9iamVjdDNELnBvc2l0aW9uLnNldFoodGhpcy5lbC53ZWIydnIuc2V0dGluZ3MubGF5ZXJTdGVwICogMik7XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9lbGVtZW50cy9idXR0b25FbGVtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZWxlbWVudHMvYnV0dG9uRWxlbWVudC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBCdXR0b21FbGVtZW50KVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RleHRFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3RleHRFbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvdGV4dEVsZW1lbnQuanNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH1cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyB0cnkgeyB2YXIgdCA9ICFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IH0gY2F0Y2ggKHQpIHt9IHJldHVybiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHJldHVybiAhIXQ7IH0pKCk7IH1cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxudmFyIEJ1dHRvbUVsZW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9UZXh0RWxlbWVudCkge1xuICBmdW5jdGlvbiBCdXR0b21FbGVtZW50KHdlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXIpIHtcbiAgICB2YXIgX3RoaXM7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1dHRvbUVsZW1lbnQpO1xuICAgIF90aGlzID0gX2NhbGxTdXBlcih0aGlzLCBCdXR0b21FbGVtZW50LCBbd2ViMnZyLCBkb21FbGVtZW50LCBsYXllcl0pO1xuICAgIF90aGlzLmJvcmRlckNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKDB4MDAwMDAwKTtcbiAgICBfdGhpcy5ib3JkZXJXaWR0aCA9IDE7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIF9pbmhlcml0cyhCdXR0b21FbGVtZW50LCBfVGV4dEVsZW1lbnQpO1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKEJ1dHRvbUVsZW1lbnQsIFt7XG4gICAga2V5OiBcInVwZGF0ZVRleHRQYWRkaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRleHRQYWRkaW5nKCkge1xuICAgICAgLy8gaWdub3JlIHBhZGRpbmcgZm9yIGJ1dHRvbnNcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlVGV4dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVUZXh0KCkge1xuICAgICAgaWYgKHRoaXMuZG9tRWxlbWVudC50YWdOYW1lID09IFwiSU5QVVRcIikgdGhpcy50ZXh0VmFsdWUgPSB0aGlzLmRvbUVsZW1lbnQudmFsdWUucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpO1xuICAgIH1cbiAgfV0pO1xufShfdGV4dEVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2VsZW1lbnRzL2NhbnZhc0VsZW1lbnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9lbGVtZW50cy9jYW52YXNFbGVtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIENhbnZhc0VsZW1lbnQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvZWxlbWVudC5qc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfY2FsbFN1cGVyKHQsIG8sIGUpIHsgcmV0dXJuIG8gPSBfZ2V0UHJvdG90eXBlT2YobyksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSA/IFJlZmxlY3QuY29uc3RydWN0KG8sIGUgfHwgW10sIF9nZXRQcm90b3R5cGVPZih0KS5jb25zdHJ1Y3RvcikgOiBvLmFwcGx5KHQsIGUpKTsgfVxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG52YXIgQ2FudmFzRWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0VsZW1lbnQpIHtcbiAgZnVuY3Rpb24gQ2FudmFzRWxlbWVudCh3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYW52YXNFbGVtZW50KTtcbiAgICBfdGhpcyA9IF9jYWxsU3VwZXIodGhpcywgQ2FudmFzRWxlbWVudCwgW3dlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXJdKTtcbiAgICBfdGhpcy5pbWFnZUlkID0gbnVsbDtcbiAgICBfdGhpcy5lbnRpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1pbWFnZVwiKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgX2luaGVyaXRzKENhbnZhc0VsZW1lbnQsIF9FbGVtZW50KTtcbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhDYW52YXNFbGVtZW50LCBbe1xuICAgIGtleTogXCJ1cGRhdGVJbWFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVJbWFnZShzcmMpIHtcbiAgICAgIHZhciBhc3NldElkID0gdGhpcy53ZWIydnIuYWZyYW1lLmFzc2V0TWFuYWdlci5nZXRBc3NldChzcmMsIFwiaW1nXCIpO1xuXG4gICAgICAvLyByZW1vdmUgb2xkIGltYWdlIGlmIHRoZXJlIGlzIG5ldyBpbWFnZVxuICAgICAgaWYgKHRoaXMuaW1hZ2VJZCAmJiB0aGlzLmltYWdlSWQgIT0gYXNzZXRJZCkgdGhpcy53ZWIydnIuYWZyYW1lLmFzc2V0TWFuYWdlci5yZW1vdmVBc3NldCh0aGlzLmltYWdlSWQpO1xuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJJTUFHRV9cIiArIGFzc2V0SWQpO1xuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiI1wiICsgYXNzZXRJZCk7XG4gICAgICB0aGlzLmltYWdlSWQgPSBhc3NldElkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzcGVjaWZpY1VwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzcGVjaWZpY1VwZGF0ZSgpIHtcbiAgICAgIHRoaXMudXBkYXRlSW1hZ2UodGhpcy5kb21FbGVtZW50LnRvRGF0YVVSTCgpKTtcbiAgICB9XG4gIH1dKTtcbn0oX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2VsZW1lbnRzL2NoZWNrYm94RWxlbWVudC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZWxlbWVudHMvY2hlY2tib3hFbGVtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKiovICgoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQ2hlY2tCb3hFbGVtZW50KVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2VsZW1lbnQuanNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH1cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyB0cnkgeyB2YXIgdCA9ICFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IH0gY2F0Y2ggKHQpIHt9IHJldHVybiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHJldHVybiAhIXQ7IH0pKCk7IH1cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxudmFyIENoZWNrQm94RWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0VsZW1lbnQpIHtcbiAgZnVuY3Rpb24gQ2hlY2tCb3hFbGVtZW50KHdlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXIpIHtcbiAgICB2YXIgX3RoaXM7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENoZWNrQm94RWxlbWVudCk7XG4gICAgX3RoaXMgPSBfY2FsbFN1cGVyKHRoaXMsIENoZWNrQm94RWxlbWVudCwgW3dlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXJdKTtcbiAgICBfdGhpcy5ib3JkZXJDb2xvciA9IG5ldyBUSFJFRS5Db2xvcigweDAwMDAwMCk7XG4gICAgX3RoaXMuYm9yZGVyV2lkdGggPSAxO1xuICAgIF90aGlzLmVudGl0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLXBsYW5lXCIpO1xuICAgIF90aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNwZWNpZmljVXBkYXRlKCk7XG4gICAgfS5iaW5kKF90aGlzKSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIF9pbmhlcml0cyhDaGVja0JveEVsZW1lbnQsIF9FbGVtZW50KTtcbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhDaGVja0JveEVsZW1lbnQsIFt7XG4gICAga2V5OiBcInNwZWNpZmljVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNwZWNpZmljVXBkYXRlKCkge1xuICAgICAgaWYgKHRoaXMuZG9tRWxlbWVudC5jaGVja2VkKSB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLCBcIiMwMDc1RkZcIik7ZWxzZSB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLCBcIiNGRkZGRkZcIik7XG4gICAgfVxuICB9XSk7XG59KF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9lbGVtZW50cy9jb250YWluZXJFbGVtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZWxlbWVudHMvY29udGFpbmVyRWxlbWVudC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBDb250YWluZXJFbGVtZW50KVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2VsZW1lbnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxzX2hlbHBlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvaGVscGVyICovIFwiLi9zcmMvdXRpbHMvaGVscGVyLmpzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9XG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cblxudmFyIENvbnRhaW5lckVsZW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FbGVtZW50KSB7XG4gIGZ1bmN0aW9uIENvbnRhaW5lckVsZW1lbnQod2ViMnZyLCBkb21FbGVtZW50LCBsYXllcikge1xuICAgIHZhciBfdGhpcztcbiAgICB2YXIgdGV4dE9ubHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250YWluZXJFbGVtZW50KTtcbiAgICBfdGhpcyA9IF9jYWxsU3VwZXIodGhpcywgQ29udGFpbmVyRWxlbWVudCwgW3dlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXJdKTtcbiAgICBfdGhpcy50ZXh0T25seSA9IHRleHRPbmx5O1xuICAgIF90aGlzLmVudGl0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLXBsYW5lXCIpO1xuXG4gICAgLy8gaWYgaHlwZXJsaW5rIHRyaWdnZXIgYSBjbGljayBldmVudFxuICAgIGlmIChfdGhpcy5kb21FbGVtZW50LnRhZ05hbWUgPT0gXCJBXCIpIHtcbiAgICAgIF90aGlzLmVudGl0eS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkxpbmsgY2xpY2tlZCFcIiwgX3RoaXMuZG9tRWxlbWVudC5jbGljaygpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIV90aGlzLnRleHRPbmx5KSB7XG4gICAgICAvLyBzaG93IGJhY2sgcGxhbmUgZm9yIHRoZSBtYWluIGNvbnRhaW5lclxuICAgICAgaWYgKF90aGlzLmRvbUVsZW1lbnQgPT0gX3RoaXMud2ViMnZyLmNvbnRhaW5lcikgX3RoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwic2lkZVwiLCBcImRvdWJsZVwiKTtcblxuICAgICAgLy8gb25seSBuZWVkZWQgZm9yIGV4cGVyaW1lbnRhbCBiYWNrZ3JvdW5kXG4gICAgICBfdGhpcy5leHBJbWFnZUlkID0gbnVsbDtcbiAgICAgIF90aGlzLm9sZEJhY2tncm91bmRJbWFnZSA9IG51bGw7XG4gICAgICBfdGhpcy5vbGREb21Qb3NpdGlvbiA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICBfaW5oZXJpdHMoQ29udGFpbmVyRWxlbWVudCwgX0VsZW1lbnQpO1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKENvbnRhaW5lckVsZW1lbnQsIFt7XG4gICAga2V5OiBcInNwZWNpZmljVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNwZWNpZmljVXBkYXRlKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgICBpZiAoIXRoaXMudGV4dE9ubHkpIHtcbiAgICAgICAgdmFyIGJhY2tncm91bmRDb2xvciA9IHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICB2YXIgYmFja2dyb3VuZEltYWdlID0gdGhpcy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U7IC8vIHRvIGdldCAxOjEgYXMgaHRtbCBoYXZlIHRvIHVzZSBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOyBvciB1c2UgZXhwZXJpbWVudGFsXG5cbiAgICAgICAgaWYgKGJhY2tncm91bmRJbWFnZSAhPSBcIm5vbmVcIikge1xuICAgICAgICAgIC8vIGNhbm5vdCB1c2UgYW5pbWF0aW9ucyB0aGF0IHJlcXVpcmUgdXBkYXRlIHRvIGJlIGNhbGxlZCBldmVyeSBmcmFtZS4gaHRtbDJjYW52YXMgaXMgdmVyeSBwZXJmb3JtYW5jZSBoZWF2eS5cbiAgICAgICAgICBpZiAodGhpcy53ZWIydnIuc2V0dGluZ3MuZXhwZXJpbWVudGFsKSB7XG4gICAgICAgICAgICBpZiAoYmFja2dyb3VuZEltYWdlICE9IHRoaXMub2xkQmFja2dyb3VuZEltYWdlIHx8IHRoaXMub2xkRG9tUG9zaXRpb24gJiYgIXRoaXMucG9zaXRpb24uZXF1YWxzRE9NUG9zaXRpb24odGhpcy5vbGREb21Qb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgdmFyIGlkID0gdGhpcy5kb21FbGVtZW50LmlkO1xuICAgICAgICAgICAgICB2YXIgY3VzdG9tSWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgICAgIGN1c3RvbUlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZCA9IFwiaHRtbDJjYW52YXMtXCIgKyB0aGlzLndlYjJ2ci5odG1sMmNhbnZhc0lEY291bnRlcisrO1xuICAgICAgICAgICAgICAgIHRoaXMuZG9tRWxlbWVudC5pZCA9IGlkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGh0bWwyY2FudmFzKHRoaXMuZG9tRWxlbWVudCwge1xuICAgICAgICAgICAgICAgIG9uY2xvbmU6IGZ1bmN0aW9uIG9uY2xvbmUoY2xvbmUpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICBjbG9uZS5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgICAgICAgICAgIC8vIGlnbm9yaW5nIG9wYWNpdHkgYmVjYXVzZSB3ZSB1c2Ugb3BhY2l0eSBmcm9tIGFmcmFtZVxuICAgICAgICAgICAgICAgICAgc3R5bGUuc2hlZXQuaW5zZXJ0UnVsZShcIlxcbiAgICAgICAgICAgICAgICAgICAgI1wiLmNvbmNhdChpZCwgXCIge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XFxuICAgICAgICAgICAgICAgICAgICB9XCIpKTtcbiAgICAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIHRleHRcbiAgICAgICAgICAgICAgICAgIHN0eWxlLnNoZWV0Lmluc2VydFJ1bGUoXCJcXG4gICAgICAgICAgICAgICAgICAgICNcIi5jb25jYXQoaWQsIFwiIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdHJhbnNwYXJlbnQ7XFxuICAgICAgICAgICAgICAgICAgICB9XCIpKTtcbiAgICAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIGNoaWxkcmVuIGVsZW1lbnRzXG4gICAgICAgICAgICAgICAgICBzdHlsZS5zaGVldC5pbnNlcnRSdWxlKFwiXFxuICAgICAgICAgICAgICAgICAgICAjXCIuY29uY2F0KGlkLCBcIiA+ICoge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZVxcbiAgICAgICAgICAgICAgICAgICAgfVwiKSk7XG4gICAgICAgICAgICAgICAgICAvLyB2ci1zcGFuIGhhcyB0byBiZSBibG9jayBzbyBpdCBjYW4gcmVuZGVyIHByb3Blcmx5XG4gICAgICAgICAgICAgICAgICBzdHlsZS5zaGVldC5pbnNlcnRSdWxlKFwiXFxuICAgICAgICAgICAgICAgICAgICAjXCIuY29uY2F0KGlkLCBcIiA+IC52ci1zcGFuIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrXFxuICAgICAgICAgICAgICAgICAgICB9XCIpKTtcbiAgICAgICAgICAgICAgICAgIGlmIChjdXN0b21JZCkgX3RoaXMyLmRvbUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLmV4cEltYWdlSWQpIF90aGlzMi53ZWIydnIuYWZyYW1lLmFzc2V0TWFuYWdlci5yZW1vdmVBc3NldChfdGhpczIuZXhwSW1hZ2VJZCk7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmV4cEltYWdlSWQgPSBfdGhpczIud2ViMnZyLmFmcmFtZS5hc3NldE1hbmFnZXIuZ2V0QXNzZXQoY2FudmFzLnRvRGF0YVVSTCgpLCBcImltZ1wiKTtcbiAgICAgICAgICAgICAgICBfdGhpczIuZW50aXR5LnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwic3JjOiAjXCIgKyBfdGhpczIuZXhwSW1hZ2VJZCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB0aGlzLm9sZEJhY2tncm91bmRJbWFnZSA9IGJhY2tncm91bmRJbWFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKF91dGlsc19oZWxwZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0uaXNVcmwoYmFja2dyb3VuZEltYWdlKSkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHVybChcIlwiKVxuICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlID0gYmFja2dyb3VuZEltYWdlLnN1YnN0cmluZyhiYWNrZ3JvdW5kSW1hZ2UubGFzdEluZGV4T2YoJyhcXFwiJykgKyAyLCBiYWNrZ3JvdW5kSW1hZ2UubGFzdEluZGV4T2YoJ1xcXCIpJykpO1xuICAgICAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzcmM6ICNcIiArIHRoaXMud2ViMnZyLmFmcmFtZS5hc3NldE1hbmFnZXIuZ2V0QXNzZXQoYmFja2dyb3VuZEltYWdlLCBcImltZ1wiKSk7XG4gICAgICAgICAgICAvLyB0cmFuc3BhcmVudCBpbWFnZXMgc3VwcG9ydFxuICAgICAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJ0cmFuc3BhcmVudFwiLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gYmFja2dyb3VuZENvbG9yIGRvbnQgcmVuZGVyc1xuICAgICAgICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IgPT0gXCJyZ2JhKDAsIDAsIDAsIDApXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwidmlzaWJsZVwiLCBmYWxzZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwidmlzaWJsZVwiLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcImNvbG9yXCIsIGJhY2tncm91bmRDb2xvcik7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU9wYWNpdHkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbGREb21Qb3NpdGlvbiA9IHRoaXMucG9zaXRpb24uZG9tUG9zaXRpb247XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZU9wYWNpdHlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlT3BhY2l0eSgpIHtcbiAgICAgIHZhciBhbHBoYSA9IHBhcnNlRmxvYXQodGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3Iuc3BsaXQoJywnKVszXSk7XG4gICAgICAvLyBjYWxjdWxhdGUgZmluYWwgYWxwaGEgY2hhbm5lbCByZXN1bHRcbiAgICAgIGlmIChhbHBoYSkge1xuICAgICAgICB2YXIgYSA9IGFscGhhO1xuICAgICAgICB2YXIgYiA9IHRoaXMuc3R5bGUub3BhY2l0eTtcbiAgICAgICAgaWYgKGEgPCBiKSB7XG4gICAgICAgICAgYiA9IGFscGhhO1xuICAgICAgICAgIGEgPSB0aGlzLnN0eWxlLm9wYWNpdHk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBhIC0gKGEgLSBiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG59KF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9lbGVtZW50cy9lbGVtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZWxlbWVudHMvZWxlbWVudC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBFbGVtZW50KVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3V0aWxzX3Bvc2l0aW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi91dGlscy9wb3NpdGlvbiAqLyBcIi4vc3JjL3V0aWxzL3Bvc2l0aW9uLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91dGlsc19tb3VzZUV2ZW50SGFuZGxlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdXRpbHMvbW91c2VFdmVudEhhbmRsZXIgKi8gXCIuL3NyYy91dGlscy9tb3VzZUV2ZW50SGFuZGxlci5qc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXRbXCJyZXR1cm5cIl0gIT0gbnVsbCkgaXRbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cblxuXG52YXIgRWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEVsZW1lbnQod2ViMnZyLCBkb21FbGVtZW50LCBsYXllcikge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbGVtZW50KTtcbiAgICB0aGlzLndlYjJ2ciA9IHdlYjJ2cjtcbiAgICB0aGlzLmRvbUVsZW1lbnQgPSBkb21FbGVtZW50O1xuICAgIHRoaXMubGF5ZXIgPSBsYXllcjtcbiAgICB0aGlzLmRvbUVsZW1lbnQuZWxlbWVudCA9IHRoaXM7IC8vIHNvIHdlIGNhbiBkbyBkb21lRWxlbWVudC5wYXJlbnROb2RlLmVsZW1lbnRcbiAgICB0aGlzLmNoaWxkRWxlbWVudHMgPSBuZXcgU2V0KCk7XG4gICAgdGhpcy5lbnRpdHkgPSBudWxsOyAvLyBhZnJhbWUgZW50aXR5IHRoaXMgbnVsbCBiZWNhc3VlIEVsZW1lbnQgY2xhc3MgaXMgYWJzdHJhY3RcbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgIGlmICh0aGlzLmRvbUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidnItc3BhblwiKSkgdGhpcy5wYWRkaW5nVG9NYXJnaW4oKTtcbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IF91dGlsc19wb3NpdGlvbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSh0aGlzLmRvbUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGxheWVyICogdGhpcy53ZWIydnIuc2V0dGluZ3MubGF5ZXJTdGVwLCB3ZWIydnIuc2V0dGluZ3Muc2NhbGUpO1xuICAgIHRoaXMuc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRvbUVsZW1lbnQpO1xuICAgIHRoaXMucGFyZW50VHJhbnNmb3JtID0gXCJub25lXCI7XG4gICAgdGhpcy5uZWVkc1N0YXJ0aW5nVHJhbnNmb3JtU2l6ZSA9IHRydWU7XG4gIH1cblxuICAvLyBjYWxsIGFmdGVyIGVudGl0eSBpcyBjcmVhdGVkIGluIGluaGVyaXRpbmcgY2xhc3NcbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhFbGVtZW50LCBbe1xuICAgIGtleTogXCJpbml0RXZlbnRIYW5kbGVyc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0RXZlbnRIYW5kbGVycygpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB0aGlzLmluaXRIb3ZlcigpO1xuXG4gICAgICAvLyBzZXR0aW5nIHVwIE1vdXNlRXZlbnRIYW5kbGVyXG4gICAgICB0aGlzLm1vdXNlRXZlbnRIYW5kbGUgPSBuZXcgX3V0aWxzX21vdXNlRXZlbnRIYW5kbGVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKHRoaXMpO1xuXG4gICAgICAvLyBkeW5hbWljIGxpc3RlbmVyc1xuICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJldmVudExpc3RlbmVyQWRkZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMubW91c2VFdmVudEhhbmRsZS5yZXN5bmMoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJldmVudExpc3RlbmVyUmVtb3ZlZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5tb3VzZUV2ZW50SGFuZGxlLnJlc3luYygpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gYWRkIGFuaW1hdGlvbiBjb21wb21lbnQgaWYgZG9tIGVsZW1lbnQgaGFzIGFuaW1hdGlvblxuICB9LCB7XG4gICAga2V5OiBcImNoZWNrQW5pbWF0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrQW5pbWF0aW9uKCkge1xuICAgICAgaWYgKHBhcnNlRmxvYXQodGhpcy5zdHlsZS5hbmltYXRpb25EdXJhdGlvbikgfHwgcGFyc2VGbG9hdCh0aGlzLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbikpIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInZyLWFuaW1hdGVcIiwgXCJcIik7ZWxzZSB0aGlzLmVudGl0eS5yZW1vdmVBdHRyaWJ1dGUoXCJ2ci1hbmltYXRlXCIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbml0SG92ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdEhvdmVyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgICAvLyBmaW5kIHdoYXQgaGFzIGhvdmVyXG4gICAgICB2YXIgdGFnID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLndlYjJ2ci5ob3ZlclNlbGVjdG9ycy5oYXModGhpcy5kb21FbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpIHRhZyA9IHRoaXMuZG9tRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICB2YXIgY2xhc3NlcyA9IFtdO1xuICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuZG9tRWxlbWVudC5jbGFzc0xpc3QpLFxuICAgICAgICBfc3RlcDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgdmFyIGNscyA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgIGlmICh0aGlzLndlYjJ2ci5ob3ZlclNlbGVjdG9ycy5oYXMoXCIuXCIgKyBjbHMpKSBjbGFzc2VzLnB1c2goY2xzKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9pdGVyYXRvci5lKGVycik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfaXRlcmF0b3IuZigpO1xuICAgICAgfVxuICAgICAgdmFyIGlkID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLndlYjJ2ci5ob3ZlclNlbGVjdG9ycy5oYXMoXCIjXCIgKyB0aGlzLmRvbUVsZW1lbnQuaWQpKSBpZCA9IHRoaXMuZG9tRWxlbWVudC5pZDtcblxuICAgICAgLy8gYWRkIG1vdXNlZW50ZXIgYW5kIG1vdXNlbGVhdmUgaWYgZWxlbWVudCBoYXMgaG92ZXIuXG4gICAgICBpZiAodGFnIHx8IGNsYXNzZXMubGVuZ3RoID4gMCB8fCBpZCkge1xuICAgICAgICB0aGlzLmVudGl0eS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHRhZykgX3RoaXMyLmRvbUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0YWcgKyBcImhvdmVyXCIpO1xuICAgICAgICAgIGlmIChjbGFzc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoY2xhc3NlcyksXG4gICAgICAgICAgICAgIF9zdGVwMjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNscyA9IF9zdGVwMi52YWx1ZTtcbiAgICAgICAgICAgICAgICBfdGhpczIuZG9tRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNscyArIFwiaG92ZXJcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaWQpIF90aGlzMi5kb21FbGVtZW50LmNsYXNzTGlzdC5hZGQoaWQgKyBcImhvdmVyXCIpO1xuICAgICAgICAgIC8vIHRoaXMgaXMgb25seSBmb3IgaG92ZXIgdHJhbnNmb3JtLiBVcGRhdGUgYWxsIGVsZW1lbnRzIHdoZW4gdHJhbnNmb3JtIGdldHMgYWRkZWRcbiAgICAgICAgICBpZiAoX3RoaXMyLnN0eWxlLnRyYW5zZm9ybSAhPSBcIm5vbmVcIikge1xuICAgICAgICAgICAgX3RoaXMyLndlYjJ2ci51cGRhdGUoKTtcbiAgICAgICAgICAgIF90aGlzMi5ob3ZlclRyYW5zZm9ybSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbnRpdHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICh0YWcpIF90aGlzMi5kb21FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGFnICsgXCJob3ZlclwiKTtcbiAgICAgICAgICBpZiAoY2xhc3Nlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNsYXNzZXMpLFxuICAgICAgICAgICAgICBfc3RlcDM7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykge1xuICAgICAgICAgICAgICAgIHZhciBjbHMgPSBfc3RlcDMudmFsdWU7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmRvbUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbHMgKyBcImhvdmVyXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICBfaXRlcmF0b3IzLmYoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlkKSBfdGhpczIuZG9tRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGlkICsgXCJob3ZlclwiKTtcbiAgICAgICAgICBpZiAoX3RoaXMyLmhvdmVyVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBfdGhpczIucG9zaXRpb24uZGVwdGggPSBfdGhpczIucG9zaXRpb24uc3RhcnREZXB0aDtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoX3RoaXMyLmRvbUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKicpKSxcbiAgICAgICAgICAgICAgX3N0ZXA0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IF9zdGVwNC52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICBlbGVtZW50LmVsZW1lbnQucGFyZW50VHJhbnNmb3JtID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICBlbGVtZW50LmVsZW1lbnQucG9zaXRpb24uZGVwdGggPSBlbGVtZW50LmVsZW1lbnQucG9zaXRpb24uc3RhcnREZXB0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIF9pdGVyYXRvcjQuZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0IHdvcmtzIGdyZWF0IHdpdGggbWFyZ2luIHdoaWxlIHdpdGggcGFkZGluZyBpdCBoYXMgcHJvYmxlbXMgd2l0aCBwYWRkaW5nUmlnaHQgdGhhdCBuZWVkcyB0byBiZSBtYW51YWx5IGNhbGN1bGF0ZWQgYW5kIHNldFxuICAgIC8vIGJlY2F1c2UgZGVhbGluZyB3aXRoIHBhZGRpbmdSaWdodCBpcyBwcm9ibGVtYXRpYyB3ZSBjYW4gbWFrZSB0aGUgcGFkZGluZyBiZSBtYXJnaW4gZm9yIHRoZSB0ZXh0Tm9kZSh2ci1zcGFuKVxuICB9LCB7XG4gICAga2V5OiBcInBhZGRpbmdUb01hcmdpblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYWRkaW5nVG9NYXJnaW4oKSB7XG4gICAgICAvLyBvbmx5IGlmIGVsZW1lbnQgaGFzIHRleHRcbiAgICAgIGlmICh0aGlzLmRvbUVsZW1lbnQudGV4dENvbnRlbnQudHJpbSgpKSB7XG4gICAgICAgIC8vY29uc3QgbGVmdCA9IHRoaXMuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LmVsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQ7XG4gICAgICAgIHZhciByaWdodCA9IHRoaXMuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LmVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0O1xuICAgICAgICAvL2NvbnN0IHRvcCA9IHRoaXMuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LmVsZW1lbnQuc3R5bGUucGFkZGluZ1RvcDtcbiAgICAgICAgLy9jb25zdCBib3R0b20gPSB0aGlzLmRvbUVsZW1lbnQucGFyZW50RWxlbWVudC5lbGVtZW50LnN0eWxlLnBhZGRpbmdCb3R0b207XG5cbiAgICAgICAgLyppZiAocGFyc2VGbG9hdChsZWZ0KSkge1xuICAgICAgICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLm1hcmdpbkxlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgdGhpcy5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSBcIjBweFwiO1xuICAgICAgICB9Ki9cbiAgICAgICAgaWYgKHBhcnNlRmxvYXQocmlnaHQpKSB7XG4gICAgICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0ID0gcmlnaHQ7XG4gICAgICAgICAgdGhpcy5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCIwcHhcIjtcbiAgICAgICAgfVxuICAgICAgICAvKmlmIChwYXJzZUZsb2F0KHRvcCkpIHtcbiAgICAgICAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5tYXJnaW5Ub3AgPSB0b3A7XG4gICAgICAgICAgICAvL3RoaXMuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLnBhZGRpbmdUb3AgPSBcIjBweFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZUZsb2F0KGJvdHRvbSkpIHtcbiAgICAgICAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBib3R0b207XG4gICAgICAgICAgICAvL3RoaXMuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLnBhZGRpbmdCb3R0b20gPSBcIjBweFwiO1xuICAgICAgICB9Ki9cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgLy8gcmVmZXJlbmNlIG9mIHRoZSBlbGVtZW50IGZvciBhZnJhbWUgY29tcG9tZW50XG4gICAgICB0aGlzLmVudGl0eS5lbGVtZW50ID0gdGhpcztcblxuICAgICAgLy8gZG9udCBuZWVkIGxpZ2h0IHRvIGFmZmVjdCBtYXRlcmlhbFxuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzaGFkZXJcIiwgXCJmbGF0XCIpO1xuXG4gICAgICAvL2luaXQgc2l6ZXMgYXQgc3RhcnRcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHRoaXMucG9zaXRpb24ud2lkdGgpO1xuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIHRoaXMucG9zaXRpb24uaGVpZ2h0KTtcbiAgICAgIHRoaXMuaW5pdEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHRoaXMuc2V0dXBDbGlwcGluZygpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgdmFyIF90aGlzJHdlYjJ2ciRzY3JvbGwsIF90aGlzJHdlYjJ2ciRzY3JvbGwyO1xuICAgICAgdmFyIGNsaWVudFJlY3QgPSB0aGlzLmRvbUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgIC8vIGl0cyBub3Qgb24gdGhlIHNjcmVlblxuICAgICAgaWYgKGNsaWVudFJlY3Qud2lkdGggPT0gMCB8fCBjbGllbnRSZWN0LmhlaWdodCA9PSAwKSB7XG4gICAgICAgIHRoaXMuZW50aXR5Lm9iamVjdDNELnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKCF0aGlzLmRvbUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidnItc3BhblwiKSkgdGhpcy5lbnRpdHkuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLndlYjJ2ci5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG4gICAgICAgIHRoaXMucG9zaXRpb24uYWZyYW1lUG9zaXRpb24ueSA9IDEwMDA7IC8vIGZvciBzb21lIHJlYXNvbiByYXljYXN0IHN0aWxsIGhpdHMgc28gaGF2ZSB0byBtb3ZlIHBvc2l0aW9uXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gZm9yIGZ1dHVyZSBtb3ZlIHRoaXMgaW4gVGV4dEVsZW1lbnQgY2xhc3NcbiAgICAgIGlmICh0aGlzLmRvbUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidnItc3BhblwiKSkge1xuICAgICAgICAvLyBkb250IG5lZWQgaW50ZXJhY3Rpb24gd2l0aCB0aGUgdGV4dCB3aGVuIHdlIGFsd2F5cyBoYXZlIHRoZSBiYWNrZ3JvdW5kIGFzIGludGVyYWN0aW9uXG4gICAgICAgIHRoaXMuZW50aXR5LmNsYXNzTGlzdC5yZW1vdmUodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgICAvLyBzbyBhbGwgaW5saW5lIHRleHQgd2lkdGggaXMgZ29vZCwgZG9udCBkbyB0aGlzIGlmIGl0cyB0ZXh0IGluc2lkZSBidXR0b25cbiAgICAgICAgaWYgKHRoaXMuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LnRhZ05hbWUgIT0gXCJCVVRUT05cIikge1xuICAgICAgICAgIGNsaWVudFJlY3Qud2lkdGggKz0gODtcbiAgICAgICAgICBjbGllbnRSZWN0LnggLT0gMjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBzZXQgZml4ZWQgY29udGFpbmVyIGhlaWdodCBpZiBpdHMgdXNpbmcgc2Nyb2xsQm9keSwgYmVzdCBpcyB0byBtb3ZlIHRoaXMgY29kZSBvdXRzaWRlIHVwZGF0ZSBsb29wIGZvciBmdXR1cmVcbiAgICAgIGlmICgoX3RoaXMkd2ViMnZyJHNjcm9sbCA9IHRoaXMud2ViMnZyLnNjcm9sbCkgIT09IG51bGwgJiYgX3RoaXMkd2ViMnZyJHNjcm9sbCAhPT0gdm9pZCAwICYmIF90aGlzJHdlYjJ2ciRzY3JvbGwuaGFzU2Nyb2xsICYmIHRoaXMuZG9tRWxlbWVudCA9PSB0aGlzLndlYjJ2ci5jb250YWluZXIgJiYgKF90aGlzJHdlYjJ2ciRzY3JvbGwyID0gdGhpcy53ZWIydnIuc2Nyb2xsKSAhPT0gbnVsbCAmJiBfdGhpcyR3ZWIydnIkc2Nyb2xsMiAhPT0gdm9pZCAwICYmIF90aGlzJHdlYjJ2ciRzY3JvbGwyLnNjcm9sbEJvZHkpIGNsaWVudFJlY3QuaGVpZ2h0ID0gdGhpcy53ZWIydnIuc2V0dGluZ3Muc2Nyb2xsV2luZG93SGVpZ2h0O1xuICAgICAgdGhpcy5wb3NpdGlvbi51cGRhdGVQb3NpdGlvbihjbGllbnRSZWN0KTtcbiAgICAgIHRoaXMuY2hlY2tWaXNpYmxlKCk7XG4gICAgICBpZiAodGhpcy52aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRvbUVsZW1lbnQpO1xuXG4gICAgICAgIC8vIGl0cyBvbiB2aXNpYmxlIHNjcmVlbiBidXQgaXRzIGhpZGRlbiBieSBzdHlsZVxuICAgICAgICBpZiAodGhpcy5zdHlsZS52aXNpYmlsaXR5ID09PSBcImhpZGRlblwiIHx8IHRoaXMuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICB0aGlzLmVudGl0eS5vYmplY3QzRC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgaWYgKCF0aGlzLmRvbUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidnItc3BhblwiKSkgdGhpcy5lbnRpdHkuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLndlYjJ2ci5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG4gICAgICAgICAgdGhpcy5wb3NpdGlvbi5hZnJhbWVQb3NpdGlvbi55ID0gMTAwMDsgLy8gZm9yIHNvbWUgcmVhc29uIHJheWNhc3Qgc3RpbGwgaGl0cyBzbyBoYXZlIHRvIG1vdmUgcG9zaXRpb25cbiAgICAgICAgICAvLyB1cGRhdGUgYm9yZGVyIHNvIHdlIGNhbiByZW1vdmUgaXQgYmVjYXVzZSBlbGVtZW50IGlzIGhpZGRlblxuICAgICAgICAgIHRoaXMudXBkYXRlQm9yZGVyKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZW50aXR5Lm9iamVjdDNELnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIC8vIGZvciBpbnB1dCB0ZXh0IGJlY2F1c2UgaXQgaGFzIGN1c3RvbSBldmVudCBmb3IgZW50aXR5IGl0IGNhbm5vdCBkZXRlY3Qgd2l0aCB0aGlzLm1vdXNlRXZlbnRIYW5kbGUubGlzdGVuaW5nRm9yTW91c2VFdmVudHNcbiAgICAgICAgICAvLyB3ZSBoYXZlIHRvIGNoZWNrIHRhZ05hbWUgYW5kIHR5cGUgdG8gc2VlIGlmIGl0cyBpbnB1dCB0ZXh0LCBmb3IgZnV0dXJlIG1ha2UgdGhpcyB3b3JrIHdpdGggbW91c2VFdmVudEhhbmRsZVxuICAgICAgICAgIC8vIGFsc28gYWRkIGludGVyYWN0aXZlVGFnIGlmIGl0cyBtYWluIGNvbnRhaW5lclxuICAgICAgICAgIGlmICghdGhpcy5kb21FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInZyLXNwYW5cIikgJiYgKHRoaXMubW91c2VFdmVudEhhbmRsZS5saXN0ZW5pbmdGb3JNb3VzZUV2ZW50cyB8fCB0aGlzLmRvbUVsZW1lbnQudGFnTmFtZSA9PSBcIklOUFVUXCIgJiYgdGhpcy5kb21FbGVtZW50LnR5cGUgPT0gXCJ0ZXh0XCIpIHx8IHRoaXMuZG9tRWxlbWVudCA9PSB0aGlzLndlYjJ2ci5jb250YWluZXIpIHRoaXMuZW50aXR5LmNsYXNzTGlzdC5hZGQodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgdHJhbnNmb3JtIHRoZW4gd2lkdGggYW5kIGhlaWdodCB3aWxsIGJlIHNldCB3aXRoIHRoZSB0cmFuc2Zvcm0gbWF0cml4IHNjYWxlXG4gICAgICAgIC8vIHVzaW5nIG5lZWRzU3RhcnRpbmdUcmFuc2Zvcm1TaXplIHNvIHdpZHRoIGFuZCBoZWlnaHQgYXJlIG5ldmVyIDAgd2hlbiBkb2luZyB0cmFuc2Zvcm0gc2NhbGVcbiAgICAgICAgaWYgKHRoaXMuc3R5bGUudHJhbnNmb3JtID09IFwibm9uZVwiIHx8IHRoaXMubmVlZHNTdGFydGluZ1RyYW5zZm9ybVNpemUpIHtcbiAgICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB0aGlzLnBvc2l0aW9uLndpZHRoKTtcbiAgICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgdGhpcy5wb3NpdGlvbi5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hlY2tBbmltYXRpb24oKTtcbiAgICAgICAgdmFyIG9wYWNpdHkgPSB0aGlzLnN0eWxlLm9wYWNpdHk7XG4gICAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcIm9wYWNpdHlcIiwgb3BhY2l0eSk7XG4gICAgICAgIHRoaXMuc3BlY2lmaWNVcGRhdGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy51cGRhdGVDbGlwcGluZygpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVCb3JkZXIoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlVHJhbnNmb3JtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRyYW5zZm9ybSgpIHtcbiAgICAgIHZhciB0cmFuc2Zvcm0gPSB0aGlzLnN0eWxlLnRyYW5zZm9ybTtcbiAgICAgIGlmICh0cmFuc2Zvcm0gPT0gXCJub25lXCIpIHRyYW5zZm9ybSA9IHRoaXMucGFyZW50VHJhbnNmb3JtO2Vsc2Uge1xuICAgICAgICAvLyBnaXZlIHRyYW5zZm9ybSB0byBhbGwgZGVzY2VuZGVudHNcbiAgICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmRvbUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKicpKSxcbiAgICAgICAgICBfc3RlcDU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX3N0ZXA1LnZhbHVlO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQuZWxlbWVudCkgZWxlbWVudC5lbGVtZW50LnBhcmVudFRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIF9pdGVyYXRvcjUuZShlcnIpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIF9pdGVyYXRvcjUuZigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHJhbnNmb3JtICE9IFwibm9uZVwiKSB7XG4gICAgICAgIHRoaXMubmVlZHNTdGFydGluZ1RyYW5zZm9ybVNpemUgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1hdHJpeFR5cGUgPSB0cmFuc2Zvcm0uc3BsaXQoJygnKVswXTtcbiAgICAgICAgLy8gZ2V0IG1hdHJpeCB2YWx1ZXMgaW4gZmxvYXRcbiAgICAgICAgdmFyIHZhbHVlcyA9IHRyYW5zZm9ybS5zcGxpdCgnKCcpWzFdO1xuICAgICAgICB2YWx1ZXMgPSB2YWx1ZXMuc3BsaXQoJyknKVswXTtcbiAgICAgICAgdmFsdWVzID0gdmFsdWVzLnNwbGl0KCcsJyk7XG4gICAgICAgIHZhbHVlcyA9IHZhbHVlcy5tYXAoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBtYXRyaXggPSBudWxsO1xuICAgICAgICBpZiAobWF0cml4VHlwZSA9PSBcIm1hdHJpeFwiKSB7XG4gICAgICAgICAgLy8gdHJhbnNmb3JtIHRvIG1hdHJpeDR4NCBhbmQgaW52ZXJ0IHNrZXdYIHRvIG1hdGNoIHRocmVlLmpzXG4gICAgICAgICAgbWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkoW3ZhbHVlc1swXSwgdmFsdWVzWzFdLCAwLCAwLCAtdmFsdWVzWzJdLCB2YWx1ZXNbM10sIDAsIDAsIDAsIDAsIDEsIDAsIHZhbHVlc1s0XSwgdmFsdWVzWzVdLCAwLCAxXSk7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0cml4VHlwZSA9PSBcIm1hdHJpeDNkXCIpIHtcbiAgICAgICAgICAvLyBpbnZlcnQgc2tld1ggYW5kIHNrZXdaPyB0byBtYXRjaCB0aHJlZS5qc1xuICAgICAgICAgIHZhbHVlc1s0XSAqPSAtMTtcbiAgICAgICAgICB2YWx1ZXNbOV0gKj0gLTE7XG4gICAgICAgICAgbWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKS5mcm9tQXJyYXkodmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICB2YXIgcXVhdGVybmlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XG4gICAgICAgIHZhciBzY2FsZSA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgIG1hdHJpeC5kZWNvbXBvc2UocG9zaXRpb24sIHF1YXRlcm5pb24sIHNjYWxlKTtcblxuICAgICAgICAvLyBwb3NpdGlvblxuICAgICAgICB0aGlzLnBvc2l0aW9uLmRvbVBvc2l0aW9uLnggKz0gcG9zaXRpb24ueDtcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5kb21Qb3NpdGlvbi55ICs9IHBvc2l0aW9uLnk7XG4gICAgICAgIGlmIChwb3NpdGlvbi56ICE9IDApIHRoaXMucG9zaXRpb24uZGVwdGggPSBwb3NpdGlvbi56ICogdGhpcy5wb3NpdGlvbi5zY2FsaW5nRmFjdG9yICsgdGhpcy5wb3NpdGlvbi5zdGFydERlcHRoO1xuXG4gICAgICAgIC8vIHJvdGF0aW9uXG4gICAgICAgIHRoaXMuZW50aXR5Lm9iamVjdDNELnJvdGF0aW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeChtYXRyaXgpO1xuXG4gICAgICAgIC8vIGNhbGN1YWx0ZSBzY2FsZSBhbmQgc2V0IGl0IHRvIGVudGl0eVxuICAgICAgICBpZiAodGhpcy5wYXJlbnRUcmFuc2Zvcm0gPT0gXCJub25lXCIpIHtcbiAgICAgICAgICB2YXIgZWxlbWVudHMgPSBtYXRyaXguZWxlbWVudHM7XG4gICAgICAgICAgdmFyIHNjYWxlWCA9IE1hdGguc3FydChlbGVtZW50c1swXSAqIGVsZW1lbnRzWzBdICsgZWxlbWVudHNbMV0gKiBlbGVtZW50c1sxXSk7XG4gICAgICAgICAgdmFyIHNjYWxlWSA9IE1hdGguc3FydChlbGVtZW50c1s1XSAqIGVsZW1lbnRzWzVdICsgZWxlbWVudHNbNF0gKiBlbGVtZW50c1s0XSk7XG4gICAgICAgICAgLy8gZm9yIHJhZGlvIHNjYWxlIGlzIDIgdGltZXMgc21hbGxlciBiZWNhdXNlIGl0cyBjaXJjbGUsIGZvciBzb21lIHJhc29uIGNoZWNrYm94IHNjYWxlIG5lZWRzIHRvIGJlIGluIGhhbGYgZWxzZSBpdHMgdG9vIGJpZ1xuICAgICAgICAgIGlmICh0aGlzLmRvbUVsZW1lbnQudGFnTmFtZSA9PSBcIklOUFVUXCIgJiYgKHRoaXMuZG9tRWxlbWVudC50eXBlID09IFwicmFkaW9cIiB8fCB0aGlzLmRvbUVsZW1lbnQudHlwZSA9PSBcImNoZWNrYm94XCIpKSB0aGlzLmVudGl0eS5vYmplY3QzRC5zY2FsZS5zZXQoc2NhbGVYIC8gMiwgc2NhbGVZIC8gMiwgMSk7ZWxzZSB0aGlzLmVudGl0eS5vYmplY3QzRC5zY2FsZS5zZXQoc2NhbGVYLCBzY2FsZVksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmVudGl0eS5vYmplY3QzRC5wb3NpdGlvbi5zZXQodGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnksIHRoaXMucG9zaXRpb24ueik7XG4gICAgfVxuXG4gICAgLy8gYWJzdHJhY3QgbWV0aG9kXG4gIH0sIHtcbiAgICBrZXk6IFwic3BlY2lmaWNVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3BlY2lmaWNVcGRhdGUoKSB7fVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZUJvcmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVCb3JkZXIoKSB7XG4gICAgICBpZiAodGhpcy53ZWIydnIuc2V0dGluZ3MuYm9yZGVyKSB7XG4gICAgICAgIC8vIHVzaW5nIGJvcmRlclRvcFdpZHRoIGFuZCBib3JkZXJUb3BDb2xvciBiZWNhdXNlIGJvcmRlcldpZHRoIGFuZCBib3JkZXJDb2xvciBkb2VzbnQgd29yayBpbiBmaXJlZm94XG4gICAgICAgIHZhciBib3JkZXJXaWR0aCA9IHBhcnNlRmxvYXQodGhpcy5zdHlsZS5ib3JkZXJUb3BXaWR0aCk7XG4gICAgICAgIGlmICgoYm9yZGVyV2lkdGggfHwgdGhpcy5ib3JkZXJXaWR0aCkgJiYgdGhpcy5lbnRpdHkub2JqZWN0M0QudmlzaWJsZSkge1xuICAgICAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInZyLWJvcmRlclwiLCBcIndpZHRoOlwiLmNvbmNhdChib3JkZXJXaWR0aCwgXCI7IGNvbG9yOlwiKS5jb25jYXQodGhpcy5zdHlsZS5ib3JkZXJUb3BDb2xvciwgXCI7XCIpKTtcbiAgICAgICAgICB0aGlzLmVudGl0eS5jb21wb25lbnRzW1widnItYm9yZGVyXCJdLnVwZGF0ZUJvcmRlcigpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZW50aXR5LmNvbXBvbmVudHNbXCJ2ci1ib3JkZXJcIl0pIHRoaXMuZW50aXR5LnJlbW92ZUF0dHJpYnV0ZShcInZyLWJvcmRlclwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicm90YXRlTm9ybWFsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJvdGF0ZU5vcm1hbChub3JtYWwpIHtcbiAgICAgIHZhciBub3JtYWxNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4MygpLmdldE5vcm1hbE1hdHJpeCh0aGlzLndlYjJ2ci5hZnJhbWUuY29udGFpbmVyLm9iamVjdDNELm1hdHJpeFdvcmxkKTtcbiAgICAgIHZhciBvdXRwdXQgPSBub3JtYWwuY2xvbmUoKS5hcHBseU1hdHJpeDMobm9ybWFsTWF0cml4KS5ub3JtYWxpemUoKTtcbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldENsaXBwaW5nQ29udGV4dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDbGlwcGluZ0NvbnRleHQoKSB7XG4gICAgICB2YXIgb3V0cHV0ID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLmRvbUVsZW1lbnQucGFyZW50Tm9kZSAmJiB0aGlzLmRvbUVsZW1lbnQucGFyZW50Tm9kZS5lbGVtZW50ICYmIHRoaXMuZG9tRWxlbWVudC5wYXJlbnROb2RlLmVsZW1lbnQuY2xpcHBpbmdDb250ZXh0KSBvdXRwdXQgPSB0aGlzLmRvbUVsZW1lbnQucGFyZW50Tm9kZS5lbGVtZW50LmNsaXBwaW5nQ29udGV4dDtlbHNlIHtcbiAgICAgICAgdmFyIF90aGlzJHdlYjJ2ciRzY3JvbGwzO1xuICAgICAgICBpZiAodGhpcy5zdHlsZS5vdmVyZmxvdyAmJiB0aGlzLnN0eWxlLm92ZXJmbG93ID09IFwiaGlkZGVuXCIgfHwgKF90aGlzJHdlYjJ2ciRzY3JvbGwzID0gdGhpcy53ZWIydnIuc2Nyb2xsKSAhPT0gbnVsbCAmJiBfdGhpcyR3ZWIydnIkc2Nyb2xsMyAhPT0gdm9pZCAwICYmIF90aGlzJHdlYjJ2ciRzY3JvbGwzLmhhc1Njcm9sbCAmJiB0aGlzLmRvbUVsZW1lbnQgPT0gdGhpcy53ZWIydnIuY29udGFpbmVyIHx8IHRoaXMud2ViMnZyLnNldHRpbmdzLmZvcmNlQ2xpcHBpbmcgJiYgdGhpcy5kb21FbGVtZW50ID09IHRoaXMud2ViMnZyLmNvbnRhaW5lcikge1xuICAgICAgICAgIC8vIGlnbm9yZSBpZiBpdHMgc3ZnXG4gICAgICAgICAgaWYgKHRoaXMuZG9tRWxlbWVudC50YWdOYW1lICE9IFwic3ZnXCIpIHtcbiAgICAgICAgICAgIHZhciBjbGlwcGluZ0NvbnRleHQgPSB7fTtcbiAgICAgICAgICAgIGNsaXBwaW5nQ29udGV4dC5hdXRob3JpdHkgPSB0aGlzO1xuICAgICAgICAgICAgY2xpcHBpbmdDb250ZXh0LmJvdHRvbSA9IG5ldyBUSFJFRS5QbGFuZSh0aGlzLnJvdGF0ZU5vcm1hbChuZXcgVEhSRUUuVmVjdG9yMygwLCAxLCAwKSkpOyAvLyBub3JtYWwgdXBcbiAgICAgICAgICAgIGNsaXBwaW5nQ29udGV4dC50b3AgPSBuZXcgVEhSRUUuUGxhbmUodGhpcy5yb3RhdGVOb3JtYWwobmV3IFRIUkVFLlZlY3RvcjMoMCwgLTEsIDApKSk7IC8vIG5vcm1hbCBkb3duXG4gICAgICAgICAgICBjbGlwcGluZ0NvbnRleHQubGVmdCA9IG5ldyBUSFJFRS5QbGFuZSh0aGlzLnJvdGF0ZU5vcm1hbChuZXcgVEhSRUUuVmVjdG9yMygxLCAwLCAwKSkpOyAvLyBub3JtYWwgcmlnaHRcbiAgICAgICAgICAgIGNsaXBwaW5nQ29udGV4dC5yaWdodCA9IG5ldyBUSFJFRS5QbGFuZSh0aGlzLnJvdGF0ZU5vcm1hbChuZXcgVEhSRUUuVmVjdG9yMygtMSwgMCwgMCkpKTsgLy8gbm9ybWFsIGxlZnRcblxuICAgICAgICAgICAgY2xpcHBpbmdDb250ZXh0LnBsYW5lcyA9IFtjbGlwcGluZ0NvbnRleHQuYm90dG9tLCBjbGlwcGluZ0NvbnRleHQudG9wLCBjbGlwcGluZ0NvbnRleHQubGVmdCwgY2xpcHBpbmdDb250ZXh0LnJpZ2h0XTtcbiAgICAgICAgICAgIG91dHB1dCA9IGNsaXBwaW5nQ29udGV4dDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNldHVwQ2xpcHBpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXBDbGlwcGluZygpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuICAgICAgdmFyIGNsaXBwaW5nQ29udGV4dCA9IHRoaXMuZ2V0Q2xpcHBpbmdDb250ZXh0KCk7XG4gICAgICBpZiAoY2xpcHBpbmdDb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY2xpcHBpbmdDb250ZXh0ID0gY2xpcHBpbmdDb250ZXh0O1xuXG4gICAgICAgIC8vIHdlIGFyZSBzdXJlIHRoZSByZW5kZXJlciBpcyBsb2FkZWRcbiAgICAgICAgdmFyIG9iamVjdDNEID0gdGhpcy5lbnRpdHkub2JqZWN0M0Q7XG4gICAgICAgIGlmICghb2JqZWN0M0QgfHwgIW9iamVjdDNELmNoaWxkcmVuIHx8ICFvYmplY3QzRC5jaGlsZHJlbi5sZW5ndGggPiAwIHx8ICFvYmplY3QzRC5jaGlsZHJlblswXS5tYXRlcmlhbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWF0ZXJpYWwgPSBvYmplY3QzRC5jaGlsZHJlblswXS5tYXRlcmlhbDtcbiAgICAgICAgbWF0ZXJpYWwuY2xpcHBpbmdQbGFuZXMgPSBjbGlwcGluZ0NvbnRleHQucGxhbmVzO1xuXG4gICAgICAgIC8vdGhpcy51cGRhdGVDbGlwcGluZygpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMudXBkYXRlQ2xpcHBpbmcoKTtcbiAgICAgICAgfSwgMjAwKTsgLy8gaWYgaXQgZG9lc250IHdvcmsgdXNlIHRoaXNcbiAgICAgICAgLy8gcmV0dXJuIG5ldyBQcm9taXNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZUNsaXBwaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUNsaXBwaW5nKCkge1xuICAgICAgLy8gb25seSBlbGVtZW50IHdpdGggYXV0aG9yaXR5IGNhbiBjaGFuZ2UgdGhlIGNsaXBwaW5nIHBsYW5lcyBwb3NpdGlvblxuICAgICAgaWYgKCF0aGlzLmNsaXBwaW5nQ29udGV4dCB8fCB0aGlzLmNsaXBwaW5nQ29udGV4dC5hdXRob3JpdHkgIT0gdGhpcykgcmV0dXJuO1xuICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5lbnRpdHkub2JqZWN0M0QucG9zaXRpb247XG4gICAgICB2YXIgYm90dG9tTG9jYWwgPSBwb3NpdGlvbi5jbG9uZSgpLmFkZChuZXcgVEhSRUUuVmVjdG9yMygwLCAtMSwgMCkubXVsdGlwbHlTY2FsYXIodGhpcy5wb3NpdGlvbi5oZWlnaHQgLyAyKSk7XG4gICAgICB2YXIgdG9wTG9jYWwgPSBwb3NpdGlvbi5jbG9uZSgpLmFkZChuZXcgVEhSRUUuVmVjdG9yMygwLCAxLCAwKS5tdWx0aXBseVNjYWxhcih0aGlzLnBvc2l0aW9uLmhlaWdodCAvIDIpKTtcbiAgICAgIHZhciBsZWZ0TG9jYWwgPSBwb3NpdGlvbi5jbG9uZSgpLmFkZChuZXcgVEhSRUUuVmVjdG9yMygtMSwgMCwgMCkubXVsdGlwbHlTY2FsYXIodGhpcy5wb3NpdGlvbi53aWR0aCAvIDIpKTtcbiAgICAgIHZhciByaWdodExvY2FsID0gcG9zaXRpb24uY2xvbmUoKS5hZGQobmV3IFRIUkVFLlZlY3RvcjMoMSwgMCwgMCkubXVsdGlwbHlTY2FsYXIodGhpcy5wb3NpdGlvbi53aWR0aCAvIDIpKTtcbiAgICAgIHZhciBib3R0b21HbG9iYWwgPSB0aGlzLndlYjJ2ci5hZnJhbWUuY29udGFpbmVyLm9iamVjdDNELmxvY2FsVG9Xb3JsZChib3R0b21Mb2NhbC5jbG9uZSgpKTtcbiAgICAgIHZhciB0b3BHbG9iYWwgPSB0aGlzLndlYjJ2ci5hZnJhbWUuY29udGFpbmVyLm9iamVjdDNELmxvY2FsVG9Xb3JsZCh0b3BMb2NhbC5jbG9uZSgpKTtcbiAgICAgIHZhciBsZWZ0R2xvYmFsID0gdGhpcy53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5vYmplY3QzRC5sb2NhbFRvV29ybGQobGVmdExvY2FsLmNsb25lKCkpO1xuICAgICAgdmFyIHJpZ2h0R2xvYmFsID0gdGhpcy53ZWIydnIuYWZyYW1lLmNvbnRhaW5lci5vYmplY3QzRC5sb2NhbFRvV29ybGQocmlnaHRMb2NhbC5jbG9uZSgpKTtcbiAgICAgIHRoaXMuY2xpcHBpbmdDb250ZXh0LmJvdHRvbS5zZXRGcm9tTm9ybWFsQW5kQ29wbGFuYXJQb2ludCh0aGlzLnJvdGF0ZU5vcm1hbChuZXcgVEhSRUUuVmVjdG9yMygwLCAxLCAwKSksIGJvdHRvbUdsb2JhbCkubm9ybWFsaXplKCk7XG4gICAgICB0aGlzLmNsaXBwaW5nQ29udGV4dC50b3Auc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQodGhpcy5yb3RhdGVOb3JtYWwobmV3IFRIUkVFLlZlY3RvcjMoMCwgLTEsIDApKSwgdG9wR2xvYmFsKS5ub3JtYWxpemUoKTtcbiAgICAgIHRoaXMuY2xpcHBpbmdDb250ZXh0LmxlZnQuc2V0RnJvbU5vcm1hbEFuZENvcGxhbmFyUG9pbnQodGhpcy5yb3RhdGVOb3JtYWwobmV3IFRIUkVFLlZlY3RvcjMoMSwgMCwgMCkpLCBsZWZ0R2xvYmFsKS5ub3JtYWxpemUoKTtcbiAgICAgIHRoaXMuY2xpcHBpbmdDb250ZXh0LnJpZ2h0LnNldEZyb21Ob3JtYWxBbmRDb3BsYW5hclBvaW50KHRoaXMucm90YXRlTm9ybWFsKG5ldyBUSFJFRS5WZWN0b3IzKC0xLCAwLCAwKSksIHJpZ2h0R2xvYmFsKS5ub3JtYWxpemUoKTtcbiAgICAgIGlmICh0aGlzLndlYjJ2ci5zZXR0aW5ncy5zaG93Q2xpcHBpbmcpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaXBwaW5nUGxhbmVIZWxwZXJzKSB7XG4gICAgICAgICAgdGhpcy5jbGlwcGluZ1BsYW5lSGVscGVycyA9IFtdO1xuICAgICAgICAgIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jbGlwcGluZ0NvbnRleHQucGxhbmVzKSxcbiAgICAgICAgICAgIF9zdGVwNjtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgdmFyIHBsYW5lID0gX3N0ZXA2LnZhbHVlO1xuICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgICAgICAgICAgIGNvbG9yOiAweDAwZTMzZCxcbiAgICAgICAgICAgICAgICBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgyMDAgKiB0aGlzLnBvc2l0aW9uLnNjYWxpbmdGYWN0b3IsIDIwMCAqIHRoaXMucG9zaXRpb24uc2NhbGluZ0ZhY3Rvcik7IC8vIG5vIG5lZWQgc2FtZSB3aWR0aCBhbmQgaGVpZ2h0IGFzIGNvbnRhaW5lciBiZWNhdXNlIHRoaXMgaXMgb25seSBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICAgIHZhciBtZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgbWVzaC5kZWJ1Z1BsYW5lID0gcGxhbmU7XG4gICAgICAgICAgICAgIHRoaXMuY2xpcHBpbmdQbGFuZUhlbHBlcnMucHVzaChtZXNoKTtcbiAgICAgICAgICAgICAgdmFyIGF4aXNIZWxwZXIgPSBuZXcgVEhSRUUuQXhlc0hlbHBlcig1KTtcbiAgICAgICAgICAgICAgbWVzaC5hZGQoYXhpc0hlbHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBfaXRlcmF0b3I2LmUoZXJyKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgX2l0ZXJhdG9yNi5mKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBfaXRlcmF0b3I3ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5jbGlwcGluZ1BsYW5lSGVscGVycyksXG4gICAgICAgICAgICBfc3RlcDc7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNy5zKCk7ICEoX3N0ZXA3ID0gX2l0ZXJhdG9yNy5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICAgIHZhciBoZWxwZXIgPSBfc3RlcDcudmFsdWU7XG4gICAgICAgICAgICAgIHRoaXMud2ViMnZyLmFmcmFtZS5zY2VuZS5vYmplY3QzRC5hZGQoaGVscGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjcuZShlcnIpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBfaXRlcmF0b3I3LmYoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9pdGVyYXRvcjggPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmNsaXBwaW5nUGxhbmVIZWxwZXJzKSxcbiAgICAgICAgICBfc3RlcDg7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yIChfaXRlcmF0b3I4LnMoKTsgIShfc3RlcDggPSBfaXRlcmF0b3I4Lm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgIHZhciBfbWVzaCA9IF9zdGVwOC52YWx1ZTtcbiAgICAgICAgICAgIF9tZXNoLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHdvcmxkUG9zID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5Lm9iamVjdDNELmdldFdvcmxkUG9zaXRpb24od29ybGRQb3MpO1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgICAgIF9tZXNoLmRlYnVnUGxhbmUucHJvamVjdFBvaW50KHdvcmxkUG9zLCBwb2ludCk7XG4gICAgICAgICAgICBfbWVzaC5wb3NpdGlvbi5zZXQocG9pbnQueCwgcG9pbnQueSwgcG9pbnQueik7XG5cbiAgICAgICAgICAgIC8vIGNsaXBwaW5nIHBsYW5lIG5vcm1hbHMgYXJlIGludmVydGVkLCB3ZSBtdWx0aXBseSBieSAtMVxuICAgICAgICAgICAgdmFyIGZvY2FsUG9pbnQgPSBwb2ludC5jbG9uZSgpLmFkZChfbWVzaC5kZWJ1Z1BsYW5lLm5vcm1hbC5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKC0xKSk7XG4gICAgICAgICAgICBfbWVzaC5sb29rQXQoZm9jYWxQb2ludCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBfaXRlcmF0b3I4LmUoZXJyKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBfaXRlcmF0b3I4LmYoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuY2xpcHBpbmdQbGFuZUhlbHBlcnMpIHtcbiAgICAgICAgICB2YXIgX2l0ZXJhdG9yOSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuY2xpcHBpbmdQbGFuZUhlbHBlcnMpLFxuICAgICAgICAgICAgX3N0ZXA5O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjkucygpOyAhKF9zdGVwOSA9IF9pdGVyYXRvcjkubigpKS5kb25lOykge1xuICAgICAgICAgICAgICB2YXIgX21lc2gyID0gX3N0ZXA5LnZhbHVlO1xuICAgICAgICAgICAgICBfbWVzaDIudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2l0ZXJhdG9yOS5lKGVycik7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjkuZigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjaGVja1Zpc2libGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tWaXNpYmxlKCkge1xuICAgICAgaWYgKHRoaXMuY2xpcHBpbmdDb250ZXh0KSB7XG4gICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmNsaXBwaW5nQ29udGV4dC5hdXRob3JpdHk7XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uLmJvdHRvbS55ID4gY29udGFpbmVyLnBvc2l0aW9uLnRvcC55IHx8IHRoaXMucG9zaXRpb24udG9wLnkgPCBjb250YWluZXIucG9zaXRpb24uYm90dG9tLnkpIHtcbiAgICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmVudGl0eS5vYmplY3QzRC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgLy8gcmVtb3ZlIGludGVyYWN0aXZlIHRhZ1xuICAgICAgICAgIGlmICghdGhpcy5kb21FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInZyLXNwYW5cIikpIHRoaXMuZW50aXR5LmNsYXNzTGlzdC5yZW1vdmUodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5lbnRpdHkub2JqZWN0M0QudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgLy8gaW50ZXJhY3RpdmUgdGFnIHNvIHdlIGNhbiBkbyByYXljYXN0aW5nIGlmIGl0IGhhcyBtb3VzZSBldmVudHMgb3IgaXRzIGNvbnRhaW5lciBiYWNrZ3JvdW5kXG4gICAgICAgICAgaWYgKCF0aGlzLmRvbUVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidnItc3BhblwiKSAmJiB0aGlzLm1vdXNlRXZlbnRIYW5kbGUubGlzdGVuaW5nRm9yTW91c2VFdmVudHMgfHwgdGhpcy5kb21FbGVtZW50ID09IHRoaXMud2ViMnZyLmNvbnRhaW5lcikgdGhpcy5lbnRpdHkuY2xhc3NMaXN0LmFkZCh0aGlzLndlYjJ2ci5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcbn0oKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9lbGVtZW50cy9pbWFnZUVsZW1lbnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2VsZW1lbnRzL2ltYWdlRWxlbWVudC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEltYWdlRWxlbWVudClcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy9lbGVtZW50LmpzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9XG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbnZhciBJbWFnZUVsZW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FbGVtZW50KSB7XG4gIGZ1bmN0aW9uIEltYWdlRWxlbWVudCh3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbWFnZUVsZW1lbnQpO1xuICAgIF90aGlzID0gX2NhbGxTdXBlcih0aGlzLCBJbWFnZUVsZW1lbnQsIFt3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyXSk7XG4gICAgX3RoaXMuY3VycmVudFNyYyA9IG51bGw7XG4gICAgX3RoaXMuY2hhbmdlZCA9IGZhbHNlO1xuICAgIF90aGlzLmVudGl0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLWltYWdlXCIpO1xuICAgIF90aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcInNpZGVcIiwgXCJmcm9udFwiKTtcbiAgICAvLyBrbm93IHdoZW4gaW1hZ2UgaXMgbG9hZGVkXG4gICAgX3RoaXMubG9hZGVkID0gZmFsc2U7XG4gICAgX3RoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgLy8gaWYgaW1hZ2UgY2hhbmdlZCB1cGRhdGUgYWxsIGFmdGVyIGltYWdlIGxvYWRlZFxuICAgICAgaWYgKF90aGlzLmNoYW5nZWQpIHtcbiAgICAgICAgX3RoaXMuY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy53ZWIydnIudXBkYXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIF9pbmhlcml0cyhJbWFnZUVsZW1lbnQsIF9FbGVtZW50KTtcbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhJbWFnZUVsZW1lbnQsIFt7XG4gICAga2V5OiBcInVwZGF0ZUltYWdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUltYWdlKHNyYykge1xuICAgICAgdmFyIGFzc2V0SUQgPSB0aGlzLndlYjJ2ci5hZnJhbWUuYXNzZXRNYW5hZ2VyLmdldEFzc2V0KHNyYywgXCJpbWdcIik7XG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIklNQUdFX1wiICsgYXNzZXRJRCk7XG4gICAgICB2YXIgaXNHaWYgPSAvXFwuKGdpZikkL2k7XG4gICAgICBpZiAoaXNHaWYudGVzdChzcmMpKSB7XG4gICAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwic2hhZGVyXCIsIFwiZ2lmXCIpO1xuICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcInNyY1wiLCBcIiNcIiArIGFzc2V0SUQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzaGFkZXJcIiwgXCJmbGF0XCIpO1xuICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIjXCIgKyBhc3NldElEKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3BlY2lmaWNVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3BlY2lmaWNVcGRhdGUoKSB7XG4gICAgICB2YXIgc3JjID0gdGhpcy5kb21FbGVtZW50LmdldEF0dHJpYnV0ZShcInNyY1wiKTtcbiAgICAgIGlmIChzcmMgIT0gdGhpcy5jdXJyZW50U3JjKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTcmMpIHtcbiAgICAgICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuY2hhbmdlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50U3JjID0gc3JjO1xuICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKHRoaXMuY3VycmVudFNyYyk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG59KF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKTsgLy8gVE9ETzogTm8gbmVlZCB0byBzYXZlIGltYWdlIGNvcHkgaW4gYXNzZXRzIHlvdSBjYW4gZGlyZWN0bHkgcmVhZCBpdCBmcm9tIHRoZSBvcmlnbmFsXG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZWxlbWVudHMvaW5wdXRFbGVtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9lbGVtZW50cy9pbnB1dEVsZW1lbnQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBJbnB1dEVsZW1lbnQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdGV4dEVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdGV4dEVsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy90ZXh0RWxlbWVudC5qc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfY2FsbFN1cGVyKHQsIG8sIGUpIHsgcmV0dXJuIG8gPSBfZ2V0UHJvdG90eXBlT2YobyksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSA/IFJlZmxlY3QuY29uc3RydWN0KG8sIGUgfHwgW10sIF9nZXRQcm90b3R5cGVPZih0KS5jb25zdHJ1Y3RvcikgOiBvLmFwcGx5KHQsIGUpKTsgfVxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfVxuZnVuY3Rpb24gX2dldCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSBcInVuZGVmaW5lZFwiICYmIFJlZmxlY3QuZ2V0KSB7IF9nZXQgPSBSZWZsZWN0LmdldC5iaW5kKCk7IH0gZWxzZSB7IF9nZXQgPSBmdW5jdGlvbiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7IGlmICghYmFzZSkgcmV0dXJuOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpOyBpZiAoZGVzYy5nZXQpIHsgcmV0dXJuIGRlc2MuZ2V0LmNhbGwoYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB0YXJnZXQgOiByZWNlaXZlcik7IH0gcmV0dXJuIGRlc2MudmFsdWU7IH07IH0gcmV0dXJuIF9nZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuZnVuY3Rpb24gX3N1cGVyUHJvcEJhc2Uob2JqZWN0LCBwcm9wZXJ0eSkgeyB3aGlsZSAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkgeyBvYmplY3QgPSBfZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKG9iamVjdCA9PT0gbnVsbCkgYnJlYWs7IH0gcmV0dXJuIG9iamVjdDsgfVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG52YXIgSW5wdXRFbGVtZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVGV4dEVsZW1lbnQpIHtcbiAgZnVuY3Rpb24gSW5wdXRFbGVtZW50KHdlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXIpIHtcbiAgICB2YXIgX3RoaXM7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIElucHV0RWxlbWVudCk7XG4gICAgX3RoaXMgPSBfY2FsbFN1cGVyKHRoaXMsIElucHV0RWxlbWVudCwgW3dlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXJdKTtcbiAgICBfdGhpcy5ib3JkZXJDb2xvciA9IG5ldyBUSFJFRS5Db2xvcigweDAwMDAwMCk7XG4gICAgX3RoaXMuYm9yZGVyV2lkdGggPSAxO1xuICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgLy8gdXBkYXRlIHdoZW4gdGhlcmUgaXMgY2hhbmdlIG9mIHZhbHVlXG4gICAgX3RoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZSgpO1xuICAgIH0pO1xuICAgIC8vIHdoZW4gY2xpY2tlZCBtYWtlIGl0IGFjdGl2ZSBpbnB1dCBmb3IgdGhlIGtleWJvYXJkIGFuZCBwb3NpdGlvbiB0aGUga2V5Ym9hcmQgcmVsYXRpdmUgdG8gY2FtZXJhXG4gICAgX3RoaXMuZW50aXR5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2FtZXJhID0gX3RoaXMud2ViMnZyLmFmcmFtZS5zY2VuZS5jYW1lcmEucGFyZW50O1xuICAgICAgdmFyIGtleWJvYXJkID0gX3RoaXMud2ViMnZyLmFmcmFtZS5rZXlib2FyZC5vYmplY3QzRDtcbiAgICAgIGtleWJvYXJkLnBvc2l0aW9uLmNvcHkoY2FtZXJhLnBvc2l0aW9uKTtcbiAgICAgIGtleWJvYXJkLnJvdGF0aW9uLmNvcHkoY2FtZXJhLnJvdGF0aW9uKTtcbiAgICAgIGtleWJvYXJkLnJvdGF0aW9uLnogPSAwO1xuICAgICAga2V5Ym9hcmQucm90YXRpb24ueCA9IFRIUkVFLk1hdGguZGVnVG9SYWQoLTMwKTtcbiAgICAgIGtleWJvYXJkLnRyYW5zbGF0ZVgoLTAuMjQpO1xuICAgICAga2V5Ym9hcmQudHJhbnNsYXRlWSgtMC4xKTtcbiAgICAgIGtleWJvYXJkLnRyYW5zbGF0ZVooLTAuNik7XG4gICAgICBrZXlib2FyZC52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChfdGhpcy53ZWIydnIuYWZyYW1lLmtleWJvYXJkLmFjdGl2ZUlucHV0KSB7XG4gICAgICAgIF90aGlzLndlYjJ2ci5hZnJhbWUua2V5Ym9hcmQuYWN0aXZlSW5wdXQuZWxlbWVudC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgLy8gdXBkYXRlIHdlYjJ2ciB3aGVyZSBhY3RpdmVJbnB1dCBpcyBsb2NhdGVkXG4gICAgICAgIF90aGlzLndlYjJ2ci5hZnJhbWUua2V5Ym9hcmQuYWN0aXZlSW5wdXQuZWxlbWVudC53ZWIydnIudXBkYXRlKCk7XG4gICAgICB9XG4gICAgICBfdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgX3RoaXMud2ViMnZyLmFmcmFtZS5rZXlib2FyZC5hY3RpdmVJbnB1dCA9IF90aGlzLmRvbUVsZW1lbnQ7XG4gICAgICBfdGhpcy53ZWIydnIudXBkYXRlKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIF9pbmhlcml0cyhJbnB1dEVsZW1lbnQsIF9UZXh0RWxlbWVudCk7XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoSW5wdXRFbGVtZW50LCBbe1xuICAgIGtleTogXCJ1cGRhdGVUZXh0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRleHQoKSB7XG4gICAgICB2YXIgdmFsdWUgPSB0aGlzLmRvbUVsZW1lbnQudmFsdWU7XG4gICAgICBpZiAodmFsdWUpIHRoaXMudGV4dFZhbHVlID0gdmFsdWU7ZWxzZSB0aGlzLnRleHRWYWx1ZSA9IHRoaXMuZG9tRWxlbWVudC5wbGFjZWhvbGRlcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlVGV4dENvbG9yXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRleHRDb2xvcigpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZG9tRWxlbWVudC52YWx1ZTtcbiAgICAgIGlmICh2YWx1ZSkgX2dldChfZ2V0UHJvdG90eXBlT2YoSW5wdXRFbGVtZW50LnByb3RvdHlwZSksIFwidXBkYXRlVGV4dENvbG9yXCIsIHRoaXMpLmNhbGwodGhpcyk7ZWxzZSB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIFwiY29sb3JcIiwgXCIjOTk5XCIpO1xuICAgICAgaWYgKHRoaXMuYWN0aXZlKSB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLCBcIiNmZmZmY2NcIik7XG4gICAgfVxuICB9XSk7XG59KF90ZXh0RWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvZWxlbWVudHMvcmFkaW9FbGVtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9lbGVtZW50cy9yYWRpb0VsZW1lbnQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBSYWRpb0VsZW1lbnQpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvZWxlbWVudC5qc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5mdW5jdGlvbiBfY2FsbFN1cGVyKHQsIG8sIGUpIHsgcmV0dXJuIG8gPSBfZ2V0UHJvdG90eXBlT2YobyksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHQsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSA/IFJlZmxlY3QuY29uc3RydWN0KG8sIGUgfHwgW10sIF9nZXRQcm90b3R5cGVPZih0KS5jb25zdHJ1Y3RvcikgOiBvLmFwcGx5KHQsIGUpKTsgfVxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSBlbHNlIGlmIChjYWxsICE9PSB2b2lkIDApIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHRyeSB7IHZhciB0ID0gIUJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgfSBjYXRjaCAodCkge30gcmV0dXJuIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgcmV0dXJuICEhdDsgfSkoKTsgfVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdWJDbGFzcywgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG52YXIgUmFkaW9FbGVtZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRWxlbWVudCkge1xuICBmdW5jdGlvbiBSYWRpb0VsZW1lbnQod2ViMnZyLCBkb21FbGVtZW50LCBsYXllcikge1xuICAgIHZhciBfdGhpcztcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmFkaW9FbGVtZW50KTtcbiAgICBfdGhpcyA9IF9jYWxsU3VwZXIodGhpcywgUmFkaW9FbGVtZW50LCBbd2ViMnZyLCBkb21FbGVtZW50LCBsYXllcl0pO1xuICAgIF90aGlzLmJvcmRlckNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKDB4MDAwMDAwKTtcbiAgICBfdGhpcy5ib3JkZXJXaWR0aCA9IDE7XG4gICAgX3RoaXMuZW50aXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtY2lyY2xlXCIpO1xuICAgIF90aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLndlYjJ2ci51cGRhdGUoKTtcbiAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgX2luaGVyaXRzKFJhZGlvRWxlbWVudCwgX0VsZW1lbnQpO1xuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFJhZGlvRWxlbWVudCwgW3tcbiAgICBrZXk6IFwic3BlY2lmaWNVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3BlY2lmaWNVcGRhdGUoKSB7XG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJyYWRpdXNcIiwgdGhpcy5wb3NpdGlvbi53aWR0aCAvIDIpO1xuICAgICAgaWYgKHRoaXMuZG9tRWxlbWVudC5jaGVja2VkKSB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLCBcIiMwMDc1RkZcIik7ZWxzZSB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLCBcIiNGRkZGRkZcIik7XG4gICAgfVxuICB9XSk7XG59KF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9lbGVtZW50cy9zdmdFbGVtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvZWxlbWVudHMvc3ZnRWxlbWVudC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBTdmdFbGVtZW50KVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2VsZW1lbnQuanNcIik7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX2NhbGxTdXBlcih0LCBvLCBlKSB7IHJldHVybiBvID0gX2dldFByb3RvdHlwZU9mKG8pLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0LCBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgPyBSZWZsZWN0LmNvbnN0cnVjdChvLCBlIHx8IFtdLCBfZ2V0UHJvdG90eXBlT2YodCkuY29uc3RydWN0b3IpIDogby5hcHBseSh0LCBlKSk7IH1cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyB0cnkgeyB2YXIgdCA9ICFCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IH0gY2F0Y2ggKHQpIHt9IHJldHVybiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IHJldHVybiAhIXQ7IH0pKCk7IH1cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxudmFyIFN2Z0VsZW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FbGVtZW50KSB7XG4gIGZ1bmN0aW9uIFN2Z0VsZW1lbnQod2ViMnZyLCBkb21FbGVtZW50LCBsYXllcikge1xuICAgIHZhciBfdGhpcztcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3ZnRWxlbWVudCk7XG4gICAgX3RoaXMgPSBfY2FsbFN1cGVyKHRoaXMsIFN2Z0VsZW1lbnQsIFt3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyXSk7XG4gICAgX3RoaXMuaW1hZ2VJZCA9IG51bGw7XG4gICAgX3RoaXMuZW50aXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtaW1hZ2VcIik7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIF9pbmhlcml0cyhTdmdFbGVtZW50LCBfRWxlbWVudCk7XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoU3ZnRWxlbWVudCwgW3tcbiAgICBrZXk6IFwic3ZnVG9JbWFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdmdUb0ltYWdlKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgICB2YXIgc3ZnU3RyaW5nID0gbmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyh0aGlzLmRvbUVsZW1lbnQpO1xuICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHRoaXMucG9zaXRpb24uZG9tUG9zaXRpb24ud2lkdGggKiAyO1xuICAgICAgY2FudmFzLmhlaWdodCA9IHRoaXMucG9zaXRpb24uZG9tUG9zaXRpb24uaGVpZ2h0ICogMjtcbiAgICAgIHZhciBET01VUkwgPSBzZWxmLlVSTCB8fCBzZWxmLndlYmtpdFVSTCB8fCBzZWxmO1xuICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgdmFyIHN2ZyA9IG5ldyBCbG9iKFtzdmdTdHJpbmddLCB7XG4gICAgICAgIHR5cGU6IFwiaW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04XCJcbiAgICAgIH0pO1xuICAgICAgdmFyIHVybCA9IERPTVVSTC5jcmVhdGVPYmplY3RVUkwoc3ZnKTtcbiAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfdGhpczIuZG9tRWxlbWVudC5zdHlsZS53aWR0aCkgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGNhbnZhcy53aWR0aCAqIDIsIGNhbnZhcy5oZWlnaHQgKiAyKTtlbHNlIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBET01VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIF90aGlzMi51cGRhdGVJbWFnZShjYW52YXMudG9EYXRhVVJMKCkpO1xuICAgICAgICBjYW52YXMucmVtb3ZlKCk7XG4gICAgICB9O1xuICAgICAgaW1nLnNyYyA9IHVybDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlSW1hZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlSW1hZ2Uoc3JjKSB7XG4gICAgICB2YXIgYXNzZXRJZCA9IHRoaXMud2ViMnZyLmFmcmFtZS5hc3NldE1hbmFnZXIuZ2V0QXNzZXQoc3JjLCBcImltZ1wiKTtcblxuICAgICAgLy8gcmVtb3ZlIG9sZCBpbWFnZSBpZiB0aGVyZSBpcyBuZXcgaW1hZ2VcbiAgICAgIGlmICh0aGlzLmltYWdlSWQgJiYgdGhpcy5pbWFnZUlkICE9IGFzc2V0SWQpIHRoaXMud2ViMnZyLmFmcmFtZS5hc3NldE1hbmFnZXIucmVtb3ZlQXNzZXQodGhpcy5pbWFnZUlkKTtcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiSU1BR0VfXCIgKyBhc3NldElkKTtcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIiNcIiArIGFzc2V0SWQpO1xuICAgICAgdGhpcy5pbWFnZUlkID0gYXNzZXRJZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3BlY2lmaWNVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3BlY2lmaWNVcGRhdGUoKSB7XG4gICAgICB0aGlzLnN2Z1RvSW1hZ2UoKTtcbiAgICB9XG4gIH1dKTtcbn0oX2VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL2VsZW1lbnRzL3RleHRFbGVtZW50LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2VsZW1lbnRzL3RleHRFbGVtZW50LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBUZXh0RWxlbWVudClcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb250YWluZXJFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbnRhaW5lckVsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy9jb250YWluZXJFbGVtZW50LmpzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9XG5mdW5jdGlvbiBfZ2V0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgIT09IFwidW5kZWZpbmVkXCIgJiYgUmVmbGVjdC5nZXQpIHsgX2dldCA9IFJlZmxlY3QuZ2V0LmJpbmQoKTsgfSBlbHNlIHsgX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGJhc2UgPSBfc3VwZXJQcm9wQmFzZSh0YXJnZXQsIHByb3BlcnR5KTsgaWYgKCFiYXNlKSByZXR1cm47IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eSk7IGlmIChkZXNjLmdldCkgeyByZXR1cm4gZGVzYy5nZXQuY2FsbChhcmd1bWVudHMubGVuZ3RoIDwgMyA/IHRhcmdldCA6IHJlY2VpdmVyKTsgfSByZXR1cm4gZGVzYy52YWx1ZTsgfTsgfSByZXR1cm4gX2dldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG5mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7IHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7IG9iamVjdCA9IF9nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAob2JqZWN0ID09PSBudWxsKSBicmVhazsgfSByZXR1cm4gb2JqZWN0OyB9XG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbnZhciBUZXh0RWxlbWVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbnRhaW5lckVsZW1lbnQpIHtcbiAgZnVuY3Rpb24gVGV4dEVsZW1lbnQod2ViMnZyLCBkb21FbGVtZW50LCBsYXllcikge1xuICAgIHZhciBfdGhpcztcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGV4dEVsZW1lbnQpO1xuICAgIF90aGlzID0gX2NhbGxTdXBlcih0aGlzLCBUZXh0RWxlbWVudCwgW3dlYjJ2ciwgZG9tRWxlbWVudCwgbGF5ZXIsIGZhbHNlXSk7XG4gICAgX3RoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInRleHRcIiwgXCJ2YWx1ZVwiLCBcIlwiKTtcbiAgICBfdGhpcy50ZXh0VmFsdWUgPSBudWxsO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICBfaW5oZXJpdHMoVGV4dEVsZW1lbnQsIF9Db250YWluZXJFbGVtZW50KTtcbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhUZXh0RWxlbWVudCwgW3tcbiAgICBrZXk6IFwic2V0dXBDbGlwcGluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cENsaXBwaW5nKCkge1xuICAgICAgdmFyIGNsaXBwaW5nQ29udGV4dCA9IHRoaXMuZ2V0Q2xpcHBpbmdDb250ZXh0KCk7XG4gICAgICBpZiAoY2xpcHBpbmdDb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY2xpcHBpbmdDb250ZXh0ID0gY2xpcHBpbmdDb250ZXh0O1xuICAgICAgICB2YXIgbWF0ZXJpYWwgPSB0aGlzLmVudGl0eS5jb21wb25lbnRzLnRleHQubWF0ZXJpYWw7XG5cbiAgICAgICAgLy8gdGV4dCBjb21wb25lbnQgdXNlcyBjdXN0b20gc2hhZGVyIHNvIGRlZmF1bHQgdGhyZWUuanMgY2xpcHBpbmcgZG9lc250IHdvcmssIG5lZWRlZCB0byBpbmplY3QgY2xpcHBpbmcgc2hhZGVyIGNvZGUgaW5zaWRlIHRoZSBjdXN0b20gc2hhZGVyIGNvZGUoUmF3U2hhZGVyTWF0ZXJpYWwpXG4gICAgICAgIC8vIGhlbHAgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80MjUzMjU0NS9hZGQtY2xpcHBpbmctdG8tdGhyZWUtc2hhZGVybWF0ZXJpYWxcbiAgICAgICAgLy8gMS4xLjAgdmVyc2lvbiBjaGFuZ2VzOiBCZWNhdXNlIEFmcmFtZSAxLjEuMCBjaGFuZ2VzIHRleHQgbWF0ZXJpYWwgc2hhZGVyIHRvIHVzZSB3ZWJnbCAyKGdsc2wgMykgc29tZSBvZiB0aGUgdGhyZWUuanMgU2hhZGVyQ2h1bmsgaGFkIHRvIGJlIGNvbnZlcnRlZCB0byBnbHNsIDMuXG4gICAgICAgIHZhciBmcmFnbWVudFNoYWRlciA9IFwiI3ZlcnNpb24gMzAwIGVzXFxuICAgICAgICAgICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbiAgICAgICAgICAgIHVuaWZvcm0gYm9vbCBuZWdhdGU7XFxuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBhbHBoYVRlc3Q7XFxuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBvcGFjaXR5O1xcbiAgICAgICAgICAgIHVuaWZvcm0gc2FtcGxlcjJEIG1hcDtcXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzMgY29sb3I7XFxuICAgICAgICAgICAgaW4gdmVjMiB2VVY7XFxuICAgICAgICAgICAgb3V0IHZlYzQgZnJhZ0NvbG9yO1xcbiAgICAgICAgICAgIGZsb2F0IG1lZGlhbihmbG9hdCByLCBmbG9hdCBnLCBmbG9hdCBiKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBtYXgobWluKHIsIGcpLCBtaW4obWF4KHIsIGcpLCBiKSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICNkZWZpbmUgQklHX0VOT1VHSCAwLjAwMVxcbiAgICAgICAgICAgICNkZWZpbmUgTU9ESUZJRURfQUxQSEFURVNUICgwLjAyICogaXNCaWdFbm91Z2ggLyBCSUdfRU5PVUdIKVxcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIGNsaXBwaW5nX3BsYW5lc19wYXJzX2ZyYWdtZW50IGNvbnZlcnRlZCB0byBnbHNsIDNcXG4gICAgICAgICAgICAjaWYgTlVNX0NMSVBQSU5HX1BMQU5FUyA+IDBcXG4gICAgICAgICAgICAgICAgaW4gdmVjMyB2Q2xpcFBvc2l0aW9uO1xcbiAgICAgICAgICAgICAgICB1bmlmb3JtIHZlYzQgY2xpcHBpbmdQbGFuZXNbTlVNX0NMSVBQSU5HX1BMQU5FU107XFxuICAgICAgICAgICAgI2VuZGlmXFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgdm9pZCBtYWluKCkge1xcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggZ2xzbCAzXFxuICAgICAgICAgICAgICAgICNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfZnJhZ21lbnQ+XFxuXFxuICAgICAgICAgICAgICAgIHZlYzMgc2FtcGxlQ29sb3IgPSB0ZXh0dXJlKG1hcCwgdlVWKS5yZ2I7XFxuICAgICAgICAgICAgICAgIGlmIChuZWdhdGUpIHsgc2FtcGxlQ29sb3IgPSAxLjAgLSBzYW1wbGVDb2xvcjsgfVxcbiAgICAgICAgICAgICAgICBmbG9hdCBzaWdEaXN0ID0gbWVkaWFuKHNhbXBsZUNvbG9yLnIsIHNhbXBsZUNvbG9yLmcsIHNhbXBsZUNvbG9yLmIpIC0gMC41O1xcbiAgICAgICAgICAgICAgICBmbG9hdCBhbHBoYSA9IGNsYW1wKHNpZ0Rpc3QgLyBmd2lkdGgoc2lnRGlzdCkgKyAwLjUsIDAuMCwgMS4wKTtcXG4gICAgICAgICAgICAgICAgZmxvYXQgZHNjYWxlID0gMC4zNTM1MDU7XFxuICAgICAgICAgICAgICAgIHZlYzIgZHV2ID0gZHNjYWxlICogKGRGZHgodlVWKSArIGRGZHkodlVWKSk7XFxuICAgICAgICAgICAgICAgIGZsb2F0IGlzQmlnRW5vdWdoID0gbWF4KGFicyhkdXYueCksIGFicyhkdXYueSkpO1xcbiAgICAgICAgICAgICAgICAvLyBEbyBtb2RpZmllZCBhbHBoYSB0ZXN0LlxcbiAgICAgICAgICAgICAgICBpZiAoaXNCaWdFbm91Z2ggPiBCSUdfRU5PVUdIKSB7XFxuICAgICAgICAgICAgICAgICAgICBmbG9hdCByYXRpbyA9IEJJR19FTk9VR0ggLyBpc0JpZ0Vub3VnaDtcXG4gICAgICAgICAgICAgICAgICAgIGFscGhhID0gcmF0aW8gKiBhbHBoYSArICgxLjAgLSByYXRpbykgKiAoc2lnRGlzdCArIDAuNSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgLy8gRG8gbW9kaWZpZWQgYWxwaGEgdGVzdC5cXG4gICAgICAgICAgICAgICAgaWYgKGFscGhhIDwgYWxwaGFUZXN0ICogTU9ESUZJRURfQUxQSEFURVNUKSB7IGRpc2NhcmQ7IHJldHVybjsgfVxcbiAgICAgICAgICAgICAgICBmcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLnh5eiwgYWxwaGEgKiBvcGFjaXR5KTtcXG4gICAgICAgICAgICB9XCI7XG4gICAgICAgIHZhciB2ZXJ0ZXhTaGFkZXIgPSBcIiN2ZXJzaW9uIDMwMCBlc1xcbiAgICAgICAgICAgIGluIHZlYzIgdXY7XFxuICAgICAgICAgICAgaW4gdmVjMyBwb3NpdGlvbjtcXG4gICAgICAgICAgICB1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDtcXG4gICAgICAgICAgICB1bmlmb3JtIG1hdDQgbW9kZWxWaWV3TWF0cml4O1xcbiAgICAgICAgICAgIG91dCB2ZWMyIHZVVjtcXG5cXG4gICAgICAgICAgICAvLyBjbGlwcGluZ19wbGFuZXNfcGFyc192ZXJ0ZXggY29udmVydGVkIHRvIGdsc2wgM1xcbiAgICAgICAgICAgICNpZiBOVU1fQ0xJUFBJTkdfUExBTkVTID4gMFxcblxcdCAgICAgICAgICAgIG91dCB2ZWMzIHZDbGlwUG9zaXRpb247XFxuICAgICAgICAgICAgI2VuZGlmXFxuXFxuICAgICAgICAgICAgdm9pZCBtYWluKHZvaWQpIHtcXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIGdsc2wgM1xcbiAgICAgICAgICAgICAgICAjaW5jbHVkZSA8YmVnaW5fdmVydGV4PlxcblxcbiAgICAgICAgICAgICAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiAgICAgICAgICAgICAgICB2VVYgPSB1djtcXG5cXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIGdsc2wgM1xcbiAgICAgICAgICAgICAgICAjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+XFxuICAgICAgICAgICAgICAgICNpbmNsdWRlIDxjbGlwcGluZ19wbGFuZXNfdmVydGV4PlxcblxcbiAgICAgICAgICAgIH1cIjtcbiAgICAgICAgbWF0ZXJpYWwuZnJhZ21lbnRTaGFkZXIgPSBmcmFnbWVudFNoYWRlcjtcbiAgICAgICAgbWF0ZXJpYWwudmVydGV4U2hhZGVyID0gdmVydGV4U2hhZGVyO1xuICAgICAgICBtYXRlcmlhbC5jbGlwcGluZyA9IHRydWU7XG4gICAgICAgIG1hdGVyaWFsLmNsaXBwaW5nUGxhbmVzID0gY2xpcHBpbmdDb250ZXh0LnBsYW5lcztcbiAgICAgICAgdGhpcy51cGRhdGVDbGlwcGluZygpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVUZXh0QWxpZ25tZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRleHRBbGlnbm1lbnQoKSB7XG4gICAgICAvLyBhbGlnbiBjc3MgdGV4dC1hbGlnbiB0byB0ZXh0IGNvbXBvbmVudFxuICAgICAgdmFyIGFsaWduID0gdGhpcy5zdHlsZS50ZXh0QWxpZ247XG4gICAgICBpZiAoIVtcImxlZnRcIiwgXCJyaWdodFwiLCBcImNlbnRlclwiXS5pbmNsdWRlcyhhbGlnbikpIGFsaWduID0gXCJsZWZ0XCI7XG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIFwiYWxpZ25cIiwgYWxpZ24pO1xuXG4gICAgICAvLyBzZXQgdGV4dCBsaW5lSGVpZ2h0IGlmIGl0IGhhcyBjdXN0b20gY3NzIGxpbmVIZWlnaHRcbiAgICAgIHZhciB0ZXh0ID0gdGhpcy5lbnRpdHkuY29tcG9uZW50cy50ZXh0O1xuICAgICAgaWYgKHRoaXMuc3R5bGUubGluZUhlaWdodCAhPSBcIm5vcm1hbFwiICYmIHR5cGVvZiB0ZXh0LmN1cnJlbnRGb250ICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwidGV4dFwiLCBcImxpbmVIZWlnaHRcIiwgdGV4dC5jdXJyZW50Rm9udC5jb21tb24ubGluZUhlaWdodCArIHBhcnNlRmxvYXQodGhpcy5zdHlsZS5saW5lSGVpZ2h0KSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZVRleHRTaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRleHRTaXplKCkge1xuICAgICAgdmFyIGFjdHVhbEZvbnRTaXplID0gcGFyc2VGbG9hdCh0aGlzLnN0eWxlLmZvbnRTaXplKTtcbiAgICAgIHZhciB3aWR0aCA9IHRoaXMucG9zaXRpb24ud2lkdGg7XG4gICAgICB2YXIgd2lkdGhJblBpeGVscyA9IHdpZHRoIC8gdGhpcy5wb3NpdGlvbi5zY2FsaW5nRmFjdG9yO1xuICAgICAgdmFyIHdyYXBQaXhlbHMgPSB3aWR0aEluUGl4ZWxzICogNDIgLyBhY3R1YWxGb250U2l6ZTtcbiAgICAgIHdyYXBQaXhlbHMgKj0gMS4xMDc7IC8vMS4xMDcwNjc3NDE4MzA3MDIzM1xuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwidGV4dFwiLCBcIndyYXBQaXhlbHNcIiwgd3JhcFBpeGVscyk7XG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIFwid2lkdGhcIiwgd2lkdGgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVUZXh0Q29sb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVGV4dENvbG9yKCkge1xuICAgICAgLy8gb3BhY2l0eSBmcm9tIHBhcmVudCBiZWNhdXNlIGl0IGRvZXNudCBwYXNzIGl0IHRvIGNoaWxkcmVuXG4gICAgICB2YXIgb3BhY2l0eSA9IHRoaXMuZG9tRWxlbWVudC5wYXJlbnRFbGVtZW50LmVsZW1lbnQuc3R5bGUub3BhY2l0eTtcbiAgICAgIHRoaXMuZW50aXR5LnNldEF0dHJpYnV0ZShcInRleHRcIiwgXCJvcGFjaXR5XCIsIG9wYWNpdHkpO1xuICAgICAgdmFyIHRleHRDb2xvciA9IHRoaXMuc3R5bGUuY29sb3I7XG4gICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIFwiY29sb3JcIiwgdGV4dENvbG9yKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlVGV4dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVUZXh0KCkge1xuICAgICAgLy8gcmVtb3ZlIG5ldyBsaW5lcyBhbmQgd2hpdGVzcGFjZXNcbiAgICAgIHRoaXMudGV4dFZhbHVlID0gdGhpcy5kb21FbGVtZW50LnRleHRDb250ZW50LnJlcGxhY2UoL1xcc3syLH0vZywgJyAnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3BlY2lmaWNVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3BlY2lmaWNVcGRhdGUoKSB7XG4gICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihUZXh0RWxlbWVudC5wcm90b3R5cGUpLCBcInNwZWNpZmljVXBkYXRlXCIsIHRoaXMpLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnVwZGF0ZVRleHRTaXplKCk7XG4gICAgICB0aGlzLnVwZGF0ZVRleHRBbGlnbm1lbnQoKTtcbiAgICAgIHRoaXMudXBkYXRlVGV4dCgpO1xuICAgICAgdGhpcy5lbnRpdHkuc2V0QXR0cmlidXRlKFwidGV4dFwiLCBcInZhbHVlXCIsIHRoaXMudGV4dFZhbHVlKTtcbiAgICAgIHRoaXMudXBkYXRlVGV4dENvbG9yKCk7XG4gICAgfVxuICB9XSk7XG59KF9jb250YWluZXJFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9lbGVtZW50cy92aWRlb0VsZW1lbnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2VsZW1lbnRzL3ZpZGVvRWxlbWVudC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFZpZGVvRWxlbWVudClcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy9lbGVtZW50LmpzXCIpO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTsgfSB9XG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwgeyB3cml0YWJsZTogZmFsc2UgfSk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkodCkgeyB2YXIgaSA9IF90b1ByaW1pdGl2ZSh0LCBcInN0cmluZ1wiKTsgcmV0dXJuIFwic3ltYm9sXCIgPT0gX3R5cGVvZihpKSA/IGkgOiBpICsgXCJcIjsgfVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKHQsIHIpIHsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZih0KSB8fCAhdCkgcmV0dXJuIHQ7IHZhciBlID0gdFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAodm9pZCAwICE9PSBlKSB7IHZhciBpID0gZS5jYWxsKHQsIHIgfHwgXCJkZWZhdWx0XCIpOyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKGkpKSByZXR1cm4gaTsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoXCJzdHJpbmdcIiA9PT0gciA/IFN0cmluZyA6IE51bWJlcikodCk7IH1cbmZ1bmN0aW9uIF9jYWxsU3VwZXIodCwgbywgZSkgeyByZXR1cm4gbyA9IF9nZXRQcm90b3R5cGVPZihvKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odCwgX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpID8gUmVmbGVjdC5jb25zdHJ1Y3QobywgZSB8fCBbXSwgX2dldFByb3RvdHlwZU9mKHQpLmNvbnN0cnVjdG9yKSA6IG8uYXBwbHkodCwgZSkpOyB9XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWRcIik7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgdHJ5IHsgdmFyIHQgPSAhQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyB9IGNhdGNoICh0KSB7fSByZXR1cm4gKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyByZXR1cm4gISF0OyB9KSgpOyB9XG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbnZhciBWaWRlb0VsZW1lbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FbGVtZW50KSB7XG4gIGZ1bmN0aW9uIFZpZGVvRWxlbWVudCh3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWaWRlb0VsZW1lbnQpO1xuICAgIF90aGlzID0gX2NhbGxTdXBlcih0aGlzLCBWaWRlb0VsZW1lbnQsIFt3ZWIydnIsIGRvbUVsZW1lbnQsIGxheWVyXSk7XG4gICAgLy8gbm9ybWFsIHZpZGVvXG4gICAgX3RoaXMuZW50aXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtdmlkZW9cIik7XG4gICAgLy8gMzYwIHZpZGVvXG4gICAgX3RoaXMudmlkZW8zNjAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS12aWRlb3NwaGVyZVwiKTtcbiAgICBfdGhpcy53ZWIydnIuYWZyYW1lLnNjZW5lLmFwcGVuZENoaWxkKF90aGlzLnZpZGVvMzYwKTtcbiAgICBfdGhpcy5jcmVhdGVDbGlja0V2ZW50KCk7XG4gICAgX3RoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicGxheVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMuZG9tRWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJ2clwiKSkgX3RoaXMudmlkZW8zNjAuY29tcG9uZW50cy5tYXRlcmlhbC5tYXRlcmlhbC5tYXAuaW1hZ2UucGxheSgpO1xuICAgIH0pO1xuICAgIF90aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBhdXNlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpcy5kb21FbGVtZW50Lmhhc0F0dHJpYnV0ZShcInZyXCIpKSBfdGhpcy52aWRlbzM2MC5jb21wb25lbnRzLm1hdGVyaWFsLm1hdGVyaWFsLm1hcC5pbWFnZS5wYXVzZSgpO1xuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICBfaW5oZXJpdHMoVmlkZW9FbGVtZW50LCBfRWxlbWVudCk7XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoVmlkZW9FbGVtZW50LCBbe1xuICAgIGtleTogXCJjcmVhdGVDbGlja0V2ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUNsaWNrRXZlbnQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICAgIC8vIGZvciBub3JtYWwgdmlkZW9cbiAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIuZG9tRWxlbWVudC5wYXVzZWQgPyBfdGhpczIuZG9tRWxlbWVudC5wbGF5KCkgOiBfdGhpczIuZG9tRWxlbWVudC5wYXVzZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNwZWNpZmljVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNwZWNpZmljVXBkYXRlKCkge1xuICAgICAgdmFyIHNyYyA9IHRoaXMuZG9tRWxlbWVudC5jdXJyZW50U3JjO1xuICAgICAgdmFyIGlkID0gdGhpcy5kb21FbGVtZW50LmlkO1xuXG4gICAgICAvLyBpZiB0aGVyZSBpcyBubyB2aWRlbyBpZCBnZW5lcmF0ZSBuZXcgaWRcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgaWQgPSB0aGlzLndlYjJ2ci5hZnJhbWUuYXNzZXRNYW5hZ2VyLnVwZGF0ZUN1cnJlbnRBc3NldElkUmV0dXJuKCk7XG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5pZCA9IGlkO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZG9tRWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJ2clwiKSkge1xuICAgICAgICB0aGlzLnZpZGVvMzYwLm9iamVjdDNELnZpc2libGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnZpZGVvMzYwLmNsYXNzTGlzdC5hZGQodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgICB0aGlzLmVudGl0eS5vYmplY3QzRC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW50aXR5LmNsYXNzTGlzdC5yZW1vdmUodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgICB0aGlzLnZpZGVvMzYwLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIiNcIiArIGlkKTtcbiAgICAgICAgLy8gc2V0IHZpZGVvMzYwIHJvdGF0aW9uXG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZG9tRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ2clwiKTtcbiAgICAgICAgaWYgKHJvdGF0aW9uKSB0aGlzLnZpZGVvMzYwLm9iamVjdDNELnJvdGF0aW9uLnkgPSBUSFJFRS5NYXRoLmRlZ1RvUmFkKHJvdGF0aW9uKTtlbHNlIHRoaXMudmlkZW8zNjAub2JqZWN0M0Qucm90YXRpb24ueSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnZpZGVvMzYwLm9iamVjdDNELnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52aWRlbzM2MC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMud2ViMnZyLnNldHRpbmdzLmludGVyYWN0aXZlVGFnKTtcbiAgICAgICAgdGhpcy5lbnRpdHkub2JqZWN0M0QudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZW50aXR5LmNsYXNzTGlzdC5hZGQodGhpcy53ZWIydnIuc2V0dGluZ3MuaW50ZXJhY3RpdmVUYWcpO1xuICAgICAgICB0aGlzLmVudGl0eS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIjXCIgKyBpZCk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG59KF9lbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9wbHVnaW5zL2FmcmFtZS1rZXlib2FyZC5taW4uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3BsdWdpbnMvYWZyYW1lLWtleWJvYXJkLm1pbi5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKCkgPT4ge1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH1cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuIWZ1bmN0aW9uIChlKSB7XG4gIHZhciB0ID0ge307XG4gIGZ1bmN0aW9uIGEoZCkge1xuICAgIGlmICh0W2RdKSByZXR1cm4gdFtkXS5leHBvcnRzO1xuICAgIHZhciBuID0gdFtkXSA9IHtcbiAgICAgIGk6IGQsXG4gICAgICBsOiAhMSxcbiAgICAgIGV4cG9ydHM6IHt9XG4gICAgfTtcbiAgICByZXR1cm4gZVtkXS5jYWxsKG4uZXhwb3J0cywgbiwgbi5leHBvcnRzLCBhKSwgbi5sID0gITAsIG4uZXhwb3J0cztcbiAgfVxuICBhLm0gPSBlLCBhLmMgPSB0LCBhLmQgPSBmdW5jdGlvbiAoZSwgdCwgZCkge1xuICAgIGEubyhlLCB0KSB8fCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwge1xuICAgICAgZW51bWVyYWJsZTogITAsXG4gICAgICBnZXQ6IGRcbiAgICB9KTtcbiAgfSwgYS5yID0gZnVuY3Rpb24gKGUpIHtcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcbiAgICAgIHZhbHVlOiBcIk1vZHVsZVwiXG4gICAgfSksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgdmFsdWU6ICEwXG4gICAgfSk7XG4gIH0sIGEudCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgaWYgKDEgJiB0ICYmIChlID0gYShlKSksIDggJiB0KSByZXR1cm4gZTtcbiAgICBpZiAoNCAmIHQgJiYgXCJvYmplY3RcIiA9PSBfdHlwZW9mKGUpICYmIGUgJiYgZS5fX2VzTW9kdWxlKSByZXR1cm4gZTtcbiAgICB2YXIgZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgaWYgKGEucihkKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGQsIFwiZGVmYXVsdFwiLCB7XG4gICAgICBlbnVtZXJhYmxlOiAhMCxcbiAgICAgIHZhbHVlOiBlXG4gICAgfSksIDIgJiB0ICYmIFwic3RyaW5nXCIgIT0gdHlwZW9mIGUpIGZvciAodmFyIG4gaW4gZSkgYS5kKGQsIG4sIGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gZVt0XTtcbiAgICB9LmJpbmQobnVsbCwgbikpO1xuICAgIHJldHVybiBkO1xuICB9LCBhLm4gPSBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB0ID0gZSAmJiBlLl9fZXNNb2R1bGUgPyBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZVtcImRlZmF1bHRcIl07XG4gICAgfSA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBlO1xuICAgIH07XG4gICAgcmV0dXJuIGEuZCh0LCBcImFcIiwgdCksIHQ7XG4gIH0sIGEubyA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KTtcbiAgfSwgYS5wID0gXCJcIiwgYShhLnMgPSAwKTtcbn0oW2Z1bmN0aW9uIChlLCB0LCBhKSB7XG4gIGEoMSksIGEoMyk7XG4gIHZhciBkID0gYSg0KSxcbiAgICBuID0ge1xuICAgICAgbW9kZTogXCJub3JtYWxcIlxuICAgIH07XG4gIG4udGVtcGxhdGUgPSBuZXcgZCgpLCBlLmV4cG9ydHMgPSB3aW5kb3cuQUZLID0gbjtcbn0sIGZ1bmN0aW9uIChlLCB0LCBhKSB7XG4gIHZhciBkID0gYSgyKTtcbiAgaWYgKFwidW5kZWZpbmVkXCIgPT0gdHlwZW9mIEFGUkFNRSkgdGhyb3cgbmV3IEVycm9yKFwiQ29tcG9uZW50IGF0dGVtcHRlZCB0byByZWdpc3RlciBiZWZvcmUgQUZSQU1FIHdhcyBhdmFpbGFibGUuXCIpO1xuICBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoXCJhLWtleWJvYXJkXCIsIHtcbiAgICBzY2hlbWE6IHtcbiAgICAgIGF1ZGlvOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiAhMVxuICAgICAgfSxcbiAgICAgIGNvbG9yOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBcIiNmZmZcIlxuICAgICAgfSxcbiAgICAgIGhpZ2hsaWdodENvbG9yOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBcIiMxYTc5ZGNcIlxuICAgICAgfSxcbiAgICAgIGRpc21pc3NhYmxlOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiAhMFxuICAgICAgfSxcbiAgICAgIGZvbnQ6IHtcbiAgICAgICAgXCJkZWZhdWx0XCI6IFwibW9ub2lkXCJcbiAgICAgIH0sXG4gICAgICBmb250U2l6ZToge1xuICAgICAgICBcImRlZmF1bHRcIjogXCIwLjM5XCJcbiAgICAgIH0sXG4gICAgICBsb2NhbGU6IHtcbiAgICAgICAgXCJkZWZhdWx0XCI6IFwiZW5cIlxuICAgICAgfSxcbiAgICAgIG1vZGVsOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBcIlwiXG4gICAgICB9LFxuICAgICAgYmFzZVRleHR1cmU6IHtcbiAgICAgICAgXCJkZWZhdWx0XCI6IFwiXCJcbiAgICAgIH0sXG4gICAgICBrZXlUZXh0dXJlOiB7XG4gICAgICAgIFwiZGVmYXVsdFwiOiBcIlwiXG4gICAgICB9LFxuICAgICAgdmVydGljYWxBbGlnbjoge1xuICAgICAgICBcImRlZmF1bHRcIjogXCJjZW50ZXJcIlxuICAgICAgfVxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIEFGSy50ZW1wbGF0ZS5kcmF3KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5kYXRhKSwge30sIHtcbiAgICAgICAgZWw6IHRoaXMuZWxcbiAgICAgIH0pKSwgdGhpcy5hdHRhY2hFdmVudExpc3RlbmVycygpO1xuICAgIH0sXG4gICAgYXR0YWNoRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uIGF0dGFjaEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5Ym9hcmRQcmVzcyksIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlS2V5Ym9hcmRWUik7XG4gICAgfSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyczogZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVLZXlib2FyZFByZXNzKSwgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVLZXlib2FyZFZSKTtcbiAgICB9LFxuICAgIGhhbmRsZUtleWJvYXJkUHJlc3M6IGZ1bmN0aW9uIGhhbmRsZUtleWJvYXJkUHJlc3MoZSkge1xuICAgICAgZChlKTtcbiAgICB9LFxuICAgIGhhbmRsZUtleWJvYXJkVlI6IGZ1bmN0aW9uIGhhbmRsZUtleWJvYXJkVlIoZSkge1xuICAgICAgZChlLCBcInZyXCIpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuICB9KTtcbn0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgdmFyIGE7XG4gICAgdmFyIGQgPSBuZXcgU2V0KFsxNiwgMTcsIDE4LCAyMCwgMzMsIDM0LCAzNSwgMzYsIDQ1LCA0NiwgMTEyLCAxMTMsIDExNCwgMTE1LCAxMTYsIDExNywgMTE4LCAxMTksIDEyMCwgMTIxLCAxMjIsIDEyM10pLFxuICAgICAgbiA9IGUua2V5ICYmIGUua2V5LmNoYXJDb2RlQXQoMCk7XG4gICAgdmFyIHIgPSBlLmtleSxcbiAgICAgIHMgPSBlLmtleUNvZGU7XG4gICAgaWYgKFwidnJcIiA9PT0gdCkgcyA9IHBhcnNlSW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIuY29uY2F0KGUudGFyZ2V0LmlkKSkuZ2V0QXR0cmlidXRlKFwia2V5LWNvZGVcIikpLCByID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIi5jb25jYXQoZS50YXJnZXQuaWQpKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTtlbHNlIGlmIChkLmhhcyhlLmtleUNvZGUpKSByZXR1cm47XG4gICAgc3dpdGNoIChzKSB7XG4gICAgICBjYXNlIDk6XG4gICAgICAgIGEgPSBuZXcgQ3VzdG9tRXZlbnQoXCJhLWtleWJvYXJkLXVwZGF0ZVwiLCB7XG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBjb2RlOiBzLFxuICAgICAgICAgICAgdmFsdWU6IFwiXFx0XCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pLCBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgODpcbiAgICAgICAgYSA9IG5ldyBDdXN0b21FdmVudChcImEta2V5Ym9hcmQtdXBkYXRlXCIsIHtcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGNvZGU6IHMsXG4gICAgICAgICAgICB2YWx1ZTogXCJcIlxuICAgICAgICAgIH1cbiAgICAgICAgfSksIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoYSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxMzpcbiAgICAgICAgYSA9IG5ldyBDdXN0b21FdmVudChcImEta2V5Ym9hcmQtdXBkYXRlXCIsIHtcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGNvZGU6IHMsXG4gICAgICAgICAgICB2YWx1ZTogXCJcXG5cIlxuICAgICAgICAgIH1cbiAgICAgICAgfSksIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoYSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxNjpcbiAgICAgICAgQUZLLnRlbXBsYXRlLnRvZ2dsZUFjdGl2ZU1vZGUoXCJzaGlmdFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE4OlxuICAgICAgICBBRksudGVtcGxhdGUudG9nZ2xlQWN0aXZlTW9kZShcImFsdFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI3OlxuICAgICAgICB0aGlzLmRpc21pc3NhYmxlICYmIChhID0gbmV3IEN1c3RvbUV2ZW50KFwiYS1rZXlib2FyZC11cGRhdGVcIiwge1xuICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgY29kZTogcyxcbiAgICAgICAgICAgIHZhbHVlOiBcIlwiXG4gICAgICAgICAgfVxuICAgICAgICB9KSwgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChhKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzMjpcbiAgICAgICAgYSA9IG5ldyBDdXN0b21FdmVudChcImEta2V5Ym9hcmQtdXBkYXRlXCIsIHtcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIGNvZGU6IHMsXG4gICAgICAgICAgICB2YWx1ZTogXCIgXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pLCBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGEgPSBuZXcgQ3VzdG9tRXZlbnQoXCJhLWtleWJvYXJkLXVwZGF0ZVwiLCB7XG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICBjb2RlOiBzLFxuICAgICAgICAgICAgdmFsdWU6IHJcbiAgICAgICAgICB9XG4gICAgICAgIH0pLCBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGEpO1xuICAgIH1cbiAgICBpZiAoXCJ2clwiICE9PSB0KSB7XG4gICAgICB2YXIgX3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Eta2V5Ym9hcmQtXCIuY29uY2F0KG4pKSB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Eta2V5Ym9hcmQtXCIuY29uY2F0KGUua2V5Q29kZSkpO1xuICAgICAgX3QgJiYgKF90LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwibW91c2Vkb3duXCIpKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwibW91c2VsZWF2ZVwiKSk7XG4gICAgICB9LCA4MCkpO1xuICAgIH1cbiAgfTtcbn0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gIGlmIChcInVuZGVmaW5lZFwiID09IHR5cGVvZiBBRlJBTUUpIHRocm93IG5ldyBFcnJvcihcIkNvbXBvbmVudCBhdHRlbXB0ZWQgdG8gcmVnaXN0ZXIgYmVmb3JlIEFGUkFNRSB3YXMgYXZhaWxhYmxlLlwiKTtcbiAgQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KFwia2V5Ym9hcmQtYnV0dG9uXCIsIHtcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgIHZhciBlID0gdGhpcy5lbDtcbiAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGUuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJvcGFjaXR5XCIsIFwiMC43XCIpO1xuICAgICAgfSksIGUuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBlLnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwib3BhY2l0eVwiLCBfdGhpcy5pc01vdXNlRW50ZXIgPyBcIjAuOVwiIDogXCIwXCIpO1xuICAgICAgfSksIGUuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBlLnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwib3BhY2l0eVwiLCBcIjAuOVwiKSwgc2VsZi5pc01vdXNlRW50ZXIgPSAhMDtcbiAgICAgIH0pLCBlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcIm9wYWNpdHlcIiwgXCIwXCIpLCBzZWxmLmlzTW91c2VFbnRlciA9ICExO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0sIGZ1bmN0aW9uIChlLCB0LCBhKSB7XG4gIHZhciBkID0gYSg1KTtcbiAgZS5leHBvcnRzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBfY2xhc3MoKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2NsYXNzKTtcbiAgICAgIHRoaXMua2V5Ym9hcmRLZXlzID0ge30sIHRoaXMuYWN0aXZlTW9kZSA9IFwibm9ybWFsXCI7XG4gICAgfVxuICAgIHJldHVybiBfY3JlYXRlQ2xhc3MoX2NsYXNzLCBbe1xuICAgICAga2V5OiBcImRyYXdcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KGUpIHtcbiAgICAgICAgZm9yICh2YXIgX3QyIGluIGUpIHRoaXNbX3QyXSA9IGVbX3QyXTtcbiAgICAgICAgdGhpcy5rZXlib2FyZEtleXMgPSBkKGUubG9jYWxlKSwgdGhpcy5kcmF3S2V5Ym9hcmQoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZHJhd0J1dHRvblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdCdXR0b24oZSkge1xuICAgICAgICB2YXIgdCA9IGUua2V5LFxuICAgICAgICAgIGEgPSB0LnNpemUuc3BsaXQoXCIgXCIpWzBdLFxuICAgICAgICAgIGQgPSB0LnNpemUuc3BsaXQoXCIgXCIpWzFdLFxuICAgICAgICAgIG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1lbnRpdHlcIik7XG4gICAgICAgIG4uc2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiwgZS5wb3NpdGlvbik7XG4gICAgICAgIHZhciByID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImEtZW50aXR5XCIpO1xuICAgICAgICByLnNldEF0dHJpYnV0ZShcImdlb21ldHJ5XCIsIFwicHJpbWl0aXZlOiBwbGFuZTsgd2lkdGg6IFwiLmNvbmNhdChhLCBcIjsgaGVpZ2h0OiBcIikuY29uY2F0KGQsIFwiO1wiKSksIHRoaXMua2V5VGV4dHVyZSAmJiB0aGlzLmtleVRleHR1cmUubGVuZ3RoID4gMCA/IHIuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJzcmM6IFwiLmNvbmNhdCh0aGlzLmtleVRleHR1cmUpKSA6IHIuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJjb2xvcjogIzRhNGE0YTsgb3BhY2l0eTogMC45XCIpO1xuICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLXRleHRcIik7XG4gICAgICAgIHMuaWQgPSBcImEta2V5Ym9hcmQtXCIuY29uY2F0KHQuY29kZSksIHMuc2V0QXR0cmlidXRlKFwia2V5LWNvZGVcIiwgdC5jb2RlKSwgcy5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB0LnZhbHVlKSwgcy5zZXRBdHRyaWJ1dGUoXCJhbGlnblwiLCBcImNlbnRlclwiKSwgcy5zZXRBdHRyaWJ1dGUoXCJiYXNlbGluZVwiLCB0aGlzLnZlcnRpY2FsQWxpZ24pLCBzLnNldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIsIFwiMCAwIDAuMDAxXCIpLCBzLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHRoaXMuZm9udFNpemUpLCBzLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCB0aGlzLmZvbnRTaXplKSwgcy5zZXRBdHRyaWJ1dGUoXCJnZW9tZXRyeVwiLCBcInByaW1pdGl2ZTogcGxhbmU7IHdpZHRoOiBcIi5jb25jYXQoYSwgXCI7IGhlaWdodDogXCIpLmNvbmNhdChkKSksIHMuc2V0QXR0cmlidXRlKFwibWF0ZXJpYWxcIiwgXCJvcGFjaXR5OiAwLjA7IHRyYW5zcGFyZW50OiB0cnVlOyBjb2xvcjogXCIuY29uY2F0KHRoaXMuaGlnaGxpZ2h0Q29sb3IpKSwgcy5zZXRBdHRyaWJ1dGUoXCJjb2xvclwiLCB0aGlzLmNvbG9yKSwgcy5zZXRBdHRyaWJ1dGUoXCJmb250XCIsIHRoaXMuZm9udCksIHMuc2V0QXR0cmlidXRlKFwic2hhZGVyXCIsIFwibXNkZlwiKSwgcy5zZXRBdHRyaWJ1dGUoXCJuZWdhdGVcIiwgXCJmYWxzZVwiKSwgcy5zZXRBdHRyaWJ1dGUoXCJrZXlib2FyZC1idXR0b25cIiwgITApLCBzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29sbGlkYWJsZVwiKSwgbi5hcHBlbmRDaGlsZChyKSwgbi5hcHBlbmRDaGlsZChzKSwgdGhpcy5lbC5hcHBlbmRDaGlsZChuKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZHJhd0tleWJvYXJkXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0tleWJvYXJkKCkge1xuICAgICAgICBmb3IgKDsgdGhpcy5lbC5maXJzdENoaWxkOykgdGhpcy5lbC5yZW1vdmVDaGlsZCh0aGlzLmVsLmZpcnN0Q2hpbGQpO1xuICAgICAgICBpZiAodGhpcy5rZXlib2FyZEtleXMpIHtcbiAgICAgICAgICB2YXIgX2UgPSB0aGlzLmtleWJvYXJkS2V5c1t0aGlzLmFjdGl2ZU1vZGVdIHx8IHRoaXMua2V5Ym9hcmRLZXlzLm5vcm1hbCxcbiAgICAgICAgICAgIF90MyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLWVudGl0eVwiKSxcbiAgICAgICAgICAgIF9hID0gLjUyLFxuICAgICAgICAgICAgX2QgPSAuMDQgKiBfZS5sZW5ndGggKyAuMDA0ICogKF9lLmxlbmd0aCAtIDEpICsgLjA0O1xuICAgICAgICAgIF90My5zZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiLCBcIlwiLmNvbmNhdChfYSAvIDIgLSAuMDIsIFwiIFwiKS5jb25jYXQoLV9kIC8gMiArIC4wMiwgXCIgLTAuMDFcIikpLCBfdDMuc2V0QXR0cmlidXRlKFwiZ2VvbWV0cnlcIiwgXCJwcmltaXRpdmU6IHBsYW5lOyB3aWR0aDogXCIuY29uY2F0KF9hLCBcIjsgaGVpZ2h0OiBcIikuY29uY2F0KF9kKSksIHRoaXMuYmFzZVRleHR1cmUgJiYgdGhpcy5iYXNlVGV4dHVyZS5sZW5ndGggPiAwID8gX3QzLnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwic3JjOiBcIi5jb25jYXQodGhpcy5iYXNlVGV4dHVyZSkpIDogX3QzLnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwiY29sb3I6ICM0YTRhNGE7IHNpZGU6IGRvdWJsZTsgb3BhY2l0eTogMC43XCIpLCB0aGlzLmVsLmFwcGVuZENoaWxkKF90Myk7XG4gICAgICAgICAgdmFyIG4gPSAwO1xuICAgICAgICAgIGZvciAodmFyIF90NCA9IDA7IF90NCA8IF9lLmxlbmd0aDsgX3Q0KyspIHtcbiAgICAgICAgICAgIHZhciBfYTIgPSBfZVtfdDRdO1xuICAgICAgICAgICAgdmFyIF9kMiA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBfZTIgPSAwOyBfZTIgPCBfYTIubGVuZ3RoOyBfZTIrKykge1xuICAgICAgICAgICAgICB2YXIgX3Q1ID0gX2EyW19lMl0sXG4gICAgICAgICAgICAgICAgciA9IHRoaXMucGFyc2VLZXlPYmplY3RzKF90NSk7XG4gICAgICAgICAgICAgIGlmICghdGhpcy5kaXNtaXNzYWJsZSAmJiBcImNhbmNlbFwiID09PSBfdDUudHlwZSkgY29udGludWU7XG4gICAgICAgICAgICAgIHZhciBzID0gci5zaXplLnNwbGl0KFwiIFwiKVswXSxcbiAgICAgICAgICAgICAgICBsID0gci5zaXplLnNwbGl0KFwiIFwiKVsxXTtcbiAgICAgICAgICAgICAgdGhpcy5kcmF3QnV0dG9uKHtcbiAgICAgICAgICAgICAgICBrZXk6IHIsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiXCIuY29uY2F0KF9kMiArIHMgLyAyLCBcIiBcIikuY29uY2F0KG4gLSBsIC8gMiwgXCIgMFwiKVxuICAgICAgICAgICAgICB9KSwgX2QyICs9IHBhcnNlRmxvYXQocykgKyAuMDA0LCBfYTIubGVuZ3RoID09PSBfZTIgKyAxICYmIChuIC09IC4wNDQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJ0b2dnbGVBY3RpdmVNb2RlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlQWN0aXZlTW9kZShlKSB7XG4gICAgICAgIGUgPT09IHRoaXMuYWN0aXZlTW9kZSA/ICh0aGlzLmFjdGl2ZU1vZGUgPSBcIm5vcm1hbFwiLCB0aGlzLmRyYXdLZXlib2FyZCgpKSA6ICh0aGlzLmFjdGl2ZU1vZGUgPSBlLCB0aGlzLmRyYXdLZXlib2FyZCgpKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicGFyc2VLZXlPYmplY3RzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VLZXlPYmplY3RzKGUpIHtcbiAgICAgICAgdmFyIHQgPSBlLnR5cGUsXG4gICAgICAgICAgYSA9IGUudmFsdWU7XG4gICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgIGNhc2UgXCJkZWxldGVcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNpemU6IFwiMC4wNCAwLjA0IDBcIixcbiAgICAgICAgICAgICAgdmFsdWU6IGEsXG4gICAgICAgICAgICAgIGNvZGU6IFwiOFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIGNhc2UgXCJlbnRlclwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc2l6ZTogXCIwLjA0IDAuMDg0IDBcIixcbiAgICAgICAgICAgICAgdmFsdWU6IGEsXG4gICAgICAgICAgICAgIGNvZGU6IFwiMTNcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICBjYXNlIFwic2hpZnRcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNpemU6IFwiMC4wODQgMC4wNCAwXCIsXG4gICAgICAgICAgICAgIHZhbHVlOiBhLFxuICAgICAgICAgICAgICBjb2RlOiBcIjE2XCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgY2FzZSBcImFsdFwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc2l6ZTogXCIwLjA4NCAwLjA0IDBcIixcbiAgICAgICAgICAgICAgdmFsdWU6IGEsXG4gICAgICAgICAgICAgIGNvZGU6IFwiMThcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICBjYXNlIFwic3BhY2VcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNpemU6IFwiXCIuY29uY2F0KC4yICsgLjAxNiwgXCIgMC4wNCAwXCIpLFxuICAgICAgICAgICAgICB2YWx1ZTogYSxcbiAgICAgICAgICAgICAgY29kZTogXCIzMlwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIGNhc2UgXCJjYW5jZWxcIjpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNpemU6IFwiMC4wODQgMC4wNCAwXCIsXG4gICAgICAgICAgICAgIHZhbHVlOiBhLFxuICAgICAgICAgICAgICBjb2RlOiBcIjI0XCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgY2FzZSBcInN1Ym1pdFwiOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc2l6ZTogXCIwLjA4NCAwLjA0IDBcIixcbiAgICAgICAgICAgICAgdmFsdWU6IGEsXG4gICAgICAgICAgICAgIGNvZGU6IFwiMDZcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc2l6ZTogXCIwLjA0IDAuMDQgMFwiLFxuICAgICAgICAgICAgICB2YWx1ZTogYSxcbiAgICAgICAgICAgICAgY29kZTogYS5jaGFyQ29kZUF0KDApXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0pO1xuICB9KCk7XG59LCBmdW5jdGlvbiAoZSwgdCwgYSkge1xuICB2YXIgZCA9IGEoNik7XG4gIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgc3dpdGNoIChlKSB7XG4gICAgICBjYXNlIFwiZW5cIjpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBkO1xuICAgIH1cbiAgfTtcbn0sIGZ1bmN0aW9uIChlLCB0KSB7XG4gIGUuZXhwb3J0cyA9IHtcbiAgICBuYW1lOiBcIm1zLVVTLUludGVybmF0aW9uYWxcIixcbiAgICBub3JtYWw6IFtbe1xuICAgICAgdmFsdWU6IFwiMVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiMlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiM1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiNFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiNVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiNlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiN1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiOFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiOVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiMFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiPC1cIixcbiAgICAgIHR5cGU6IFwiZGVsZXRlXCJcbiAgICB9XSwgW3tcbiAgICAgIHZhbHVlOiBcInFcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIndcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcImVcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcInJcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcInRcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcInlcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcInVcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcImlcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIm9cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcInBcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIkVudFwiLFxuICAgICAgdHlwZTogXCJlbnRlclwiXG4gICAgfV0sIFt7XG4gICAgICB2YWx1ZTogXCJhXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJzXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJkXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJmXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJnXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJoXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJqXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJrXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJsXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogJ1wiJyxcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiU2hpZnRcIixcbiAgICAgIHR5cGU6IFwic2hpZnRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcInpcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcInhcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcImNcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcInZcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcImJcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIm5cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIm1cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIkFsdFwiLFxuICAgICAgdHlwZTogXCJhbHRcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiQ2FuY2VsXCIsXG4gICAgICB0eXBlOiBcImNhbmNlbFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICB0eXBlOiBcInNwYWNlXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIsXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIuXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJTdWJtaXRcIixcbiAgICAgIHR5cGU6IFwic3VibWl0XCJcbiAgICB9XV0sXG4gICAgc2hpZnQ6IFtbe1xuICAgICAgdmFsdWU6IFwiMVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiMlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiM1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiNFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiNVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiNlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiN1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiOFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiOVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiMFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiPC1cIixcbiAgICAgIHR5cGU6IFwiZGVsZXRlXCJcbiAgICB9XSwgW3tcbiAgICAgIHZhbHVlOiBcIlFcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIldcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIkVcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlJcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlRcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIllcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlVcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIklcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIk9cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlBcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIkVudFwiLFxuICAgICAgdHlwZTogXCJlbnRlclwiXG4gICAgfV0sIFt7XG4gICAgICB2YWx1ZTogXCJBXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJTXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJEXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJGXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJHXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJIXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJKXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJLXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJMXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogJ1wiJyxcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiU2hpZnRcIixcbiAgICAgIHR5cGU6IFwic2hpZnRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlpcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlhcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIkNcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlZcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIkJcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIk5cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIk1cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIkFsdFwiLFxuICAgICAgdHlwZTogXCJhbHRcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiQ2FuY2VsXCIsXG4gICAgICB0eXBlOiBcImNhbmNlbFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICB0eXBlOiBcInNwYWNlXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIsXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIuXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJTdWJtaXRcIixcbiAgICAgIHR5cGU6IFwic3VibWl0XCJcbiAgICB9XV0sXG4gICAgYWx0OiBbW3tcbiAgICAgIHZhbHVlOiBcIjFcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjJcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjNcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjRcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjVcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjZcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjdcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjhcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjlcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjBcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIjwtXCIsXG4gICAgICB0eXBlOiBcImRlbGV0ZVwiXG4gICAgfV0sIFt7XG4gICAgICB2YWx1ZTogXCJ+XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJgXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJ8XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIoXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIpXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJeXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJfXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCItXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCI9XCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCIhXCIsXG4gICAgICB0eXBlOiBcInN0YW5kYXJkXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJFbnRcIixcbiAgICAgIHR5cGU6IFwiZW50ZXJcIlxuICAgIH1dLCBbe1xuICAgICAgdmFsdWU6IFwiQFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiI1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiJFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiJVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiKlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiW1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiXVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiI1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiPFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiP1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfV0sIFt7XG4gICAgICB2YWx1ZTogXCJTaGlmdFwiLFxuICAgICAgdHlwZTogXCJzaGlmdFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiOlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiO1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwie1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwifVwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiL1wiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiXFxcXFwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiPlwiLFxuICAgICAgdHlwZTogXCJzdGFuZGFyZFwiXG4gICAgfSwge1xuICAgICAgdmFsdWU6IFwiQWx0XCIsXG4gICAgICB0eXBlOiBcImFsdFwiXG4gICAgfV0sIFt7XG4gICAgICB2YWx1ZTogXCJDYW5jZWxcIixcbiAgICAgIHR5cGU6IFwiY2FuY2VsXCJcbiAgICB9LCB7XG4gICAgICB2YWx1ZTogXCJcIixcbiAgICAgIHR5cGU6IFwic3BhY2VcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIixcIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIi5cIixcbiAgICAgIHR5cGU6IFwic3RhbmRhcmRcIlxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBcIlN1Ym1pdFwiLFxuICAgICAgdHlwZTogXCJzdWJtaXRcIlxuICAgIH1dXVxuICB9O1xufV0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9wbHVnaW5zL2V2ZW50TGlzdGVuZXJMaXN0UGx1Z2luLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvcGx1Z2lucy9ldmVudExpc3RlbmVyTGlzdFBsdWdpbi5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKCgpID0+IHtcblxuLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vc3RyaW5ncGFyc2VyL2EzYjA1NTVmZDkxNTEzOGEwZWQzIGVkaXRlZCB2ZXJzaW9uIGZyb20gRE9NMkFGcmFtZVxuO1xuW0VsZW1lbnRdLmZvckVhY2goZnVuY3Rpb24gKHNlbGYpIHtcbiAgLy9zZWxmLnByb3RvdHlwZS5ldmVudExpc3RlbmVyTGlzdCA9IHt9OyAvLyBzaGFyZWQgU1RBVElDIG9iamVjdCBhY3Jvc3MgYWxsIGluc3RhbmNlcy4uLiBOT1Qgd2hhdCB3ZSB3YW50XG4gIHNlbGYucHJvdG90eXBlLl9hZGRFdmVudExpc3RlbmVyID0gc2VsZi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjtcbiAgc2VsZi5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGUsIHVzZUNhcHR1cmUpIHtcbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lckxpc3QpIHRoaXMuZXZlbnRMaXN0ZW5lckxpc3QgPSB7fTtcbiAgICB1c2VDYXB0dXJlID0gdXNlQ2FwdHVyZSA9PT0gdm9pZCAwID8gZmFsc2UgOiB1c2VDYXB0dXJlO1xuICAgIHZhciBub2RlID0gdGhpcztcbiAgICBub2RlLl9hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZSwgdXNlQ2FwdHVyZSk7XG4gICAgaWYgKCFub2RlLmV2ZW50TGlzdGVuZXJMaXN0W3R5cGVdKSB7XG4gICAgICBub2RlLmV2ZW50TGlzdGVuZXJMaXN0W3R5cGVdID0gW107XG4gICAgfVxuICAgIG5vZGUuZXZlbnRMaXN0ZW5lckxpc3RbdHlwZV0ucHVzaCh7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgaGFuZGxlOiBoYW5kbGUsXG4gICAgICB1c2VDYXB0dXJlOiB1c2VDYXB0dXJlLFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMuaGFuZGxlLCB0aGlzLnVzZUNhcHR1cmUpO1xuICAgICAgICByZXR1cm4gbm9kZS5ldmVudExpc3RlbmVyTGlzdFt0eXBlXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodHlwZSAhPSBcImV2ZW50TGlzdGVuZXJBZGRlZFwiICYmIHR5cGUgIT0gXCJldmVudExpc3RlbmVyUmVtb3ZlZFwiKSB7XG4gICAgICB2YXIgZXZlbnREZXRhaWwgPSB7XG4gICAgICAgICd0eXBlJzogdHlwZSxcbiAgICAgICAgJ2hhbmRsZSc6IGhhbmRsZSxcbiAgICAgICAgJ3VzZUNhcHR1cmUnOiB1c2VDYXB0dXJlXG4gICAgICB9O1xuICAgICAgdmFyIGFkZGVkRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoXCJldmVudExpc3RlbmVyQWRkZWRcIiwge1xuICAgICAgICBkZXRhaWw6IGV2ZW50RGV0YWlsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChhZGRlZEV2ZW50KTtcbiAgICB9XG4gIH07XG4gIHNlbGYucHJvdG90eXBlLl9yZW1vdmVFdmVudExpc3RlbmVyID0gc2VsZi5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgc2VsZi5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBoYW5kbGUsIHVzZUNhcHR1cmUpIHtcbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lckxpc3QpIHRoaXMuZXZlbnRMaXN0ZW5lckxpc3QgPSB7fTtcbiAgICB2YXIgbm9kZSA9IHRoaXM7XG4gICAgaWYgKCFub2RlLmV2ZW50TGlzdGVuZXJMaXN0W3R5cGVdKSByZXR1cm47XG4gICAgbm9kZS5fcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGUsIHVzZUNhcHR1cmUpO1xuICAgIG5vZGUuZXZlbnRMaXN0ZW5lckxpc3RbdHlwZV0gPSBub2RlLmV2ZW50TGlzdGVuZXJMaXN0W3R5cGVdLmZpbHRlcihmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBsaXN0ZW5lciAmJiBsaXN0ZW5lci5oYW5kbGUgJiYgaGFuZGxlICYmIGxpc3RlbmVyLmhhbmRsZS50b1N0cmluZygpICE9PSBoYW5kbGUudG9TdHJpbmcoKTsgLy8gbmF0aXZlIGV2ZW50IGxpc3RlbmVyIEFQSSBzdXBwb3J0cyBlbXB0eSBoYW5kbGVzL2xpc3RlbmVycywgYnV0IC50b1N0cmluZyBvYnZpb3VzbHkgZG9lc24ndFxuICAgIH0pO1xuICAgIGlmIChub2RlLmV2ZW50TGlzdGVuZXJMaXN0W3R5cGVdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVsZXRlIG5vZGUuZXZlbnRMaXN0ZW5lckxpc3RbdHlwZV07XG4gICAgfVxuICAgIGlmICh0eXBlICE9IFwiZXZlbnRMaXN0ZW5lckFkZGVkXCIgJiYgdHlwZSAhPSBcImV2ZW50TGlzdGVuZXJSZW1vdmVkXCIpIHtcbiAgICAgIHZhciBldmVudERldGFpbCA9IHtcbiAgICAgICAgJ3R5cGUnOiB0eXBlLFxuICAgICAgICAnaGFuZGxlJzogaGFuZGxlLFxuICAgICAgICAndXNlQ2FwdHVyZSc6IHVzZUNhcHR1cmVcbiAgICAgIH07XG4gICAgICB2YXIgcmVtb3ZlZEV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwiZXZlbnRMaXN0ZW5lclJlbW92ZWRcIiwge1xuICAgICAgICBkZXRhaWw6IGV2ZW50RGV0YWlsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChyZW1vdmVkRXZlbnQpO1xuICAgIH1cbiAgfTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3NyYy9zY3JvbGwuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3Njcm9sbC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFNjcm9sbClcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3Njcm9sbGJhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL3Njcm9sbGJhciAqLyBcIi4vc3JjL2NvbXBvbmVudHMvc2Nyb2xsYmFyLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3Njcm9sbGJhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9jb21wb25lbnRzX3Njcm9sbGJhcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG5cbnZhciBTY3JvbGwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTY3JvbGwod2ViMnZyKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNjcm9sbCk7XG4gICAgdGhpcy53ZWIydnIgPSB3ZWIydnI7XG4gICAgdGhpcy5oYXNTY3JvbGwgPSBmYWxzZTtcbiAgICB0aGlzLnNjcm9sbEJvZHkgPSBmYWxzZTtcbiAgICB0aGlzLnNjcm9sbENvbnRhaW5lciA9IG51bGw7XG4gICAgaWYgKHRoaXMud2ViMnZyLnNldHRpbmdzLnNjcm9sbCkge1xuICAgICAgdGhpcy5jaGVja1Njcm9sbGJhcigpO1xuICAgICAgaWYgKHRoaXMuaGFzU2Nyb2xsKSB0aGlzLmNyZWF0ZVNjcm9sbGJhcigpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gX2NyZWF0ZUNsYXNzKFNjcm9sbCwgW3tcbiAgICBrZXk6IFwiY2hlY2tTY3JvbGxiYXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tTY3JvbGxiYXIoKSB7XG4gICAgICAvLyBlbnRpcmUgYm9keSBzY3JvbGxcbiAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudDtcbiAgICAgIC8vIGRpdiBjb250YWluZXIgc2Nyb2xsXG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy53ZWIydnIuY29udGFpbmVyO1xuICAgICAgaWYgKGJvZHkuc2Nyb2xsSGVpZ2h0ID4gYm9keS5jbGllbnRIZWlnaHQpIHtcbiAgICAgICAgdGhpcy5oYXNTY3JvbGwgPSB0cnVlO1xuICAgICAgICB0aGlzLnNjcm9sbENvbnRhaW5lciA9IGJvZHk7XG4gICAgICAgIHRoaXMuc2Nyb2xsQm9keSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGNvbnRhaW5lci5lbGVtZW50LnN0eWxlLm92ZXJmbG93ID09IFwic2Nyb2xsXCIpIHtcbiAgICAgICAgLy9jb250YWluZXIuc2Nyb2xsSGVpZ2h0ID4gY29udGFpbmVyLmNsaWVudEhlaWdodFxuICAgICAgICB0aGlzLmhhc1Njcm9sbCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjcmVhdGVTY3JvbGxiYXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU2Nyb2xsYmFyKCkge1xuICAgICAgdGhpcy5zY3JvbGxiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1lbnRpdHlcIik7XG4gICAgICB0aGlzLnBvaW50ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYS1wbGFuZVwiKTtcbiAgICAgIHRoaXMucG9pbnRlci5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcInNoYWRlclwiLCBcImZsYXRcIik7XG4gICAgICB0aGlzLnBvaW50ZXIuc2V0QXR0cmlidXRlKFwiY29sb3JcIiwgXCIjQzFDMUMxXCIpO1xuICAgICAgdGhpcy5wbGFuZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhLXBsYW5lXCIpO1xuICAgICAgdGhpcy5wbGFuZS5zZXRBdHRyaWJ1dGUoXCJtYXRlcmlhbFwiLCBcInNoYWRlclwiLCBcImZsYXRcIik7XG4gICAgICB0aGlzLnBsYW5lLnNldEF0dHJpYnV0ZShcIm1hdGVyaWFsXCIsIFwic2lkZVwiLCBcImRvdWJsZVwiKTtcbiAgICAgIHRoaXMucGxhbmUuY2xhc3NMaXN0LmFkZCh0aGlzLndlYjJ2ci5zZXR0aW5ncy5pbnRlcmFjdGl2ZVRhZyk7XG4gICAgICB0aGlzLnBsYW5lLnNldEF0dHJpYnV0ZShcImNvbG9yXCIsIFwiI0YxRjFGMVwiKTtcbiAgICAgIHRoaXMucGxhbmUuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgMSk7XG4gICAgICB0aGlzLnBsYW5lLnNldEF0dHJpYnV0ZShcInZyLXNjcm9sbGJhclwiLCBcIlwiKTtcblxuICAgICAgLy8gcG9pbnRlcnMgZm9yIHNjcm9sbCBjb21wb21lbnRcbiAgICAgIHRoaXMucGxhbmUud2ViMnZyID0gdGhpcy53ZWIydnI7XG4gICAgICB0aGlzLnBsYW5lLnBvaW50ZXIgPSB0aGlzLnBvaW50ZXI7XG4gICAgICB0aGlzLnBsYW5lLnNjcm9sbGJhciA9IHRoaXMuc2Nyb2xsYmFyO1xuICAgICAgdGhpcy5wbGFuZS5hcHBlbmRDaGlsZCh0aGlzLnBvaW50ZXIpO1xuICAgICAgdGhpcy5zY3JvbGxiYXIuYXBwZW5kQ2hpbGQodGhpcy5wbGFuZSk7XG4gICAgICB0aGlzLndlYjJ2ci5hZnJhbWUuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuc2Nyb2xsYmFyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgIC8vIHRoZXJlIGlzIG5vIG5lZWQgdG8gc2hvdyBzY3JvbGxiYXIgaWYgdGhlIG1haW4gY29udGFpbmVyIGlzIGhpZGRlblxuICAgICAgaWYgKHRoaXMuaGFzU2Nyb2xsKSB7XG4gICAgICAgIGlmICh0aGlzLndlYjJ2ci5jb250YWluZXIuZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID09IFwidmlzaWJsZVwiKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxiYXIub2JqZWN0M0QudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5wbGFuZS5jbGFzc0xpc3QuYWRkKHRoaXMud2ViMnZyLnNldHRpbmdzLmludGVyYWN0aXZlVGFnKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLndlYjJ2ci5jb250YWluZXIuZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID09IFwiaGlkZGVuXCIpIHtcbiAgICAgICAgICB0aGlzLnNjcm9sbGJhci5vYmplY3QzRC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5wbGFuZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMud2ViMnZyLnNldHRpbmdzLmludGVyYWN0aXZlVGFnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV0pO1xufSgpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc3JjL3NldHRpbmdzLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3NldHRpbmdzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBTZXR0aW5ncylcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuZnVuY3Rpb24gX3R5cGVvZihvKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cbnZhciBTZXR0aW5ncyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlQ2xhc3MoZnVuY3Rpb24gU2V0dGluZ3MoKSB7XG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZXR0aW5ncyk7XG4gIHRoaXMuc2NhbGUgPSA2MDA7XG4gIHRoaXMucG9zaXRpb24gPSB7XG4gICAgeDogMCxcbiAgICB5OiAyLFxuICAgIHo6IC0xXG4gIH07XG4gIHRoaXMucm90YXRpb24gPSB7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIHo6IDBcbiAgfTtcbiAgdGhpcy5sYXllclN0ZXAgPSAwLjAwMDU7IC8vIHogc3BhY2UgYmV0d2VlbiB0aGUgbGF5ZXJzXG5cbiAgdGhpcy5wYXJlbnRTZWxlY3RvciA9IG51bGw7XG4gIHRoaXMuaW50ZXJhY3RpdmVUYWcgPSBcInZyLWludGVyYWN0YWJsZVwiO1xuICB0aGlzLmlnbm9yZVRhZ3MgPSBbXCJCUlwiLCBcIlNPVVJDRVwiLCBcIlNDUklQVFwiLCBcIkFVRElPXCIsIFwiTk9TQ1JJUFRcIl07XG4gIHRoaXMuZGVidWcgPSBmYWxzZTtcbiAgdGhpcy5zaG93Q2xpcHBpbmcgPSBmYWxzZTtcbiAgdGhpcy5mb3JjZUNsaXBwaW5nID0gZmFsc2U7XG4gIHRoaXMuZXhwZXJpbWVudGFsID0gZmFsc2U7XG4gIHRoaXMuc2Nyb2xsID0gdHJ1ZTtcbiAgdGhpcy5zY3JvbGxXaW5kb3dIZWlnaHQgPSA4MDA7XG4gIHRoaXMuY3JlYXRlQ29udHJvbGxlcnMgPSB0cnVlO1xuICB0aGlzLnJheWNhc3RlckZhciA9IDU7XG4gIHRoaXMuc2t5Ym94ID0gdHJ1ZTtcbiAgdGhpcy5ib3JkZXIgPSB0cnVlO1xufSk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvdXRpbHMvaGVscGVyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy91dGlscy9oZWxwZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBIZWxwZXIpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIF90b1Byb3BlcnR5S2V5KGRlc2NyaXB0b3Iua2V5KSwgZGVzY3JpcHRvcik7IH0gfVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHsgd3JpdGFibGU6IGZhbHNlIH0pOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KHQpIHsgdmFyIGkgPSBfdG9QcmltaXRpdmUodCwgXCJzdHJpbmdcIik7IHJldHVybiBcInN5bWJvbFwiID09IF90eXBlb2YoaSkgPyBpIDogaSArIFwiXCI7IH1cbmZ1bmN0aW9uIF90b1ByaW1pdGl2ZSh0LCByKSB7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YodCkgfHwgIXQpIHJldHVybiB0OyB2YXIgZSA9IHRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHZvaWQgMCAhPT0gZSkgeyB2YXIgaSA9IGUuY2FsbCh0LCByIHx8IFwiZGVmYXVsdFwiKTsgaWYgKFwib2JqZWN0XCIgIT0gX3R5cGVvZihpKSkgcmV0dXJuIGk7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTsgfSByZXR1cm4gKFwic3RyaW5nXCIgPT09IHIgPyBTdHJpbmcgOiBOdW1iZXIpKHQpOyB9XG52YXIgSGVscGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSGVscGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIZWxwZXIpO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoSGVscGVyLCBudWxsLCBbe1xuICAgIGtleTogXCJpc1VybFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1VybChzdHJpbmcpIHtcbiAgICAgIHZhciByZWdleHAgPSAvKGZ0cHxodHRwfGh0dHBzKTpcXC9cXC8oXFx3Kzp7MCwxfVxcdypAKT8oXFxTKykoOlswLTldKyk/KFxcL3xcXC8oW1xcdyMhOi4/Kz0mJUAhXFwtXFwvXSkpPy87XG4gICAgICByZXR1cm4gcmVnZXhwLnRlc3Qoc3RyaW5nKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xhbXBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgICByZXR1cm4gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZhbHVlKSk7XG4gICAgfVxuICB9XSk7XG59KCk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvdXRpbHMvbW91c2VFdmVudEhhbmRsZXIuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdXRpbHMvbW91c2VFdmVudEhhbmRsZXIuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE1vdXNlRXZlbnRIYW5kbGVyKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIE1vdXNlRXZlbnRIYW5kbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTW91c2VFdmVudEhhbmRsZXIoZWxlbWVudCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb3VzZUV2ZW50SGFuZGxlcik7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLmxpc3RlbmluZ0Zvck1vdXNlRXZlbnRzID0gZmFsc2U7XG4gICAgdGhpcy5yZXN5bmMoKTtcbiAgICB0aGlzLmNoZWNrRW50aXR5RXZlbnRzKCk7XG4gIH1cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhNb3VzZUV2ZW50SGFuZGxlciwgW3tcbiAgICBrZXk6IFwicmVzeW5jXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3luYygpIHtcbiAgICAgIHZhciBtb3VzZUV2ZW50cyA9IFtcImNsaWNrXCIsIFwibW91c2VlbnRlclwiLCBcIm1vdXNlbGVhdmVcIiwgXCJtb3VzZWRvd25cIiwgXCJtb3VzZXVwXCJdO1xuICAgICAgdmFyIG1vdXNlUHJvcGVydGllcyA9IFtcIm9uY2xpY2tcIiwgXCJvbm1vdXNlZW50ZXJcIiwgXCJvbm1vdXNlbGVhdmVcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2V1cFwiXTtcbiAgICAgIHZhciBoYXNNb3VzZUV2ZW50UmVnaXN0ZXJlZCA9IGZhbHNlO1xuICAgICAgZm9yICh2YXIgX2kgPSAwLCBfbW91c2VFdmVudHMgPSBtb3VzZUV2ZW50czsgX2kgPCBfbW91c2VFdmVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBtb3VzZUV2ZW50ID0gX21vdXNlRXZlbnRzW19pXTtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5kb21FbGVtZW50LmV2ZW50TGlzdGVuZXJMaXN0ICYmIHRoaXMuZWxlbWVudC5kb21FbGVtZW50LmV2ZW50TGlzdGVuZXJMaXN0W21vdXNlRXZlbnRdKSB7XG4gICAgICAgICAgaGFzTW91c2VFdmVudFJlZ2lzdGVyZWQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgaGFzTW91c2VQcm9wZXJ0eSA9IGZhbHNlO1xuICAgICAgZm9yICh2YXIgX2kyID0gMCwgX21vdXNlUHJvcGVydGllcyA9IG1vdXNlUHJvcGVydGllczsgX2kyIDwgX21vdXNlUHJvcGVydGllcy5sZW5ndGg7IF9pMisrKSB7XG4gICAgICAgIHZhciBtb3VzZVByb3BlcnR5ID0gX21vdXNlUHJvcGVydGllc1tfaTJdO1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50LmRvbUVsZW1lbnRbbW91c2VQcm9wZXJ0eV0pIHtcbiAgICAgICAgICBoYXNNb3VzZVByb3BlcnR5ID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGhhc01vdXNlRXZlbnRSZWdpc3RlcmVkIHx8IGhhc01vdXNlUHJvcGVydHkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmluZ0Zvck1vdXNlRXZlbnRzKSB7XG4gICAgICAgICAgdGhpcy5hZGRNb3VzZUxpc3RlbmVycyhtb3VzZUV2ZW50cyk7XG4gICAgICAgICAgdGhpcy5saXN0ZW5pbmdGb3JNb3VzZUV2ZW50cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIG5vIGV2ZW50IGhhbmRsZXJzIG9yIGV2ZW50IHByb3BlcnRpZXMgcmVnaXN0ZXJlZCwgc28gd2UgY2FuIHNhZmVseSByZW1vdmUgb3VyIGxpc3RlbmVyc1xuICAgICAgZWxzZSBpZiAodGhpcy5saXN0ZW5pbmdGb3JNb3VzZUV2ZW50cykge1xuICAgICAgICB0aGlzLnJlbW92ZU1vdXNlTGlzdGVuZXJzKG1vdXNlRXZlbnRzKTtcbiAgICAgICAgdGhpcy5saXN0ZW5pbmdGb3JNb3VzZUV2ZW50cyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJtb3VzZUV2ZW50SGFuZGxlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtb3VzZUV2ZW50SGFuZGxlcihldnQpIHtcbiAgICAgIHZhciBtb3VzZUV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoZXZ0LnR5cGUsIHtcbiAgICAgICAgXCJ2aWV3XCI6IHdpbmRvdyxcbiAgICAgICAgXCJidWJibGVzXCI6IHRydWUsXG4gICAgICAgIFwiY2FuY2VsYWJsZVwiOiB0cnVlLFxuICAgICAgICBcInRhcmdldFwiOiB0aGlzLmVsZW1lbnQuZG9tRWxlbWVudCAvLyBtYXliZT9cbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbGVtZW50LmRvbUVsZW1lbnQuZGlzcGF0Y2hFdmVudChtb3VzZUV2ZW50KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkTW91c2VMaXN0ZW5lcnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkTW91c2VMaXN0ZW5lcnMobW91c2VFdmVudHMpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICBtb3VzZUV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgX3RoaXMuZWxlbWVudC5lbnRpdHkuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIF90aGlzLm1vdXNlRXZlbnRIYW5kbGVyLmJpbmQoX3RoaXMpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW1vdmVNb3VzZUxpc3RlbmVyc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVNb3VzZUxpc3RlbmVycyhtb3VzZUV2ZW50cykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgICBtb3VzZUV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgX3RoaXMyLmVsZW1lbnQuZW50aXR5LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBfdGhpczIubW91c2VFdmVudEhhbmRsZXIuYmluZChfdGhpczIpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGZvciBob3ZlciBhbmQgaW5wdXQgZWxlbWVudFxuICB9LCB7XG4gICAga2V5OiBcImNoZWNrRW50aXR5RXZlbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrRW50aXR5RXZlbnRzKCkge1xuICAgICAgdmFyIG1vdXNlRXZlbnRzID0gW1wiY2xpY2tcIiwgXCJtb3VzZWVudGVyXCIsIFwibW91c2VsZWF2ZVwiLCBcIm1vdXNlZG93blwiLCBcIm1vdXNldXBcIl07XG4gICAgICBmb3IgKHZhciBfaTMgPSAwLCBfbW91c2VFdmVudHMyID0gbW91c2VFdmVudHM7IF9pMyA8IF9tb3VzZUV2ZW50czIubGVuZ3RoOyBfaTMrKykge1xuICAgICAgICB2YXIgbW91c2VFdmVudCA9IF9tb3VzZUV2ZW50czJbX2kzXTtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5lbnRpdHkuZXZlbnRMaXN0ZW5lckxpc3QgJiYgdGhpcy5lbGVtZW50LmVudGl0eS5ldmVudExpc3RlbmVyTGlzdFttb3VzZUV2ZW50XSkge1xuICAgICAgICAgIHRoaXMubGlzdGVuaW5nRm9yTW91c2VFdmVudHMgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG59KCk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zcmMvdXRpbHMvcG9zaXRpb24uanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdXRpbHMvcG9zaXRpb24uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSA9PiB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFBvc2l0aW9uKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG5mdW5jdGlvbiBfdHlwZW9mKG8pIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbzsgfSA6IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxudmFyIFBvc2l0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUG9zaXRpb24oZG9tUG9zaXRpb24sIGRlcHRoLCBzY2FsZSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb3NpdGlvbik7XG4gICAgLy8gZGVwdGggPSB6XG4gICAgdGhpcy5kZXB0aCA9IGRlcHRoO1xuICAgIHRoaXMuc3RhcnREZXB0aCA9IGRlcHRoO1xuICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcbiAgICB0aGlzLnNjcm9sbFkgPSAwO1xuICAgIHRoaXMudXBkYXRlUG9zaXRpb24oZG9tUG9zaXRpb24pO1xuICB9XG4gIHJldHVybiBfY3JlYXRlQ2xhc3MoUG9zaXRpb24sIFt7XG4gICAga2V5OiBcInVwZGF0ZVBvc2l0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uKGRvbVBvc2l0aW9uKSB7XG4gICAgICB0aGlzLmRvbVBvc2l0aW9uID0gZG9tUG9zaXRpb247XG4gICAgICB0aGlzLmFmcmFtZVBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVBRnJhbWVQb3NpdGlvbih0aGlzLmRvbVBvc2l0aW9uKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2FsY3VsYXRlQUZyYW1lUG9zaXRpb25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRlQUZyYW1lUG9zaXRpb24oZG9tUG9zaXRpb24pIHtcbiAgICAgIC8vIG1ha2luZyBwb3NpdGlvbnMgYmUgaW4gY2VudGVyIGJlY2F1c2UgZG9tIHBvc2l0aW9ucyBhcmUgaW4gdG9wIGxlZnRcbiAgICAgIHZhciBhZnJhbWVQb3NpdGlvbiA9IHtcbiAgICAgICAgeDogZG9tUG9zaXRpb24ueCArIGRvbVBvc2l0aW9uLndpZHRoIC8gMixcbiAgICAgICAgeTogZG9tUG9zaXRpb24ueSArIGRvbVBvc2l0aW9uLmhlaWdodCAvIDIsXG4gICAgICAgIHo6IHRoaXMuZGVwdGhcbiAgICAgIH07XG5cbiAgICAgIC8vIHNjYWxpbmdcbiAgICAgIGFmcmFtZVBvc2l0aW9uLnggKj0gdGhpcy5zY2FsaW5nRmFjdG9yO1xuICAgICAgYWZyYW1lUG9zaXRpb24ueSAqPSB0aGlzLnNjYWxpbmdGYWN0b3IgKiAtMTsgLy8gKiAtMSB0byBtYXRjaCBhZnJhbWUgeS1heGlzXG5cbiAgICAgIGFmcmFtZVBvc2l0aW9uLndpZHRoID0gZG9tUG9zaXRpb24ud2lkdGggKiB0aGlzLnNjYWxpbmdGYWN0b3I7XG4gICAgICBhZnJhbWVQb3NpdGlvbi5oZWlnaHQgPSBkb21Qb3NpdGlvbi5oZWlnaHQgKiB0aGlzLnNjYWxpbmdGYWN0b3I7XG4gICAgICByZXR1cm4gYWZyYW1lUG9zaXRpb247XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImVxdWFsc0RPTVBvc2l0aW9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVxdWFsc0RPTVBvc2l0aW9uKGRvbVBvc2l0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5kb21Qb3NpdGlvbi50b3AgPT0gZG9tUG9zaXRpb24udG9wICYmIHRoaXMuZG9tUG9zaXRpb24uYm90dG9tID09IGRvbVBvc2l0aW9uLmJvdHRvbSAmJiB0aGlzLmRvbVBvc2l0aW9uLmxlZnQgPT0gZG9tUG9zaXRpb24ubGVmdCAmJiB0aGlzLmRvbVBvc2l0aW9uLnJpZ2h0ID09IGRvbVBvc2l0aW9uLnJpZ2h0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzY2FsaW5nRmFjdG9yXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gMSAvIHRoaXMuc2NhbGU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInhcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmFmcmFtZVBvc2l0aW9uLng7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInlcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmFmcmFtZVBvc2l0aW9uLnkgKyB0aGlzLnNjcm9sbFk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInpcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmFmcmFtZVBvc2l0aW9uLno7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndpZHRoXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZnJhbWVQb3NpdGlvbi53aWR0aDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGVpZ2h0XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZnJhbWVQb3NpdGlvbi5oZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8gdmVjdG9yM1xuICB9LCB7XG4gICAga2V5OiBcInh5elwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeDogdGhpcy54LFxuICAgICAgICB5OiB0aGlzLnksXG4gICAgICAgIHo6IHRoaXMuelxuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibGVmdFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeDogdGhpcy54IC0gdGhpcy53aWR0aCAvIDIsXG4gICAgICAgIHk6IHRoaXMueSxcbiAgICAgICAgejogdGhpcy56XG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyaWdodFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeDogdGhpcy54ICsgdGhpcy53aWR0aCAvIDIsXG4gICAgICAgIHk6IHRoaXMueSxcbiAgICAgICAgejogdGhpcy56XG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ0b3BcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IHRoaXMueCxcbiAgICAgICAgeTogdGhpcy55ICsgdGhpcy5oZWlnaHQgLyAyLFxuICAgICAgICB6OiB0aGlzLnpcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImJvdHRvbVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeDogdGhpcy54LFxuICAgICAgICB5OiB0aGlzLnkgLSB0aGlzLmhlaWdodCAvIDIsXG4gICAgICAgIHo6IHRoaXMuelxuICAgICAgfTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuLi9ub2RlX21vZHVsZXMvZGVlcG1lcmdlL2Rpc3QvY2pzLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi4vbm9kZV9tb2R1bGVzL2RlZXBtZXJnZS9kaXN0L2Nqcy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKi8gKChtb2R1bGUpID0+IHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGlzTWVyZ2VhYmxlT2JqZWN0ID0gZnVuY3Rpb24gaXNNZXJnZWFibGVPYmplY3QodmFsdWUpIHtcblx0cmV0dXJuIGlzTm9uTnVsbE9iamVjdCh2YWx1ZSlcblx0XHQmJiAhaXNTcGVjaWFsKHZhbHVlKVxufTtcblxuZnVuY3Rpb24gaXNOb25OdWxsT2JqZWN0KHZhbHVlKSB7XG5cdHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCdcbn1cblxuZnVuY3Rpb24gaXNTcGVjaWFsKHZhbHVlKSB7XG5cdHZhciBzdHJpbmdWYWx1ZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5cblx0cmV0dXJuIHN0cmluZ1ZhbHVlID09PSAnW29iamVjdCBSZWdFeHBdJ1xuXHRcdHx8IHN0cmluZ1ZhbHVlID09PSAnW29iamVjdCBEYXRlXSdcblx0XHR8fCBpc1JlYWN0RWxlbWVudCh2YWx1ZSlcbn1cblxuLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9ibG9iL2I1YWM5NjNmYjc5MWQxMjk4ZTdmMzk2MjM2MzgzYmM5NTVmOTE2YzEvc3JjL2lzb21vcnBoaWMvY2xhc3NpYy9lbGVtZW50L1JlYWN0RWxlbWVudC5qcyNMMjEtTDI1XG52YXIgY2FuVXNlU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuZm9yO1xudmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IGNhblVzZVN5bWJvbCA/IFN5bWJvbC5mb3IoJ3JlYWN0LmVsZW1lbnQnKSA6IDB4ZWFjNztcblxuZnVuY3Rpb24gaXNSZWFjdEVsZW1lbnQodmFsdWUpIHtcblx0cmV0dXJuIHZhbHVlLiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEVcbn1cblxuZnVuY3Rpb24gZW1wdHlUYXJnZXQodmFsKSB7XG5cdHJldHVybiBBcnJheS5pc0FycmF5KHZhbCkgPyBbXSA6IHt9XG59XG5cbmZ1bmN0aW9uIGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKHZhbHVlLCBvcHRpb25zKSB7XG5cdHJldHVybiAob3B0aW9ucy5jbG9uZSAhPT0gZmFsc2UgJiYgb3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdCh2YWx1ZSkpXG5cdFx0PyBkZWVwbWVyZ2UoZW1wdHlUYXJnZXQodmFsdWUpLCB2YWx1ZSwgb3B0aW9ucylcblx0XHQ6IHZhbHVlXG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRBcnJheU1lcmdlKHRhcmdldCwgc291cmNlLCBvcHRpb25zKSB7XG5cdHJldHVybiB0YXJnZXQuY29uY2F0KHNvdXJjZSkubWFwKGZ1bmN0aW9uKGVsZW1lbnQpIHtcblx0XHRyZXR1cm4gY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQoZWxlbWVudCwgb3B0aW9ucylcblx0fSlcbn1cblxuZnVuY3Rpb24gZ2V0TWVyZ2VGdW5jdGlvbihrZXksIG9wdGlvbnMpIHtcblx0aWYgKCFvcHRpb25zLmN1c3RvbU1lcmdlKSB7XG5cdFx0cmV0dXJuIGRlZXBtZXJnZVxuXHR9XG5cdHZhciBjdXN0b21NZXJnZSA9IG9wdGlvbnMuY3VzdG9tTWVyZ2Uoa2V5KTtcblx0cmV0dXJuIHR5cGVvZiBjdXN0b21NZXJnZSA9PT0gJ2Z1bmN0aW9uJyA/IGN1c3RvbU1lcmdlIDogZGVlcG1lcmdlXG59XG5cbmZ1bmN0aW9uIGdldEVudW1lcmFibGVPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSB7XG5cdHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzXG5cdFx0PyBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkuZmlsdGVyKGZ1bmN0aW9uKHN5bWJvbCkge1xuXHRcdFx0cmV0dXJuIE9iamVjdC5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHRhcmdldCwgc3ltYm9sKVxuXHRcdH0pXG5cdFx0OiBbXVxufVxuXG5mdW5jdGlvbiBnZXRLZXlzKHRhcmdldCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXModGFyZ2V0KS5jb25jYXQoZ2V0RW51bWVyYWJsZU93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpKVxufVxuXG5mdW5jdGlvbiBwcm9wZXJ0eUlzT25PYmplY3Qob2JqZWN0LCBwcm9wZXJ0eSkge1xuXHR0cnkge1xuXHRcdHJldHVybiBwcm9wZXJ0eSBpbiBvYmplY3Rcblx0fSBjYXRjaChfKSB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cbn1cblxuLy8gUHJvdGVjdHMgZnJvbSBwcm90b3R5cGUgcG9pc29uaW5nIGFuZCB1bmV4cGVjdGVkIG1lcmdpbmcgdXAgdGhlIHByb3RvdHlwZSBjaGFpbi5cbmZ1bmN0aW9uIHByb3BlcnR5SXNVbnNhZmUodGFyZ2V0LCBrZXkpIHtcblx0cmV0dXJuIHByb3BlcnR5SXNPbk9iamVjdCh0YXJnZXQsIGtleSkgLy8gUHJvcGVydGllcyBhcmUgc2FmZSB0byBtZXJnZSBpZiB0aGV5IGRvbid0IGV4aXN0IGluIHRoZSB0YXJnZXQgeWV0LFxuXHRcdCYmICEoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBrZXkpIC8vIHVuc2FmZSBpZiB0aGV5IGV4aXN0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4sXG5cdFx0XHQmJiBPYmplY3QucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0YXJnZXQsIGtleSkpIC8vIGFuZCBhbHNvIHVuc2FmZSBpZiB0aGV5J3JlIG5vbmVudW1lcmFibGUuXG59XG5cbmZ1bmN0aW9uIG1lcmdlT2JqZWN0KHRhcmdldCwgc291cmNlLCBvcHRpb25zKSB7XG5cdHZhciBkZXN0aW5hdGlvbiA9IHt9O1xuXHRpZiAob3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdCh0YXJnZXQpKSB7XG5cdFx0Z2V0S2V5cyh0YXJnZXQpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRkZXN0aW5hdGlvbltrZXldID0gY2xvbmVVbmxlc3NPdGhlcndpc2VTcGVjaWZpZWQodGFyZ2V0W2tleV0sIG9wdGlvbnMpO1xuXHRcdH0pO1xuXHR9XG5cdGdldEtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuXHRcdGlmIChwcm9wZXJ0eUlzVW5zYWZlKHRhcmdldCwga2V5KSkge1xuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0aWYgKHByb3BlcnR5SXNPbk9iamVjdCh0YXJnZXQsIGtleSkgJiYgb3B0aW9ucy5pc01lcmdlYWJsZU9iamVjdChzb3VyY2Vba2V5XSkpIHtcblx0XHRcdGRlc3RpbmF0aW9uW2tleV0gPSBnZXRNZXJnZUZ1bmN0aW9uKGtleSwgb3B0aW9ucykodGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldLCBvcHRpb25zKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGVzdGluYXRpb25ba2V5XSA9IGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkKHNvdXJjZVtrZXldLCBvcHRpb25zKTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gZGVzdGluYXRpb25cbn1cblxuZnVuY3Rpb24gZGVlcG1lcmdlKHRhcmdldCwgc291cmNlLCBvcHRpb25zKSB7XG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRvcHRpb25zLmFycmF5TWVyZ2UgPSBvcHRpb25zLmFycmF5TWVyZ2UgfHwgZGVmYXVsdEFycmF5TWVyZ2U7XG5cdG9wdGlvbnMuaXNNZXJnZWFibGVPYmplY3QgPSBvcHRpb25zLmlzTWVyZ2VhYmxlT2JqZWN0IHx8IGlzTWVyZ2VhYmxlT2JqZWN0O1xuXHQvLyBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZCBpcyBhZGRlZCB0byBgb3B0aW9uc2Agc28gdGhhdCBjdXN0b20gYXJyYXlNZXJnZSgpXG5cdC8vIGltcGxlbWVudGF0aW9ucyBjYW4gdXNlIGl0LiBUaGUgY2FsbGVyIG1heSBub3QgcmVwbGFjZSBpdC5cblx0b3B0aW9ucy5jbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZCA9IGNsb25lVW5sZXNzT3RoZXJ3aXNlU3BlY2lmaWVkO1xuXG5cdHZhciBzb3VyY2VJc0FycmF5ID0gQXJyYXkuaXNBcnJheShzb3VyY2UpO1xuXHR2YXIgdGFyZ2V0SXNBcnJheSA9IEFycmF5LmlzQXJyYXkodGFyZ2V0KTtcblx0dmFyIHNvdXJjZUFuZFRhcmdldFR5cGVzTWF0Y2ggPSBzb3VyY2VJc0FycmF5ID09PSB0YXJnZXRJc0FycmF5O1xuXG5cdGlmICghc291cmNlQW5kVGFyZ2V0VHlwZXNNYXRjaCkge1xuXHRcdHJldHVybiBjbG9uZVVubGVzc090aGVyd2lzZVNwZWNpZmllZChzb3VyY2UsIG9wdGlvbnMpXG5cdH0gZWxzZSBpZiAoc291cmNlSXNBcnJheSkge1xuXHRcdHJldHVybiBvcHRpb25zLmFycmF5TWVyZ2UodGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnMpXG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIG1lcmdlT2JqZWN0KHRhcmdldCwgc291cmNlLCBvcHRpb25zKVxuXHR9XG59XG5cbmRlZXBtZXJnZS5hbGwgPSBmdW5jdGlvbiBkZWVwbWVyZ2VBbGwoYXJyYXksIG9wdGlvbnMpIHtcblx0aWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkge1xuXHRcdHRocm93IG5ldyBFcnJvcignZmlyc3QgYXJndW1lbnQgc2hvdWxkIGJlIGFuIGFycmF5Jylcblx0fVxuXG5cdHJldHVybiBhcnJheS5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgbmV4dCkge1xuXHRcdHJldHVybiBkZWVwbWVyZ2UocHJldiwgbmV4dCwgb3B0aW9ucylcblx0fSwge30pXG59O1xuXG52YXIgZGVlcG1lcmdlXzEgPSBkZWVwbWVyZ2U7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVlcG1lcmdlXzE7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiYWZyYW1lXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIGV4dGVybmFsIFwiYWZyYW1lXCIgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqLyAoKG1vZHVsZSkgPT4ge1xuXG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9hZnJhbWVfXztcblxuLyoqKi8gfSlcblxuLyoqKioqKi8gXHR9KTtcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuLyoqKioqKi8gXHRcbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuLyoqKioqKi8gXHRcdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqLyBcdFxuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqLyBcdFxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIFx0Lyogd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQgKi9cbi8qKioqKiovIFx0KCgpID0+IHtcbi8qKioqKiovIFx0XHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcbi8qKioqKiovIFx0XHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcbi8qKioqKiovIFx0XHRcdFx0KCkgPT4gKG1vZHVsZSk7XG4vKioqKioqLyBcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcbi8qKioqKiovIFx0XHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovIFx0fSkoKTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdC8qIHdlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyAqL1xuLyoqKioqKi8gXHQoKCkgPT4ge1xuLyoqKioqKi8gXHRcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuLyoqKioqKi8gXHRcdFx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuLyoqKioqKi8gXHRcdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuLyoqKioqKi8gXHRcdFx0XHR9XG4vKioqKioqLyBcdFx0XHR9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovIFx0fSkoKTtcbi8qKioqKiovIFx0XG4vKioqKioqLyBcdC8qIHdlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQgKi9cbi8qKioqKiovIFx0KCgpID0+IHtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpXG4vKioqKioqLyBcdH0pKCk7XG4vKioqKioqLyBcdFxuLyoqKioqKi8gXHQvKiB3ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0ICovXG4vKioqKioqLyBcdCgoKSA9PiB7XG4vKioqKioqLyBcdFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG4vKioqKioqLyBcdFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbi8qKioqKiovIFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4vKioqKioqLyBcdFx0XHR9XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqKioqKi8gXHRcdH07XG4vKioqKioqLyBcdH0pKCk7XG4vKioqKioqLyBcdFxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0ge307XG4vLyBUaGlzIGVudHJ5IG5lZWQgdG8gYmUgd3JhcHBlZCBpbiBhbiBJSUZFIGJlY2F1c2UgaXQgbmVlZCB0byBiZSBpbiBzdHJpY3QgbW9kZS5cbigoKSA9PiB7XG5cInVzZSBzdHJpY3RcIjtcbi8qISoqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3dlYjJ2ci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKiovXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gV2ViMlZSKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3BsdWdpbnNfZXZlbnRMaXN0ZW5lckxpc3RQbHVnaW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcGx1Z2lucy9ldmVudExpc3RlbmVyTGlzdFBsdWdpbiAqLyBcIi4vc3JjL3BsdWdpbnMvZXZlbnRMaXN0ZW5lckxpc3RQbHVnaW4uanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3BsdWdpbnNfZXZlbnRMaXN0ZW5lckxpc3RQbHVnaW5fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihfcGx1Z2luc19ldmVudExpc3RlbmVyTGlzdFBsdWdpbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBkZWVwbWVyZ2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGRlZXBtZXJnZSAqLyBcIi4uL25vZGVfbW9kdWxlcy9kZWVwbWVyZ2UvZGlzdC9janMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgZGVlcG1lcmdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oZGVlcG1lcmdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIGFmcmFtZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgYWZyYW1lICovIFwiYWZyYW1lXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIGFmcmFtZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKGFmcmFtZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGx1Z2luc19hZnJhbWVfa2V5Ym9hcmRfbWluX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3BsdWdpbnMvYWZyYW1lLWtleWJvYXJkLm1pbiAqLyBcIi4vc3JjL3BsdWdpbnMvYWZyYW1lLWtleWJvYXJkLm1pbi5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGx1Z2luc19hZnJhbWVfa2V5Ym9hcmRfbWluX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oX3BsdWdpbnNfYWZyYW1lX2tleWJvYXJkX21pbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBzdXBlcl9oYW5kc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgc3VwZXItaGFuZHMgKi8gXCIuL2FmcmFtZS1zdXBlci1oYW5kcy1jb21wb25lbnQvaW5kZXguanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgc3VwZXJfaGFuZHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihzdXBlcl9oYW5kc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc2V0dGluZ3MgKi8gXCIuL3NyYy9zZXR0aW5ncy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19ib3JkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29tcG9uZW50cy9ib3JkZXIgKi8gXCIuL3NyYy9jb21wb25lbnRzL2JvcmRlci5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19ib3JkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihfY29tcG9uZW50c19ib3JkZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfYW5pbWF0ZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL2FuaW1hdGUgKi8gXCIuL3NyYy9jb21wb25lbnRzL2FuaW1hdGUuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfYW5pbWF0ZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9jb21wb25lbnRzX2FuaW1hdGVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfZ3JhYlJvdGF0ZVN0YXRpY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb21wb25lbnRzL2dyYWJSb3RhdGVTdGF0aWMgKi8gXCIuL3NyYy9jb21wb25lbnRzL2dyYWJSb3RhdGVTdGF0aWMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfZ3JhYlJvdGF0ZVN0YXRpY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9jb21wb25lbnRzX2dyYWJSb3RhdGVTdGF0aWNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3Njcm9sbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zY3JvbGwgKi8gXCIuL3NyYy9zY3JvbGwuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2FmcmFtZUNvbnRleHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2FmcmFtZUNvbnRleHQgKi8gXCIuL3NyYy9hZnJhbWVDb250ZXh0LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50c19jb250YWluZXJFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50cy9jb250YWluZXJFbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvY29udGFpbmVyRWxlbWVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudHNfdGV4dEVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnRzL3RleHRFbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvdGV4dEVsZW1lbnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRzX2ltYWdlRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudHMvaW1hZ2VFbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvaW1hZ2VFbGVtZW50LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50c192aWRlb0VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnRzL3ZpZGVvRWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL3ZpZGVvRWxlbWVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudHNfY2hlY2tib3hFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50cy9jaGVja2JveEVsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy9jaGVja2JveEVsZW1lbnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRzX3JhZGlvRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudHMvcmFkaW9FbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvcmFkaW9FbGVtZW50LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50c19pbnB1dEVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE3X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnRzL2lucHV0RWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2lucHV0RWxlbWVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZWxlbWVudHNfYnV0dG9uRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMThfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZWxlbWVudHMvYnV0dG9uRWxlbWVudCAqLyBcIi4vc3JjL2VsZW1lbnRzL2J1dHRvbkVsZW1lbnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VsZW1lbnRzX3N2Z0VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VsZW1lbnRzL3N2Z0VsZW1lbnQgKi8gXCIuL3NyYy9lbGVtZW50cy9zdmdFbGVtZW50LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbGVtZW50c19jYW52YXNFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbGVtZW50cy9jYW52YXNFbGVtZW50ICovIFwiLi9zcmMvZWxlbWVudHMvY2FudmFzRWxlbWVudC5qc1wiKTtcbmZ1bmN0aW9uIF90eXBlb2YobykgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG87IH0sIF90eXBlb2Yobyk7IH1cbmZ1bmN0aW9uIF9yZWdlbmVyYXRvclJ1bnRpbWUoKSB7IFwidXNlIHN0cmljdFwiOyAvKiEgcmVnZW5lcmF0b3ItcnVudGltZSAtLSBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy4gLS0gbGljZW5zZSAoTUlUKTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2Jsb2IvbWFpbi9MSUNFTlNFICovIF9yZWdlbmVyYXRvclJ1bnRpbWUgPSBmdW5jdGlvbiBfcmVnZW5lcmF0b3JSdW50aW1lKCkgeyByZXR1cm4gZTsgfTsgdmFyIHQsIGUgPSB7fSwgciA9IE9iamVjdC5wcm90b3R5cGUsIG4gPSByLmhhc093blByb3BlcnR5LCBvID0gT2JqZWN0LmRlZmluZVByb3BlcnR5IHx8IGZ1bmN0aW9uICh0LCBlLCByKSB7IHRbZV0gPSByLnZhbHVlOyB9LCBpID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgPyBTeW1ib2wgOiB7fSwgYSA9IGkuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCIsIGMgPSBpLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIiwgdSA9IGkudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7IGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7IHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgZSwgeyB2YWx1ZTogciwgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCB9KSwgdFtlXTsgfSB0cnkgeyBkZWZpbmUoe30sIFwiXCIpOyB9IGNhdGNoICh0KSB7IGRlZmluZSA9IGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7IHJldHVybiB0W2VdID0gcjsgfTsgfSBmdW5jdGlvbiB3cmFwKHQsIGUsIHIsIG4pIHsgdmFyIGkgPSBlICYmIGUucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gZSA6IEdlbmVyYXRvciwgYSA9IE9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLCBjID0gbmV3IENvbnRleHQobiB8fCBbXSk7IHJldHVybiBvKGEsIFwiX2ludm9rZVwiLCB7IHZhbHVlOiBtYWtlSW52b2tlTWV0aG9kKHQsIHIsIGMpIH0pLCBhOyB9IGZ1bmN0aW9uIHRyeUNhdGNoKHQsIGUsIHIpIHsgdHJ5IHsgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiB0LmNhbGwoZSwgcikgfTsgfSBjYXRjaCAodCkgeyByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogdCB9OyB9IH0gZS53cmFwID0gd3JhcDsgdmFyIGggPSBcInN1c3BlbmRlZFN0YXJ0XCIsIGwgPSBcInN1c3BlbmRlZFlpZWxkXCIsIGYgPSBcImV4ZWN1dGluZ1wiLCBzID0gXCJjb21wbGV0ZWRcIiwgeSA9IHt9OyBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fSBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9IGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge30gdmFyIHAgPSB7fTsgZGVmaW5lKHAsIGEsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0pOyB2YXIgZCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiwgdiA9IGQgJiYgZChkKHZhbHVlcyhbXSkpKTsgdiAmJiB2ICE9PSByICYmIG4uY2FsbCh2LCBhKSAmJiAocCA9IHYpOyB2YXIgZyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9IEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHApOyBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHModCkgeyBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbiAoZSkgeyBkZWZpbmUodCwgZSwgZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHRoaXMuX2ludm9rZShlLCB0KTsgfSk7IH0pOyB9IGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IodCwgZSkgeyBmdW5jdGlvbiBpbnZva2UociwgbywgaSwgYSkgeyB2YXIgYyA9IHRyeUNhdGNoKHRbcl0sIHQsIG8pOyBpZiAoXCJ0aHJvd1wiICE9PSBjLnR5cGUpIHsgdmFyIHUgPSBjLmFyZywgaCA9IHUudmFsdWU7IHJldHVybiBoICYmIFwib2JqZWN0XCIgPT0gX3R5cGVvZihoKSAmJiBuLmNhbGwoaCwgXCJfX2F3YWl0XCIpID8gZS5yZXNvbHZlKGguX19hd2FpdCkudGhlbihmdW5jdGlvbiAodCkgeyBpbnZva2UoXCJuZXh0XCIsIHQsIGksIGEpOyB9LCBmdW5jdGlvbiAodCkgeyBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTsgfSkgOiBlLnJlc29sdmUoaCkudGhlbihmdW5jdGlvbiAodCkgeyB1LnZhbHVlID0gdCwgaSh1KTsgfSwgZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGludm9rZShcInRocm93XCIsIHQsIGksIGEpOyB9KTsgfSBhKGMuYXJnKTsgfSB2YXIgcjsgbyh0aGlzLCBcIl9pbnZva2VcIiwgeyB2YWx1ZTogZnVuY3Rpb24gdmFsdWUodCwgbikgeyBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHsgcmV0dXJuIG5ldyBlKGZ1bmN0aW9uIChlLCByKSB7IGludm9rZSh0LCBuLCBlLCByKTsgfSk7IH0gcmV0dXJuIHIgPSByID8gci50aGVuKGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLCBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZykgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpOyB9IH0pOyB9IGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoZSwgciwgbikgeyB2YXIgbyA9IGg7IHJldHVybiBmdW5jdGlvbiAoaSwgYSkgeyBpZiAobyA9PT0gZikgdGhyb3cgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpOyBpZiAobyA9PT0gcykgeyBpZiAoXCJ0aHJvd1wiID09PSBpKSB0aHJvdyBhOyByZXR1cm4geyB2YWx1ZTogdCwgZG9uZTogITAgfTsgfSBmb3IgKG4ubWV0aG9kID0gaSwgbi5hcmcgPSBhOzspIHsgdmFyIGMgPSBuLmRlbGVnYXRlOyBpZiAoYykgeyB2YXIgdSA9IG1heWJlSW52b2tlRGVsZWdhdGUoYywgbik7IGlmICh1KSB7IGlmICh1ID09PSB5KSBjb250aW51ZTsgcmV0dXJuIHU7IH0gfSBpZiAoXCJuZXh0XCIgPT09IG4ubWV0aG9kKSBuLnNlbnQgPSBuLl9zZW50ID0gbi5hcmc7ZWxzZSBpZiAoXCJ0aHJvd1wiID09PSBuLm1ldGhvZCkgeyBpZiAobyA9PT0gaCkgdGhyb3cgbyA9IHMsIG4uYXJnOyBuLmRpc3BhdGNoRXhjZXB0aW9uKG4uYXJnKTsgfSBlbHNlIFwicmV0dXJuXCIgPT09IG4ubWV0aG9kICYmIG4uYWJydXB0KFwicmV0dXJuXCIsIG4uYXJnKTsgbyA9IGY7IHZhciBwID0gdHJ5Q2F0Y2goZSwgciwgbik7IGlmIChcIm5vcm1hbFwiID09PSBwLnR5cGUpIHsgaWYgKG8gPSBuLmRvbmUgPyBzIDogbCwgcC5hcmcgPT09IHkpIGNvbnRpbnVlOyByZXR1cm4geyB2YWx1ZTogcC5hcmcsIGRvbmU6IG4uZG9uZSB9OyB9IFwidGhyb3dcIiA9PT0gcC50eXBlICYmIChvID0gcywgbi5tZXRob2QgPSBcInRocm93XCIsIG4uYXJnID0gcC5hcmcpOyB9IH07IH0gZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShlLCByKSB7IHZhciBuID0gci5tZXRob2QsIG8gPSBlLml0ZXJhdG9yW25dOyBpZiAobyA9PT0gdCkgcmV0dXJuIHIuZGVsZWdhdGUgPSBudWxsLCBcInRocm93XCIgPT09IG4gJiYgZS5pdGVyYXRvcltcInJldHVyblwiXSAmJiAoci5tZXRob2QgPSBcInJldHVyblwiLCByLmFyZyA9IHQsIG1heWJlSW52b2tlRGVsZWdhdGUoZSwgciksIFwidGhyb3dcIiA9PT0gci5tZXRob2QpIHx8IFwicmV0dXJuXCIgIT09IG4gJiYgKHIubWV0aG9kID0gXCJ0aHJvd1wiLCByLmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICdcIiArIG4gKyBcIicgbWV0aG9kXCIpKSwgeTsgdmFyIGkgPSB0cnlDYXRjaChvLCBlLml0ZXJhdG9yLCByLmFyZyk7IGlmIChcInRocm93XCIgPT09IGkudHlwZSkgcmV0dXJuIHIubWV0aG9kID0gXCJ0aHJvd1wiLCByLmFyZyA9IGkuYXJnLCByLmRlbGVnYXRlID0gbnVsbCwgeTsgdmFyIGEgPSBpLmFyZzsgcmV0dXJuIGEgPyBhLmRvbmUgPyAocltlLnJlc3VsdE5hbWVdID0gYS52YWx1ZSwgci5uZXh0ID0gZS5uZXh0TG9jLCBcInJldHVyblwiICE9PSByLm1ldGhvZCAmJiAoci5tZXRob2QgPSBcIm5leHRcIiwgci5hcmcgPSB0KSwgci5kZWxlZ2F0ZSA9IG51bGwsIHkpIDogYSA6IChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksIHIuZGVsZWdhdGUgPSBudWxsLCB5KTsgfSBmdW5jdGlvbiBwdXNoVHJ5RW50cnkodCkgeyB2YXIgZSA9IHsgdHJ5TG9jOiB0WzBdIH07IDEgaW4gdCAmJiAoZS5jYXRjaExvYyA9IHRbMV0pLCAyIGluIHQgJiYgKGUuZmluYWxseUxvYyA9IHRbMl0sIGUuYWZ0ZXJMb2MgPSB0WzNdKSwgdGhpcy50cnlFbnRyaWVzLnB1c2goZSk7IH0gZnVuY3Rpb24gcmVzZXRUcnlFbnRyeSh0KSB7IHZhciBlID0gdC5jb21wbGV0aW9uIHx8IHt9OyBlLnR5cGUgPSBcIm5vcm1hbFwiLCBkZWxldGUgZS5hcmcsIHQuY29tcGxldGlvbiA9IGU7IH0gZnVuY3Rpb24gQ29udGV4dCh0KSB7IHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV0sIHQuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpLCB0aGlzLnJlc2V0KCEwKTsgfSBmdW5jdGlvbiB2YWx1ZXMoZSkgeyBpZiAoZSB8fCBcIlwiID09PSBlKSB7IHZhciByID0gZVthXTsgaWYgKHIpIHJldHVybiByLmNhbGwoZSk7IGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUubmV4dCkgcmV0dXJuIGU7IGlmICghaXNOYU4oZS5sZW5ndGgpKSB7IHZhciBvID0gLTEsIGkgPSBmdW5jdGlvbiBuZXh0KCkgeyBmb3IgKDsgKytvIDwgZS5sZW5ndGg7KSBpZiAobi5jYWxsKGUsIG8pKSByZXR1cm4gbmV4dC52YWx1ZSA9IGVbb10sIG5leHQuZG9uZSA9ICExLCBuZXh0OyByZXR1cm4gbmV4dC52YWx1ZSA9IHQsIG5leHQuZG9uZSA9ICEwLCBuZXh0OyB9OyByZXR1cm4gaS5uZXh0ID0gaTsgfSB9IHRocm93IG5ldyBUeXBlRXJyb3IoX3R5cGVvZihlKSArIFwiIGlzIG5vdCBpdGVyYWJsZVwiKTsgfSByZXR1cm4gR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIG8oZywgXCJjb25zdHJ1Y3RvclwiLCB7IHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgY29uZmlndXJhYmxlOiAhMCB9KSwgbyhHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgXCJjb25zdHJ1Y3RvclwiLCB7IHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvbiwgY29uZmlndXJhYmxlOiAhMCB9KSwgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIHUsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIiksIGUuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ICYmIHQuY29uc3RydWN0b3I7IHJldHVybiAhIWUgJiYgKGUgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8IFwiR2VuZXJhdG9yRnVuY3Rpb25cIiA9PT0gKGUuZGlzcGxheU5hbWUgfHwgZS5uYW1lKSk7IH0sIGUubWFyayA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YodCwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpIDogKHQuX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGRlZmluZSh0LCB1LCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpKSwgdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGcpLCB0OyB9LCBlLmF3cmFwID0gZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHsgX19hd2FpdDogdCB9OyB9LCBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpLCBkZWZpbmUoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUsIGMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0pLCBlLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yLCBlLmFzeW5jID0gZnVuY3Rpb24gKHQsIHIsIG4sIG8sIGkpIHsgdm9pZCAwID09PSBpICYmIChpID0gUHJvbWlzZSk7IHZhciBhID0gbmV3IEFzeW5jSXRlcmF0b3Iod3JhcCh0LCByLCBuLCBvKSwgaSk7IHJldHVybiBlLmlzR2VuZXJhdG9yRnVuY3Rpb24ocikgPyBhIDogYS5uZXh0KCkudGhlbihmdW5jdGlvbiAodCkgeyByZXR1cm4gdC5kb25lID8gdC52YWx1ZSA6IGEubmV4dCgpOyB9KTsgfSwgZGVmaW5lSXRlcmF0b3JNZXRob2RzKGcpLCBkZWZpbmUoZywgdSwgXCJHZW5lcmF0b3JcIiksIGRlZmluZShnLCBhLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9KSwgZGVmaW5lKGcsIFwidG9TdHJpbmdcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjsgfSksIGUua2V5cyA9IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gT2JqZWN0KHQpLCByID0gW107IGZvciAodmFyIG4gaW4gZSkgci5wdXNoKG4pOyByZXR1cm4gci5yZXZlcnNlKCksIGZ1bmN0aW9uIG5leHQoKSB7IGZvciAoOyByLmxlbmd0aDspIHsgdmFyIHQgPSByLnBvcCgpOyBpZiAodCBpbiBlKSByZXR1cm4gbmV4dC52YWx1ZSA9IHQsIG5leHQuZG9uZSA9ICExLCBuZXh0OyB9IHJldHVybiBuZXh0LmRvbmUgPSAhMCwgbmV4dDsgfTsgfSwgZS52YWx1ZXMgPSB2YWx1ZXMsIENvbnRleHQucHJvdG90eXBlID0geyBjb25zdHJ1Y3RvcjogQ29udGV4dCwgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KGUpIHsgaWYgKHRoaXMucHJldiA9IDAsIHRoaXMubmV4dCA9IDAsIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB0LCB0aGlzLmRvbmUgPSAhMSwgdGhpcy5kZWxlZ2F0ZSA9IG51bGwsIHRoaXMubWV0aG9kID0gXCJuZXh0XCIsIHRoaXMuYXJnID0gdCwgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSksICFlKSBmb3IgKHZhciByIGluIHRoaXMpIFwidFwiID09PSByLmNoYXJBdCgwKSAmJiBuLmNhbGwodGhpcywgcikgJiYgIWlzTmFOKCtyLnNsaWNlKDEpKSAmJiAodGhpc1tyXSA9IHQpOyB9LCBzdG9wOiBmdW5jdGlvbiBzdG9wKCkgeyB0aGlzLmRvbmUgPSAhMDsgdmFyIHQgPSB0aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjsgaWYgKFwidGhyb3dcIiA9PT0gdC50eXBlKSB0aHJvdyB0LmFyZzsgcmV0dXJuIHRoaXMucnZhbDsgfSwgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uIGRpc3BhdGNoRXhjZXB0aW9uKGUpIHsgaWYgKHRoaXMuZG9uZSkgdGhyb3cgZTsgdmFyIHIgPSB0aGlzOyBmdW5jdGlvbiBoYW5kbGUobiwgbykgeyByZXR1cm4gYS50eXBlID0gXCJ0aHJvd1wiLCBhLmFyZyA9IGUsIHIubmV4dCA9IG4sIG8gJiYgKHIubWV0aG9kID0gXCJuZXh0XCIsIHIuYXJnID0gdCksICEhbzsgfSBmb3IgKHZhciBvID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IG8gPj0gMDsgLS1vKSB7IHZhciBpID0gdGhpcy50cnlFbnRyaWVzW29dLCBhID0gaS5jb21wbGV0aW9uOyBpZiAoXCJyb290XCIgPT09IGkudHJ5TG9jKSByZXR1cm4gaGFuZGxlKFwiZW5kXCIpOyBpZiAoaS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7IHZhciBjID0gbi5jYWxsKGksIFwiY2F0Y2hMb2NcIiksIHUgPSBuLmNhbGwoaSwgXCJmaW5hbGx5TG9jXCIpOyBpZiAoYyAmJiB1KSB7IGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTsgaWYgKHRoaXMucHJldiA8IGkuZmluYWxseUxvYykgcmV0dXJuIGhhbmRsZShpLmZpbmFsbHlMb2MpOyB9IGVsc2UgaWYgKGMpIHsgaWYgKHRoaXMucHJldiA8IGkuY2F0Y2hMb2MpIHJldHVybiBoYW5kbGUoaS5jYXRjaExvYywgITApOyB9IGVsc2UgeyBpZiAoIXUpIHRocm93IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7IGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTsgfSB9IH0gfSwgYWJydXB0OiBmdW5jdGlvbiBhYnJ1cHQodCwgZSkgeyBmb3IgKHZhciByID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IHIgPj0gMDsgLS1yKSB7IHZhciBvID0gdGhpcy50cnlFbnRyaWVzW3JdOyBpZiAoby50cnlMb2MgPD0gdGhpcy5wcmV2ICYmIG4uY2FsbChvLCBcImZpbmFsbHlMb2NcIikgJiYgdGhpcy5wcmV2IDwgby5maW5hbGx5TG9jKSB7IHZhciBpID0gbzsgYnJlYWs7IH0gfSBpICYmIChcImJyZWFrXCIgPT09IHQgfHwgXCJjb250aW51ZVwiID09PSB0KSAmJiBpLnRyeUxvYyA8PSBlICYmIGUgPD0gaS5maW5hbGx5TG9jICYmIChpID0gbnVsbCk7IHZhciBhID0gaSA/IGkuY29tcGxldGlvbiA6IHt9OyByZXR1cm4gYS50eXBlID0gdCwgYS5hcmcgPSBlLCBpID8gKHRoaXMubWV0aG9kID0gXCJuZXh0XCIsIHRoaXMubmV4dCA9IGkuZmluYWxseUxvYywgeSkgOiB0aGlzLmNvbXBsZXRlKGEpOyB9LCBjb21wbGV0ZTogZnVuY3Rpb24gY29tcGxldGUodCwgZSkgeyBpZiAoXCJ0aHJvd1wiID09PSB0LnR5cGUpIHRocm93IHQuYXJnOyByZXR1cm4gXCJicmVha1wiID09PSB0LnR5cGUgfHwgXCJjb250aW51ZVwiID09PSB0LnR5cGUgPyB0aGlzLm5leHQgPSB0LmFyZyA6IFwicmV0dXJuXCIgPT09IHQudHlwZSA/ICh0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHQuYXJnLCB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCIsIHRoaXMubmV4dCA9IFwiZW5kXCIpIDogXCJub3JtYWxcIiA9PT0gdC50eXBlICYmIGUgJiYgKHRoaXMubmV4dCA9IGUpLCB5OyB9LCBmaW5pc2g6IGZ1bmN0aW9uIGZpbmlzaCh0KSB7IGZvciAodmFyIGUgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgZSA+PSAwOyAtLWUpIHsgdmFyIHIgPSB0aGlzLnRyeUVudHJpZXNbZV07IGlmIChyLmZpbmFsbHlMb2MgPT09IHQpIHJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbiwgci5hZnRlckxvYyksIHJlc2V0VHJ5RW50cnkociksIHk7IH0gfSwgXCJjYXRjaFwiOiBmdW5jdGlvbiBfY2F0Y2godCkgeyBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7IHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdOyBpZiAoci50cnlMb2MgPT09IHQpIHsgdmFyIG4gPSByLmNvbXBsZXRpb247IGlmIChcInRocm93XCIgPT09IG4udHlwZSkgeyB2YXIgbyA9IG4uYXJnOyByZXNldFRyeUVudHJ5KHIpOyB9IHJldHVybiBvOyB9IH0gdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7IH0sIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uIGRlbGVnYXRlWWllbGQoZSwgciwgbikgeyByZXR1cm4gdGhpcy5kZWxlZ2F0ZSA9IHsgaXRlcmF0b3I6IHZhbHVlcyhlKSwgcmVzdWx0TmFtZTogciwgbmV4dExvYzogbiB9LCBcIm5leHRcIiA9PT0gdGhpcy5tZXRob2QgJiYgKHRoaXMuYXJnID0gdCksIHk7IH0gfSwgZTsgfVxuZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfVxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9XG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0W1wicmV0dXJuXCJdICE9IG51bGwpIGl0W1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH1cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfVxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlcltcIkBAaXRlcmF0b3JcIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH1cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7IH1cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5mdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleSh0KSB7IHZhciBpID0gX3RvUHJpbWl0aXZlKHQsIFwic3RyaW5nXCIpOyByZXR1cm4gXCJzeW1ib2xcIiA9PSBfdHlwZW9mKGkpID8gaSA6IGkgKyBcIlwiOyB9XG5mdW5jdGlvbiBfdG9QcmltaXRpdmUodCwgcikgeyBpZiAoXCJvYmplY3RcIiAhPSBfdHlwZW9mKHQpIHx8ICF0KSByZXR1cm4gdDsgdmFyIGUgPSB0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmICh2b2lkIDAgIT09IGUpIHsgdmFyIGkgPSBlLmNhbGwodCwgciB8fCBcImRlZmF1bHRcIik7IGlmIChcIm9iamVjdFwiICE9IF90eXBlb2YoaSkpIHJldHVybiBpOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChcInN0cmluZ1wiID09PSByID8gU3RyaW5nIDogTnVtYmVyKSh0KTsgfVxuIC8vIEdldCBhbGwgZXZlbnQgbGlzdGVuZXJzIGZvciBET00gZWxlbWVudHNcblxuXG5cbi8vIGltcG9ydCBcImFmcmFtZS1naWYtc2hhZGVyXCI7XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG52YXIgV2ViMlZSID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gV2ViMlZSKGNvbnRhaW5lcikge1xuICAgIHZhciBzZXR0aW5ncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdlYjJWUik7XG4gICAgLy8gbWFpbiBkaXYgY29udGFpbmVyXG4gICAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7ZWxzZSB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcblxuICAgIC8vIGRlZXAgbWVyZ2Ugc2V0dGluZ3NcbiAgICB0aGlzLnNldHRpbmdzID0gZGVlcG1lcmdlX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCgpKG5ldyBfc2V0dGluZ3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcImRlZmF1bHRcIl0oKSwgc2V0dGluZ3MsIHtcbiAgICAgIGFycmF5TWVyZ2U6IGZ1bmN0aW9uIGFycmF5TWVyZ2UoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShkZXN0aW5hdGlvbiksIF90b0NvbnN1bWFibGVBcnJheShzb3VyY2UpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGFmcmFtZSBjb250ZXh0XG4gICAgdGhpcy5hZnJhbWUgPSBuZXcgX2FmcmFtZUNvbnRleHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bXCJkZWZhdWx0XCJdKHRoaXMuc2V0dGluZ3MpO1xuICAgIC8vIHZyIGVsZW1lbnRzXG4gICAgdGhpcy5lbGVtZW50cyA9IG5ldyBTZXQoKTtcbiAgICAvLyBzZXQgb2YgYWxsIHRoZSBob3ZlciBjc3Mgc2VsZWN0b3JzXG4gICAgdGhpcy5ob3ZlclNlbGVjdG9ycyA9IG5ldyBTZXQoKTtcbiAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcbiAgICAvLyBvYnNlcnZlciBwYXJhbWV0YXJzXG4gICAgdGhpcy5vYnNlcnZlckNvbmZpZyA9IHtcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgIHN1YnRyZWU6IHRydWUsXG4gICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICAgICAgYXR0cmlidXRlczogdHJ1ZVxuICAgIH07IC8vYXR0cmlidXRlRmlsdGVyOiBbXCJzdHlsZVwiLCBcImNsYXNzXCIsIFwiaWRcIl1cbiAgICB0aGlzLnVwZGF0aW5nID0gZmFsc2U7XG5cbiAgICAvLyBleHBlcmltZW50YWwgb25seVxuICAgIHRoaXMuaHRtbDJjYW52YXNJRGNvdW50ZXIgPSAwO1xuICB9XG5cbiAgLy8gZmluZCBhbGwgaG92ZXIgY3NzIHJ1bGVzIGFuZCBhZGQge3NlbGVjdG9yfWhvdmVyIGNsYXNzIHRvIHRoZW1cbiAgcmV0dXJuIF9jcmVhdGVDbGFzcyhXZWIyVlIsIFt7XG4gICAga2V5OiBcImZpbmRIb3ZlckNzc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kSG92ZXJDc3MoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hcnIgPSBfdG9Db25zdW1hYmxlQXJyYXkoZG9jdW1lbnQuc3R5bGVTaGVldHMpOyBfaSA8IF9hcnIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgdmFyIHN0eWxlU2hlZXQgPSBfYXJyW19pXTtcbiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwLCBfYXJyMiA9IF90b0NvbnN1bWFibGVBcnJheShzdHlsZVNoZWV0LmNzc1J1bGVzKTsgX2kyIDwgX2FycjIubGVuZ3RoOyBfaTIrKykge1xuICAgICAgICAgICAgdmFyIHJ1bGUgPSBfYXJyMltfaTJdO1xuICAgICAgICAgICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBDU1NTdHlsZVJ1bGUpIHtcbiAgICAgICAgICAgICAgdmFyIHNlbGVjdG9ycyA9IHJ1bGUuc2VsZWN0b3JUZXh0LnNwbGl0KFwiLFwiKTtcbiAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHNlbGVjdG9ycyksXG4gICAgICAgICAgICAgICAgX3N0ZXA7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgdmFyIHNlbCA9IHNlbGVjdG9yLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgICAgICAgICAgIC8vIGlzIGhvdmVyXG4gICAgICAgICAgICAgICAgICBpZiAoc2VsWzFdID09IFwiaG92ZXJcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHNlbFswXS5yZXBsYWNlKC9cXHMvZywgJycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc1swXSA9PSBcIi5cIikgcnVsZS5zZWxlY3RvclRleHQgKz0gXCIsIFwiLmNvbmNhdChzLCBcImhvdmVyXCIpO2Vsc2UgaWYgKHNbMF0gPT0gXCIjXCIpIHJ1bGUuc2VsZWN0b3JUZXh0ICs9IFwiLCAuXCIuY29uY2F0KHMuc3Vic3RyKDEpLCBcImhvdmVyXCIpO2Vsc2UgcnVsZS5zZWxlY3RvclRleHQgKz0gXCIsIC5cIi5jb25jYXQocywgXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3ZlclNlbGVjdG9ycy5hZGQocyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpO1xuICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFkZCBhbGwgc3ZnIG5lZWRlZCBzdHlsZXMgdG8gZGVmcyBpbnNpZGUgc3ZnIHNvIHdlIGNhbiBjb252ZXJ0IHN2ZyB0byBwbmcgd2l0aCBhbGwgc3R5bGVzIGFwcGxpZWQgXG4gIH0sIHtcbiAgICBrZXk6IFwiZ2VuZXJhdGVTdHlsZURlZnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVTdHlsZURlZnMoc3ZnRG9tRWxlbWVudCkge1xuICAgICAgdmFyIHN0eWxlRGVmcyA9IFwiXCI7XG4gICAgICB2YXIgc2hlZXRzID0gZG9jdW1lbnQuc3R5bGVTaGVldHM7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcnVsZXMgPSBzaGVldHNbaV0uY3NzUnVsZXM7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcnVsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICB2YXIgcnVsZSA9IHJ1bGVzW2pdO1xuICAgICAgICAgIGlmIChydWxlLnN0eWxlKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3JUZXh0ID0gcnVsZS5zZWxlY3RvclRleHQ7XG4gICAgICAgICAgICB2YXIgZWxlbXMgPSBzdmdEb21FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JUZXh0KTtcbiAgICAgICAgICAgIGlmIChlbGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgc3R5bGVEZWZzICs9IHNlbGVjdG9yVGV4dCArIFwiIHsgXCIgKyBydWxlLnN0eWxlLmNzc1RleHQgKyBcIiB9XFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpO1xuICAgICAgcy5pbm5lckhUTUwgPSBzdHlsZURlZnM7XG4gICAgICB2YXIgZGVmcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RlZnMnKTtcbiAgICAgIGRlZnMuYXBwZW5kQ2hpbGQocyk7XG4gICAgICBzdmdEb21FbGVtZW50Lmluc2VydEJlZm9yZShkZWZzLCBzdmdEb21FbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzdGFydFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAvLyBSZXR1cm4gYSBwcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIHdoZW4gdGhlIFZSIGVsZW1lbnRzIGFyZSBhZGRlZCAvIHNjZW5lIGlzIGxvYWRlZC5cbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIF90aGlzLmZpbmRIb3ZlckNzcygpO1xuICAgICAgICBpZiAoIV90aGlzLmFmcmFtZS5zY2VuZS5oYXNMb2FkZWQpIHtcbiAgICAgICAgICBfdGhpcy5hZnJhbWUuc2NlbmUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZFwiLCBmdW5jdGlvbiAocmVzb2x2ZSwgaW5pdCwgY29udGV4dCkge1xuICAgICAgICAgICAgaW5pdC5jYWxsKGNvbnRleHQpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH0ocmVzb2x2ZSwgX3RoaXMuaW5pdCwgX3RoaXMpLCB7XG4gICAgICAgICAgICBvbmNlOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBfdGhpcy5pbml0KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpbml0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICAgIHRoaXMuYWZyYW1lLmNyZWF0ZUNvbnRhaW5lcih0aGlzKTtcbiAgICAgIHRoaXMuYWZyYW1lLmNyZWF0ZVNreSgpO1xuICAgICAgdGhpcy5hZnJhbWUuY3JlYXRlQ29udHJvbGxlcnMoKTtcbiAgICAgIC8vIHNjcm9sbCBmZWF0dXJlXG5cbiAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUb1ZSKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMi5zY3JvbGwgPSBuZXcgX3Njcm9sbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fW1wiZGVmYXVsdFwiXShfdGhpczIpO1xuICAgICAgICByZXR1cm4gX3RoaXMyLmFsbExvYWRlZFVwZGF0ZSgpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIudXBkYXRlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgb25jZSBhZnRlciBhbGwgaW1hZ2VzIGFyZSBsb2FkZWQgaW4gdGhlIGRvbVxuICB9LCB7XG4gICAga2V5OiBcImFsbExvYWRlZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhbGxMb2FkZWRVcGRhdGUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgYWxsTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKF90aGlzMy5lbGVtZW50cyksXG4gICAgICAgICAgICBfc3RlcDI7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX3N0ZXAyLnZhbHVlO1xuICAgICAgICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIF9lbGVtZW50c19pbWFnZUVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEzX19bXCJkZWZhdWx0XCJdICYmICFlbGVtZW50LmxvYWRlZCkgYWxsTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhbGxMb2FkZWQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhZGRFbGVtZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEVsZW1lbnQoZG9tRWxlbWVudCwgcGFyZW50RWxlbWVudCwgbGF5ZXIpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuICAgICAgLy8gaWdub3JlIHRhZyBpZiBpbiBpZ25vcmVUYWdzIGxpc3Qgb3IgdGV4dCBlbGVtZW50KHZyLXNwYW4pIGlzIGFscmVhZHkgYWRkZWRcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmlnbm9yZVRhZ3MuaW5jbHVkZXMoZG9tRWxlbWVudC50YWdOYW1lKSB8fCBkb21FbGVtZW50LmNsYXNzTGlzdCAmJiBkb21FbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInZyLXNwYW5cIikpIHJldHVybiBudWxsO1xuICAgICAgdmFyIGVsZW1lbnQgPSBudWxsO1xuICAgICAgLy8gaXRzIHRleHQgbm9kZSBhbmQgbm90IGVtcHR5XG4gICAgICBpZiAoZG9tRWxlbWVudC5ub2RlVHlwZSA9PSBOb2RlLlRFWFRfTk9ERSAmJiBkb21FbGVtZW50Lm5vZGVWYWx1ZS50cmltKCkpIHtcbiAgICAgICAgdmFyIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKFwidnItc3BhblwiKTtcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGRvbUVsZW1lbnQudGV4dENvbnRlbnQ7XG5cbiAgICAgICAgLy8gZG9udCB3YW50IG9ic2VydmVyIHRvIGxpc3RlbiBjaGFuZ2VzIHdoZW4gYWRkaW5nKHJlcGxhY2luZykgc3BhbiB0ZXh0IGludG8gZG9tXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyKSB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgZG9tRWxlbWVudC5yZXBsYWNlV2l0aChzcGFuKTtcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXIpIHtcbiAgICAgICAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXIsIHRoaXMub2JzZXJ2ZXJDb25maWcpO1xuICAgICAgICAgIC8vIFdlIG5lZWQgdG8gYWRkIHRoZSBvYnNlcnZlciB0byBldmVyeSBzbG90IGluc2lkZSB0aGUgY29udGFpbmVyIGFzIHdlbGwuXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcInNsb3RcIikuZm9yRWFjaChmdW5jdGlvbiAoc2xvdCkge1xuICAgICAgICAgICAgX3RoaXM0Lm9ic2VydmVyLm9ic2VydmUoc2xvdCwgX3RoaXM0Lm9ic2VydmVyQ29uZmlnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50ID0gbmV3IF9lbGVtZW50c190ZXh0RWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTJfX1tcImRlZmF1bHRcIl0odGhpcywgc3BhbiwgbGF5ZXIpO1xuICAgICAgfVxuICAgICAgLy8gZm9yIGZ1dHVyZSBjb252ZXJ0IHRoaXMgdG8gc3dpdGNoIHN0YXRlbWVudFxuICAgICAgZWxzZSBpZiAoZG9tRWxlbWVudC50YWdOYW1lID09IFwiVklERU9cIikgZWxlbWVudCA9IG5ldyBfZWxlbWVudHNfdmlkZW9FbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNF9fW1wiZGVmYXVsdFwiXSh0aGlzLCBkb21FbGVtZW50LCBsYXllcik7ZWxzZSBpZiAoZG9tRWxlbWVudC50YWdOYW1lID09IFwiSU1HXCIpIGVsZW1lbnQgPSBuZXcgX2VsZW1lbnRzX2ltYWdlRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTNfX1tcImRlZmF1bHRcIl0odGhpcywgZG9tRWxlbWVudCwgbGF5ZXIpO2Vsc2UgaWYgKGRvbUVsZW1lbnQudGFnTmFtZSA9PSBcInN2Z1wiKSBlbGVtZW50ID0gbmV3IF9lbGVtZW50c19zdmdFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOV9fW1wiZGVmYXVsdFwiXSh0aGlzLCBkb21FbGVtZW50LCBsYXllcik7ZWxzZSBpZiAoZG9tRWxlbWVudC50YWdOYW1lID09IFwiQ0FOVkFTXCIpIGVsZW1lbnQgPSBuZXcgX2VsZW1lbnRzX2NhbnZhc0VsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzIwX19bXCJkZWZhdWx0XCJdKHRoaXMsIGRvbUVsZW1lbnQsIGxheWVyKTtlbHNlIGlmIChkb21FbGVtZW50LnRhZ05hbWUgPT0gXCJCVVRUT05cIikgZWxlbWVudCA9IG5ldyBfZWxlbWVudHNfYnV0dG9uRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMThfX1tcImRlZmF1bHRcIl0odGhpcywgZG9tRWxlbWVudCwgbGF5ZXIpO2Vsc2UgaWYgKGRvbUVsZW1lbnQudGFnTmFtZSA9PSBcIlRFWFRBUkVBXCIpIGVsZW1lbnQgPSBuZXcgX2VsZW1lbnRzX2lucHV0RWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTdfX1tcImRlZmF1bHRcIl0odGhpcywgZG9tRWxlbWVudCwgbGF5ZXIpO2Vsc2UgaWYgKGRvbUVsZW1lbnQudGFnTmFtZSA9PSBcIklOUFVUXCIpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBkb21FbGVtZW50LmdldEF0dHJpYnV0ZShcInR5cGVcIik7XG4gICAgICAgIGlmICh0eXBlID09IFwiY2hlY2tib3hcIikgZWxlbWVudCA9IG5ldyBfZWxlbWVudHNfY2hlY2tib3hFbGVtZW50X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNV9fW1wiZGVmYXVsdFwiXSh0aGlzLCBkb21FbGVtZW50LCBsYXllcik7ZWxzZSBpZiAodHlwZSA9PSBcInJhZGlvXCIpIGVsZW1lbnQgPSBuZXcgX2VsZW1lbnRzX3JhZGlvRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTZfX1tcImRlZmF1bHRcIl0odGhpcywgZG9tRWxlbWVudCwgbGF5ZXIpO2Vsc2UgaWYgKFtcInRleHRcIiwgXCJlbWFpbFwiLCBcIm51bWJlclwiLCBcInBhc3N3b3JkXCIsIFwic2VhcmNoXCIsIFwidGVsXCIsIFwidXJsXCJdLmluY2x1ZGVzKHR5cGUpKSBlbGVtZW50ID0gbmV3IF9lbGVtZW50c19pbnB1dEVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE3X19bXCJkZWZhdWx0XCJdKHRoaXMsIGRvbUVsZW1lbnQsIGxheWVyKTtlbHNlIGlmIChbXCJidXR0b25cIiwgXCJzdWJtaXRcIiwgXCJyZXNldFwiXS5pbmNsdWRlcyh0eXBlKSkge1xuICAgICAgICAgIGVsZW1lbnQgPSBuZXcgX2VsZW1lbnRzX2J1dHRvbkVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE4X19bXCJkZWZhdWx0XCJdKHRoaXMsIGRvbUVsZW1lbnQsIGxheWVyKTtcbiAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIElmIHRoaXMgZWxlbWVudCBpcyBob3N0aW5nIGEgc2hhZG93IHJvb3QsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIGVsZW1lbnRzIGFyZSBvYnNlcnZlZC5cbiAgICAgIGVsc2UgaWYgKCEhZG9tRWxlbWVudC5zaGFkb3dSb290KSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiU2hhZG93IHJvb3QgZm91bmRcIiwgZG9tRWxlbWVudC5zaGFkb3dSb290KTtcbiAgICAgICAgdGhpcy5hZGRFbGVtZW50Q2hpbGRyZW4oZG9tRWxlbWVudC5zaGFkb3dSb290LCBwYXJlbnRFbGVtZW50LCBsYXllcik7XG4gICAgICB9XG4gICAgICAvLyBhbnkgb3RoZXIgdHlwZSBvZiBlbGVtZW50IHdpbGwgYmUgY29udGFpbmVyXG4gICAgICBlbHNlIGlmIChkb21FbGVtZW50Lm5vZGVUeXBlID09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIGVsZW1lbnQgPSBuZXcgX2VsZW1lbnRzX2NvbnRhaW5lckVsZW1lbnRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzExX19bXCJkZWZhdWx0XCJdKHRoaXMsIGRvbUVsZW1lbnQsIGxheWVyKTtcbiAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgICB0aGlzLmVsZW1lbnRzLmFkZChlbGVtZW50KTtcbiAgICAgIHRoaXMuYWZyYW1lLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50LmVudGl0eSk7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1ZykgY29uc29sZS5sb2coXCJBZGRlZCBlbGVtZW50XCIsIGVsZW1lbnQpO1xuXG4gICAgICAvLyBpbml0IGVsZW1lbnQgYW5kIGFkZCBlbGVtZW50IHRvIHBhcmVudCBjaGlsZHJlbiB3aGVuIGFmcmFtZSBlbnRpdHkgaXMgbG9hZGVkKHBsYXkpXG4gICAgICB2YXIgb25Mb2FkZWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShldmVudCkge1xuICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRFbGVtZW50KSBwYXJlbnRFbGVtZW50LmNoaWxkRWxlbWVudHMuYWRkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5pdCgpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQudXBkYXRlKCk7XG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgX2NhbGxlZSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG9uTG9hZGVkKF94KSB7XG4gICAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0oKTtcbiAgICAgIGVsZW1lbnQuZW50aXR5LmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5XCIsIG9uTG9hZGVkLCB7XG4gICAgICAgIG9uY2U6IHRydWVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUVsZW1lbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAvLyByZW1vdmUgdGhlIGVsZW1lbnRcbiAgICAgIHRoaXMuYWZyYW1lLmNvbnRhaW5lci5yZW1vdmVDaGlsZChlbGVtZW50LmVudGl0eSk7XG4gICAgICB0aGlzLmVsZW1lbnRzW1wiZGVsZXRlXCJdKGVsZW1lbnQpO1xuICAgICAgLy8gcmVtb3ZlIGFsbCB0aGUgY2hpbGRyZW4gb2YgdGhlIGVsZW1lbnQgcmVjdXJzaXZlbHlcbiAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZWxlbWVudC5jaGlsZEVsZW1lbnRzKSxcbiAgICAgICAgX3N0ZXAzO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgY2hpbGQgPSBfc3RlcDMudmFsdWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFbGVtZW50KGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9pdGVyYXRvcjMuZShlcnIpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2l0ZXJhdG9yMy5mKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gc3RhcnQgYXQgcm9vdCBhbmQgaW50ZXJhdGUgb3ZlciBjaGlsZCBub2RlcyByZWN1cnNpdmVseVxuICB9LCB7XG4gICAga2V5OiBcImFkZEVsZW1lbnRDaGlsZHJlblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFbGVtZW50Q2hpbGRyZW4oY3VycmVudE5vZGUpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG4gICAgICB2YXIgbGF5ZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBpZiAoY3VycmVudE5vZGUudGFnTmFtZSA9PSBcInN2Z1wiKSBfdGhpczUuZ2VuZXJhdGVTdHlsZURlZnMoY3VycmVudE5vZGUpO1xuXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYSBzbG90IGVsZW1lbnQsIHdlJ3JlIHVzaW5nIGEgd2ViIGNvbXBvbmVudCBhbmQgbmVlZCB0byBmZXRjaCB0aGUgY2hpbGQgZWxlbWVudHMgdXNpbmcgLmFzc2lnbmVkTm9kZXMoKVxuICAgICAgICBpZiAoY3VycmVudE5vZGUudGFnTmFtZSA9PSBcIlNMT1RcIikge1xuICAgICAgICAgIC8vIE5vdGU6IHdlIGRvbid0IGluY3JlYXNlIHRoZSBsYXllciBoZXJlIGJlY2F1c2Ugc2xvdHMgZG9uJ3QgcmVuZGVyIGRpcmVjdGx5LlxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiKioqKioqKioqU2xvdCBlbGVtZW50IGZvdW5kXCIpO1xuICAgICAgICAgIHZhciBhc3NpZ25lZE5vZGVzID0gY3VycmVudE5vZGUuYXNzaWduZWROb2RlcygpO1xuICAgICAgICAgIHZhciBwcm9taXNlc1RvUmVzb2x2ZSA9IFtdO1xuICAgICAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYXNzaWduZWROb2RlcyksXG4gICAgICAgICAgICBfc3RlcDQ7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICAgIHZhciBhc3NpZ25lZE5vZGUgPSBfc3RlcDQudmFsdWU7XG4gICAgICAgICAgICAgIHByb21pc2VzVG9SZXNvbHZlLnB1c2goX3RoaXM1LmFkZEVsZW1lbnRDaGlsZHJlbihhc3NpZ25lZE5vZGUsIHBhcmVudEVsZW1lbnQsIGxheWVyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgX2l0ZXJhdG9yNC5mKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzVG9SZXNvbHZlKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzNS5hZGRFbGVtZW50KGN1cnJlbnROb2RlLCBwYXJlbnRFbGVtZW50LCBsYXllcik7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgdGFncyBvciBzdmcgZWxlbWVudCB0aGF0IHdlIGRvbnQgbmVlZCB0byBjaGVjayBpdHMgY2hpbGRyZW5cbiAgICAgICAgaWYgKCFlbGVtZW50IHx8IGVsZW1lbnQgaW5zdGFuY2VvZiBfZWxlbWVudHNfc3ZnRWxlbWVudF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTlfX1tcImRlZmF1bHRcIl0pIHJldHVybjtcbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLmNoaWxkTm9kZXMgJiYgY3VycmVudE5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbGF5ZXIrKztcbiAgICAgICAgICB2YXIgcHJvbWlzZXNUb1Jlc29sdmUgPSBbXTtcbiAgICAgICAgICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGN1cnJlbnROb2RlLmNoaWxkTm9kZXMpLFxuICAgICAgICAgICAgX3N0ZXA1O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjUucygpOyAhKF9zdGVwNSA9IF9pdGVyYXRvcjUubigpKS5kb25lOykge1xuICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBfc3RlcDUudmFsdWU7XG4gICAgICAgICAgICAgIHByb21pc2VzVG9SZXNvbHZlLnB1c2goX3RoaXM1LmFkZEVsZW1lbnRDaGlsZHJlbihjaGlsZCwgZWxlbWVudCwgbGF5ZXIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9pdGVyYXRvcjUuZShlcnIpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBfaXRlcmF0b3I1LmYoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXNUb1Jlc29sdmUpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29udmVydFRvVlJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29udmVydFRvVlIoKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIF90aGlzNi5hZGRFbGVtZW50Q2hpbGRyZW4oX3RoaXM2LmNvbnRhaW5lcikudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gb2JzZXJ2ZXIgZG9tIGVsZW1lbnQgY2hhbmdlcyBhbmQgZm9yIG5ld2x5IGFkZGVkIGFuZCBkZWxldGVkIGRvbSBlbGVtZW50c1xuICAgICAgICAgIF90aGlzNi5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3I2ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobXV0YXRpb25zKSxcbiAgICAgICAgICAgICAgX3N0ZXA2O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3I2LnMoKTsgIShfc3RlcDYgPSBfaXRlcmF0b3I2Lm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfc3RlcDYudmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJNdXRhdGlvbiBlbmNvdW50ZXJlZFwiLCBtdXRhdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIGVtcHR5UmVtb3ZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjcgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihtdXRhdGlvbi5yZW1vdmVkTm9kZXMpLFxuICAgICAgICAgICAgICAgICAgX3N0ZXA3O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjcucygpOyAhKF9zdGVwNyA9IF9pdGVyYXRvcjcubigpKS5kb25lOykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwNy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IGVtcHR5IHRleHROb2RlXG4gICAgICAgICAgICAgICAgICAgIGlmICghKG5vZGUubm9kZVR5cGUgPT0gTm9kZS5URVhUX05PREUgJiYgIW5vZGUubm9kZVZhbHVlLnRyaW0oKSkpIF90aGlzNi5yZW1vdmVFbGVtZW50KG5vZGUuZWxlbWVudCk7ZWxzZSBlbXB0eVJlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICBfaXRlcmF0b3I3LmUoZXJyKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNy5mKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3I4ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobXV0YXRpb24uYWRkZWROb2RlcyksXG4gICAgICAgICAgICAgICAgICBfc3RlcDg7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yOC5zKCk7ICEoX3N0ZXA4ID0gX2l0ZXJhdG9yOC5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfbm9kZSA9IF9zdGVwOC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmFkZEVsZW1lbnRDaGlsZHJlbihfbm9kZSwgbXV0YXRpb24udGFyZ2V0LmVsZW1lbnQsIG11dGF0aW9uLnRhcmdldC5lbGVtZW50LmxheWVyICsgMSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICBfaXRlcmF0b3I4LmUoZXJyKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yOC5mKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZW1wdHlSZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgIC8vIHdoZW4gYWRkaW5nIG5ldyBub2RlcyB3ZSBhbHNvIG5lZWQgdG8gY2hlY2sgZm9yIG5ldyBsb2FkZWQgaW1hZ2VzXG4gICAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24uYWRkZWROb2Rlcy5sZW5ndGggPiAwKSBfdGhpczYuYWxsTG9hZGVkVXBkYXRlKCk7ZWxzZSBfdGhpczYudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gTGlzdGVuIGZvciB0ZXh0IGNoYW5nZXMgYW5kIHVwZGF0ZSB3aGVuIHRoZXkgb2NjdXIuXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT0gXCJjaGFyYWN0ZXJEYXRhXCIpIHtcbiAgICAgICAgICAgICAgICAgIF90aGlzNi51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBfaXRlcmF0b3I2LmUoZXJyKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIF9pdGVyYXRvcjYuZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIF90aGlzNi5vYnNlcnZlci5vYnNlcnZlKF90aGlzNi5jb250YWluZXIsIF90aGlzNi5vYnNlcnZlckNvbmZpZyk7XG5cbiAgICAgICAgICAvLyBXZSBuZWVkIHRvIGFkZCB0aGUgb2JzZXJ2ZXIgdG8gZXZlcnkgc2xvdCBpbnNpZGUgdGhlIGNvbnRhaW5lciBhcyB3ZWxsLlxuICAgICAgICAgIF90aGlzNi5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcInNsb3RcIikuZm9yRWFjaChmdW5jdGlvbiAoc2xvdCkge1xuICAgICAgICAgICAgc2xvdC5hZGRFdmVudExpc3RlbmVyKFwic2xvdGNoYW5nZVwiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJTbG90IGNoYW5nZSBldmVudFwiLCBldik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzNi5vYnNlcnZlci5vYnNlcnZlKHNsb3QsIF90aGlzNi5vYnNlcnZlckNvbmZpZyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyB3ZSBjaGVjayBmb3IgdXBkYXRpbmcgc28gd2UgZG9udCBkbyBtdWx0aXBsZSB1cGRhdGluZyBhdCBzYW1lIHRpbWUgZnJvbSB0aGUgYXN5bmMgZnVuY3Rpb25zXG4gICAgICAgIF90aGlzNy51cGRhdGluZyA9IHRydWU7XG4gICAgICAgIGlmIChfdGhpczcudXBkYXRpbmcpIHtcbiAgICAgICAgICB2YXIgX3RoaXM3JHNjcm9sbDtcbiAgICAgICAgICAvLyB1c2luZyB0cnkgYW5kIGNhdGNoIGJlY2F1c2Ugc29tZXRpbWVzIHdoZW4gZWxlbWVudCBpcyByZW1vdmVkIGl0IGNhbGxzIHVwZGF0ZSBhZnRlciBhbmQgaXQgd29udCBmaW5kIGVsZW1lbnQsIHRoZSBlcnJvcnMgZG9lc250IG1hdHRlciBiZWNhdXNlIHRoZSBmaW5hbCByZXN1bHQgaXMgdGhlIHNhbWVcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjkgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihfdGhpczcuZWxlbWVudHMpLFxuICAgICAgICAgICAgICBfc3RlcDk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjkucygpOyAhKF9zdGVwOSA9IF9pdGVyYXRvcjkubigpKS5kb25lOykge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gX3N0ZXA5LnZhbHVlO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQudXBkYXRlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBfaXRlcmF0b3I5LmUoZXJyKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIF9pdGVyYXRvcjkuZigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAoX3RoaXM3JHNjcm9sbCA9IF90aGlzNy5zY3JvbGwpID09PSBudWxsIHx8IF90aGlzNyRzY3JvbGwgPT09IHZvaWQgMCB8fCBfdGhpczckc2Nyb2xsLnVwZGF0ZSgpO1xuICAgICAgICAgIF90aGlzNy51cGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcbn0oKTtcblxufSkoKTtcblxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdO1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX2V4cG9ydHNfXztcbi8qKioqKiovIH0pKClcbjtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2ViMnZyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2051\n");

/***/ }),

/***/ 6264:
/*!***************************************************!*\
  !*** ./src/components/aframe/base-game-loop.json ***!
  \***************************************************/
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"id":"baseGameLoop","initial":"starting","states":{"starting":{"id":"starting","on":{"loaded":"running"}},"running":{"initial":"briefing","onDone":"ended","on":{"pause":"paused","end":"ended"},"states":{"gameOver":{"type":"final"},"hist":{"type":"history","history":"deep"},"briefing":{"id":"briefing","initial":"briefingPlay","states":{"briefingPlay":{"on":{"pause":"briefingPaused","end":"briefingEnd"}},"briefingPaused":{"on":{"resume":"briefingPlay"}},"briefingEnd":{"type":"final"}}},"debriefing":{"id":"debriefing","onDone":"gameOver","initial":"debriefingPlay","states":{"debriefingPlay":{"on":{"pause":"debriefingPaused","end":"debriefingEnd"}},"debriefingPaused":{"on":{"resume":"debriefingPlay"}},"debriefingEnd":{"type":"final"}}}}},"paused":{"on":{"resume":"running.hist","end":"ended"}},"ended":{"type":"final"}}}');

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors"], () => (__webpack_exec__(9571)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);